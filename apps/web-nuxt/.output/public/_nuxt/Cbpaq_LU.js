const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./C6y4OVIf.js","./YeROQhgZ.js","./entry.BQOl_lDO.css"])))=>i.map(i=>d[i]);
import{_ as lI}from"./YeROQhgZ.js";var Lr={},ns={},Hh={exports:{}},uy;function Tg(){return uy||(uy=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(u,c,l){this.fn=u,this.context=c,this.once=l||!1}function i(u,c,l,d,f){if(typeof l!="function")throw new TypeError("The listener must be a function");var h=new s(l,d||u,f),p=n?n+c:c;return u._events[p]?u._events[p].fn?u._events[p]=[u._events[p],h]:u._events[p].push(h):(u._events[p]=h,u._eventsCount++),u}function o(u,c){--u._eventsCount===0?u._events=new r:delete u._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],l,d;if(this._eventsCount===0)return c;for(d in l=this._events)t.call(l,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(l)):c},a.prototype.listeners=function(c){var l=n?n+c:c,d=this._events[l];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,p=new Array(h);f<h;f++)p[f]=d[f].fn;return p},a.prototype.listenerCount=function(c){var l=n?n+c:c,d=this._events[l];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,l,d,f,h,p){var g=n?n+c:c;if(!this._events[g])return!1;var y=this._events[g],b=arguments.length,A,E;if(y.fn){switch(y.once&&this.removeListener(c,y.fn,void 0,!0),b){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,l),!0;case 3:return y.fn.call(y.context,l,d),!0;case 4:return y.fn.call(y.context,l,d,f),!0;case 5:return y.fn.call(y.context,l,d,f,h),!0;case 6:return y.fn.call(y.context,l,d,f,h,p),!0}for(E=1,A=new Array(b-1);E<b;E++)A[E-1]=arguments[E];y.fn.apply(y.context,A)}else{var _=y.length,S;for(E=0;E<_;E++)switch(y[E].once&&this.removeListener(c,y[E].fn,void 0,!0),b){case 1:y[E].fn.call(y[E].context);break;case 2:y[E].fn.call(y[E].context,l);break;case 3:y[E].fn.call(y[E].context,l,d);break;case 4:y[E].fn.call(y[E].context,l,d,f);break;default:if(!A)for(S=1,A=new Array(b-1);S<b;S++)A[S-1]=arguments[S];y[E].fn.apply(y[E].context,A)}}return!0},a.prototype.on=function(c,l,d){return i(this,c,l,d,!1)},a.prototype.once=function(c,l,d){return i(this,c,l,d,!0)},a.prototype.removeListener=function(c,l,d,f){var h=n?n+c:c;if(!this._events[h])return this;if(!l)return o(this,h),this;var p=this._events[h];if(p.fn)p.fn===l&&(!f||p.once)&&(!d||p.context===d)&&o(this,h);else{for(var g=0,y=[],b=p.length;g<b;g++)(p[g].fn!==l||f&&!p[g].once||d&&p[g].context!==d)&&y.push(p[g]);y.length?this._events[h]=y.length===1?y[0]:y:o(this,h)}return this},a.prototype.removeAllListeners=function(c){var l;return c?(l=n?n+c:c,this._events[l]&&o(this,l)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a})(Hh)),Hh.exports}var $e={},ly;function Oe(){if(ly)return $e;ly=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.XRPLFaucetError=$e.NotFoundError=$e.ValidationError=$e.ResponseFormatError=$e.TimeoutError=$e.RippledNotInitializedError=$e.DisconnectedError=$e.NotConnectedError=$e.RippledError=$e.ConnectionError=$e.UnexpectedError=$e.XrplError=void 0;class e extends Error{constructor(h="",p){super(h),this.name=this.constructor.name,this.message=h,this.data=p,Error.captureStackTrace!=null&&Error.captureStackTrace(this,this.constructor)}toString(){let h=`[${this.name}(${this.message}`;return this.data&&(h+=`, ${JSON.stringify(this.data)}`),h+=")]",h}inspect(){return this.toString()}}$e.XrplError=e;class t extends e{}$e.RippledError=t;class n extends e{}$e.UnexpectedError=n;class r extends e{}$e.ConnectionError=r;class s extends r{}$e.NotConnectedError=s;class i extends r{}$e.DisconnectedError=i;class o extends r{}$e.RippledNotInitializedError=o;class a extends r{}$e.TimeoutError=a;class u extends r{}$e.ResponseFormatError=u;class c extends e{}$e.ValidationError=c;class l extends e{}$e.XRPLFaucetError=l;class d extends e{constructor(h="Not found"){super(h)}}return $e.NotFoundError=d,$e}var rs={},pa={},dy;function nS(){if(dy)return pa;dy=1,Object.defineProperty(pa,"__esModule",{value:!0}),pa.AccountRootFlags=void 0;var e;return(function(t){t[t.lsfPasswordSpent=65536]="lsfPasswordSpent",t[t.lsfRequireDestTag=131072]="lsfRequireDestTag",t[t.lsfRequireAuth=262144]="lsfRequireAuth",t[t.lsfDisallowXRP=524288]="lsfDisallowXRP",t[t.lsfDisableMaster=1048576]="lsfDisableMaster",t[t.lsfNoFreeze=2097152]="lsfNoFreeze",t[t.lsfGlobalFreeze=4194304]="lsfGlobalFreeze",t[t.lsfDefaultRipple=8388608]="lsfDefaultRipple",t[t.lsfDepositAuth=16777216]="lsfDepositAuth",t[t.lsfAMM=33554432]="lsfAMM",t[t.lsfDisallowIncomingNFTokenOffer=67108864]="lsfDisallowIncomingNFTokenOffer",t[t.lsfDisallowIncomingCheck=134217728]="lsfDisallowIncomingCheck",t[t.lsfDisallowIncomingPayChan=268435456]="lsfDisallowIncomingPayChan",t[t.lsfDisallowIncomingTrustline=536870912]="lsfDisallowIncomingTrustline",t[t.lsfAllowTrustLineClawback=2147483648]="lsfAllowTrustLineClawback"})(e||(pa.AccountRootFlags=e={})),pa}var Cr={},rt={},Vh={},is={},qh={},ga={},hy;function dI(){return hy||(hy=1,Object.defineProperty(ga,"__esModule",{value:!0}),ga.crypto=void 0,ga.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),ga}var fy;function Mn(){return fy||(fy=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.Hash=e.nextTick=e.swap32IfBE=e.byteSwapIfBE=e.swap8IfBE=e.isLE=void 0,e.isBytes=n,e.anumber=r,e.abytes=s,e.ahash=i,e.aexists=o,e.aoutput=a,e.u8=u,e.u32=c,e.clean=l,e.createView=d,e.rotr=f,e.rotl=h,e.byteSwap=p,e.byteSwap32=g,e.bytesToHex=A,e.hexToBytes=S,e.asyncLoop=D,e.utf8ToBytes=L,e.bytesToUtf8=x,e.toBytes=j,e.kdfInputToBytes=V,e.concatBytes=Y,e.checkOpts=q,e.createHasher=v,e.createOptHasher=T,e.createXOFer=m,e.randomBytes=w;const t=dI();function n(N){return N instanceof Uint8Array||ArrayBuffer.isView(N)&&N.constructor.name==="Uint8Array"}function r(N){if(!Number.isSafeInteger(N)||N<0)throw new Error("positive integer expected, got "+N)}function s(N,...C){if(!n(N))throw new Error("Uint8Array expected");if(C.length>0&&!C.includes(N.length))throw new Error("Uint8Array expected of length "+C+", got length="+N.length)}function i(N){if(typeof N!="function"||typeof N.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");r(N.outputLen),r(N.blockLen)}function o(N,C=!0){if(N.destroyed)throw new Error("Hash instance has been destroyed");if(C&&N.finished)throw new Error("Hash#digest() has already been called")}function a(N,C){s(N);const O=C.outputLen;if(N.length<O)throw new Error("digestInto() expects output buffer of length at least "+O)}function u(N){return new Uint8Array(N.buffer,N.byteOffset,N.byteLength)}function c(N){return new Uint32Array(N.buffer,N.byteOffset,Math.floor(N.byteLength/4))}function l(...N){for(let C=0;C<N.length;C++)N[C].fill(0)}function d(N){return new DataView(N.buffer,N.byteOffset,N.byteLength)}function f(N,C){return N<<32-C|N>>>C}function h(N,C){return N<<C|N>>>32-C>>>0}e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function p(N){return N<<24&4278190080|N<<8&16711680|N>>>8&65280|N>>>24&255}e.swap8IfBE=e.isLE?N=>N:N=>p(N),e.byteSwapIfBE=e.swap8IfBE;function g(N){for(let C=0;C<N.length;C++)N[C]=p(N[C]);return N}e.swap32IfBE=e.isLE?N=>N:g;const y=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",b=Array.from({length:256},(N,C)=>C.toString(16).padStart(2,"0"));function A(N){if(s(N),y)return N.toHex();let C="";for(let O=0;O<N.length;O++)C+=b[N[O]];return C}const E={_0:48,_9:57,A:65,F:70,a:97,f:102};function _(N){if(N>=E._0&&N<=E._9)return N-E._0;if(N>=E.A&&N<=E.F)return N-(E.A-10);if(N>=E.a&&N<=E.f)return N-(E.a-10)}function S(N){if(typeof N!="string")throw new Error("hex string expected, got "+typeof N);if(y)return Uint8Array.fromHex(N);const C=N.length,O=C/2;if(C%2)throw new Error("hex string expected, got unpadded hex of length "+C);const B=new Uint8Array(O);for(let W=0,P=0;W<O;W++,P+=2){const X=_(N.charCodeAt(P)),ee=_(N.charCodeAt(P+1));if(X===void 0||ee===void 0){const se=N[P]+N[P+1];throw new Error('hex string expected, got non-hex character "'+se+'" at index '+P)}B[W]=X*16+ee}return B}const I=async()=>{};e.nextTick=I;async function D(N,C,O){let B=Date.now();for(let W=0;W<N;W++){O(W);const P=Date.now()-B;P>=0&&P<C||(await(0,e.nextTick)(),B+=P)}}function L(N){if(typeof N!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(N))}function x(N){return new TextDecoder().decode(N)}function j(N){return typeof N=="string"&&(N=L(N)),s(N),N}function V(N){return typeof N=="string"&&(N=L(N)),s(N),N}function Y(...N){let C=0;for(let B=0;B<N.length;B++){const W=N[B];s(W),C+=W.length}const O=new Uint8Array(C);for(let B=0,W=0;B<N.length;B++){const P=N[B];O.set(P,W),W+=P.length}return O}function q(N,C){if(C!==void 0&&{}.toString.call(C)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(N,C)}class R{}e.Hash=R;function v(N){const C=B=>N().update(j(B)).digest(),O=N();return C.outputLen=O.outputLen,C.blockLen=O.blockLen,C.create=()=>N(),C}function T(N){const C=(B,W)=>N(W).update(j(B)).digest(),O=N({});return C.outputLen=O.outputLen,C.blockLen=O.blockLen,C.create=B=>N(B),C}function m(N){const C=(B,W)=>N(W).update(j(B)).digest(),O=N({});return C.outputLen=O.outputLen,C.blockLen=O.blockLen,C.create=B=>N(B),C}e.wrapConstructor=v,e.wrapConstructorWithOpts=T,e.wrapXOFConstructorWithOpts=m;function w(N=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(N));if(t.crypto&&typeof t.crypto.randomBytes=="function")return Uint8Array.from(t.crypto.randomBytes(N));throw new Error("crypto.getRandomValues must be defined")}})(qh)),qh}var jr={},py;function gy(){if(py)return jr;py=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.equal=jr.concat=jr.HEX_REGEX=void 0;const e=Mn();jr.HEX_REGEX=/^[A-F0-9]*$/iu;function t(r){return(0,e.concatBytes)(...r)}jr.concat=t;function n(r,s){if(r.byteLength!==s.byteLength)return!1;const i=new Int8Array(r),o=new Int8Array(s);for(let a=0;a!==r.byteLength;a++)if(i[a]!==o[a])return!1;return!0}return jr.equal=n,jr}var yy;function Ve(){return yy||(yy=1,(function(e){var t=is&&is.__createBinding||(Object.create?(function(c,l,d,f){f===void 0&&(f=d);var h=Object.getOwnPropertyDescriptor(l,d);(!h||("get"in h?!l.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return l[d]}}),Object.defineProperty(c,f,h)}):(function(c,l,d,f){f===void 0&&(f=d),c[f]=l[d]})),n=is&&is.__exportStar||function(c,l){for(var d in c)d!=="default"&&!Object.prototype.hasOwnProperty.call(l,d)&&t(l,c,d)};Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.stringToHex=e.hexToString=e.hexToBytes=e.bytesToHex=void 0;const r=Mn(),s=gy(),i=c=>(0,r.bytesToHex)(c instanceof Uint8Array?c:Uint8Array.from(c)).toUpperCase();e.bytesToHex=i;const o=c=>{const l=c.length,d=new Uint8Array(l/2);if(!s.HEX_REGEX.test(c))throw new Error("Invalid hex string");for(let f=0;f<d.length;f++){const h=f*2,p=c.slice(h,h+2),g=Number.parseInt(p,16);if(Number.isNaN(g)||g<0)throw new Error("Invalid byte sequence");d[f]=g}return d};e.hexToBytes=o;const a=(c,l="utf8")=>new TextDecoder(l).decode((0,e.hexToBytes)(c));e.hexToString=a;const u=c=>(0,e.bytesToHex)(new TextEncoder().encode(c));e.stringToHex=u,e.randomBytes=r.randomBytes,n(gy(),e)})(is)),is}var Ze={},Gh={},my;function Mg(){return my||(my=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.createBase58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64urlnopad=e.base64url=e.base64nopad=e.base64=e.base32crockford=e.base32hexnopad=e.base32hex=e.base32nopad=e.base32=e.base16=e.utils=void 0;function t(P){return P instanceof Uint8Array||ArrayBuffer.isView(P)&&P.constructor.name==="Uint8Array"}function n(P,...X){if(!t(P))throw new Error("Uint8Array expected");if(X.length>0&&!X.includes(P.length))throw new Error("Uint8Array expected of length "+X+", got length="+P.length)}function r(P,X){return Array.isArray(X)?X.length===0?!0:P?X.every(ee=>typeof ee=="string"):X.every(ee=>Number.isSafeInteger(ee)):!1}function s(P){if(typeof P!="function")throw new Error("function expected");return!0}function i(P,X){if(typeof X!="string")throw new Error(`${P}: string expected`);return!0}function o(P){if(!Number.isSafeInteger(P))throw new Error(`invalid integer: ${P}`)}function a(P){if(!Array.isArray(P))throw new Error("array expected")}function u(P,X){if(!r(!0,X))throw new Error(`${P}: array of strings expected`)}function c(P,X){if(!r(!1,X))throw new Error(`${P}: array of numbers expected`)}function l(...P){const X=J=>J,ee=(J,z)=>K=>J(z(K)),se=P.map(J=>J.encode).reduceRight(ee,X),Z=P.map(J=>J.decode).reduce(ee,X);return{encode:se,decode:Z}}function d(P){const X=typeof P=="string"?P.split(""):P,ee=X.length;u("alphabet",X);const se=new Map(X.map((Z,J)=>[Z,J]));return{encode:Z=>(a(Z),Z.map(J=>{if(!Number.isSafeInteger(J)||J<0||J>=ee)throw new Error(`alphabet.encode: digit index outside alphabet "${J}". Allowed: ${P}`);return X[J]})),decode:Z=>(a(Z),Z.map(J=>{i("alphabet.decode",J);const z=se.get(J);if(z===void 0)throw new Error(`Unknown letter: "${J}". Allowed: ${P}`);return z}))}}function f(P=""){return i("join",P),{encode:X=>(u("join.decode",X),X.join(P)),decode:X=>(i("join.decode",X),X.split(P))}}function h(P,X="="){return o(P),i("padding",X),{encode(ee){for(u("padding.encode",ee);ee.length*P%8;)ee.push(X);return ee},decode(ee){u("padding.decode",ee);let se=ee.length;if(se*P%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;se>0&&ee[se-1]===X;se--)if((se-1)*P%8===0)throw new Error("padding: invalid, string has too much padding");return ee.slice(0,se)}}}function p(P){return s(P),{encode:X=>X,decode:X=>P(X)}}function g(P,X,ee){if(X<2)throw new Error(`convertRadix: invalid from=${X}, base cannot be less than 2`);if(ee<2)throw new Error(`convertRadix: invalid to=${ee}, base cannot be less than 2`);if(a(P),!P.length)return[];let se=0;const Z=[],J=Array.from(P,K=>{if(o(K),K<0||K>=X)throw new Error(`invalid integer: ${K}`);return K}),z=J.length;for(;;){let K=0,H=!0;for(let U=se;U<z;U++){const F=J[U],$=X*K,te=$+F;if(!Number.isSafeInteger(te)||$/X!==K||te-F!==$)throw new Error("convertRadix: carry overflow");const ne=te/ee;K=te%ee;const ie=Math.floor(ne);if(J[U]=ie,!Number.isSafeInteger(ie)||ie*ee+K!==te)throw new Error("convertRadix: carry overflow");if(H)ie?H=!1:se=U;else continue}if(Z.push(K),H)break}for(let K=0;K<P.length-1&&P[K]===0;K++)Z.push(0);return Z.reverse()}const y=(P,X)=>X===0?P:y(X,P%X),b=(P,X)=>P+(X-y(P,X)),A=(()=>{let P=[];for(let X=0;X<40;X++)P.push(2**X);return P})();function E(P,X,ee,se){if(a(P),X<=0||X>32)throw new Error(`convertRadix2: wrong from=${X}`);if(ee<=0||ee>32)throw new Error(`convertRadix2: wrong to=${ee}`);if(b(X,ee)>32)throw new Error(`convertRadix2: carry overflow from=${X} to=${ee} carryBits=${b(X,ee)}`);let Z=0,J=0;const z=A[X],K=A[ee]-1,H=[];for(const U of P){if(o(U),U>=z)throw new Error(`convertRadix2: invalid data word=${U} from=${X}`);if(Z=Z<<X|U,J+X>32)throw new Error(`convertRadix2: carry overflow pos=${J} from=${X}`);for(J+=X;J>=ee;J-=ee)H.push((Z>>J-ee&K)>>>0);const F=A[J];if(F===void 0)throw new Error("invalid carry");Z&=F-1}if(Z=Z<<ee-J&K,!se&&J>=X)throw new Error("Excess padding");if(!se&&Z>0)throw new Error(`Non-zero padding: ${Z}`);return se&&J>0&&H.push(Z>>>0),H}function _(P){o(P);const X=2**8;return{encode:ee=>{if(!t(ee))throw new Error("radix.encode input should be Uint8Array");return g(Array.from(ee),X,P)},decode:ee=>(c("radix.decode",ee),Uint8Array.from(g(ee,P,X)))}}function S(P,X=!1){if(o(P),P<=0||P>32)throw new Error("radix2: bits should be in (0..32]");if(b(8,P)>32||b(P,8)>32)throw new Error("radix2: carry overflow");return{encode:ee=>{if(!t(ee))throw new Error("radix2.encode input should be Uint8Array");return E(Array.from(ee),8,P,!X)},decode:ee=>(c("radix2.decode",ee),Uint8Array.from(E(ee,P,8,X)))}}function I(P){return s(P),function(...X){try{return P.apply(null,X)}catch{}}}function D(P,X){return o(P),s(X),{encode(ee){if(!t(ee))throw new Error("checksum.encode: input should be Uint8Array");const se=X(ee).slice(0,P),Z=new Uint8Array(ee.length+P);return Z.set(ee),Z.set(se,ee.length),Z},decode(ee){if(!t(ee))throw new Error("checksum.decode: input should be Uint8Array");const se=ee.slice(0,-P),Z=ee.slice(-P),J=X(se).slice(0,P);for(let z=0;z<P;z++)if(J[z]!==Z[z])throw new Error("Invalid checksum");return se}}}e.utils={alphabet:d,chain:l,checksum:D,convertRadix:g,convertRadix2:E,radix:_,radix2:S,join:f,padding:h},e.base16=l(S(4),d("0123456789ABCDEF"),f("")),e.base32=l(S(5),d("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),h(5),f("")),e.base32nopad=l(S(5),d("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),f("")),e.base32hex=l(S(5),d("0123456789ABCDEFGHIJKLMNOPQRSTUV"),h(5),f("")),e.base32hexnopad=l(S(5),d("0123456789ABCDEFGHIJKLMNOPQRSTUV"),f("")),e.base32crockford=l(S(5),d("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),f(""),p(P=>P.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const L=typeof Uint8Array.from([]).toBase64=="function"&&typeof Uint8Array.fromBase64=="function",x=(P,X)=>{i("base64",P);const ee=X?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/,se=X?"base64url":"base64";if(P.length>0&&!ee.test(P))throw new Error("invalid base64");return Uint8Array.fromBase64(P,{alphabet:se,lastChunkHandling:"strict"})};e.base64=L?{encode(P){return n(P),P.toBase64()},decode(P){return x(P,!1)}}:l(S(6),d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),h(6),f("")),e.base64nopad=l(S(6),d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),f("")),e.base64url=L?{encode(P){return n(P),P.toBase64({alphabet:"base64url"})},decode(P){return x(P,!0)}}:l(S(6),d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),h(6),f("")),e.base64urlnopad=l(S(6),d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),f(""));const j=P=>l(_(58),d(P),f(""));e.base58=j("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=j("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=j("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const V=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(P){let X="";for(let ee=0;ee<P.length;ee+=8){const se=P.subarray(ee,ee+8);X+=e.base58.encode(se).padStart(V[se.length],"1")}return X},decode(P){let X=[];for(let ee=0;ee<P.length;ee+=11){const se=P.slice(ee,ee+11),Z=V.indexOf(se.length),J=e.base58.decode(se);for(let z=0;z<J.length-Z;z++)if(J[z]!==0)throw new Error("base58xmr: wrong padding");X=X.concat(Array.from(J.slice(J.length-Z)))}return Uint8Array.from(X)}};const Y=P=>l(D(4,X=>P(P(X))),e.base58);e.createBase58check=Y,e.base58check=e.createBase58check;const q=l(d("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),f("")),R=[996825010,642813549,513874426,1027748829,705979059];function v(P){const X=P>>25;let ee=(P&33554431)<<5;for(let se=0;se<R.length;se++)(X>>se&1)===1&&(ee^=R[se]);return ee}function T(P,X,ee=1){const se=P.length;let Z=1;for(let J=0;J<se;J++){const z=P.charCodeAt(J);if(z<33||z>126)throw new Error(`Invalid prefix (${P})`);Z=v(Z)^z>>5}Z=v(Z);for(let J=0;J<se;J++)Z=v(Z)^P.charCodeAt(J)&31;for(let J of X)Z=v(Z)^J;for(let J=0;J<6;J++)Z=v(Z);return Z^=ee,q.encode(E([Z%A[30]],30,5,!1))}function m(P){const X=P==="bech32"?1:734539939,ee=S(5),se=ee.decode,Z=ee.encode,J=I(se);function z($,te,ne=90){i("bech32.encode prefix",$),t(te)&&(te=Array.from(te)),c("bech32.encode",te);const ie=$.length;if(ie===0)throw new TypeError(`Invalid prefix length ${ie}`);const ce=ie+7+te.length;if(ne!==!1&&ce>ne)throw new TypeError(`Length ${ce} exceeds limit ${ne}`);const oe=$.toLowerCase(),de=T(oe,te,X);return`${oe}1${q.encode(te)}${de}`}function K($,te=90){i("bech32.decode input",$);const ne=$.length;if(ne<8||te!==!1&&ne>te)throw new TypeError(`invalid string length: ${ne} (${$}). Expected (8..${te})`);const ie=$.toLowerCase();if($!==ie&&$!==$.toUpperCase())throw new Error("String must be lowercase or uppercase");const ce=ie.lastIndexOf("1");if(ce===0||ce===-1)throw new Error('Letter "1" must be present between prefix and data only');const oe=ie.slice(0,ce),de=ie.slice(ce+1);if(de.length<6)throw new Error("Data must be at least 6 characters long");const we=q.decode(de).slice(0,-6),me=T(oe,we,X);if(!de.endsWith(me))throw new Error(`Invalid checksum in ${$}: expected "${me}"`);return{prefix:oe,words:we}}const H=I(K);function U($){const{prefix:te,words:ne}=K($,!1);return{prefix:te,words:ne,bytes:se(ne)}}function F($,te){return z($,Z(te))}return{encode:z,decode:K,encodeFromBytes:F,decodeToBytes:U,decodeUnsafe:H,fromWords:se,fromWordsUnsafe:J,toWords:Z}}e.bech32=m("bech32"),e.bech32m=m("bech32m"),e.utf8={encode:P=>new TextDecoder().decode(P),decode:P=>new TextEncoder().encode(P)};const w=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",N={encode(P){return n(P),P.toHex()},decode(P){return i("hex",P),Uint8Array.fromHex(P)}};e.hex=w?N:l(S(4),d("0123456789abcdef"),f(""),p(P=>{if(typeof P!="string"||P.length%2!==0)throw new TypeError(`hex.decode: expected string, got ${typeof P} with length ${P.length}`);return P.toLowerCase()}));const C={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},O="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",B=(P,X)=>{if(typeof P!="string"||!C.hasOwnProperty(P))throw new TypeError(O);if(!t(X))throw new TypeError("bytesToString() expects Uint8Array");return C[P].encode(X)};e.bytesToString=B,e.str=e.bytesToString;const W=(P,X)=>{if(!C.hasOwnProperty(P))throw new TypeError(O);if(typeof X!="string")throw new TypeError("stringToBytes() expects string");return C[P].decode(X)};e.stringToBytes=W,e.bytes=e.stringToBytes})(Gh)),Gh}var ss={},Zn={},Je={},Xt={},wy;function rS(){if(wy)return Xt;wy=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.SHA512_IV=Xt.SHA384_IV=Xt.SHA224_IV=Xt.SHA256_IV=Xt.HashMD=void 0,Xt.setBigUint64=t,Xt.Chi=n,Xt.Maj=r;const e=Mn();function t(i,o,a,u){if(typeof i.setBigUint64=="function")return i.setBigUint64(o,a,u);const c=BigInt(32),l=BigInt(4294967295),d=Number(a>>c&l),f=Number(a&l),h=u?4:0,p=u?0:4;i.setUint32(o+h,d,u),i.setUint32(o+p,f,u)}function n(i,o,a){return i&o^~i&a}function r(i,o,a){return i&o^i&a^o&a}class s extends e.Hash{constructor(o,a,u,c){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=o,this.outputLen=a,this.padOffset=u,this.isLE=c,this.buffer=new Uint8Array(o),this.view=(0,e.createView)(this.buffer)}update(o){(0,e.aexists)(this),o=(0,e.toBytes)(o),(0,e.abytes)(o);const{view:a,buffer:u,blockLen:c}=this,l=o.length;for(let d=0;d<l;){const f=Math.min(c-this.pos,l-d);if(f===c){const h=(0,e.createView)(o);for(;c<=l-d;d+=c)this.process(h,d);continue}u.set(o.subarray(d,d+f),this.pos),this.pos+=f,d+=f,this.pos===c&&(this.process(a,0),this.pos=0)}return this.length+=o.length,this.roundClean(),this}digestInto(o){(0,e.aexists)(this),(0,e.aoutput)(o,this),this.finished=!0;const{buffer:a,view:u,blockLen:c,isLE:l}=this;let{pos:d}=this;a[d++]=128,(0,e.clean)(this.buffer.subarray(d)),this.padOffset>c-d&&(this.process(u,0),d=0);for(let y=d;y<c;y++)a[y]=0;t(u,c-8,BigInt(this.length*8),l),this.process(u,0);const f=(0,e.createView)(o),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const p=h/4,g=this.get();if(p>g.length)throw new Error("_sha2: outputLen bigger than state");for(let y=0;y<p;y++)f.setUint32(4*y,g[y],l)}digest(){const{buffer:o,outputLen:a}=this;this.digestInto(o);const u=o.slice(0,a);return this.destroy(),u}_cloneInto(o){o||(o=new this.constructor),o.set(...this.get());const{blockLen:a,buffer:u,length:c,finished:l,destroyed:d,pos:f}=this;return o.destroyed=d,o.finished=l,o.length=c,o.pos=f,c%a&&o.buffer.set(u),o}clone(){return this._cloneInto()}}return Xt.HashMD=s,Xt.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Xt.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),Xt.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Xt.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Xt}var Le={},by;function hI(){if(by)return Le;by=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.toBig=Le.shrSL=Le.shrSH=Le.rotrSL=Le.rotrSH=Le.rotrBL=Le.rotrBH=Le.rotr32L=Le.rotr32H=Le.rotlSL=Le.rotlSH=Le.rotlBL=Le.rotlBH=Le.add5L=Le.add5H=Le.add4L=Le.add4H=Le.add3L=Le.add3H=void 0,Le.add=b,Le.fromBig=n,Le.split=r;const e=BigInt(2**32-1),t=BigInt(32);function n(x,j=!1){return j?{h:Number(x&e),l:Number(x>>t&e)}:{h:Number(x>>t&e)|0,l:Number(x&e)|0}}function r(x,j=!1){const V=x.length;let Y=new Uint32Array(V),q=new Uint32Array(V);for(let R=0;R<V;R++){const{h:v,l:T}=n(x[R],j);[Y[R],q[R]]=[v,T]}return[Y,q]}const s=(x,j)=>BigInt(x>>>0)<<t|BigInt(j>>>0);Le.toBig=s;const i=(x,j,V)=>x>>>V;Le.shrSH=i;const o=(x,j,V)=>x<<32-V|j>>>V;Le.shrSL=o;const a=(x,j,V)=>x>>>V|j<<32-V;Le.rotrSH=a;const u=(x,j,V)=>x<<32-V|j>>>V;Le.rotrSL=u;const c=(x,j,V)=>x<<64-V|j>>>V-32;Le.rotrBH=c;const l=(x,j,V)=>x>>>V-32|j<<64-V;Le.rotrBL=l;const d=(x,j)=>j;Le.rotr32H=d;const f=(x,j)=>x;Le.rotr32L=f;const h=(x,j,V)=>x<<V|j>>>32-V;Le.rotlSH=h;const p=(x,j,V)=>j<<V|x>>>32-V;Le.rotlSL=p;const g=(x,j,V)=>j<<V-32|x>>>64-V;Le.rotlBH=g;const y=(x,j,V)=>x<<V-32|j>>>64-V;Le.rotlBL=y;function b(x,j,V,Y){const q=(j>>>0)+(Y>>>0);return{h:x+V+(q/2**32|0)|0,l:q|0}}const A=(x,j,V)=>(x>>>0)+(j>>>0)+(V>>>0);Le.add3L=A;const E=(x,j,V,Y)=>j+V+Y+(x/2**32|0)|0;Le.add3H=E;const _=(x,j,V,Y)=>(x>>>0)+(j>>>0)+(V>>>0)+(Y>>>0);Le.add4L=_;const S=(x,j,V,Y,q)=>j+V+Y+q+(x/2**32|0)|0;Le.add4H=S;const I=(x,j,V,Y,q)=>(x>>>0)+(j>>>0)+(V>>>0)+(Y>>>0)+(q>>>0);Le.add5L=I;const D=(x,j,V,Y,q,R)=>j+V+Y+q+R+(x/2**32|0)|0;Le.add5H=D;const L={fromBig:n,split:r,toBig:s,shrSH:i,shrSL:o,rotrSH:a,rotrSL:u,rotrBH:c,rotrBL:l,rotr32H:d,rotr32L:f,rotlSH:h,rotlSL:p,rotlBH:g,rotlBL:y,add:b,add3L:A,add3H:E,add4L:_,add4H:S,add5H:D,add5L:I};return Le.default=L,Le}var vy;function oa(){if(vy)return Je;vy=1,Object.defineProperty(Je,"__esModule",{value:!0}),Je.sha512_224=Je.sha512_256=Je.sha384=Je.sha512=Je.sha224=Je.sha256=Je.SHA512_256=Je.SHA512_224=Je.SHA384=Je.SHA512=Je.SHA224=Je.SHA256=void 0;const e=rS(),t=hI(),n=Mn(),r=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),s=new Uint32Array(64);class i extends e.HashMD{constructor(E=32){super(64,E,8,!1),this.A=e.SHA256_IV[0]|0,this.B=e.SHA256_IV[1]|0,this.C=e.SHA256_IV[2]|0,this.D=e.SHA256_IV[3]|0,this.E=e.SHA256_IV[4]|0,this.F=e.SHA256_IV[5]|0,this.G=e.SHA256_IV[6]|0,this.H=e.SHA256_IV[7]|0}get(){const{A:E,B:_,C:S,D:I,E:D,F:L,G:x,H:j}=this;return[E,_,S,I,D,L,x,j]}set(E,_,S,I,D,L,x,j){this.A=E|0,this.B=_|0,this.C=S|0,this.D=I|0,this.E=D|0,this.F=L|0,this.G=x|0,this.H=j|0}process(E,_){for(let q=0;q<16;q++,_+=4)s[q]=E.getUint32(_,!1);for(let q=16;q<64;q++){const R=s[q-15],v=s[q-2],T=(0,n.rotr)(R,7)^(0,n.rotr)(R,18)^R>>>3,m=(0,n.rotr)(v,17)^(0,n.rotr)(v,19)^v>>>10;s[q]=m+s[q-7]+T+s[q-16]|0}let{A:S,B:I,C:D,D:L,E:x,F:j,G:V,H:Y}=this;for(let q=0;q<64;q++){const R=(0,n.rotr)(x,6)^(0,n.rotr)(x,11)^(0,n.rotr)(x,25),v=Y+R+(0,e.Chi)(x,j,V)+r[q]+s[q]|0,m=((0,n.rotr)(S,2)^(0,n.rotr)(S,13)^(0,n.rotr)(S,22))+(0,e.Maj)(S,I,D)|0;Y=V,V=j,j=x,x=L+v|0,L=D,D=I,I=S,S=v+m|0}S=S+this.A|0,I=I+this.B|0,D=D+this.C|0,L=L+this.D|0,x=x+this.E|0,j=j+this.F|0,V=V+this.G|0,Y=Y+this.H|0,this.set(S,I,D,L,x,j,V,Y)}roundClean(){(0,n.clean)(s)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,n.clean)(this.buffer)}}Je.SHA256=i;class o extends i{constructor(){super(28),this.A=e.SHA224_IV[0]|0,this.B=e.SHA224_IV[1]|0,this.C=e.SHA224_IV[2]|0,this.D=e.SHA224_IV[3]|0,this.E=e.SHA224_IV[4]|0,this.F=e.SHA224_IV[5]|0,this.G=e.SHA224_IV[6]|0,this.H=e.SHA224_IV[7]|0}}Je.SHA224=o;const a=t.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(A=>BigInt(A))),u=a[0],c=a[1],l=new Uint32Array(80),d=new Uint32Array(80);class f extends e.HashMD{constructor(E=64){super(128,E,16,!1),this.Ah=e.SHA512_IV[0]|0,this.Al=e.SHA512_IV[1]|0,this.Bh=e.SHA512_IV[2]|0,this.Bl=e.SHA512_IV[3]|0,this.Ch=e.SHA512_IV[4]|0,this.Cl=e.SHA512_IV[5]|0,this.Dh=e.SHA512_IV[6]|0,this.Dl=e.SHA512_IV[7]|0,this.Eh=e.SHA512_IV[8]|0,this.El=e.SHA512_IV[9]|0,this.Fh=e.SHA512_IV[10]|0,this.Fl=e.SHA512_IV[11]|0,this.Gh=e.SHA512_IV[12]|0,this.Gl=e.SHA512_IV[13]|0,this.Hh=e.SHA512_IV[14]|0,this.Hl=e.SHA512_IV[15]|0}get(){const{Ah:E,Al:_,Bh:S,Bl:I,Ch:D,Cl:L,Dh:x,Dl:j,Eh:V,El:Y,Fh:q,Fl:R,Gh:v,Gl:T,Hh:m,Hl:w}=this;return[E,_,S,I,D,L,x,j,V,Y,q,R,v,T,m,w]}set(E,_,S,I,D,L,x,j,V,Y,q,R,v,T,m,w){this.Ah=E|0,this.Al=_|0,this.Bh=S|0,this.Bl=I|0,this.Ch=D|0,this.Cl=L|0,this.Dh=x|0,this.Dl=j|0,this.Eh=V|0,this.El=Y|0,this.Fh=q|0,this.Fl=R|0,this.Gh=v|0,this.Gl=T|0,this.Hh=m|0,this.Hl=w|0}process(E,_){for(let O=0;O<16;O++,_+=4)l[O]=E.getUint32(_),d[O]=E.getUint32(_+=4);for(let O=16;O<80;O++){const B=l[O-15]|0,W=d[O-15]|0,P=t.rotrSH(B,W,1)^t.rotrSH(B,W,8)^t.shrSH(B,W,7),X=t.rotrSL(B,W,1)^t.rotrSL(B,W,8)^t.shrSL(B,W,7),ee=l[O-2]|0,se=d[O-2]|0,Z=t.rotrSH(ee,se,19)^t.rotrBH(ee,se,61)^t.shrSH(ee,se,6),J=t.rotrSL(ee,se,19)^t.rotrBL(ee,se,61)^t.shrSL(ee,se,6),z=t.add4L(X,J,d[O-7],d[O-16]),K=t.add4H(z,P,Z,l[O-7],l[O-16]);l[O]=K|0,d[O]=z|0}let{Ah:S,Al:I,Bh:D,Bl:L,Ch:x,Cl:j,Dh:V,Dl:Y,Eh:q,El:R,Fh:v,Fl:T,Gh:m,Gl:w,Hh:N,Hl:C}=this;for(let O=0;O<80;O++){const B=t.rotrSH(q,R,14)^t.rotrSH(q,R,18)^t.rotrBH(q,R,41),W=t.rotrSL(q,R,14)^t.rotrSL(q,R,18)^t.rotrBL(q,R,41),P=q&v^~q&m,X=R&T^~R&w,ee=t.add5L(C,W,X,c[O],d[O]),se=t.add5H(ee,N,B,P,u[O],l[O]),Z=ee|0,J=t.rotrSH(S,I,28)^t.rotrBH(S,I,34)^t.rotrBH(S,I,39),z=t.rotrSL(S,I,28)^t.rotrBL(S,I,34)^t.rotrBL(S,I,39),K=S&D^S&x^D&x,H=I&L^I&j^L&j;N=m|0,C=w|0,m=v|0,w=T|0,v=q|0,T=R|0,{h:q,l:R}=t.add(V|0,Y|0,se|0,Z|0),V=x|0,Y=j|0,x=D|0,j=L|0,D=S|0,L=I|0;const U=t.add3L(Z,z,H);S=t.add3H(U,se,J,K),I=U|0}({h:S,l:I}=t.add(this.Ah|0,this.Al|0,S|0,I|0)),{h:D,l:L}=t.add(this.Bh|0,this.Bl|0,D|0,L|0),{h:x,l:j}=t.add(this.Ch|0,this.Cl|0,x|0,j|0),{h:V,l:Y}=t.add(this.Dh|0,this.Dl|0,V|0,Y|0),{h:q,l:R}=t.add(this.Eh|0,this.El|0,q|0,R|0),{h:v,l:T}=t.add(this.Fh|0,this.Fl|0,v|0,T|0),{h:m,l:w}=t.add(this.Gh|0,this.Gl|0,m|0,w|0),{h:N,l:C}=t.add(this.Hh|0,this.Hl|0,N|0,C|0),this.set(S,I,D,L,x,j,V,Y,q,R,v,T,m,w,N,C)}roundClean(){(0,n.clean)(l,d)}destroy(){(0,n.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Je.SHA512=f;class h extends f{constructor(){super(48),this.Ah=e.SHA384_IV[0]|0,this.Al=e.SHA384_IV[1]|0,this.Bh=e.SHA384_IV[2]|0,this.Bl=e.SHA384_IV[3]|0,this.Ch=e.SHA384_IV[4]|0,this.Cl=e.SHA384_IV[5]|0,this.Dh=e.SHA384_IV[6]|0,this.Dl=e.SHA384_IV[7]|0,this.Eh=e.SHA384_IV[8]|0,this.El=e.SHA384_IV[9]|0,this.Fh=e.SHA384_IV[10]|0,this.Fl=e.SHA384_IV[11]|0,this.Gh=e.SHA384_IV[12]|0,this.Gl=e.SHA384_IV[13]|0,this.Hh=e.SHA384_IV[14]|0,this.Hl=e.SHA384_IV[15]|0}}Je.SHA384=h;const p=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),g=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class y extends f{constructor(){super(28),this.Ah=p[0]|0,this.Al=p[1]|0,this.Bh=p[2]|0,this.Bl=p[3]|0,this.Ch=p[4]|0,this.Cl=p[5]|0,this.Dh=p[6]|0,this.Dl=p[7]|0,this.Eh=p[8]|0,this.El=p[9]|0,this.Fh=p[10]|0,this.Fl=p[11]|0,this.Gh=p[12]|0,this.Gl=p[13]|0,this.Hh=p[14]|0,this.Hl=p[15]|0}}Je.SHA512_224=y;class b extends f{constructor(){super(32),this.Ah=g[0]|0,this.Al=g[1]|0,this.Bh=g[2]|0,this.Bl=g[3]|0,this.Ch=g[4]|0,this.Cl=g[5]|0,this.Dh=g[6]|0,this.Dl=g[7]|0,this.Eh=g[8]|0,this.El=g[9]|0,this.Fh=g[10]|0,this.Fl=g[11]|0,this.Gh=g[12]|0,this.Gl=g[13]|0,this.Hh=g[14]|0,this.Hl=g[15]|0}}return Je.SHA512_256=b,Je.sha256=(0,n.createHasher)(()=>new i),Je.sha224=(0,n.createHasher)(()=>new o),Je.sha512=(0,n.createHasher)(()=>new f),Je.sha384=(0,n.createHasher)(()=>new h),Je.sha512_256=(0,n.createHasher)(()=>new b),Je.sha512_224=(0,n.createHasher)(()=>new y),Je}var Ey;function fI(){if(Ey)return Zn;Ey=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.sha224=Zn.SHA224=Zn.sha256=Zn.SHA256=void 0;const e=oa();return Zn.SHA256=e.SHA256,Zn.sha256=e.sha256,Zn.SHA224=e.SHA224,Zn.sha224=e.sha224,Zn}var wo={},Qu={},Ay;function pI(){if(Ay)return Qu;Ay=1,Object.defineProperty(Qu,"__esModule",{value:!0});function e(t){return Array.isArray(t)?new Uint8Array(t):t}return Qu.default=e,Qu}var Sy;function Ng(){if(Sy)return wo;Sy=1;var e=wo&&wo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wo,"__esModule",{value:!0});const t=e(pI());function n(r){function s(i){return r((0,t.default)(i))}return s.create=()=>{const i=r.create();return{update(o){return i.update((0,t.default)(o)),this},digest(){return i.digest()}}},s}return wo.default=n,wo}var Ty;function iS(){if(Ty)return ss;Ty=1;var e=ss&&ss.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ss,"__esModule",{value:!0}),ss.sha256=void 0;const t=fI(),n=e(Ng());return ss.sha256=(0,n.default)(t.sha256),ss}var os={},My;function gI(){if(My)return os;My=1,Object.defineProperty(os,"__esModule",{value:!0}),os.concatArgs=os.arrayEqual=void 0;function e(r,s){return r.length!==s.length?!1:r.every((i,o)=>i===s[o])}os.arrayEqual=e;function t(r){return typeof r=="number"}function n(...r){return r.flatMap(s=>t(s)?[s]:Array.from(s))}return os.concatArgs=n,os}var Ny;function yI(){if(Ny)return Ze;Ny=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.isValidClassicAddress=Ze.decodeAccountPublic=Ze.encodeAccountPublic=Ze.encodeNodePublic=Ze.decodeNodePublic=Ze.decodeAddress=Ze.decodeAccountID=Ze.encodeAddress=Ze.encodeAccountID=Ze.decodeSeed=Ze.encodeSeed=Ze.codec=void 0;const e=Mg(),t=iS(),n=gI();class r{constructor(I){this._sha256=I.sha256,this._codec=e.base58xrp}encode(I,D){const L=D.versions;return this._encodeVersioned(I,L,D.expectedLength)}decode(I,D){var L;const x=D.versions,j=D.versionTypes,V=this.decodeChecked(I);if(x.length>1&&!D.expectedLength)throw new Error("expectedLength is required because there are >= 2 possible versions");const Y=typeof x[0]=="number"?1:x[0].length,q=(L=D.expectedLength)!==null&&L!==void 0?L:V.length-Y,R=V.slice(0,-q),v=V.slice(-q);for(let T=0;T<x.length;T++){const m=Array.isArray(x[T])?x[T]:[x[T]];if((0,n.arrayEqual)(R,m))return{version:m,bytes:v,type:j?j[T]:null}}throw new Error("version_invalid: version bytes do not match any of the provided version(s)")}encodeChecked(I){const D=this._sha256(this._sha256(I)).slice(0,4);return this._encodeRaw(Uint8Array.from((0,n.concatArgs)(I,D)))}decodeChecked(I){const D=this._decodeRaw(I);if(D.byteLength<5)throw new Error("invalid_input_size: decoded data must have length >= 5");if(!this._verifyCheckSum(D))throw new Error("checksum_invalid");return D.slice(0,-4)}_encodeVersioned(I,D,L){if(!_(I,L))throw new Error("unexpected_payload_length: bytes.length does not match expectedLength. Ensure that the bytes are a Uint8Array.");return this.encodeChecked((0,n.concatArgs)(D,I))}_encodeRaw(I){return this._codec.encode(Uint8Array.from(I))}_decodeRaw(I){return this._codec.decode(I)}_verifyCheckSum(I){const D=this._sha256(this._sha256(I.slice(0,-4))).slice(0,4),L=I.slice(-4);return(0,n.arrayEqual)(D,L)}}const s=0,i=35,o=33,a=28,u=[1,225,75],c={sha256:t.sha256},l=new r(c);Ze.codec=l;function d(S,I){if(!_(S,16))throw new Error("entropy must have length 16");const D={expectedLength:16,versions:I==="ed25519"?u:[o]};return l.encode(S,D)}Ze.encodeSeed=d;function f(S,I={versionTypes:["ed25519","secp256k1"],versions:[u,o],expectedLength:16}){return l.decode(S,I)}Ze.decodeSeed=f;function h(S){const I={versions:[s],expectedLength:20};return l.encode(S,I)}Ze.encodeAccountID=h,Ze.encodeAddress=h;function p(S){const I={versions:[s],expectedLength:20};return l.decode(S,I).bytes}Ze.decodeAccountID=p,Ze.decodeAddress=p;function g(S){const I={versions:[a],expectedLength:33};return l.decode(S,I).bytes}Ze.decodeNodePublic=g;function y(S){const I={versions:[a],expectedLength:33};return l.encode(S,I)}Ze.encodeNodePublic=y;function b(S){const I={versions:[i],expectedLength:33};return l.encode(S,I)}Ze.encodeAccountPublic=b;function A(S){const I={versions:[i],expectedLength:33};return l.decode(S,I).bytes}Ze.decodeAccountPublic=A;function E(S){try{p(S)}catch{return!1}return!0}Ze.isValidClassicAddress=E;function _(S,I){return"byteLength"in S?S.byteLength===I:S.length===I}return Ze}var Iy;function Rn(){return Iy||(Iy=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isValidXAddress=e.decodeXAddress=e.xAddressToClassicAddress=e.encodeXAddress=e.classicAddressToXAddress=e.isValidClassicAddress=e.decodeAccountPublic=e.encodeAccountPublic=e.decodeNodePublic=e.encodeNodePublic=e.decodeAccountID=e.encodeAccountID=e.decodeSeed=e.encodeSeed=e.codec=void 0;const t=Ve(),n=yI();Object.defineProperty(e,"codec",{enumerable:!0,get:function(){return n.codec}}),Object.defineProperty(e,"encodeSeed",{enumerable:!0,get:function(){return n.encodeSeed}}),Object.defineProperty(e,"decodeSeed",{enumerable:!0,get:function(){return n.decodeSeed}}),Object.defineProperty(e,"encodeAccountID",{enumerable:!0,get:function(){return n.encodeAccountID}}),Object.defineProperty(e,"decodeAccountID",{enumerable:!0,get:function(){return n.decodeAccountID}}),Object.defineProperty(e,"encodeNodePublic",{enumerable:!0,get:function(){return n.encodeNodePublic}}),Object.defineProperty(e,"decodeNodePublic",{enumerable:!0,get:function(){return n.decodeNodePublic}}),Object.defineProperty(e,"encodeAccountPublic",{enumerable:!0,get:function(){return n.encodeAccountPublic}}),Object.defineProperty(e,"decodeAccountPublic",{enumerable:!0,get:function(){return n.decodeAccountPublic}}),Object.defineProperty(e,"isValidClassicAddress",{enumerable:!0,get:function(){return n.isValidClassicAddress}});const r={main:Uint8Array.from([5,68]),test:Uint8Array.from([4,147])},s=4294967295;function i(f,h,p){const g=(0,n.decodeAccountID)(f);return o(g,h,p)}e.classicAddressToXAddress=i;function o(f,h,p){if(f.length!==20)throw new Error("Account ID must be 20 bytes");if(h!==!1&&h>s)throw new Error("Invalid tag");const g=h||0,y=h===!1||h==null?0:1,b=(0,t.concat)([p?r.test:r.main,f,Uint8Array.from([y,g&255,g>>8&255,g>>16&255,g>>24&255,0,0,0,0])]);return n.codec.encodeChecked(b)}e.encodeXAddress=o;function a(f){const{accountId:h,tag:p,test:g}=u(f);return{classicAddress:(0,n.encodeAccountID)(h),tag:p,test:g}}e.xAddressToClassicAddress=a;function u(f){const h=n.codec.decodeChecked(f),p=c(h),g=h.slice(2,22),y=l(h);return{accountId:g,tag:y,test:p}}e.decodeXAddress=u;function c(f){const h=f.slice(0,2);if((0,t.equal)(r.main,h))return!1;if((0,t.equal)(r.test,h))return!0;throw new Error("Invalid X-address: bad prefix")}function l(f){const h=f[22];if(h>=2)throw new Error("Unsupported X-address");if(h===1)return f[23]+f[24]*256+f[25]*65536+f[26]*16777216;if(h!==0)throw new Error("flag must be zero to indicate no tag");if(!(0,t.equal)((0,t.hexToBytes)("0000000000000000"),f.slice(23,31)))throw new Error("remaining bytes must be zero");return!1}function d(f){try{u(f)}catch{return!1}return!0}e.isValidXAddress=d})(Vh)),Vh}var Kh={},Pr={},ya={};const mI=JSON.parse('[["Generic",{"isSerialized":false,"isSigningField":false,"isVLEncoded":false,"nth":0,"type":"Unknown"}],["Invalid",{"isSerialized":false,"isSigningField":false,"isVLEncoded":false,"nth":-1,"type":"Unknown"}],["ObjectEndMarker",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":1,"type":"STObject"}],["ArrayEndMarker",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":1,"type":"STArray"}],["taker_gets_funded",{"isSerialized":false,"isSigningField":false,"isVLEncoded":false,"nth":258,"type":"Amount"}],["taker_pays_funded",{"isSerialized":false,"isSigningField":false,"isVLEncoded":false,"nth":259,"type":"Amount"}],["LedgerEntryType",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":1,"type":"UInt16"}],["TransactionType",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":2,"type":"UInt16"}],["SignerWeight",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":3,"type":"UInt16"}],["TransferFee",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":4,"type":"UInt16"}],["TradingFee",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":5,"type":"UInt16"}],["DiscountedFee",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":6,"type":"UInt16"}],["Version",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":16,"type":"UInt16"}],["HookStateChangeCount",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":17,"type":"UInt16"}],["HookEmitCount",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":18,"type":"UInt16"}],["HookExecutionIndex",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":19,"type":"UInt16"}],["HookApiVersion",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":20,"type":"UInt16"}],["LedgerFixType",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":21,"type":"UInt16"}],["NetworkID",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":1,"type":"UInt32"}],["Flags",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":2,"type":"UInt32"}],["SourceTag",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":3,"type":"UInt32"}],["Sequence",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":4,"type":"UInt32"}],["PreviousTxnLgrSeq",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":5,"type":"UInt32"}],["LedgerSequence",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":6,"type":"UInt32"}],["CloseTime",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":7,"type":"UInt32"}],["ParentCloseTime",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":8,"type":"UInt32"}],["SigningTime",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":9,"type":"UInt32"}],["Expiration",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":10,"type":"UInt32"}],["TransferRate",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":11,"type":"UInt32"}],["WalletSize",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":12,"type":"UInt32"}],["OwnerCount",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":13,"type":"UInt32"}],["DestinationTag",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":14,"type":"UInt32"}],["LastUpdateTime",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":15,"type":"UInt32"}],["HighQualityIn",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":16,"type":"UInt32"}],["HighQualityOut",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":17,"type":"UInt32"}],["LowQualityIn",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":18,"type":"UInt32"}],["LowQualityOut",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":19,"type":"UInt32"}],["QualityIn",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":20,"type":"UInt32"}],["QualityOut",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":21,"type":"UInt32"}],["StampEscrow",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":22,"type":"UInt32"}],["BondAmount",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":23,"type":"UInt32"}],["LoadFee",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":24,"type":"UInt32"}],["OfferSequence",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":25,"type":"UInt32"}],["FirstLedgerSequence",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":26,"type":"UInt32"}],["LastLedgerSequence",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":27,"type":"UInt32"}],["TransactionIndex",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":28,"type":"UInt32"}],["OperationLimit",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":29,"type":"UInt32"}],["ReferenceFeeUnits",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":30,"type":"UInt32"}],["ReserveBase",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":31,"type":"UInt32"}],["ReserveIncrement",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":32,"type":"UInt32"}],["SetFlag",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":33,"type":"UInt32"}],["ClearFlag",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":34,"type":"UInt32"}],["SignerQuorum",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":35,"type":"UInt32"}],["CancelAfter",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":36,"type":"UInt32"}],["FinishAfter",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":37,"type":"UInt32"}],["SignerListID",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":38,"type":"UInt32"}],["SettleDelay",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":39,"type":"UInt32"}],["TicketCount",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":40,"type":"UInt32"}],["TicketSequence",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":41,"type":"UInt32"}],["NFTokenTaxon",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":42,"type":"UInt32"}],["MintedNFTokens",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":43,"type":"UInt32"}],["BurnedNFTokens",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":44,"type":"UInt32"}],["HookStateCount",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":45,"type":"UInt32"}],["EmitGeneration",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":46,"type":"UInt32"}],["VoteWeight",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":48,"type":"UInt32"}],["FirstNFTokenSequence",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":50,"type":"UInt32"}],["OracleDocumentID",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":51,"type":"UInt32"}],["PermissionValue",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":52,"type":"UInt32"}],["IndexNext",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":1,"type":"UInt64"}],["IndexPrevious",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":2,"type":"UInt64"}],["BookNode",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":3,"type":"UInt64"}],["OwnerNode",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":4,"type":"UInt64"}],["BaseFee",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":5,"type":"UInt64"}],["ExchangeRate",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":6,"type":"UInt64"}],["LowNode",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":7,"type":"UInt64"}],["HighNode",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":8,"type":"UInt64"}],["DestinationNode",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":9,"type":"UInt64"}],["Cookie",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":10,"type":"UInt64"}],["ServerVersion",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":11,"type":"UInt64"}],["NFTokenOfferNode",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":12,"type":"UInt64"}],["EmitBurden",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":13,"type":"UInt64"}],["HookOn",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":16,"type":"UInt64"}],["HookInstructionCount",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":17,"type":"UInt64"}],["HookReturnCode",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":18,"type":"UInt64"}],["ReferenceCount",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":19,"type":"UInt64"}],["XChainClaimID",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":20,"type":"UInt64"}],["XChainAccountCreateCount",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":21,"type":"UInt64"}],["XChainAccountClaimCount",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":22,"type":"UInt64"}],["AssetPrice",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":23,"type":"UInt64"}],["MaximumAmount",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":24,"type":"UInt64"}],["OutstandingAmount",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":25,"type":"UInt64"}],["MPTAmount",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":26,"type":"UInt64"}],["IssuerNode",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":27,"type":"UInt64"}],["SubjectNode",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":28,"type":"UInt64"}],["LockedAmount",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":29,"type":"UInt64"}],["EmailHash",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":1,"type":"Hash128"}],["LedgerHash",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":1,"type":"Hash256"}],["ParentHash",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":2,"type":"Hash256"}],["TransactionHash",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":3,"type":"Hash256"}],["AccountHash",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":4,"type":"Hash256"}],["PreviousTxnID",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":5,"type":"Hash256"}],["LedgerIndex",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":6,"type":"Hash256"}],["WalletLocator",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":7,"type":"Hash256"}],["RootIndex",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":8,"type":"Hash256"}],["AccountTxnID",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":9,"type":"Hash256"}],["NFTokenID",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":10,"type":"Hash256"}],["EmitParentTxnID",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":11,"type":"Hash256"}],["EmitNonce",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":12,"type":"Hash256"}],["EmitHookHash",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":13,"type":"Hash256"}],["AMMID",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":14,"type":"Hash256"}],["BookDirectory",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":16,"type":"Hash256"}],["InvoiceID",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":17,"type":"Hash256"}],["Nickname",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":18,"type":"Hash256"}],["Amendment",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":19,"type":"Hash256"}],["Digest",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":21,"type":"Hash256"}],["Channel",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":22,"type":"Hash256"}],["ConsensusHash",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":23,"type":"Hash256"}],["CheckID",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":24,"type":"Hash256"}],["ValidatedHash",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":25,"type":"Hash256"}],["PreviousPageMin",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":26,"type":"Hash256"}],["NextPageMin",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":27,"type":"Hash256"}],["NFTokenBuyOffer",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":28,"type":"Hash256"}],["NFTokenSellOffer",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":29,"type":"Hash256"}],["HookStateKey",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":30,"type":"Hash256"}],["HookHash",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":31,"type":"Hash256"}],["HookNamespace",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":32,"type":"Hash256"}],["HookSetTxnID",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":33,"type":"Hash256"}],["DomainID",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":34,"type":"Hash256"}],["VaultID",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":35,"type":"Hash256"}],["ParentBatchID",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":36,"type":"Hash256"}],["hash",{"isSerialized":false,"isSigningField":false,"isVLEncoded":false,"nth":257,"type":"Hash256"}],["index",{"isSerialized":false,"isSigningField":false,"isVLEncoded":false,"nth":258,"type":"Hash256"}],["Amount",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":1,"type":"Amount"}],["Balance",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":2,"type":"Amount"}],["LimitAmount",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":3,"type":"Amount"}],["TakerPays",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":4,"type":"Amount"}],["TakerGets",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":5,"type":"Amount"}],["LowLimit",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":6,"type":"Amount"}],["HighLimit",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":7,"type":"Amount"}],["Fee",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":8,"type":"Amount"}],["SendMax",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":9,"type":"Amount"}],["DeliverMin",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":10,"type":"Amount"}],["Amount2",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":11,"type":"Amount"}],["BidMin",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":12,"type":"Amount"}],["BidMax",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":13,"type":"Amount"}],["MinimumOffer",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":16,"type":"Amount"}],["RippleEscrow",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":17,"type":"Amount"}],["DeliveredAmount",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":18,"type":"Amount"}],["NFTokenBrokerFee",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":19,"type":"Amount"}],["BaseFeeDrops",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":22,"type":"Amount"}],["ReserveBaseDrops",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":23,"type":"Amount"}],["ReserveIncrementDrops",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":24,"type":"Amount"}],["LPTokenOut",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":25,"type":"Amount"}],["LPTokenIn",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":26,"type":"Amount"}],["EPrice",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":27,"type":"Amount"}],["Price",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":28,"type":"Amount"}],["SignatureReward",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":29,"type":"Amount"}],["MinAccountCreateAmount",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":30,"type":"Amount"}],["LPTokenBalance",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":31,"type":"Amount"}],["PublicKey",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":1,"type":"Blob"}],["MessageKey",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":2,"type":"Blob"}],["SigningPubKey",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":3,"type":"Blob"}],["TxnSignature",{"isSerialized":true,"isSigningField":false,"isVLEncoded":true,"nth":4,"type":"Blob"}],["URI",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":5,"type":"Blob"}],["Signature",{"isSerialized":true,"isSigningField":false,"isVLEncoded":true,"nth":6,"type":"Blob"}],["Domain",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":7,"type":"Blob"}],["FundCode",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":8,"type":"Blob"}],["RemoveCode",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":9,"type":"Blob"}],["ExpireCode",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":10,"type":"Blob"}],["CreateCode",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":11,"type":"Blob"}],["MemoType",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":12,"type":"Blob"}],["MemoData",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":13,"type":"Blob"}],["MemoFormat",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":14,"type":"Blob"}],["Fulfillment",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":16,"type":"Blob"}],["Condition",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":17,"type":"Blob"}],["MasterSignature",{"isSerialized":true,"isSigningField":false,"isVLEncoded":true,"nth":18,"type":"Blob"}],["UNLModifyValidator",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":19,"type":"Blob"}],["ValidatorToDisable",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":20,"type":"Blob"}],["ValidatorToReEnable",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":21,"type":"Blob"}],["HookStateData",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":22,"type":"Blob"}],["HookReturnString",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":23,"type":"Blob"}],["HookParameterName",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":24,"type":"Blob"}],["HookParameterValue",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":25,"type":"Blob"}],["DIDDocument",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":26,"type":"Blob"}],["Data",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":27,"type":"Blob"}],["AssetClass",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":28,"type":"Blob"}],["Provider",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":29,"type":"Blob"}],["MPTokenMetadata",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":30,"type":"Blob"}],["CredentialType",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":31,"type":"Blob"}],["Account",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":1,"type":"AccountID"}],["Owner",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":2,"type":"AccountID"}],["Destination",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":3,"type":"AccountID"}],["Issuer",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":4,"type":"AccountID"}],["Authorize",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":5,"type":"AccountID"}],["Unauthorize",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":6,"type":"AccountID"}],["RegularKey",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":8,"type":"AccountID"}],["NFTokenMinter",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":9,"type":"AccountID"}],["EmitCallback",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":10,"type":"AccountID"}],["Holder",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":11,"type":"AccountID"}],["Delegate",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":12,"type":"AccountID"}],["HookAccount",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":16,"type":"AccountID"}],["OtherChainSource",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":18,"type":"AccountID"}],["OtherChainDestination",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":19,"type":"AccountID"}],["AttestationSignerAccount",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":20,"type":"AccountID"}],["AttestationRewardAccount",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":21,"type":"AccountID"}],["LockingChainDoor",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":22,"type":"AccountID"}],["IssuingChainDoor",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":23,"type":"AccountID"}],["Subject",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":24,"type":"AccountID"}],["Number",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":1,"type":"Number"}],["AssetsAvailable",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":2,"type":"Number"}],["AssetsMaximum",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":3,"type":"Number"}],["AssetsTotal",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":4,"type":"Number"}],["LossUnrealized",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":5,"type":"Number"}],["TransactionMetaData",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":2,"type":"STObject"}],["CreatedNode",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":3,"type":"STObject"}],["DeletedNode",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":4,"type":"STObject"}],["ModifiedNode",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":5,"type":"STObject"}],["PreviousFields",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":6,"type":"STObject"}],["FinalFields",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":7,"type":"STObject"}],["NewFields",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":8,"type":"STObject"}],["TemplateEntry",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":9,"type":"STObject"}],["Memo",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":10,"type":"STObject"}],["SignerEntry",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":11,"type":"STObject"}],["NFToken",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":12,"type":"STObject"}],["EmitDetails",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":13,"type":"STObject"}],["Hook",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":14,"type":"STObject"}],["Permission",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":15,"type":"STObject"}],["Signer",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":16,"type":"STObject"}],["Majority",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":18,"type":"STObject"}],["DisabledValidator",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":19,"type":"STObject"}],["EmittedTxn",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":20,"type":"STObject"}],["HookExecution",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":21,"type":"STObject"}],["HookDefinition",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":22,"type":"STObject"}],["HookParameter",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":23,"type":"STObject"}],["HookGrant",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":24,"type":"STObject"}],["VoteEntry",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":25,"type":"STObject"}],["AuctionSlot",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":26,"type":"STObject"}],["AuthAccount",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":27,"type":"STObject"}],["XChainClaimProofSig",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":28,"type":"STObject"}],["XChainCreateAccountProofSig",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":29,"type":"STObject"}],["XChainClaimAttestationCollectionElement",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":30,"type":"STObject"}],["XChainCreateAccountAttestationCollectionElement",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":31,"type":"STObject"}],["PriceData",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":32,"type":"STObject"}],["Credential",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":33,"type":"STObject"}],["RawTransaction",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":34,"type":"STObject"}],["BatchSigner",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":35,"type":"STObject"}],["Book",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":36,"type":"STObject"}],["Signers",{"isSerialized":true,"isSigningField":false,"isVLEncoded":false,"nth":3,"type":"STArray"}],["SignerEntries",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":4,"type":"STArray"}],["Template",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":5,"type":"STArray"}],["Necessary",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":6,"type":"STArray"}],["Sufficient",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":7,"type":"STArray"}],["AffectedNodes",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":8,"type":"STArray"}],["Memos",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":9,"type":"STArray"}],["NFTokens",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":10,"type":"STArray"}],["Hooks",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":11,"type":"STArray"}],["VoteSlots",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":12,"type":"STArray"}],["AdditionalBooks",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":13,"type":"STArray"}],["Majorities",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":16,"type":"STArray"}],["DisabledValidators",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":17,"type":"STArray"}],["HookExecutions",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":18,"type":"STArray"}],["HookParameters",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":19,"type":"STArray"}],["HookGrants",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":20,"type":"STArray"}],["XChainClaimAttestations",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":21,"type":"STArray"}],["XChainCreateAccountAttestations",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":22,"type":"STArray"}],["PriceDataSeries",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":24,"type":"STArray"}],["AuthAccounts",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":25,"type":"STArray"}],["AuthorizeCredentials",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":26,"type":"STArray"}],["UnauthorizeCredentials",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":27,"type":"STArray"}],["AcceptedCredentials",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":28,"type":"STArray"}],["Permissions",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":29,"type":"STArray"}],["RawTransactions",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":30,"type":"STArray"}],["BatchSigners",{"isSerialized":true,"isSigningField":false,"isVLEncoded":false,"nth":31,"type":"STArray"}],["CloseResolution",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":1,"type":"UInt8"}],["Method",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":2,"type":"UInt8"}],["TransactionResult",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":3,"type":"UInt8"}],["Scale",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":4,"type":"UInt8"}],["AssetScale",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":5,"type":"UInt8"}],["TickSize",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":16,"type":"UInt8"}],["UNLModifyDisabling",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":17,"type":"UInt8"}],["HookResult",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":18,"type":"UInt8"}],["WasLockingChainSend",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":19,"type":"UInt8"}],["WithdrawalPolicy",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":20,"type":"UInt8"}],["TakerPaysCurrency",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":1,"type":"Hash160"}],["TakerPaysIssuer",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":2,"type":"Hash160"}],["TakerGetsCurrency",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":3,"type":"Hash160"}],["TakerGetsIssuer",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":4,"type":"Hash160"}],["Paths",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":1,"type":"PathSet"}],["Indexes",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":1,"type":"Vector256"}],["Hashes",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":2,"type":"Vector256"}],["Amendments",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":3,"type":"Vector256"}],["NFTokenOffers",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":4,"type":"Vector256"}],["CredentialIDs",{"isSerialized":true,"isSigningField":true,"isVLEncoded":true,"nth":5,"type":"Vector256"}],["MPTokenIssuanceID",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":1,"type":"Hash192"}],["ShareMPTID",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":2,"type":"Hash192"}],["LockingChainIssue",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":1,"type":"Issue"}],["IssuingChainIssue",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":2,"type":"Issue"}],["Asset",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":3,"type":"Issue"}],["Asset2",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":4,"type":"Issue"}],["XChainBridge",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":1,"type":"XChainBridge"}],["BaseAsset",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":1,"type":"Currency"}],["QuoteAsset",{"isSerialized":true,"isSigningField":true,"isVLEncoded":false,"nth":2,"type":"Currency"}],["Transaction",{"isSerialized":false,"isSigningField":false,"isVLEncoded":false,"nth":257,"type":"Transaction"}],["LedgerEntry",{"isSerialized":false,"isSigningField":false,"isVLEncoded":false,"nth":257,"type":"LedgerEntry"}],["Validation",{"isSerialized":false,"isSigningField":false,"isVLEncoded":false,"nth":257,"type":"Validation"}],["Metadata",{"isSerialized":false,"isSigningField":false,"isVLEncoded":false,"nth":257,"type":"Metadata"}]]'),wI={AMM:121,AccountRoot:97,Amendments:102,Bridge:105,Check:67,Credential:129,DID:73,Delegate:131,DepositPreauth:112,DirectoryNode:100,Escrow:117,FeeSettings:115,Invalid:-1,LedgerHashes:104,MPToken:127,MPTokenIssuance:126,NFTokenOffer:55,NFTokenPage:80,NegativeUNL:78,Offer:111,Oracle:128,PayChannel:120,PermissionedDomain:130,RippleState:114,SignerList:83,Ticket:84,Vault:132,XChainOwnedClaimID:113,XChainOwnedCreateAccountClaimID:116},bI={tecAMM_ACCOUNT:168,tecAMM_BALANCE:163,tecAMM_EMPTY:166,tecAMM_FAILED:164,tecAMM_INVALID_TOKENS:165,tecAMM_NOT_EMPTY:167,tecARRAY_EMPTY:190,tecARRAY_TOO_LARGE:191,tecBAD_CREDENTIALS:193,tecCANT_ACCEPT_OWN_NFTOKEN_OFFER:158,tecCLAIM:100,tecCRYPTOCONDITION_ERROR:146,tecDIR_FULL:121,tecDST_TAG_NEEDED:143,tecDUPLICATE:149,tecEMPTY_DID:187,tecEXPIRED:148,tecFAILED_PROCESSING:105,tecFROZEN:137,tecHAS_OBLIGATIONS:151,tecHOOK_REJECTED:153,tecINCOMPLETE:169,tecINSUFFICIENT_FUNDS:159,tecINSUFFICIENT_PAYMENT:161,tecINSUFFICIENT_RESERVE:141,tecINSUFF_FEE:136,tecINSUF_RESERVE_LINE:122,tecINSUF_RESERVE_OFFER:123,tecINTERNAL:144,tecINVALID_UPDATE_TIME:188,tecINVARIANT_FAILED:147,tecKILLED:150,tecLIMIT_EXCEEDED:195,tecLOCKED:192,tecMAX_SEQUENCE_REACHED:154,tecNEED_MASTER_KEY:142,tecNFTOKEN_BUY_SELL_MISMATCH:156,tecNFTOKEN_OFFER_TYPE_MISMATCH:157,tecNO_ALTERNATIVE_KEY:130,tecNO_AUTH:134,tecNO_DELEGATE_PERMISSION:198,tecNO_DST:124,tecNO_DST_INSUF_XRP:125,tecNO_ENTRY:140,tecNO_ISSUER:133,tecNO_LINE:135,tecNO_LINE_INSUF_RESERVE:126,tecNO_LINE_REDUNDANT:127,tecNO_PERMISSION:139,tecNO_REGULAR_KEY:131,tecNO_SUITABLE_NFTOKEN_PAGE:155,tecNO_TARGET:138,tecOBJECT_NOT_FOUND:160,tecOVERSIZE:145,tecOWNERS:132,tecPATH_DRY:128,tecPATH_PARTIAL:101,tecPRECISION_LOSS:197,tecPSEUDO_ACCOUNT:196,tecTOKEN_PAIR_NOT_FOUND:189,tecTOO_SOON:152,tecUNFUNDED:129,tecUNFUNDED_ADD:102,tecUNFUNDED_AMM:162,tecUNFUNDED_OFFER:103,tecUNFUNDED_PAYMENT:104,tecWRONG_ASSET:194,tecXCHAIN_ACCOUNT_CREATE_PAST:181,tecXCHAIN_ACCOUNT_CREATE_TOO_MANY:182,tecXCHAIN_BAD_CLAIM_ID:172,tecXCHAIN_BAD_PUBLIC_KEY_ACCOUNT_PAIR:185,tecXCHAIN_BAD_TRANSFER_ISSUE:170,tecXCHAIN_CLAIM_NO_QUORUM:173,tecXCHAIN_CREATE_ACCOUNT_DISABLED:186,tecXCHAIN_CREATE_ACCOUNT_NONXRP_ISSUE:175,tecXCHAIN_INSUFF_CREATE_AMOUNT:180,tecXCHAIN_NO_CLAIM_ID:171,tecXCHAIN_NO_SIGNERS_LIST:178,tecXCHAIN_PAYMENT_FAILED:183,tecXCHAIN_PROOF_UNKNOWN_KEY:174,tecXCHAIN_REWARD_MISMATCH:177,tecXCHAIN_SELF_COMMIT:184,tecXCHAIN_SENDING_ACCOUNT_MISMATCH:179,tecXCHAIN_WRONG_CHAIN:176,tefALREADY:-198,tefBAD_ADD_AUTH:-197,tefBAD_AUTH:-196,tefBAD_AUTH_MASTER:-183,tefBAD_LEDGER:-195,tefBAD_QUORUM:-185,tefBAD_SIGNATURE:-186,tefCREATED:-194,tefEXCEPTION:-193,tefFAILURE:-199,tefINTERNAL:-192,tefINVALID_LEDGER_FIX_TYPE:-178,tefINVARIANT_FAILED:-182,tefMASTER_DISABLED:-188,tefMAX_LEDGER:-187,tefNFTOKEN_IS_NOT_TRANSFERABLE:-179,tefNOT_MULTI_SIGNING:-184,tefNO_AUTH_REQUIRED:-191,tefNO_TICKET:-180,tefPAST_SEQ:-190,tefTOO_BIG:-181,tefWRONG_PRIOR:-189,telBAD_DOMAIN:-398,telBAD_PATH_COUNT:-397,telBAD_PUBLIC_KEY:-396,telCAN_NOT_QUEUE:-392,telCAN_NOT_QUEUE_BALANCE:-391,telCAN_NOT_QUEUE_BLOCKED:-389,telCAN_NOT_QUEUE_BLOCKS:-390,telCAN_NOT_QUEUE_FEE:-388,telCAN_NOT_QUEUE_FULL:-387,telENV_RPC_FAILED:-383,telFAILED_PROCESSING:-395,telINSUF_FEE_P:-394,telLOCAL_ERROR:-399,telNETWORK_ID_MAKES_TX_NON_CANONICAL:-384,telNO_DST_PARTIAL:-393,telREQUIRES_NETWORK_ID:-385,telWRONG_NETWORK:-386,temARRAY_EMPTY:-253,temARRAY_TOO_LARGE:-252,temBAD_AMM_TOKENS:-261,temBAD_AMOUNT:-298,temBAD_CURRENCY:-297,temBAD_EXPIRATION:-296,temBAD_FEE:-295,temBAD_ISSUER:-294,temBAD_LIMIT:-293,temBAD_NFTOKEN_TRANSFER_FEE:-262,temBAD_OFFER:-292,temBAD_PATH:-291,temBAD_PATH_LOOP:-290,temBAD_QUORUM:-271,temBAD_REGKEY:-289,temBAD_SEND_XRP_LIMIT:-288,temBAD_SEND_XRP_MAX:-287,temBAD_SEND_XRP_NO_DIRECT:-286,temBAD_SEND_XRP_PARTIAL:-285,temBAD_SEND_XRP_PATHS:-284,temBAD_SEQUENCE:-283,temBAD_SIGNATURE:-282,temBAD_SIGNER:-272,temBAD_SRC_ACCOUNT:-281,temBAD_TICK_SIZE:-269,temBAD_TRANSFER_FEE:-251,temBAD_TRANSFER_RATE:-280,temBAD_WEIGHT:-270,temCANNOT_PREAUTH_SELF:-267,temDISABLED:-273,temDST_IS_SRC:-279,temDST_NEEDED:-278,temEMPTY_DID:-254,temINVALID:-277,temINVALID_ACCOUNT_ID:-268,temINVALID_COUNT:-266,temINVALID_FLAG:-276,temINVALID_INNER_BATCH:-250,temMALFORMED:-299,temREDUNDANT:-275,temRIPPLE_EMPTY:-274,temSEQ_AND_TICKET:-263,temUNCERTAIN:-265,temUNKNOWN:-264,temXCHAIN_BAD_PROOF:-259,temXCHAIN_BRIDGE_BAD_ISSUES:-258,temXCHAIN_BRIDGE_BAD_MIN_ACCOUNT_CREATE_AMOUNT:-256,temXCHAIN_BRIDGE_BAD_REWARD_AMOUNT:-255,temXCHAIN_BRIDGE_NONDOOR_OWNER:-257,temXCHAIN_EQUAL_DOOR_ACCOUNTS:-260,terADDRESS_COLLISION:-86,terFUNDS_SPENT:-98,terINSUF_FEE_B:-97,terLAST:-91,terNO_ACCOUNT:-96,terNO_AMM:-87,terNO_AUTH:-95,terNO_LINE:-94,terNO_RIPPLE:-90,terOWNERS:-93,terPRE_SEQ:-92,terPRE_TICKET:-88,terQUEUED:-89,terRETRY:-99,tesSUCCESS:0},vI={AMMBid:39,AMMClawback:31,AMMCreate:35,AMMDelete:40,AMMDeposit:36,AMMVote:38,AMMWithdraw:37,AccountDelete:21,AccountSet:3,Batch:71,CheckCancel:18,CheckCash:17,CheckCreate:16,Clawback:30,CredentialAccept:59,CredentialCreate:58,CredentialDelete:60,DIDDelete:50,DIDSet:49,DelegateSet:64,DepositPreauth:19,EnableAmendment:100,EscrowCancel:4,EscrowCreate:1,EscrowFinish:2,Invalid:-1,LedgerStateFix:53,MPTokenAuthorize:57,MPTokenIssuanceCreate:54,MPTokenIssuanceDestroy:55,MPTokenIssuanceSet:56,NFTokenAcceptOffer:29,NFTokenBurn:26,NFTokenCancelOffer:28,NFTokenCreateOffer:27,NFTokenMint:25,NFTokenModify:61,OfferCancel:8,OfferCreate:7,OracleDelete:52,OracleSet:51,Payment:0,PaymentChannelClaim:15,PaymentChannelCreate:13,PaymentChannelFund:14,PermissionedDomainDelete:63,PermissionedDomainSet:62,SetFee:101,SetRegularKey:5,SignerListSet:12,TicketCreate:10,TrustSet:20,UNLModify:102,VaultClawback:70,VaultCreate:65,VaultDelete:67,VaultDeposit:68,VaultSet:66,VaultWithdraw:69,XChainAccountCreateCommit:44,XChainAddAccountCreateAttestation:46,XChainAddClaimAttestation:45,XChainClaim:43,XChainCommit:42,XChainCreateBridge:48,XChainCreateClaimID:41,XChainModifyBridge:47},EI={AccountID:8,Amount:6,Blob:7,Currency:26,Done:-1,Hash128:4,Hash160:17,Hash192:21,Hash256:5,Issue:24,LedgerEntry:10002,Metadata:10004,NotPresent:0,Number:9,PathSet:18,STArray:15,STObject:14,Transaction:10001,UInt16:1,UInt32:2,UInt384:22,UInt512:23,UInt64:3,UInt8:16,UInt96:20,Unknown:-2,Validation:10003,Vector256:19,XChainBridge:25},AI={FIELDS:mI,LEDGER_ENTRY_TYPES:wI,TRANSACTION_RESULTS:bI,TRANSACTION_TYPES:vI,TYPES:EI};var Yh={},as={},_y;function sS(){if(_y)return as;_y=1,Object.defineProperty(as,"__esModule",{value:!0}),as.BytesLookup=as.Bytes=void 0;class e{constructor(r,s,i){this.name=r,this.ordinal=s,this.ordinalWidth=i,this.bytes=new Uint8Array(i);for(let o=0;o<i;o++)this.bytes[i-o-1]=s>>>o*8&255}toJSON(){return this.name}toBytesSink(r){r.put(this.bytes)}toBytes(){return this.bytes}}as.Bytes=e;class t{constructor(r,s){this.ordinalWidth=s,Object.entries(r).forEach(([i,o])=>{this.add(i,o)})}add(r,s){if(this[r])throw new SyntaxError(`Attempted to add a value with a duplicate name "${r}". This is not allowed because it is unclear how to decode.`);if(this[s.toString()])throw new SyntaxError(`Attempted to add a duplicate value under a different name (Given name: "${r}" and previous name: "${this[s.toString()]}. This is not allowed because it is unclear how to decode.
Given value: ${s.toString()}`);this[r]=new e(r,s,this.ordinalWidth),this[s.toString()]=this[r]}from(r){return r instanceof e?r:this[r]}fromParser(r){return this.from(r.readUIntN(this.ordinalWidth).toString())}}return as.BytesLookup=t,as}var ma={},cs={},us={},Oy;function xu(){if(Oy)return us;Oy=1,Object.defineProperty(us,"__esModule",{value:!0}),us.BinarySerializer=us.BytesList=void 0;const e=Ve();class t{constructor(){this.bytesArray=[]}getLength(){return(0,e.concat)(this.bytesArray).byteLength}put(s){const i=Uint8Array.from(s);return this.bytesArray.push(i),this}toBytesSink(s){s.put(this.toBytes())}toBytes(){return(0,e.concat)(this.bytesArray)}toHex(){return(0,e.bytesToHex)(this.toBytes())}}us.BytesList=t;class n{constructor(s){this.sink=new t,this.sink=s}write(s){s.toBytesSink(this.sink)}put(s){this.sink.put(s)}writeType(s,i){this.write(s.from(i))}writeBytesList(s){s.toBytesSink(this.sink)}encodeVariableLength(s){const i=new Uint8Array(3);if(s<=192)return i[0]=s,i.slice(0,1);if(s<=12480)return s-=193,i[0]=193+(s>>>8),i[1]=s&255,i.slice(0,2);if(s<=918744)return s-=12481,i[0]=241+(s>>>16),i[1]=s>>8&255,i[2]=s&255,i.slice(0,3);throw new Error("Overflow error")}writeFieldAndValue(s,i,o=!1){const a=s.associatedType.from(i);if(a.toBytesSink===void 0||s.name===void 0)throw new Error;this.sink.put(s.header),s.isVariableLengthEncoded?this.writeLengthEncoded(a,o):a.toBytesSink(this.sink)}writeLengthEncoded(s,i=!1){const o=new t;i||s.toBytesSink(o),this.put(this.encodeVariableLength(o.getLength())),this.writeBytesList(o)}}return us.BinarySerializer=n,us}var Dy;function $n(){if(Dy)return cs;Dy=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.Comparable=cs.SerializedType=void 0;const e=xu(),t=Ve();class n{constructor(i){this.bytes=new Uint8Array(0),this.bytes=i??new Uint8Array(0)}static fromParser(i,o){throw new Error("fromParser not implemented")}static from(i){throw new Error("from not implemented")}toBytesSink(i){i.put(this.bytes)}toHex(){return(0,t.bytesToHex)(this.toBytes())}toBytes(){if(this.bytes)return this.bytes;const i=new e.BytesList;return this.toBytesSink(i),i.toBytes()}toJSON(i,o){return this.toHex()}toString(){return this.toHex()}}cs.SerializedType=n;class r extends n{lt(i){return this.compareTo(i)<0}eq(i){return this.compareTo(i)===0}gt(i){return this.compareTo(i)>0}gte(i){return this.compareTo(i)>-1}lte(i){return this.compareTo(i)<1}compareTo(i){throw new Error(`cannot compare ${this.toString()} and ${i.toString()}`)}}return cs.Comparable=r,cs}var On={},xy;function oS(){return xy||(xy=1,Object.defineProperty(On,"__esModule",{value:!0}),On.DELEGATABLE_PERMISSIONS_WIDTH=On.TRANSACTION_RESULT_WIDTH=On.TRANSACTION_TYPE_WIDTH=On.LEDGER_ENTRY_WIDTH=On.TYPE_WIDTH=void 0,On.TYPE_WIDTH=2,On.LEDGER_ENTRY_WIDTH=2,On.TRANSACTION_TYPE_WIDTH=2,On.TRANSACTION_RESULT_WIDTH=1,On.DELEGATABLE_PERMISSIONS_WIDTH=4),On}var Ly;function SI(){if(Ly)return ma;Ly=1,Object.defineProperty(ma,"__esModule",{value:!0}),ma.FieldLookup=void 0;const e=sS(),t=$n(),n=oS();function r(o,a){const u=[];return o<16?a<16?u.push(o<<4|a):u.push(o<<4,a):a<16?u.push(a,o):u.push(0,o,a),Uint8Array.from(u)}function s([o,a],u){const c=r(u,a.nth);return{name:o,nth:a.nth,isVariableLengthEncoded:a.isVLEncoded,isSerialized:a.isSerialized,isSigningField:a.isSigningField,ordinal:u<<16|a.nth,type:new e.Bytes(a.type,u,n.TYPE_WIDTH),header:c,associatedType:t.SerializedType}}class i{constructor(a,u){a.forEach(([c,l])=>{const d=u[l.type];this[c]=s([c,l],d),this[this[c].ordinal.toString()]=this[c]})}fromString(a){return this[a]}}return ma.FieldLookup=i,ma}var Cy;function aS(){return Cy||(Cy=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.BytesLookup=e.Bytes=e.FieldLookup=e.XrplDefinitionsBase=void 0;const t=sS();Object.defineProperty(e,"Bytes",{enumerable:!0,get:function(){return t.Bytes}}),Object.defineProperty(e,"BytesLookup",{enumerable:!0,get:function(){return t.BytesLookup}});const n=SI();Object.defineProperty(e,"FieldLookup",{enumerable:!0,get:function(){return n.FieldLookup}});const r=oS();class s{constructor(o,a){this.type=new t.BytesLookup(o.TYPES,r.TYPE_WIDTH),this.ledgerEntryType=new t.BytesLookup(o.LEDGER_ENTRY_TYPES,r.LEDGER_ENTRY_WIDTH),this.transactionType=new t.BytesLookup(o.TRANSACTION_TYPES,r.TRANSACTION_TYPE_WIDTH),this.transactionResult=new t.BytesLookup(o.TRANSACTION_RESULTS,r.TRANSACTION_RESULT_WIDTH),this.field=new n.FieldLookup(o.FIELDS,o.TYPES),this.transactionNames=Object.entries(o.TRANSACTION_TYPES).filter(([l,d])=>d>=0).map(([l,d])=>l),this.dataTypes={},this.associateTypes(a),this.granularPermissions={TrustlineAuthorize:65537,TrustlineFreeze:65538,TrustlineUnfreeze:65539,AccountDomainSet:65540,AccountEmailHashSet:65541,AccountMessageKeySet:65542,AccountTransferRateSet:65543,AccountTickSizeSet:65544,PaymentMint:65545,PaymentBurn:65546,MPTokenIssuanceLock:65547,MPTokenIssuanceUnlock:65548};const u=Object.fromEntries(Object.entries(o.TRANSACTION_TYPES).map(([l,d])=>[l,d+1])),c=Object.assign(Object.assign({},this.granularPermissions),u);this.delegatablePermissions=new t.BytesLookup(c,r.DELEGATABLE_PERMISSIONS_WIDTH)}associateTypes(o){this.dataTypes=Object.assign({},this.dataTypes,o),Object.values(this.field).forEach(a=>{a.associatedType=this.dataTypes[a.type.name]}),this.field.TransactionType.associatedType=this.transactionType,this.field.TransactionResult.associatedType=this.transactionResult,this.field.LedgerEntryType.associatedType=this.ledgerEntryType,this.field.PermissionValue&&(this.field.PermissionValue.associatedType=this.delegatablePermissions)}getAssociatedTypes(){return this.dataTypes}}e.XrplDefinitionsBase=s})(Yh)),Yh}var jy;function Qi(){return jy||(jy=1,(function(e){var t=ya&&ya.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.TRANSACTION_TYPES=e.TransactionType=e.TransactionResult=e.LedgerEntryType=e.Type=e.Field=e.DEFAULT_DEFINITIONS=e.XrplDefinitionsBase=e.Bytes=void 0;const n=t(AI),r=aS();Object.defineProperty(e,"XrplDefinitionsBase",{enumerable:!0,get:function(){return r.XrplDefinitionsBase}}),Object.defineProperty(e,"Bytes",{enumerable:!0,get:function(){return r.Bytes}});const s=new r.XrplDefinitionsBase(n.default,{});e.DEFAULT_DEFINITIONS=s;const i=s.type;e.Type=i;const o=s.ledgerEntryType;e.LedgerEntryType=o;const a=s.transactionType;e.TransactionType=a;const u=s.transactionResult;e.TransactionResult=u;const c=s.field;e.Field=c;const l=s.transactionNames;e.TRANSACTION_TYPES=l})(ya)),ya}var Wh={},wa={},ba={},va={},it={},Py;function fi(){if(Py)return it;Py=1,Object.defineProperty(it,"__esModule",{value:!0}),it.compare=it.equal=it.readInt64BE=it.readInt32BE=it.readUInt32BE=it.readUInt16BE=it.writeInt64BE=it.writeInt32BE=it.writeUInt32BE=it.writeUInt16BE=it.writeUInt8=void 0;function e(y,b,A){b=Number(b),y[A]=b}it.writeUInt8=e;function t(y,b,A){b=Number(b),y[A]=b>>>8,y[A+1]=b}it.writeUInt16BE=t;function n(y,b,A){y[A]=b>>>24&255,y[A+1]=b>>>16&255,y[A+2]=b>>>8&255,y[A+3]=b&255}it.writeUInt32BE=n;function r(y,b,A){new DataView(y.buffer,y.byteOffset,y.byteLength).setInt32(A,b,!1)}it.writeInt32BE=r;function s(y,b,A){new DataView(y.buffer,y.byteOffset,y.byteLength).setBigInt64(A,b,!1)}it.writeInt64BE=s;function i(y,b){return new DataView(y.buffer).getUint16(b,!1).toString(10)}it.readUInt16BE=i;function o(y,b){return new DataView(y.buffer).getUint32(b,!1).toString(10)}it.readUInt32BE=o;function a(y,b){return new DataView(y.buffer,y.byteOffset,y.byteLength).getInt32(b,!1)}it.readInt32BE=a;function u(y,b){return new DataView(y.buffer,y.byteOffset,y.byteLength).getBigInt64(b,!1)}it.readInt64BE=u;function c(y,b){const A=y instanceof ArrayBuffer?new Uint8Array(y,0):y,E=b instanceof ArrayBuffer?new Uint8Array(b,0):b;return A.byteLength!=E.byteLength?!1:g(A)&&g(E)?f(A,E)===0:p(A)&&p(E)?d(A,E)===0:l(A,E)===0}it.equal=c;function l(y,b){const A=new Uint8Array(y.buffer,y.byteOffset,y.byteLength),E=new Uint8Array(b.buffer,b.byteOffset,b.byteLength);return h(A,E)}function d(y,b){const A=new Uint16Array(y.buffer,y.byteOffset,y.byteLength/2),E=new Uint16Array(b.buffer,b.byteOffset,b.byteLength/2);return h(A,E)}function f(y,b){const A=new Uint32Array(y.buffer,y.byteOffset,y.byteLength/4),E=new Uint32Array(b.buffer,b.byteOffset,b.byteLength/4);return h(A,E)}function h(y,b){if(y.byteLength!==b.byteLength)throw new Error("Cannot compare arrays of different length");for(let A=0;A<y.length-1;A+=1){if(y[A]>b[A])return 1;if(y[A]<b[A])return-1}return 0}it.compare=h;function p(y){return y.byteOffset%2===0&&y.byteLength%2===0}function g(y){return y.byteOffset%4===0&&y.byteLength%4===0}return it}var ky;function Ld(){if(ky)return va;ky=1,Object.defineProperty(va,"__esModule",{value:!0}),va.Hash=void 0;const e=$n(),t=Ve(),n=fi();class r extends e.Comparable{constructor(i){if(super(i),this.bytes.length!==this.constructor.width)throw new Error(`Invalid Hash length ${this.bytes.byteLength}`)}static from(i){if(i instanceof this)return i;if(typeof i=="string"){if(!t.HEX_REGEX.test(i))throw new Error(`Invalid hash string ${i}`);return new this((0,t.hexToBytes)(i))}throw new Error("Cannot construct Hash from given value")}static fromParser(i,o){return new this(i.read(o??this.width))}compareTo(i){return(0,n.compare)(this.bytes,this.constructor.from(i).bytes)}toString(){return this.toHex()}nibblet(i){const o=i>0?i/2|0:0;let a=this.bytes[o];return i%2===0?a=(a&240)>>>4:a=a&15,a}}return va.Hash=r,va}var Ry;function Ig(){if(Ry)return ba;Ry=1,Object.defineProperty(ba,"__esModule",{value:!0}),ba.Hash160=void 0;const e=Ld();class t extends e.Hash{constructor(r){r&&r.byteLength===0&&(r=t.ZERO_160.bytes),super(r??t.ZERO_160.bytes)}}return ba.Hash160=t,t.width=20,t.ZERO_160=new t(new Uint8Array(t.width)),ba}var By;function Lu(){if(By)return wa;By=1,Object.defineProperty(wa,"__esModule",{value:!0}),wa.AccountID=void 0;const e=Rn(),t=Ig(),n=Ve(),r=/^[A-F0-9]{40}$/;class s extends t.Hash160{constructor(o){super(o??s.defaultAccountID.bytes)}static from(o){if(o instanceof s)return o;if(typeof o=="string")return o===""?new s:r.test(o)?new s((0,n.hexToBytes)(o)):this.fromBase58(o);throw new Error("Cannot construct AccountID from value given")}static fromBase58(o){if((0,e.isValidXAddress)(o)){const a=(0,e.xAddressToClassicAddress)(o);if(a.tag!==!1)throw new Error("Only allowed to have tag on Account or Destination");o=a.classicAddress}return new s(Uint8Array.from((0,e.decodeAccountID)(o)))}toJSON(){return this.toBase58()}toBase58(){return(0,e.encodeAccountID)(this.bytes)}}return wa.AccountID=s,s.defaultAccountID=new s(new Uint8Array(20)),wa}var ls={},Ea={},Uy;function $i(){if(Uy)return Ea;Uy=1,Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.BinaryParser=void 0;const e=Qi(),t=Ve();class n{constructor(s,i=e.DEFAULT_DEFINITIONS){this.bytes=(0,t.hexToBytes)(s),this.definitions=i}peek(){if(this.bytes.byteLength===0)throw new Error;return this.bytes[0]}skip(s){if(s>this.bytes.byteLength)throw new Error;this.bytes=this.bytes.slice(s)}read(s){if(s>this.bytes.byteLength)throw new Error;const i=this.bytes.slice(0,s);return this.skip(s),i}readUIntN(s){if(0>=s||s>4)throw new Error("invalid n");return this.read(s).reduce((i,o)=>i<<8|o)>>>0}readUInt8(){return this.readUIntN(1)}readUInt16(){return this.readUIntN(2)}readUInt32(){return this.readUIntN(4)}size(){return this.bytes.byteLength}end(s){const i=this.bytes.byteLength;return i===0||s!==void 0&&i<=s}readVariableLength(){return this.read(this.readVariableLengthLength())}readVariableLengthLength(){const s=this.readUInt8();if(s<=192)return s;if(s<=240){const i=this.readUInt8();return 193+(s-193)*256+i}else if(s<=254){const i=this.readUInt8(),o=this.readUInt8();return 12481+(s-241)*65536+i*256+o}throw new Error("Invalid variable length indicator")}readFieldOrdinal(){let s=this.readUInt8(),i=s&15;if(s>>=4,s===0&&(s=this.readUInt8(),s===0||s<16))throw new Error(`Cannot read FieldOrdinal, type_code ${s} out of range`);if(i===0&&(i=this.readUInt8(),i===0||i<16))throw new Error(`Cannot read FieldOrdinal, field_code ${i} out of range`);return s<<16|i}readField(){return this.definitions.field.fromString(this.readFieldOrdinal().toString())}readType(s){return s.fromParser(this)}typeForField(s){return s.associatedType}readFieldValue(s){const i=this.typeForField(s);if(!i)throw new Error(`unsupported: (${s.name}, ${s.type.name})`);const o=s.isVariableLengthEncoded?this.readVariableLengthLength():void 0,a=i.fromParser(this,o);if(a===void 0)throw new Error(`fromParser for (${s.name}, ${s.type.name}) -> undefined `);return a}readFieldAndValue(){const s=this.readField();return[s,this.readFieldValue(s)]}}return Ea.BinaryParser=n,Ea}var Aa={},zy;function Cd(){if(zy)return Aa;zy=1,Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.Currency=void 0;const e=Ig(),t=Ve(),n=/^0{40}$/,r=/^[A-Z0-9a-z?!@#$%^&*(){}[\]|]{3}$/,s=/^[A-F0-9]{40}$/,i=/^0{24}[\x00-\x7F]{6}0{10}$/;function o(g){const y=new Uint8Array(20);if(g!=="XRP"){const b=g.split("").map(A=>A.charCodeAt(0));y.set(b,12)}return y}function a(g){return r.test(g)}function u(g){const y=(0,t.hexToString)((0,t.bytesToHex)(g));return y==="XRP"?null:a(y)?y:null}function c(g){return s.test(g)}function l(g){return g.length===3||c(g)}function d(g){return g.byteLength===20}function f(g){return g instanceof Uint8Array?d(g):l(g)}function h(g){if(!f(g))throw new Error(`Unsupported Currency representation: ${g}`);return g.length===3?o(g):(0,t.hexToBytes)(g)}class p extends e.Hash160{constructor(y){super(y??p.XRP.bytes);const b=(0,t.bytesToHex)(this.bytes);n.test(b)?this._iso="XRP":i.test(b)?this._iso=u(this.bytes.slice(12,15)):this._iso=null}iso(){return this._iso}static from(y){if(y instanceof p)return y;if(typeof y=="string")return new p(h(y));throw new Error("Cannot construct Currency from value given")}toJSON(){const y=this.iso();return y!==null?y:(0,t.bytesToHex)(this.bytes)}}return Aa.Currency=p,p.XRP=new p(new Uint8Array(20)),Aa}var Gl={exports:{}},TI=Gl.exports,Fy;function Nn(){return Fy||(Fy=1,(function(e){(function(t){var n,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,s=Math.ceil,i=Math.floor,o="[BigNumber Error] ",a=o+"Number primitive has more than 15 significant digits: ",u=1e14,c=14,l=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,h=1e9;function p(I){var D,L,x,j=P.prototype={constructor:P,toString:null,valueOf:null},V=new P(1),Y=20,q=4,R=-7,v=21,T=-1e7,m=1e7,w=!1,N=1,C=0,O={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},B="0123456789abcdefghijklmnopqrstuvwxyz",W=!0;function P(z,K){var H,U,F,$,te,ne,ie,ce,oe=this;if(!(oe instanceof P))return new P(z,K);if(K==null){if(z&&z._isBigNumber===!0){oe.s=z.s,!z.c||z.e>m?oe.c=oe.e=null:z.e<T?oe.c=[oe.e=0]:(oe.e=z.e,oe.c=z.c.slice());return}if((ne=typeof z=="number")&&z*0==0){if(oe.s=1/z<0?(z=-z,-1):1,z===~~z){for($=0,te=z;te>=10;te/=10,$++);$>m?oe.c=oe.e=null:(oe.e=$,oe.c=[z]);return}ce=String(z)}else{if(!r.test(ce=String(z)))return x(oe,ce,ne);oe.s=ce.charCodeAt(0)==45?(ce=ce.slice(1),-1):1}($=ce.indexOf("."))>-1&&(ce=ce.replace(".","")),(te=ce.search(/e/i))>0?($<0&&($=te),$+=+ce.slice(te+1),ce=ce.substring(0,te)):$<0&&($=ce.length)}else{if(A(K,2,B.length,"Base"),K==10&&W)return oe=new P(z),Z(oe,Y+oe.e+1,q);if(ce=String(z),ne=typeof z=="number"){if(z*0!=0)return x(oe,ce,ne,K);if(oe.s=1/z<0?(ce=ce.slice(1),-1):1,P.DEBUG&&ce.replace(/^0\.0*|\./,"").length>15)throw Error(a+z)}else oe.s=ce.charCodeAt(0)===45?(ce=ce.slice(1),-1):1;for(H=B.slice(0,K),$=te=0,ie=ce.length;te<ie;te++)if(H.indexOf(U=ce.charAt(te))<0){if(U=="."){if(te>$){$=ie;continue}}else if(!F&&(ce==ce.toUpperCase()&&(ce=ce.toLowerCase())||ce==ce.toLowerCase()&&(ce=ce.toUpperCase()))){F=!0,te=-1,$=0;continue}return x(oe,String(z),ne,K)}ne=!1,ce=L(ce,K,10,oe.s),($=ce.indexOf("."))>-1?ce=ce.replace(".",""):$=ce.length}for(te=0;ce.charCodeAt(te)===48;te++);for(ie=ce.length;ce.charCodeAt(--ie)===48;);if(ce=ce.slice(te,++ie)){if(ie-=te,ne&&P.DEBUG&&ie>15&&(z>l||z!==i(z)))throw Error(a+oe.s*z);if(($=$-te-1)>m)oe.c=oe.e=null;else if($<T)oe.c=[oe.e=0];else{if(oe.e=$,oe.c=[],te=($+1)%c,$<0&&(te+=c),te<ie){for(te&&oe.c.push(+ce.slice(0,te)),ie-=c;te<ie;)oe.c.push(+ce.slice(te,te+=c));te=c-(ce=ce.slice(te)).length}else te-=ie;for(;te--;ce+="0");oe.c.push(+ce)}}else oe.c=[oe.e=0]}P.clone=p,P.ROUND_UP=0,P.ROUND_DOWN=1,P.ROUND_CEIL=2,P.ROUND_FLOOR=3,P.ROUND_HALF_UP=4,P.ROUND_HALF_DOWN=5,P.ROUND_HALF_EVEN=6,P.ROUND_HALF_CEIL=7,P.ROUND_HALF_FLOOR=8,P.EUCLID=9,P.config=P.set=function(z){var K,H;if(z!=null)if(typeof z=="object"){if(z.hasOwnProperty(K="DECIMAL_PLACES")&&(H=z[K],A(H,0,h,K),Y=H),z.hasOwnProperty(K="ROUNDING_MODE")&&(H=z[K],A(H,0,8,K),q=H),z.hasOwnProperty(K="EXPONENTIAL_AT")&&(H=z[K],H&&H.pop?(A(H[0],-h,0,K),A(H[1],0,h,K),R=H[0],v=H[1]):(A(H,-h,h,K),R=-(v=H<0?-H:H))),z.hasOwnProperty(K="RANGE"))if(H=z[K],H&&H.pop)A(H[0],-h,-1,K),A(H[1],1,h,K),T=H[0],m=H[1];else if(A(H,-h,h,K),H)T=-(m=H<0?-H:H);else throw Error(o+K+" cannot be zero: "+H);if(z.hasOwnProperty(K="CRYPTO"))if(H=z[K],H===!!H)if(H)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))w=H;else throw w=!H,Error(o+"crypto unavailable");else w=H;else throw Error(o+K+" not true or false: "+H);if(z.hasOwnProperty(K="MODULO_MODE")&&(H=z[K],A(H,0,9,K),N=H),z.hasOwnProperty(K="POW_PRECISION")&&(H=z[K],A(H,0,h,K),C=H),z.hasOwnProperty(K="FORMAT"))if(H=z[K],typeof H=="object")O=H;else throw Error(o+K+" not an object: "+H);if(z.hasOwnProperty(K="ALPHABET"))if(H=z[K],typeof H=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(H))W=H.slice(0,10)=="0123456789",B=H;else throw Error(o+K+" invalid: "+H)}else throw Error(o+"Object expected: "+z);return{DECIMAL_PLACES:Y,ROUNDING_MODE:q,EXPONENTIAL_AT:[R,v],RANGE:[T,m],CRYPTO:w,MODULO_MODE:N,POW_PRECISION:C,FORMAT:O,ALPHABET:B}},P.isBigNumber=function(z){if(!z||z._isBigNumber!==!0)return!1;if(!P.DEBUG)return!0;var K,H,U=z.c,F=z.e,$=z.s;e:if({}.toString.call(U)=="[object Array]"){if(($===1||$===-1)&&F>=-h&&F<=h&&F===i(F)){if(U[0]===0){if(F===0&&U.length===1)return!0;break e}if(K=(F+1)%c,K<1&&(K+=c),String(U[0]).length==K){for(K=0;K<U.length;K++)if(H=U[K],H<0||H>=u||H!==i(H))break e;if(H!==0)return!0}}}else if(U===null&&F===null&&($===null||$===1||$===-1))return!0;throw Error(o+"Invalid BigNumber: "+z)},P.maximum=P.max=function(){return ee(arguments,-1)},P.minimum=P.min=function(){return ee(arguments,1)},P.random=(function(){var z=9007199254740992,K=Math.random()*z&2097151?function(){return i(Math.random()*z)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(H){var U,F,$,te,ne,ie=0,ce=[],oe=new P(V);if(H==null?H=Y:A(H,0,h),te=s(H/c),w)if(crypto.getRandomValues){for(U=crypto.getRandomValues(new Uint32Array(te*=2));ie<te;)ne=U[ie]*131072+(U[ie+1]>>>11),ne>=9e15?(F=crypto.getRandomValues(new Uint32Array(2)),U[ie]=F[0],U[ie+1]=F[1]):(ce.push(ne%1e14),ie+=2);ie=te/2}else if(crypto.randomBytes){for(U=crypto.randomBytes(te*=7);ie<te;)ne=(U[ie]&31)*281474976710656+U[ie+1]*1099511627776+U[ie+2]*4294967296+U[ie+3]*16777216+(U[ie+4]<<16)+(U[ie+5]<<8)+U[ie+6],ne>=9e15?crypto.randomBytes(7).copy(U,ie):(ce.push(ne%1e14),ie+=7);ie=te/7}else throw w=!1,Error(o+"crypto unavailable");if(!w)for(;ie<te;)ne=K(),ne<9e15&&(ce[ie++]=ne%1e14);for(te=ce[--ie],H%=c,te&&H&&(ne=d[c-H],ce[ie]=i(te/ne)*ne);ce[ie]===0;ce.pop(),ie--);if(ie<0)ce=[$=0];else{for($=-1;ce[0]===0;ce.splice(0,1),$-=c);for(ie=1,ne=ce[0];ne>=10;ne/=10,ie++);ie<c&&($-=c-ie)}return oe.e=$,oe.c=ce,oe}})(),P.sum=function(){for(var z=1,K=arguments,H=new P(K[0]);z<K.length;)H=H.plus(K[z++]);return H},L=(function(){var z="0123456789";function K(H,U,F,$){for(var te,ne=[0],ie,ce=0,oe=H.length;ce<oe;){for(ie=ne.length;ie--;ne[ie]*=U);for(ne[0]+=$.indexOf(H.charAt(ce++)),te=0;te<ne.length;te++)ne[te]>F-1&&(ne[te+1]==null&&(ne[te+1]=0),ne[te+1]+=ne[te]/F|0,ne[te]%=F)}return ne.reverse()}return function(H,U,F,$,te){var ne,ie,ce,oe,de,we,me,pe,he=H.indexOf("."),fe=Y,M=q;for(he>=0&&(oe=C,C=0,H=H.replace(".",""),pe=new P(U),we=pe.pow(H.length-he),C=oe,pe.c=K(S(y(we.c),we.e,"0"),10,F,z),pe.e=pe.c.length),me=K(H,U,F,te?(ne=B,z):(ne=z,B)),ce=oe=me.length;me[--oe]==0;me.pop());if(!me[0])return ne.charAt(0);if(he<0?--ce:(we.c=me,we.e=ce,we.s=$,we=D(we,pe,fe,M,F),me=we.c,de=we.r,ce=we.e),ie=ce+fe+1,he=me[ie],oe=F/2,de=de||ie<0||me[ie+1]!=null,de=M<4?(he!=null||de)&&(M==0||M==(we.s<0?3:2)):he>oe||he==oe&&(M==4||de||M==6&&me[ie-1]&1||M==(we.s<0?8:7)),ie<1||!me[0])H=de?S(ne.charAt(1),-fe,ne.charAt(0)):ne.charAt(0);else{if(me.length=ie,de)for(--F;++me[--ie]>F;)me[ie]=0,ie||(++ce,me=[1].concat(me));for(oe=me.length;!me[--oe];);for(he=0,H="";he<=oe;H+=ne.charAt(me[he++]));H=S(H,ce,ne.charAt(0))}return H}})(),D=(function(){function z(U,F,$){var te,ne,ie,ce,oe=0,de=U.length,we=F%f,me=F/f|0;for(U=U.slice();de--;)ie=U[de]%f,ce=U[de]/f|0,te=me*ie+ce*we,ne=we*ie+te%f*f+oe,oe=(ne/$|0)+(te/f|0)+me*ce,U[de]=ne%$;return oe&&(U=[oe].concat(U)),U}function K(U,F,$,te){var ne,ie;if($!=te)ie=$>te?1:-1;else for(ne=ie=0;ne<$;ne++)if(U[ne]!=F[ne]){ie=U[ne]>F[ne]?1:-1;break}return ie}function H(U,F,$,te){for(var ne=0;$--;)U[$]-=ne,ne=U[$]<F[$]?1:0,U[$]=ne*te+U[$]-F[$];for(;!U[0]&&U.length>1;U.splice(0,1));}return function(U,F,$,te,ne){var ie,ce,oe,de,we,me,pe,he,fe,M,k,G,re,ae,le,ge,_e,Ie=U.s==F.s?1:-1,ve=U.c,Te=F.c;if(!ve||!ve[0]||!Te||!Te[0])return new P(!U.s||!F.s||(ve?Te&&ve[0]==Te[0]:!Te)?NaN:ve&&ve[0]==0||!Te?Ie*0:Ie/0);for(he=new P(Ie),fe=he.c=[],ce=U.e-F.e,Ie=$+ce+1,ne||(ne=u,ce=g(U.e/c)-g(F.e/c),Ie=Ie/c|0),oe=0;Te[oe]==(ve[oe]||0);oe++);if(Te[oe]>(ve[oe]||0)&&ce--,Ie<0)fe.push(1),de=!0;else{for(ae=ve.length,ge=Te.length,oe=0,Ie+=2,we=i(ne/(Te[0]+1)),we>1&&(Te=z(Te,we,ne),ve=z(ve,we,ne),ge=Te.length,ae=ve.length),re=ge,M=ve.slice(0,ge),k=M.length;k<ge;M[k++]=0);_e=Te.slice(),_e=[0].concat(_e),le=Te[0],Te[1]>=ne/2&&le++;do{if(we=0,ie=K(Te,M,ge,k),ie<0){if(G=M[0],ge!=k&&(G=G*ne+(M[1]||0)),we=i(G/le),we>1)for(we>=ne&&(we=ne-1),me=z(Te,we,ne),pe=me.length,k=M.length;K(me,M,pe,k)==1;)we--,H(me,ge<pe?_e:Te,pe,ne),pe=me.length,ie=1;else we==0&&(ie=we=1),me=Te.slice(),pe=me.length;if(pe<k&&(me=[0].concat(me)),H(M,me,k,ne),k=M.length,ie==-1)for(;K(Te,M,ge,k)<1;)we++,H(M,ge<k?_e:Te,k,ne),k=M.length}else ie===0&&(we++,M=[0]);fe[oe++]=we,M[0]?M[k++]=ve[re]||0:(M=[ve[re]],k=1)}while((re++<ae||M[0]!=null)&&Ie--);de=M[0]!=null,fe[0]||fe.splice(0,1)}if(ne==u){for(oe=1,Ie=fe[0];Ie>=10;Ie/=10,oe++);Z(he,$+(he.e=oe+ce*c-1)+1,te,de)}else he.e=ce,he.r=+de;return he}})();function X(z,K,H,U){var F,$,te,ne,ie;if(H==null?H=q:A(H,0,8),!z.c)return z.toString();if(F=z.c[0],te=z.e,K==null)ie=y(z.c),ie=U==1||U==2&&(te<=R||te>=v)?_(ie,te):S(ie,te,"0");else if(z=Z(new P(z),K,H),$=z.e,ie=y(z.c),ne=ie.length,U==1||U==2&&(K<=$||$<=R)){for(;ne<K;ie+="0",ne++);ie=_(ie,$)}else if(K-=te+(U===2&&$>te),ie=S(ie,$,"0"),$+1>ne){if(--K>0)for(ie+=".";K--;ie+="0");}else if(K+=$-ne,K>0)for($+1==ne&&(ie+=".");K--;ie+="0");return z.s<0&&F?"-"+ie:ie}function ee(z,K){for(var H,U,F=1,$=new P(z[0]);F<z.length;F++)U=new P(z[F]),(!U.s||(H=b($,U))===K||H===0&&$.s===K)&&($=U);return $}function se(z,K,H){for(var U=1,F=K.length;!K[--F];K.pop());for(F=K[0];F>=10;F/=10,U++);return(H=U+H*c-1)>m?z.c=z.e=null:H<T?z.c=[z.e=0]:(z.e=H,z.c=K),z}x=(function(){var z=/^(-?)0([xbo])(?=\w[\w.]*$)/i,K=/^([^.]+)\.$/,H=/^\.([^.]+)$/,U=/^-?(Infinity|NaN)$/,F=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function($,te,ne,ie){var ce,oe=ne?te:te.replace(F,"");if(U.test(oe))$.s=isNaN(oe)?null:oe<0?-1:1;else{if(!ne&&(oe=oe.replace(z,function(de,we,me){return ce=(me=me.toLowerCase())=="x"?16:me=="b"?2:8,!ie||ie==ce?we:de}),ie&&(ce=ie,oe=oe.replace(K,"$1").replace(H,"0.$1")),te!=oe))return new P(oe,ce);if(P.DEBUG)throw Error(o+"Not a"+(ie?" base "+ie:"")+" number: "+te);$.s=null}$.c=$.e=null}})();function Z(z,K,H,U){var F,$,te,ne,ie,ce,oe,de=z.c,we=d;if(de){e:{for(F=1,ne=de[0];ne>=10;ne/=10,F++);if($=K-F,$<0)$+=c,te=K,ie=de[ce=0],oe=i(ie/we[F-te-1]%10);else if(ce=s(($+1)/c),ce>=de.length)if(U){for(;de.length<=ce;de.push(0));ie=oe=0,F=1,$%=c,te=$-c+1}else break e;else{for(ie=ne=de[ce],F=1;ne>=10;ne/=10,F++);$%=c,te=$-c+F,oe=te<0?0:i(ie/we[F-te-1]%10)}if(U=U||K<0||de[ce+1]!=null||(te<0?ie:ie%we[F-te-1]),U=H<4?(oe||U)&&(H==0||H==(z.s<0?3:2)):oe>5||oe==5&&(H==4||U||H==6&&($>0?te>0?ie/we[F-te]:0:de[ce-1])%10&1||H==(z.s<0?8:7)),K<1||!de[0])return de.length=0,U?(K-=z.e+1,de[0]=we[(c-K%c)%c],z.e=-K||0):de[0]=z.e=0,z;if($==0?(de.length=ce,ne=1,ce--):(de.length=ce+1,ne=we[c-$],de[ce]=te>0?i(ie/we[F-te]%we[te])*ne:0),U)for(;;)if(ce==0){for($=1,te=de[0];te>=10;te/=10,$++);for(te=de[0]+=ne,ne=1;te>=10;te/=10,ne++);$!=ne&&(z.e++,de[0]==u&&(de[0]=1));break}else{if(de[ce]+=ne,de[ce]!=u)break;de[ce--]=0,ne=1}for($=de.length;de[--$]===0;de.pop());}z.e>m?z.c=z.e=null:z.e<T&&(z.c=[z.e=0])}return z}function J(z){var K,H=z.e;return H===null?z.toString():(K=y(z.c),K=H<=R||H>=v?_(K,H):S(K,H,"0"),z.s<0?"-"+K:K)}return j.absoluteValue=j.abs=function(){var z=new P(this);return z.s<0&&(z.s=1),z},j.comparedTo=function(z,K){return b(this,new P(z,K))},j.decimalPlaces=j.dp=function(z,K){var H,U,F,$=this;if(z!=null)return A(z,0,h),K==null?K=q:A(K,0,8),Z(new P($),z+$.e+1,K);if(!(H=$.c))return null;if(U=((F=H.length-1)-g(this.e/c))*c,F=H[F])for(;F%10==0;F/=10,U--);return U<0&&(U=0),U},j.dividedBy=j.div=function(z,K){return D(this,new P(z,K),Y,q)},j.dividedToIntegerBy=j.idiv=function(z,K){return D(this,new P(z,K),0,1)},j.exponentiatedBy=j.pow=function(z,K){var H,U,F,$,te,ne,ie,ce,oe,de=this;if(z=new P(z),z.c&&!z.isInteger())throw Error(o+"Exponent not an integer: "+J(z));if(K!=null&&(K=new P(K)),ne=z.e>14,!de.c||!de.c[0]||de.c[0]==1&&!de.e&&de.c.length==1||!z.c||!z.c[0])return oe=new P(Math.pow(+J(de),ne?z.s*(2-E(z)):+J(z))),K?oe.mod(K):oe;if(ie=z.s<0,K){if(K.c?!K.c[0]:!K.s)return new P(NaN);U=!ie&&de.isInteger()&&K.isInteger(),U&&(de=de.mod(K))}else{if(z.e>9&&(de.e>0||de.e<-1||(de.e==0?de.c[0]>1||ne&&de.c[1]>=24e7:de.c[0]<8e13||ne&&de.c[0]<=9999975e7)))return $=de.s<0&&E(z)?-0:0,de.e>-1&&($=1/$),new P(ie?1/$:$);C&&($=s(C/c+2))}for(ne?(H=new P(.5),ie&&(z.s=1),ce=E(z)):(F=Math.abs(+J(z)),ce=F%2),oe=new P(V);;){if(ce){if(oe=oe.times(de),!oe.c)break;$?oe.c.length>$&&(oe.c.length=$):U&&(oe=oe.mod(K))}if(F){if(F=i(F/2),F===0)break;ce=F%2}else if(z=z.times(H),Z(z,z.e+1,1),z.e>14)ce=E(z);else{if(F=+J(z),F===0)break;ce=F%2}de=de.times(de),$?de.c&&de.c.length>$&&(de.c.length=$):U&&(de=de.mod(K))}return U?oe:(ie&&(oe=V.div(oe)),K?oe.mod(K):$?Z(oe,C,q,te):oe)},j.integerValue=function(z){var K=new P(this);return z==null?z=q:A(z,0,8),Z(K,K.e+1,z)},j.isEqualTo=j.eq=function(z,K){return b(this,new P(z,K))===0},j.isFinite=function(){return!!this.c},j.isGreaterThan=j.gt=function(z,K){return b(this,new P(z,K))>0},j.isGreaterThanOrEqualTo=j.gte=function(z,K){return(K=b(this,new P(z,K)))===1||K===0},j.isInteger=function(){return!!this.c&&g(this.e/c)>this.c.length-2},j.isLessThan=j.lt=function(z,K){return b(this,new P(z,K))<0},j.isLessThanOrEqualTo=j.lte=function(z,K){return(K=b(this,new P(z,K)))===-1||K===0},j.isNaN=function(){return!this.s},j.isNegative=function(){return this.s<0},j.isPositive=function(){return this.s>0},j.isZero=function(){return!!this.c&&this.c[0]==0},j.minus=function(z,K){var H,U,F,$,te=this,ne=te.s;if(z=new P(z,K),K=z.s,!ne||!K)return new P(NaN);if(ne!=K)return z.s=-K,te.plus(z);var ie=te.e/c,ce=z.e/c,oe=te.c,de=z.c;if(!ie||!ce){if(!oe||!de)return oe?(z.s=-K,z):new P(de?te:NaN);if(!oe[0]||!de[0])return de[0]?(z.s=-K,z):new P(oe[0]?te:q==3?-0:0)}if(ie=g(ie),ce=g(ce),oe=oe.slice(),ne=ie-ce){for(($=ne<0)?(ne=-ne,F=oe):(ce=ie,F=de),F.reverse(),K=ne;K--;F.push(0));F.reverse()}else for(U=($=(ne=oe.length)<(K=de.length))?ne:K,ne=K=0;K<U;K++)if(oe[K]!=de[K]){$=oe[K]<de[K];break}if($&&(F=oe,oe=de,de=F,z.s=-z.s),K=(U=de.length)-(H=oe.length),K>0)for(;K--;oe[H++]=0);for(K=u-1;U>ne;){if(oe[--U]<de[U]){for(H=U;H&&!oe[--H];oe[H]=K);--oe[H],oe[U]+=u}oe[U]-=de[U]}for(;oe[0]==0;oe.splice(0,1),--ce);return oe[0]?se(z,oe,ce):(z.s=q==3?-1:1,z.c=[z.e=0],z)},j.modulo=j.mod=function(z,K){var H,U,F=this;return z=new P(z,K),!F.c||!z.s||z.c&&!z.c[0]?new P(NaN):!z.c||F.c&&!F.c[0]?new P(F):(N==9?(U=z.s,z.s=1,H=D(F,z,0,3),z.s=U,H.s*=U):H=D(F,z,0,N),z=F.minus(H.times(z)),!z.c[0]&&N==1&&(z.s=F.s),z)},j.multipliedBy=j.times=function(z,K){var H,U,F,$,te,ne,ie,ce,oe,de,we,me,pe,he,fe,M=this,k=M.c,G=(z=new P(z,K)).c;if(!k||!G||!k[0]||!G[0])return!M.s||!z.s||k&&!k[0]&&!G||G&&!G[0]&&!k?z.c=z.e=z.s=null:(z.s*=M.s,!k||!G?z.c=z.e=null:(z.c=[0],z.e=0)),z;for(U=g(M.e/c)+g(z.e/c),z.s*=M.s,ie=k.length,de=G.length,ie<de&&(pe=k,k=G,G=pe,F=ie,ie=de,de=F),F=ie+de,pe=[];F--;pe.push(0));for(he=u,fe=f,F=de;--F>=0;){for(H=0,we=G[F]%fe,me=G[F]/fe|0,te=ie,$=F+te;$>F;)ce=k[--te]%fe,oe=k[te]/fe|0,ne=me*ce+oe*we,ce=we*ce+ne%fe*fe+pe[$]+H,H=(ce/he|0)+(ne/fe|0)+me*oe,pe[$--]=ce%he;pe[$]=H}return H?++U:pe.splice(0,1),se(z,pe,U)},j.negated=function(){var z=new P(this);return z.s=-z.s||null,z},j.plus=function(z,K){var H,U=this,F=U.s;if(z=new P(z,K),K=z.s,!F||!K)return new P(NaN);if(F!=K)return z.s=-K,U.minus(z);var $=U.e/c,te=z.e/c,ne=U.c,ie=z.c;if(!$||!te){if(!ne||!ie)return new P(F/0);if(!ne[0]||!ie[0])return ie[0]?z:new P(ne[0]?U:F*0)}if($=g($),te=g(te),ne=ne.slice(),F=$-te){for(F>0?(te=$,H=ie):(F=-F,H=ne),H.reverse();F--;H.push(0));H.reverse()}for(F=ne.length,K=ie.length,F-K<0&&(H=ie,ie=ne,ne=H,K=F),F=0;K;)F=(ne[--K]=ne[K]+ie[K]+F)/u|0,ne[K]=u===ne[K]?0:ne[K]%u;return F&&(ne=[F].concat(ne),++te),se(z,ne,te)},j.precision=j.sd=function(z,K){var H,U,F,$=this;if(z!=null&&z!==!!z)return A(z,1,h),K==null?K=q:A(K,0,8),Z(new P($),z,K);if(!(H=$.c))return null;if(F=H.length-1,U=F*c+1,F=H[F]){for(;F%10==0;F/=10,U--);for(F=H[0];F>=10;F/=10,U++);}return z&&$.e+1>U&&(U=$.e+1),U},j.shiftedBy=function(z){return A(z,-l,l),this.times("1e"+z)},j.squareRoot=j.sqrt=function(){var z,K,H,U,F,$=this,te=$.c,ne=$.s,ie=$.e,ce=Y+4,oe=new P("0.5");if(ne!==1||!te||!te[0])return new P(!ne||ne<0&&(!te||te[0])?NaN:te?$:1/0);if(ne=Math.sqrt(+J($)),ne==0||ne==1/0?(K=y(te),(K.length+ie)%2==0&&(K+="0"),ne=Math.sqrt(+K),ie=g((ie+1)/2)-(ie<0||ie%2),ne==1/0?K="5e"+ie:(K=ne.toExponential(),K=K.slice(0,K.indexOf("e")+1)+ie),H=new P(K)):H=new P(ne+""),H.c[0]){for(ie=H.e,ne=ie+ce,ne<3&&(ne=0);;)if(F=H,H=oe.times(F.plus(D($,F,ce,1))),y(F.c).slice(0,ne)===(K=y(H.c)).slice(0,ne))if(H.e<ie&&--ne,K=K.slice(ne-3,ne+1),K=="9999"||!U&&K=="4999"){if(!U&&(Z(F,F.e+Y+2,0),F.times(F).eq($))){H=F;break}ce+=4,ne+=4,U=1}else{(!+K||!+K.slice(1)&&K.charAt(0)=="5")&&(Z(H,H.e+Y+2,1),z=!H.times(H).eq($));break}}return Z(H,H.e+Y+1,q,z)},j.toExponential=function(z,K){return z!=null&&(A(z,0,h),z++),X(this,z,K,1)},j.toFixed=function(z,K){return z!=null&&(A(z,0,h),z=z+this.e+1),X(this,z,K)},j.toFormat=function(z,K,H){var U,F=this;if(H==null)z!=null&&K&&typeof K=="object"?(H=K,K=null):z&&typeof z=="object"?(H=z,z=K=null):H=O;else if(typeof H!="object")throw Error(o+"Argument not an object: "+H);if(U=F.toFixed(z,K),F.c){var $,te=U.split("."),ne=+H.groupSize,ie=+H.secondaryGroupSize,ce=H.groupSeparator||"",oe=te[0],de=te[1],we=F.s<0,me=we?oe.slice(1):oe,pe=me.length;if(ie&&($=ne,ne=ie,ie=$,pe-=$),ne>0&&pe>0){for($=pe%ne||ne,oe=me.substr(0,$);$<pe;$+=ne)oe+=ce+me.substr($,ne);ie>0&&(oe+=ce+me.slice($)),we&&(oe="-"+oe)}U=de?oe+(H.decimalSeparator||"")+((ie=+H.fractionGroupSize)?de.replace(new RegExp("\\d{"+ie+"}\\B","g"),"$&"+(H.fractionGroupSeparator||"")):de):oe}return(H.prefix||"")+U+(H.suffix||"")},j.toFraction=function(z){var K,H,U,F,$,te,ne,ie,ce,oe,de,we,me=this,pe=me.c;if(z!=null&&(ne=new P(z),!ne.isInteger()&&(ne.c||ne.s!==1)||ne.lt(V)))throw Error(o+"Argument "+(ne.isInteger()?"out of range: ":"not an integer: ")+J(ne));if(!pe)return new P(me);for(K=new P(V),ce=H=new P(V),U=ie=new P(V),we=y(pe),$=K.e=we.length-me.e-1,K.c[0]=d[(te=$%c)<0?c+te:te],z=!z||ne.comparedTo(K)>0?$>0?K:ce:ne,te=m,m=1/0,ne=new P(we),ie.c[0]=0;oe=D(ne,K,0,1),F=H.plus(oe.times(U)),F.comparedTo(z)!=1;)H=U,U=F,ce=ie.plus(oe.times(F=ce)),ie=F,K=ne.minus(oe.times(F=K)),ne=F;return F=D(z.minus(H),U,0,1),ie=ie.plus(F.times(ce)),H=H.plus(F.times(U)),ie.s=ce.s=me.s,$=$*2,de=D(ce,U,$,q).minus(me).abs().comparedTo(D(ie,H,$,q).minus(me).abs())<1?[ce,U]:[ie,H],m=te,de},j.toNumber=function(){return+J(this)},j.toPrecision=function(z,K){return z!=null&&A(z,1,h),X(this,z,K,2)},j.toString=function(z){var K,H=this,U=H.s,F=H.e;return F===null?U?(K="Infinity",U<0&&(K="-"+K)):K="NaN":(z==null?K=F<=R||F>=v?_(y(H.c),F):S(y(H.c),F,"0"):z===10&&W?(H=Z(new P(H),Y+F+1,q),K=S(y(H.c),H.e,"0")):(A(z,2,B.length,"Base"),K=L(S(y(H.c),F,"0"),10,z,U,!0)),U<0&&H.c[0]&&(K="-"+K)),K},j.valueOf=j.toJSON=function(){return J(this)},j._isBigNumber=!0,I!=null&&P.set(I),P}function g(I){var D=I|0;return I>0||I===D?D:D-1}function y(I){for(var D,L,x=1,j=I.length,V=I[0]+"";x<j;){for(D=I[x++]+"",L=c-D.length;L--;D="0"+D);V+=D}for(j=V.length;V.charCodeAt(--j)===48;);return V.slice(0,j+1||1)}function b(I,D){var L,x,j=I.c,V=D.c,Y=I.s,q=D.s,R=I.e,v=D.e;if(!Y||!q)return null;if(L=j&&!j[0],x=V&&!V[0],L||x)return L?x?0:-q:Y;if(Y!=q)return Y;if(L=Y<0,x=R==v,!j||!V)return x?0:!j^L?1:-1;if(!x)return R>v^L?1:-1;for(q=(R=j.length)<(v=V.length)?R:v,Y=0;Y<q;Y++)if(j[Y]!=V[Y])return j[Y]>V[Y]^L?1:-1;return R==v?0:R>v^L?1:-1}function A(I,D,L,x){if(I<D||I>L||I!==i(I))throw Error(o+(x||"Argument")+(typeof I=="number"?I<D||I>L?" out of range: ":" not an integer: ":" not a primitive number: ")+String(I))}function E(I){var D=I.c.length-1;return g(I.e/c)==D&&I.c[D]%2!=0}function _(I,D){return(I.length>1?I.charAt(0)+"."+I.slice(1):I)+(D<0?"e":"e+")+D}function S(I,D,L){var x,j;if(D<0){for(j=L+".";++D;j+=L);I=j+I}else if(x=I.length,++D>x){for(j=L,D-=x;--D;j+=L);I+=j}else D<x&&(I=I.slice(0,D)+"."+I.slice(D));return I}n=p(),n.default=n.BigNumber=n,e.exports?e.exports=n:(t||(t=typeof self<"u"&&self?self:window),t.BigNumber=n)})(TI)})(Gl)),Gl.exports}var Sa={},Hy;function _g(){if(Hy)return Sa;Hy=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.Hash192=void 0;const e=Ld();class t extends e.Hash{constructor(r){r&&r.byteLength===0&&(r=t.ZERO_192.bytes),super(r??t.ZERO_192.bytes)}}return Sa.Hash192=t,t.width=24,t.ZERO_192=new t(new Uint8Array(t.width)),Sa}var Vy;function MI(){if(Vy)return ls;Vy=1;var e=ls&&ls.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(ls,"__esModule",{value:!0}),ls.Amount=void 0;const t=$i(),n=Lu(),r=Cd(),s=$n(),i=e(Nn()),o=Ve(),a=fi(),u=_g(),c=-96,l=80,d=16,f=new i.default("1e17"),h=new i.default("1e-6"),p=BigInt(4294967295),g=BigInt(9223372036854776e3);i.default.config({EXPONENTIAL_AT:[c-d,l+d]});function y(E){const _=Object.keys(E).sort();return _.length===3&&_[0]==="currency"&&_[1]==="issuer"&&_[2]==="value"}function b(E){const _=Object.keys(E).sort();return _.length===2&&_[0]==="mpt_issuance_id"&&_[1]==="value"}class A extends s.SerializedType{constructor(_){super(_??A.defaultAmount.bytes)}static from(_){if(_ instanceof A)return _;let S=new Uint8Array(8);if(typeof _=="string"){A.assertXrpIsValid(_);const I=BigInt(_),D=[new Uint8Array(4),new Uint8Array(4)];return(0,a.writeUInt32BE)(D[0],Number(I>>BigInt(32)),0),(0,a.writeUInt32BE)(D[1],Number(I&BigInt(p)),0),S=(0,o.concat)(D),S[0]|=64,new A(S)}if(y(_)){const I=new i.default(_.value);if(A.assertIouIsValid(I),I.isZero())S[0]|=128;else{const x=I.times(`1e${-((I.e||0)-15)}`).abs().toString(),j=BigInt(x),V=[new Uint8Array(4),new Uint8Array(4)];(0,a.writeUInt32BE)(V[0],Number(j>>BigInt(32)),0),(0,a.writeUInt32BE)(V[1],Number(j&BigInt(p)),0),S=(0,o.concat)(V),S[0]|=128,I.gt(new i.default(0))&&(S[0]|=64);const q=97+((I.e||0)-15);S[0]|=q>>>2,S[1]|=(q&3)<<6}const D=r.Currency.from(_.currency).toBytes(),L=n.AccountID.from(_.issuer).toBytes();return new A((0,o.concat)([S,D,L]))}if(b(_)){A.assertMptIsValid(_.value);let I=new Uint8Array(1);I[0]|=96;const D=BigInt(_.value),L=[new Uint8Array(4),new Uint8Array(4)];(0,a.writeUInt32BE)(L[0],Number(D>>BigInt(32)),0),(0,a.writeUInt32BE)(L[1],Number(D&BigInt(p)),0),S=(0,o.concat)(L);const x=u.Hash192.from(_.mpt_issuance_id).toBytes();return new A((0,o.concat)([I,S,x]))}throw new Error("Invalid type to construct an Amount")}static fromParser(_){if(_.peek()&128)return new A(_.read(48));const D=_.peek()&32?33:8;return new A(_.read(D))}toJSON(){if(this.isNative()){const _=this.bytes,I=_[0]&64?"":"-";_[0]&=63;const D=BigInt((0,a.readUInt32BE)(_.slice(0,4),0)),L=BigInt((0,a.readUInt32BE)(_.slice(4),0)),x=D<<BigInt(32)|L;return`${I}${x.toString()}`}if(this.isIOU()){const _=new t.BinaryParser(this.toString()),S=_.read(8),I=r.Currency.fromParser(_),D=n.AccountID.fromParser(_),L=S[0],x=S[1],V=L&64?"":"-",Y=((L&63)<<2)+((x&255)>>6)-97;S[0]=0,S[1]&=63;const q=new i.default(`${V}0x${(0,o.bytesToHex)(S)}`).times(`1e${Y}`);return A.assertIouIsValid(q),{value:q.toString(),currency:I.toJSON(),issuer:D.toJSON()}}if(this.isMPT()){const _=new t.BinaryParser(this.toString()),S=_.read(1),I=_.read(8),D=u.Hash192.fromParser(_),x=S[0]&64?"":"-",j=BigInt((0,a.readUInt32BE)(I.slice(0,4),0)),V=BigInt((0,a.readUInt32BE)(I.slice(4),0)),Y=j<<BigInt(32)|V;return{value:`${x}${Y.toString()}`,mpt_issuance_id:D.toString()}}throw new Error("Invalid amount to construct JSON")}static assertXrpIsValid(_){if(_.indexOf(".")!==-1)throw new Error(`${_.toString()} is an illegal amount`);const S=new i.default(_);if(!S.isZero()&&(S.lt(h)||S.gt(f)))throw new Error(`${_.toString()} is an illegal amount`)}static assertIouIsValid(_){if(!_.isZero()){const S=_.precision(),I=(_.e||0)-15;if(S>d||I>l||I<c)throw new Error("Decimal precision out of range");this.verifyNoDecimal(_)}}static assertMptIsValid(_){if(_.indexOf(".")!==-1)throw new Error(`${_.toString()} is an illegal amount`);const S=new i.default(_);if(!S.isZero()){if(S<(0,i.default)(0))throw new Error(`${_.toString()} is an illegal amount`);if(Number(BigInt(_)&BigInt(g))!=0)throw new Error(`${_.toString()} is an illegal amount`)}}static verifyNoDecimal(_){if(_.times(`1e${-((_.e||0)-15)}`).abs().toString().indexOf(".")!==-1)throw new Error("Decimal place found in integerNumberString")}isNative(){return(this.bytes[0]&128)===0&&(this.bytes[0]&32)===0}isMPT(){return(this.bytes[0]&128)===0&&(this.bytes[0]&32)!==0}isIOU(){return(this.bytes[0]&128)!==0}}return ls.Amount=A,A.defaultAmount=new A((0,o.hexToBytes)("4000000000000000")),ls}var Ta={},qy;function NI(){if(qy)return Ta;qy=1,Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.Blob=void 0;const e=$n(),t=Ve();class n extends e.SerializedType{constructor(s){super(s)}static fromParser(s,i){return new n(s.read(i))}static from(s){if(s instanceof n)return s;if(typeof s=="string"){if(!/^[A-F0-9]*$/iu.test(s))throw new Error("Cannot construct Blob from a non-hex string");return new n((0,t.hexToBytes)(s))}throw new Error("Cannot construct Blob from value given")}}return Ta.Blob=n,Ta}var Ma={},Gy;function II(){if(Gy)return Ma;Gy=1,Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.Hash128=void 0;const e=Ld(),t=Ve();class n extends e.Hash{constructor(s){s&&s.byteLength===0&&(s=n.ZERO_128.bytes),super(s??n.ZERO_128.bytes)}toHex(){const s=(0,t.bytesToHex)(this.toBytes());return/^0+$/.exec(s)?"":s}}return Ma.Hash128=n,n.width=16,n.ZERO_128=new n(new Uint8Array(n.width)),Ma}var Na={},Ky;function Og(){if(Ky)return Na;Ky=1,Object.defineProperty(Na,"__esModule",{value:!0}),Na.Hash256=void 0;const e=Ld();class t extends e.Hash{constructor(r){super(r??t.ZERO_256.bytes)}}return Na.Hash256=t,t.width=32,t.ZERO_256=new t(new Uint8Array(t.width)),Na}var Ia={},Yy;function cS(){if(Yy)return Ia;Yy=1,Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.Issue=void 0;const e=Ve(),t=$i(),n=Lu(),r=Cd(),s=$n(),i=_g(),o=fi();function a(d){const f=Object.keys(d).sort(),h=f.length===1&&f[0]==="currency",p=f.length===2&&f[0]==="currency"&&f[1]==="issuer",g=f.length===1&&f[0]==="mpt_issuance_id";return h||p||g}const u=44,c=n.AccountID.from("0000000000000000000000000000000000000001");class l extends s.SerializedType{constructor(f){super(f??l.XRP_ISSUE.bytes)}static from(f){if(f instanceof l)return f;if(a(f)){if(f.currency){const h=r.Currency.from(f.currency.toString()).toBytes();if(f.issuer){const p=n.AccountID.from(f.issuer.toString()).toBytes();return new l((0,e.concat)([h,p]))}return new l(h)}if(f.mpt_issuance_id){const h=i.Hash192.from(f.mpt_issuance_id.toString()).toBytes(),p=h.slice(4),g=Number((0,o.readUInt32BE)(h.slice(0,4),0)),y=new Uint8Array(4);return new DataView(y.buffer).setUint32(0,g,!0),new l((0,e.concat)([p,c.toBytes(),y]))}}throw new Error("Invalid type to construct an Issue")}static fromParser(f){const h=f.read(20);if(new r.Currency(h).toJSON()==="XRP")return new l(h);const p=new n.AccountID(f.read(20));if(c.toHex()===p.toHex()){const g=f.read(4);return new l((0,e.concat)([h,c.toBytes(),g]))}return new l((0,e.concat)([h,p.toBytes()]))}toJSON(){if(this.toBytes().length===u){const g=this.toBytes().slice(0,20),y=new DataView(this.toBytes().slice(40).buffer).getUint32(0,!0),b=new Uint8Array(4);return(0,o.writeUInt32BE)(b,y,0),{mpt_issuance_id:(0,e.bytesToHex)((0,e.concat)([b,g]))}}const f=new t.BinaryParser(this.toString()),h=r.Currency.fromParser(f);if(h.toJSON()==="XRP")return{currency:h.toJSON()};const p=n.AccountID.fromParser(f);return{currency:h.toJSON(),issuer:p.toJSON()}}}return Ia.Issue=l,l.XRP_ISSUE=new l(new Uint8Array(20)),Ia}var _a={},Wy;function _I(){if(Wy)return _a;Wy=1,Object.defineProperty(_a,"__esModule",{value:!0}),_a.STNumber=void 0;const e=$n(),t=fi(),n=BigInt("1000000000000000"),r=BigInt("9999999999999999"),s=-32768,i=32768,o=-2147483648;function a(l){const f=/^([-+]?)([0-9]+)(?:\.([0-9]+))?(?:[eE]([+-]?[0-9]+))?$/.exec(l);if(!f)throw new Error(`Unable to parse number from string: ${l}`);const[,h,p,g,y]=f;let A=p.replace(/^0+(?=\d)/,"")||"0",E=0;g&&(A+=g,E-=g.length),y&&(E+=parseInt(y,10));let _=BigInt(A);h==="-"&&(_=-_);const S=_<BigInt(0);return{mantissa:_,exponent:E,isNegative:S}}function u(l,d){let f=l<BigInt(0)?-l:l;const h=l<BigInt(0);for(;f!==BigInt(0)&&f<n&&d>s;)d-=1,f*=BigInt(10);for(;f>r;){if(d>=i)throw new Error("Mantissa and exponent are too large");d+=1,f/=BigInt(10)}return h&&(f=-f),{mantissa:f,exponent:d}}class c extends e.SerializedType{constructor(d){const f=d??c.defaultBytes;if(!(f instanceof Uint8Array)||f.length!==12)throw new Error(`STNumber must be constructed from a 12-byte Uint8Array, got ${f?.length}`);super(f)}static from(d){if(d instanceof c)return d;if(typeof d=="string")return c.fromValue(d);throw new Error("STNumber.from: Only string or STNumber instance is supported")}static fromValue(d){const{mantissa:f,exponent:h,isNegative:p}=a(d);let g,y;f===BigInt(0)&&h===0&&!p?(g=BigInt(0),y=o):{mantissa:g,exponent:y}=u(f,h);const b=new Uint8Array(12);return(0,t.writeInt64BE)(b,g,0),(0,t.writeInt32BE)(b,y,8),new c(b)}static fromParser(d){return new c(d.read(12))}toJSON(){const d=this.bytes;if(!d||d.length!==12)throw new Error("STNumber internal bytes not set or wrong length");const f=(0,t.readInt64BE)(d,0),h=(0,t.readInt32BE)(d,8);if(f===BigInt(0)&&h===o)return"0";if(h===0)return f.toString();if(h<-25||h>-5)return`${f}e${h}`;const p=f<BigInt(0),g=f<BigInt(0)?-f:f,y=27,b=23,A=g.toString(),E="0".repeat(y)+A+"0".repeat(b),_=h+43,S=E.slice(0,_).replace(/^0+/,"")||"0",I=E.slice(_).replace(/0+$/,"");return`${p?"-":""}${S}${I?"."+I:""}`}}return _a.STNumber=c,c.defaultBytes=new Uint8Array(12),_a}var Oa={},Xy;function OI(){if(Xy)return Oa;Xy=1,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.PathSet=void 0;const e=Lu(),t=Cd(),n=$i(),r=$n(),s=Ve(),i=0,o=255,a=1,u=16,c=32;function l(g){return g.issuer!==void 0||g.account!==void 0||g.currency!==void 0}function d(g){return Array.isArray(g)&&g.length===0||Array.isArray(g)&&Array.isArray(g[0])&&g[0].length===0||Array.isArray(g)&&Array.isArray(g[0])&&l(g[0][0])}class f extends r.SerializedType{static from(y){if(y instanceof f)return y;const b=[Uint8Array.from([0])];return y.account&&(b.push(e.AccountID.from(y.account).toBytes()),b[0][0]|=a),y.currency&&(b.push(t.Currency.from(y.currency).toBytes()),b[0][0]|=u),y.issuer&&(b.push(e.AccountID.from(y.issuer).toBytes()),b[0][0]|=c),new f((0,s.concat)(b))}static fromParser(y){const b=y.readUInt8(),A=[Uint8Array.from([b])];return b&a&&A.push(y.read(e.AccountID.width)),b&u&&A.push(y.read(t.Currency.width)),b&c&&A.push(y.read(e.AccountID.width)),new f((0,s.concat)(A))}toJSON(){const y=new n.BinaryParser((0,s.bytesToHex)(this.bytes)),b=y.readUInt8();let A,E,_;b&a&&(A=e.AccountID.fromParser(y).toJSON()),b&u&&(E=t.Currency.fromParser(y).toJSON()),b&c&&(_=e.AccountID.fromParser(y).toJSON());const S={};return A&&(S.account=A),_&&(S.issuer=_),E&&(S.currency=E),S}type(){return this.bytes[0]}}class h extends r.SerializedType{static from(y){if(y instanceof h)return y;const b=[];return y.forEach(A=>{b.push(f.from(A).toBytes())}),new h((0,s.concat)(b))}static fromParser(y){const b=[];for(;!y.end()&&(b.push(f.fromParser(y).toBytes()),!(y.peek()===i||y.peek()===o)););return new h((0,s.concat)(b))}toJSON(){const y=[],b=new n.BinaryParser(this.toString());for(;!b.end();)y.push(f.fromParser(b).toJSON());return y}}class p extends r.SerializedType{static from(y){if(y instanceof p)return y;if(d(y)){const b=[];return y.forEach(A=>{b.push(h.from(A).toBytes()),b.push(Uint8Array.from([o]))}),b[b.length-1]=Uint8Array.from([i]),new p((0,s.concat)(b))}throw new Error("Cannot construct PathSet from given value")}static fromParser(y){const b=[];for(;!y.end()&&(b.push(h.fromParser(y).toBytes()),b.push(y.read(1)),b[b.length-1][0]!=i););return new p((0,s.concat)(b))}toJSON(){const y=[],b=new n.BinaryParser(this.toString());for(;!b.end();)y.push(h.fromParser(b).toJSON()),b.skip(1);return y}}return Oa.PathSet=p,Oa}var Da={},xa={},La={},Ca={},Qy;function jd(){if(Qy)return Ca;Qy=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.UInt=void 0;const e=$n();function t(r,s){return r<s?-1:r==s?0:1}class n extends e.Comparable{constructor(s){super(s)}compareTo(s){return t(this.valueOf(),s.valueOf())}toJSON(){const s=this.valueOf();return typeof s=="number"?s:s.toString()}static checkUintRange(s,i,o){if(s<i||s>o)throw new Error(`Invalid ${this.constructor.name}: ${s} must be >= ${i} and <= ${o}`)}}return Ca.UInt=n,Ca}var $y;function Dg(){if($y)return La;$y=1,Object.defineProperty(La,"__esModule",{value:!0}),La.UInt64=void 0;const e=jd(),t=Ve(),n=fi(),r=Qi(),s=/^[a-fA-F0-9]{1,16}$/,i=/^[0-9]{1,20}$/,o=BigInt(4294967295),a=new Set(["MaximumAmount","OutstandingAmount","MPTAmount","LockedAmount"]);function u(l){return a.has(l)}class c extends e.UInt{constructor(d){super(d??c.defaultUInt64.bytes)}static fromParser(d){return new c(d.read(c.width))}static from(d,f=""){if(d instanceof c)return d;let h=new Uint8Array(c.width);if(typeof d=="number"){if(d<0)throw new Error("value must be an unsigned integer");const p=BigInt(d),g=[new Uint8Array(4),new Uint8Array(4)];return(0,n.writeUInt32BE)(g[0],Number(p>>BigInt(32)),0),(0,n.writeUInt32BE)(g[1],Number(p&BigInt(o)),0),new c((0,t.concat)(g))}if(typeof d=="string"){if(u(f)){if(!i.test(d))throw new Error(`${f} ${d} is not a valid base 10 string`);d=BigInt(d).toString(16)}if(typeof d=="string"&&!s.test(d))throw new Error(`${d} is not a valid hex-string`);const p=d.padStart(16,"0");return h=(0,t.hexToBytes)(p),new c(h)}if(typeof d=="bigint"){const p=[new Uint8Array(4),new Uint8Array(4)];return(0,n.writeUInt32BE)(p[0],Number(Number(d>>BigInt(32))),0),(0,n.writeUInt32BE)(p[1],Number(d&BigInt(o)),0),new c((0,t.concat)(p))}throw new Error("Cannot construct UInt64 from given value")}toJSON(d=r.DEFAULT_DEFINITIONS,f=""){const h=(0,t.bytesToHex)(this.bytes);return u(f)?BigInt("0x"+h).toString(10):h}valueOf(){const d=BigInt((0,n.readUInt32BE)(this.bytes.slice(0,4),0)),f=BigInt((0,n.readUInt32BE)(this.bytes.slice(4),0));return d<<BigInt(32)|f}toBytes(){return this.bytes}}return La.UInt64=c,c.width=64/8,c.defaultUInt64=new c(new Uint8Array(c.width)),La}var Zy;function xg(){if(Zy)return xa;Zy=1,Object.defineProperty(xa,"__esModule",{value:!0}),xa.STObject=void 0;const e=Qi(),t=$n(),n=Rn(),r=$i(),s=xu(),i=uS(),o=Dg(),a=Uint8Array.from([225]),u="ObjectEndMarker",c="STObject",l="Destination",d="Account",f="SourceTag",h="DestinationTag";function p(b,A){const E=(0,n.xAddressToClassicAddress)(A);let _;if(b===l)_=h;else if(b===d)_=f;else if(E.tag!==!1)throw new Error(`${b} cannot have an associated tag`);return E.tag!==!1?{[b]:E.classicAddress,[_]:E.tag}:{[b]:E.classicAddress}}function g(b,A){if(!(b[f]===void 0||A[f]===void 0))throw new Error("Cannot have Account X-Address and SourceTag");if(!(b[h]===void 0||A[h]===void 0))throw new Error("Cannot have Destination X-Address and DestinationTag")}class y extends t.SerializedType{static fromParser(A){const E=new s.BytesList,_=new s.BinarySerializer(E);for(;!A.end();){const S=A.readField();if(S.name===u)break;const I=A.readFieldValue(S);_.writeFieldAndValue(S,I),S.type.name===c&&_.put(a)}return new y(E.toBytes())}static from(A,E,_=e.DEFAULT_DEFINITIONS){if(A instanceof y)return A;const S=new s.BytesList,I=new s.BinarySerializer(S);let D=!1;const L=Object.entries(A).reduce((V,[Y,q])=>{let R;return q&&(0,n.isValidXAddress)(q.toString())&&(R=p(Y,q.toString()),g(R,A)),Object.assign(V,R??{[Y]:q})},{});function x(V){return V!==void 0&&L[V.name]!==void 0&&V.isSerialized}let j=Object.keys(L).map(V=>{if(!(V in _.field)){if(V[0]===V[0].toLowerCase())return;throw new Error(`Field ${V} is not defined in the definitions`)}return _.field[V]}).filter(x).sort((V,Y)=>V.ordinal-Y.ordinal);return E!==void 0&&(j=j.filter(E)),j.forEach(V=>{const Y=V.type.name===c?this.from(L[V.name],void 0,_):V.type.name==="STArray"?i.STArray.from(L[V.name],_):V.type.name==="UInt64"?o.UInt64.from(L[V.name],V.name):V.associatedType.from(L[V.name]);if(Y==null)throw new TypeError(`Unable to interpret "${V.name}: ${L[V.name]}".`);Y.name==="UNLModify"&&(D=!0);const q=V.name=="Account"&&D;I.writeFieldAndValue(V,Y,q),V.type.name===c&&I.put(a)}),new y(S.toBytes())}toJSON(A){const E=new r.BinaryParser(this.toString(),A),_={};for(;!E.end();){const S=E.readField();if(S.name===u)break;_[S.name]=E.readFieldValue(S).toJSON(A,S.name)}return _}}return xa.STObject=y,xa}var Jy;function uS(){if(Jy)return Da;Jy=1,Object.defineProperty(Da,"__esModule",{value:!0}),Da.STArray=void 0;const e=Qi(),t=$n(),n=xg(),r=$i(),s=Ve(),i=Uint8Array.from([241]),o="ArrayEndMarker",a=Uint8Array.from([225]);function u(l){return Array.isArray(l)&&l.every(d=>typeof d=="object"&&Object.keys(d).length===1&&typeof Object.values(d)[0]=="object")}class c extends t.SerializedType{static fromParser(d){const f=[];for(;!d.end();){const h=d.readField();if(h.name===o)break;f.push(h.header,d.readFieldValue(h).toBytes(),a)}return f.push(i),new c((0,s.concat)(f))}static from(d,f=e.DEFAULT_DEFINITIONS){if(d instanceof c)return d;if(u(d)){const h=[];return d.forEach(p=>{h.push(n.STObject.from(p,void 0,f).toBytes())}),h.push(i),new c((0,s.concat)(h))}throw new Error("Cannot construct STArray from value given")}toJSON(d=e.DEFAULT_DEFINITIONS){const f=[],h=new r.BinaryParser(this.toString(),d);for(;!h.end();){const p=h.readField();if(p.name===o)break;const g={};g[p.name]=n.STObject.fromParser(h).toJSON(d),f.push(g)}return f}}return Da.STArray=c,Da}var ja={},em;function DI(){if(em)return ja;em=1,Object.defineProperty(ja,"__esModule",{value:!0}),ja.UInt16=void 0;const e=jd(),t=fi();class n extends e.UInt{constructor(s){super(s??n.defaultUInt16.bytes)}static fromParser(s){return new n(s.read(n.width))}static from(s){if(s instanceof n)return s;if(typeof s=="number"){n.checkUintRange(s,0,65535);const i=new Uint8Array(n.width);return(0,t.writeUInt16BE)(i,s,0),new n(i)}throw new Error("Can not construct UInt16 with given value")}valueOf(){return parseInt((0,t.readUInt16BE)(this.bytes,0))}}return ja.UInt16=n,n.width=16/8,n.defaultUInt16=new n(new Uint8Array(n.width)),ja}var Pa={},tm;function lS(){if(tm)return Pa;tm=1,Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.UInt32=void 0;const e=jd(),t=fi();class n extends e.UInt{constructor(s){super(s??n.defaultUInt32.bytes)}static fromParser(s){return new n(s.read(n.width))}static from(s){if(s instanceof n)return s;const i=new Uint8Array(n.width);if(typeof s=="string"){const o=Number.parseInt(s);return(0,t.writeUInt32BE)(i,o,0),new n(i)}if(typeof s=="number")return n.checkUintRange(s,0,4294967295),(0,t.writeUInt32BE)(i,s,0),new n(i);throw new Error("Cannot construct UInt32 from given value")}valueOf(){return parseInt((0,t.readUInt32BE)(this.bytes,0),10)}}return Pa.UInt32=n,n.width=32/8,n.defaultUInt32=new n(new Uint8Array(n.width)),Pa}var ka={},nm;function dS(){if(nm)return ka;nm=1,Object.defineProperty(ka,"__esModule",{value:!0}),ka.UInt8=void 0;const e=jd(),t=Ve(),n=fi();class r extends e.UInt{constructor(i){super(i??r.defaultUInt8.bytes)}static fromParser(i){return new r(i.read(r.width))}static from(i){if(i instanceof r)return i;if(typeof i=="number"){r.checkUintRange(i,0,255);const o=new Uint8Array(r.width);return(0,n.writeUInt8)(o,i,0),new r(o)}throw new Error("Cannot construct UInt8 from given value")}valueOf(){return parseInt((0,t.bytesToHex)(this.bytes),16)}}return ka.UInt8=r,r.width=8/8,r.defaultUInt8=new r(new Uint8Array(r.width)),ka}var Ra={},rm;function xI(){if(rm)return Ra;rm=1,Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.Vector256=void 0;const e=$n(),t=Og(),n=xu(),r=Ve();function s(o){return Array.isArray(o)&&(o.length===0||typeof o[0]=="string")}class i extends e.SerializedType{constructor(a){super(a)}static fromParser(a,u){const c=new n.BytesList,d=(u??a.size())/32;for(let f=0;f<d;f++)t.Hash256.fromParser(a).toBytesSink(c);return new i(c.toBytes())}static from(a){if(a instanceof i)return a;if(s(a)){const u=new n.BytesList;return a.forEach(c=>{t.Hash256.from(c).toBytesSink(u)}),new i(u.toBytes())}throw new Error("Cannot construct Vector256 from given value")}toJSON(){if(this.bytes.byteLength%32!==0)throw new Error("Invalid bytes for Vector256");const a=[];for(let u=0;u<this.bytes.byteLength;u+=32)a.push((0,r.bytesToHex)(this.bytes.slice(u,u+32)));return a}}return Ra.Vector256=i,Ra}var Ba={},im;function LI(){if(im)return Ba;im=1,Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.XChainBridge=void 0;const e=$i(),t=Lu(),n=$n(),r=cS(),s=Ve();function i(a){const u=Object.keys(a).sort();return u.length===4&&u[0]==="IssuingChainDoor"&&u[1]==="IssuingChainIssue"&&u[2]==="LockingChainDoor"&&u[3]==="LockingChainIssue"}class o extends n.SerializedType{constructor(u){super(u??o.ZERO_XCHAIN_BRIDGE.bytes)}static from(u){if(u instanceof o)return u;if(!i(u))throw new Error("Invalid type to construct an XChainBridge");const c=[];return this.TYPE_ORDER.forEach(l=>{const{name:d,type:f}=l;f===t.AccountID&&c.push(Uint8Array.from([20]));const h=f.from(u[d]);c.push(h.toBytes())}),new o((0,s.concat)(c))}static fromParser(u){const c=[];return this.TYPE_ORDER.forEach(l=>{const{type:d}=l;d===t.AccountID&&(u.skip(1),c.push(Uint8Array.from([20])));const f=d.fromParser(u);c.push(f.toBytes())}),new o((0,s.concat)(c))}toJSON(){const u=new e.BinaryParser(this.toString()),c={};return o.TYPE_ORDER.forEach(l=>{const{name:d,type:f}=l;f===t.AccountID&&u.skip(1);const h=f.fromParser(u).toJSON();c[d]=h}),c}}return Ba.XChainBridge=o,o.ZERO_XCHAIN_BRIDGE=new o((0,s.concat)([Uint8Array.from([20]),new Uint8Array(40),Uint8Array.from([20]),new Uint8Array(40)])),o.TYPE_ORDER=[{name:"LockingChainDoor",type:t.AccountID},{name:"LockingChainIssue",type:r.Issue},{name:"IssuingChainDoor",type:t.AccountID},{name:"IssuingChainIssue",type:r.Issue}],Ba}var sm;function so(){return sm||(sm=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Vector256=e.UInt64=e.UInt32=e.UInt16=e.UInt8=e.STObject=e.STArray=e.PathSet=e.Hash256=e.Hash192=e.Hash160=e.Hash128=e.Currency=e.Blob=e.Amount=e.AccountID=e.coreTypes=void 0;const t=Lu();Object.defineProperty(e,"AccountID",{enumerable:!0,get:function(){return t.AccountID}});const n=MI();Object.defineProperty(e,"Amount",{enumerable:!0,get:function(){return n.Amount}});const r=NI();Object.defineProperty(e,"Blob",{enumerable:!0,get:function(){return r.Blob}});const s=Cd();Object.defineProperty(e,"Currency",{enumerable:!0,get:function(){return s.Currency}});const i=II();Object.defineProperty(e,"Hash128",{enumerable:!0,get:function(){return i.Hash128}});const o=Ig();Object.defineProperty(e,"Hash160",{enumerable:!0,get:function(){return o.Hash160}});const a=_g();Object.defineProperty(e,"Hash192",{enumerable:!0,get:function(){return a.Hash192}});const u=Og();Object.defineProperty(e,"Hash256",{enumerable:!0,get:function(){return u.Hash256}});const c=cS(),l=_I(),d=OI();Object.defineProperty(e,"PathSet",{enumerable:!0,get:function(){return d.PathSet}});const f=uS();Object.defineProperty(e,"STArray",{enumerable:!0,get:function(){return f.STArray}});const h=xg();Object.defineProperty(e,"STObject",{enumerable:!0,get:function(){return h.STObject}});const p=DI();Object.defineProperty(e,"UInt16",{enumerable:!0,get:function(){return p.UInt16}});const g=lS();Object.defineProperty(e,"UInt32",{enumerable:!0,get:function(){return g.UInt32}});const y=Dg();Object.defineProperty(e,"UInt64",{enumerable:!0,get:function(){return y.UInt64}});const b=dS();Object.defineProperty(e,"UInt8",{enumerable:!0,get:function(){return b.UInt8}});const A=xI();Object.defineProperty(e,"Vector256",{enumerable:!0,get:function(){return A.Vector256}});const E=LI(),_=Qi(),S={AccountID:t.AccountID,Amount:n.Amount,Blob:r.Blob,Currency:s.Currency,Hash128:i.Hash128,Hash160:o.Hash160,Hash192:a.Hash192,Hash256:u.Hash256,Issue:c.Issue,Number:l.STNumber,PathSet:d.PathSet,STArray:f.STArray,STObject:h.STObject,UInt8:b.UInt8,UInt16:p.UInt16,UInt32:g.UInt32,UInt64:y.UInt64,Vector256:A.Vector256,XChainBridge:E.XChainBridge};e.coreTypes=S,_.DEFAULT_DEFINITIONS.associateTypes(S)})(Wh)),Wh}var Xh={},Ua={},om;function Cu(){if(om)return Ua;om=1,Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.HashPrefix=void 0;const e=fi();function t(r){const s=new Uint8Array(4);return(0,e.writeUInt32BE)(s,r,0),s}const n={transactionID:t(1415073280),transaction:t(1397638144),accountStateEntry:t(1296846336),innerNode:t(1296649728),ledgerHeader:t(1280791040),transactionSig:t(1398036480),transactionMultiSig:t(1397576704),validation:t(1447119872),proposal:t(1347571712),paymentChannelClaim:t(1129073920),batch:t(1111705600)};return Ua.HashPrefix=n,Ua}var kr={},ds={},At={},am;function CI(){if(am)return At;am=1,Object.defineProperty(At,"__esModule",{value:!0}),At.sha512_256=At.SHA512_256=At.sha512_224=At.SHA512_224=At.sha384=At.SHA384=At.sha512=At.SHA512=void 0;const e=oa();return At.SHA512=e.SHA512,At.sha512=e.sha512,At.SHA384=e.SHA384,At.sha384=e.sha384,At.SHA512_224=e.SHA512_224,At.sha512_224=e.sha512_224,At.SHA512_256=e.SHA512_256,At.sha512_256=e.sha512_256,At}var cm;function Lg(){if(cm)return ds;cm=1;var e=ds&&ds.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ds,"__esModule",{value:!0}),ds.sha512=void 0;const t=CI(),n=e(Ng());return ds.sha512=(0,n.default)(t.sha512),ds}var um;function Pd(){if(um)return kr;um=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.transactionID=kr.sha512Half=kr.Sha512Half=void 0;const e=Cu(),t=so(),n=xu(),r=Lg();class s extends n.BytesList{constructor(){super(...arguments),this.hash=r.sha512.create()}static put(u){return new s().put(u)}put(u){return this.hash.update(u),this}finish256(){return Uint8Array.from(this.hash.digest().slice(0,32))}finish(){return new t.Hash256(this.finish256())}}kr.Sha512Half=s;function i(...a){const u=new s;return a.forEach(c=>u.put(c)),u.finish256()}kr.sha512Half=i;function o(a){return new t.Hash256(i(e.HashPrefix.transactionID,a))}return kr.transactionID=o,kr}var lm;function hS(){return lm||(lm=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.signingBatchData=e.transactionID=e.sha512Half=e.binaryToJSON=e.signingClaimData=e.signingData=e.multiSigningData=e.readJSON=e.serializeObject=e.makeParser=e.BytesList=e.BinarySerializer=e.BinaryParser=void 0;const t=Ve(),n=so(),r=$i();Object.defineProperty(e,"BinaryParser",{enumerable:!0,get:function(){return r.BinaryParser}});const s=Cu(),i=xu();Object.defineProperty(e,"BinarySerializer",{enumerable:!0,get:function(){return i.BinarySerializer}}),Object.defineProperty(e,"BytesList",{enumerable:!0,get:function(){return i.BytesList}});const o=Pd();Object.defineProperty(e,"sha512Half",{enumerable:!0,get:function(){return o.sha512Half}}),Object.defineProperty(e,"transactionID",{enumerable:!0,get:function(){return o.transactionID}});const a=Qi(),u=(y,b)=>new r.BinaryParser(y instanceof Uint8Array?(0,t.bytesToHex)(y):y,b);e.makeParser=u;const c=(y,b=a.DEFAULT_DEFINITIONS)=>y.readType(n.coreTypes.STObject).toJSON(b);e.readJSON=c;const l=(y,b)=>c(u(y,b),b);e.binaryToJSON=l;function d(y,b={}){const{prefix:A,suffix:E,signingFieldsOnly:_=!1,definitions:S}=b,I=new i.BytesList;A&&I.put(A);const D=_?L=>L.isSigningField:void 0;return n.coreTypes.STObject.from(y,D,S).toBytesSink(I),E&&I.put(E),I.toBytes()}e.serializeObject=d;function f(y,b=s.HashPrefix.transactionSig,A={}){return d(y,{prefix:b,signingFieldsOnly:!0,definitions:A.definitions})}e.signingData=f;function h(y){const b=BigInt(String(y.amount)),A=s.HashPrefix.paymentChannelClaim,E=n.coreTypes.Hash256.from(y.channel).toBytes(),_=n.coreTypes.UInt64.from(b).toBytes(),S=new i.BytesList;return S.put(A),S.put(E),S.put(_),S.toBytes()}e.signingClaimData=h;function p(y,b,A={definitions:a.DEFAULT_DEFINITIONS}){const E=s.HashPrefix.transactionMultiSig,_=n.coreTypes.AccountID.from(b).toBytes();return d(y,{prefix:E,suffix:_,signingFieldsOnly:!0,definitions:A.definitions})}e.multiSigningData=p;function g(y){if(y.flags==null)throw Error("No field `flags'");if(y.txIDs==null)throw Error("No field `txIDs`");const b=s.HashPrefix.batch,A=n.coreTypes.UInt32.from(y.flags).toBytes(),E=n.coreTypes.UInt32.from(y.txIDs.length).toBytes(),_=new i.BytesList;return _.put(b),_.put(A),_.put(E),y.txIDs.forEach(S=>{_.put(n.coreTypes.Hash256.from(S).toBytes())}),_.toBytes()}e.signingBatchData=g})(Xh)),Xh}var Rr={},dm;function fS(){if(dm)return Rr;dm=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.ShaMapLeaf=Rr.ShaMapNode=Rr.ShaMap=void 0;const e=so(),t=Cu(),n=Pd();class r{}Rr.ShaMapNode=r;class s extends r{constructor(u,c){super(),this.index=u,this.item=c}isLeaf(){return!0}isInner(){return!1}hashPrefix(){return this.item===void 0?new Uint8Array(0):this.item.hashPrefix()}hash(){const u=n.Sha512Half.put(this.hashPrefix());return this.toBytesSink(u),u.finish()}toBytesSink(u){this.item!==void 0&&this.item.toBytesSink(u),this.index.toBytesSink(u)}}Rr.ShaMapLeaf=s;class i extends r{constructor(u=0){super(),this.depth=u,this.slotBits=0,this.branches=Array(16)}isInner(){return!0}isLeaf(){return!1}hashPrefix(){return t.HashPrefix.innerNode}setBranch(u,c){this.slotBits=this.slotBits|1<<u,this.branches[u]=c}empty(){return this.slotBits===0}hash(){if(this.empty())return e.coreTypes.Hash256.ZERO_256;const u=n.Sha512Half.put(this.hashPrefix());return this.toBytesSink(u),u.finish()}toBytesSink(u){for(let c=0;c<this.branches.length;c++){const l=this.branches[c];(l?l.hash():e.coreTypes.Hash256.ZERO_256).toBytesSink(u)}}addItem(u,c,l){if(u===void 0)throw new Error;if(u!==void 0){const d=u.nibblet(this.depth),f=this.branches[d];if(f===void 0)this.setBranch(d,l||new s(u,c));else if(f instanceof s){const h=new i(this.depth+1);h.addItem(f.index,void 0,f),h.addItem(u,c,l),this.setBranch(d,h)}else if(f instanceof i)f.addItem(u,c,l);else throw new Error("invalid ShaMap.addItem call")}}}class o extends i{}return Rr.ShaMap=o,Rr}var Jn={},hm;function pS(){if(hm)return Jn;hm=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.decodeLedgerData=Jn.ledgerHash=Jn.transactionTreeHash=Jn.accountStateHash=void 0;const e=fS(),t=Cu(),n=Pd(),r=hS(),s=Og(),i=xg(),o=Dg(),a=lS(),u=dS(),c=$i();function l(b,A){const E=new e.ShaMap;return A.forEach(_=>E.addItem(...b(_))),E.hash()}function d(b){if(!b.hash)throw new Error;return[s.Hash256.from(b.hash),{hashPrefix(){return t.HashPrefix.transaction},toBytesSink(_){const S=new r.BinarySerializer(_);S.writeLengthEncoded(i.STObject.from(b)),S.writeLengthEncoded(i.STObject.from(b.metaData))}},void 0]}function f(b){const A=s.Hash256.from(b.index),E=(0,r.serializeObject)(b);return[A,{hashPrefix(){return t.HashPrefix.accountStateEntry},toBytesSink(S){S.put(E)}},void 0]}function h(b){return l(d,b)}Jn.transactionTreeHash=h;function p(b){return l(f,b)}Jn.accountStateHash=p;function g(b){const A=new n.Sha512Half;if(A.put(t.HashPrefix.ledgerHeader),b.parent_close_time===void 0||b.close_flags===void 0)throw new Error;return a.UInt32.from(b.ledger_index).toBytesSink(A),o.UInt64.from(BigInt(String(b.total_coins))).toBytesSink(A),s.Hash256.from(b.parent_hash).toBytesSink(A),s.Hash256.from(b.transaction_hash).toBytesSink(A),s.Hash256.from(b.account_hash).toBytesSink(A),a.UInt32.from(b.parent_close_time).toBytesSink(A),a.UInt32.from(b.close_time).toBytesSink(A),u.UInt8.from(b.close_time_resolution).toBytesSink(A),u.UInt8.from(b.close_flags).toBytesSink(A),A.finish()}Jn.ledgerHash=g;function y(b,A){if(typeof b!="string")throw new Error("binary must be a hex string");const E=new c.BinaryParser(b,A);return{ledger_index:E.readUInt32(),total_coins:E.readType(o.UInt64).valueOf().toString(),parent_hash:E.readType(s.Hash256).toHex(),transaction_hash:E.readType(s.Hash256).toHex(),account_hash:E.readType(s.Hash256).toHex(),parent_close_time:E.readUInt32(),close_time:E.readUInt32(),close_time_resolution:E.readUInt8(),close_flags:E.readUInt8()}}return Jn.decodeLedgerData=y,Jn}var hs={},fm;function jI(){if(fm)return hs;fm=1;var e=hs&&hs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(hs,"__esModule",{value:!0}),hs.quality=void 0;const t=so(),n=e(Nn()),r=Ve();class s{static encode(o){const a=(0,n.default)(o),u=(a?.e||0)-15,c=a.times(`1e${-u}`).abs().toString(),l=t.coreTypes.UInt64.from(BigInt(c)).toBytes();return l[0]=u+100,l}static decode(o){const a=(0,r.hexToBytes)(o).slice(-8),u=a[0]-100;return new n.default(`0x${(0,r.bytesToHex)(a.slice(1))}`).times(`1e${u}`)}}return hs.quality=s,hs}var pm;function PI(){return pm||(pm=1,(function(e){var t=Pr&&Pr.__createBinding||(Object.create?(function(f,h,p,g){g===void 0&&(g=p);var y=Object.getOwnPropertyDescriptor(h,p);(!y||("get"in y?!h.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return h[p]}}),Object.defineProperty(f,g,y)}):(function(f,h,p,g){g===void 0&&(g=p),f[g]=h[p]})),n=Pr&&Pr.__setModuleDefault||(Object.create?(function(f,h){Object.defineProperty(f,"default",{enumerable:!0,value:h})}):function(f,h){f.default=h}),r=Pr&&Pr.__importStar||function(f){if(f&&f.__esModule)return f;var h={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&t(h,f,p);return n(h,f),h};Object.defineProperty(e,"__esModule",{value:!0}),e.types=e.ShaMap=e.HashPrefix=e.quality=e.TransactionResult=e.Type=e.LedgerEntryType=e.TransactionType=e.Field=e.DEFAULT_DEFINITIONS=e.ledgerHashes=e.binary=e.hashes=void 0;const s=Qi();Object.defineProperty(e,"DEFAULT_DEFINITIONS",{enumerable:!0,get:function(){return s.DEFAULT_DEFINITIONS}}),Object.defineProperty(e,"Field",{enumerable:!0,get:function(){return s.Field}}),Object.defineProperty(e,"TransactionType",{enumerable:!0,get:function(){return s.TransactionType}}),Object.defineProperty(e,"LedgerEntryType",{enumerable:!0,get:function(){return s.LedgerEntryType}}),Object.defineProperty(e,"Type",{enumerable:!0,get:function(){return s.Type}}),Object.defineProperty(e,"TransactionResult",{enumerable:!0,get:function(){return s.TransactionResult}});const i=r(so());e.types=i;const o=r(hS());e.binary=o;const a=fS();Object.defineProperty(e,"ShaMap",{enumerable:!0,get:function(){return a.ShaMap}});const u=r(pS());e.ledgerHashes=u;const c=r(Pd());e.hashes=c;const l=jI();Object.defineProperty(e,"quality",{enumerable:!0,get:function(){return l.quality}});const d=Cu();Object.defineProperty(e,"HashPrefix",{enumerable:!0,get:function(){return d.HashPrefix}})})(Pr)),Pr}var za={},gm;function kI(){if(gm)return za;gm=1,Object.defineProperty(za,"__esModule",{value:!0}),za.XrplDefinitions=void 0;const e=aS(),t=so();class n extends e.XrplDefinitionsBase{constructor(s,i){const o=Object.assign({},t.coreTypes,i);super(s,o)}}return za.XrplDefinitions=n,za}var ym;function fr(){return ym||(ym=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.coreTypes=e.DEFAULT_DEFINITIONS=e.XrplDefinitionsBase=e.XrplDefinitions=e.TRANSACTION_TYPES=e.decodeLedgerData=e.decodeQuality=e.encodeQuality=e.encodeForSigningBatch=e.encodeForMultisigning=e.encodeForSigningClaim=e.encodeForSigning=e.encode=e.decode=void 0;const t=PI(),n=pS();Object.defineProperty(e,"decodeLedgerData",{enumerable:!0,get:function(){return n.decodeLedgerData}});const r=Qi();Object.defineProperty(e,"XrplDefinitionsBase",{enumerable:!0,get:function(){return r.XrplDefinitionsBase}}),Object.defineProperty(e,"TRANSACTION_TYPES",{enumerable:!0,get:function(){return r.TRANSACTION_TYPES}}),Object.defineProperty(e,"DEFAULT_DEFINITIONS",{enumerable:!0,get:function(){return r.DEFAULT_DEFINITIONS}});const s=kI();Object.defineProperty(e,"XrplDefinitions",{enumerable:!0,get:function(){return s.XrplDefinitions}});const i=so();Object.defineProperty(e,"coreTypes",{enumerable:!0,get:function(){return i.coreTypes}});const o=Ve(),{signingData:a,signingClaimData:u,multiSigningData:c,signingBatchData:l,binaryToJSON:d,serializeObject:f}=t.binary;function h(S,I){if(typeof S!="string")throw new Error("binary must be a hex string");return d(S,I)}e.decode=h;function p(S,I){if(typeof S!="object")throw new Error;return(0,o.bytesToHex)(f(S,{definitions:I}))}e.encode=p;function g(S,I){if(typeof S!="object")throw new Error;return(0,o.bytesToHex)(a(S,t.HashPrefix.transactionSig,{definitions:I}))}e.encodeForSigning=g;function y(S){if(typeof S!="object")throw new Error;return(0,o.bytesToHex)(u(S))}e.encodeForSigningClaim=y;function b(S,I,D){if(typeof S!="object")throw new Error;if(S.SigningPubKey!=="")throw new Error;const L=D?{definitions:D}:void 0;return(0,o.bytesToHex)(c(S,I,L))}e.encodeForMultisigning=b;function A(S){if(typeof S!="object")throw new Error("Need an object to encode a Batch transaction");return(0,o.bytesToHex)(l(S))}e.encodeForSigningBatch=A;function E(S){if(typeof S!="string")throw new Error;return(0,o.bytesToHex)(t.quality.encode(S))}e.encodeQuality=E;function _(S){if(typeof S!="string")throw new Error;return t.quality.decode(S).toString()}e.decodeQuality=_})(Kh)),Kh}var Br={},mm;function oo(){if(mm)return Br;mm=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.isHex=Br.isFlagEnabled=Br.onlyHasFields=void 0;const e=/^[0-9A-Fa-f]+$/u;function t(s,i){return Object.keys(s).every(o=>i.includes(o))}Br.onlyHasFields=t;function n(s,i){return(BigInt(i)&BigInt(s))===BigInt(i)}Br.isFlagEnabled=n;function r(s){return e.test(s)}return Br.isHex=r,Br}var wm;function Ce(){if(wm)return rt;wm=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.parseAmountValue=rt.validateBaseTransaction=rt.validateOptionalField=rt.validateRequiredField=rt.isXChainBridge=rt.isAmount=rt.isAccount=rt.isIssuedCurrency=rt.isCurrency=rt.isNumber=rt.isString=void 0;const e=Rn(),t=fr(),n=Oe(),r=oo(),s=3;function i(L){if(L.Memo==null)return!1;const x=L.Memo,j=Object.keys(x).length,V=x.MemoData==null||typeof x.MemoData=="string",Y=x.MemoFormat==null||typeof x.MemoFormat=="string",q=x.MemoType==null||typeof x.MemoType=="string";return j>=1&&j<=s&&V&&Y&&q&&(0,r.onlyHasFields)(x,["MemoFormat","MemoData","MemoType"])}const o=3;function a(L){const x=L;if(x.Signer==null)return!1;const j=x.Signer;return Object.keys(j).length===o&&typeof j.Account=="string"&&typeof j.TxnSignature=="string"&&typeof j.SigningPubKey=="string"}const u=1,c=2,l=3,d=4;function f(L){return L!==null&&typeof L=="object"}function h(L){return typeof L=="string"}rt.isString=h;function p(L){return typeof L=="number"}rt.isNumber=p;function g(L){return f(L)&&(Object.keys(L).length===c&&typeof L.issuer=="string"&&typeof L.currency=="string"||Object.keys(L).length===u&&L.currency==="XRP")}rt.isCurrency=g;function y(L){return f(L)&&Object.keys(L).length===l&&typeof L.value=="string"&&typeof L.issuer=="string"&&typeof L.currency=="string"}rt.isIssuedCurrency=y;function b(L){return typeof L=="string"&&((0,e.isValidClassicAddress)(L)||(0,e.isValidXAddress)(L))}rt.isAccount=b;function A(L){return typeof L=="string"||y(L)}rt.isAmount=A;function E(L){return f(L)&&Object.keys(L).length===d&&typeof L.LockingChainDoor=="string"&&g(L.LockingChainIssue)&&typeof L.IssuingChainDoor=="string"&&g(L.IssuingChainIssue)}rt.isXChainBridge=E;function _(L,x,j){if(L[x]==null)throw new n.ValidationError(`${L.TransactionType}: missing field ${x}`);if(!j(L[x]))throw new n.ValidationError(`${L.TransactionType}: invalid field ${x}`)}rt.validateRequiredField=_;function S(L,x,j){if(L[x]!==void 0&&!j(L[x]))throw new n.ValidationError(`${L.TransactionType}: invalid field ${x}`)}rt.validateOptionalField=S;function I(L){if(L.TransactionType===void 0)throw new n.ValidationError("BaseTransaction: missing field TransactionType");if(typeof L.TransactionType!="string")throw new n.ValidationError("BaseTransaction: TransactionType not string");if(!t.TRANSACTION_TYPES.includes(L.TransactionType))throw new n.ValidationError("BaseTransaction: Unknown TransactionType");_(L,"Account",h),S(L,"Fee",h),S(L,"Sequence",p),S(L,"AccountTxnID",h),S(L,"LastLedgerSequence",p);const x=L.Memos;if(x!==void 0&&!x.every(i))throw new n.ValidationError("BaseTransaction: invalid Memos");const j=L.Signers;if(j!==void 0&&(j.length===0||!j.every(a)))throw new n.ValidationError("BaseTransaction: invalid Signers");S(L,"SourceTag",p),S(L,"SigningPubKey",h),S(L,"TicketSequence",p),S(L,"TxnSignature",h),S(L,"NetworkID",p)}rt.validateBaseTransaction=I;function D(L){return A(L)?parseFloat(typeof L=="string"?L:L.value):NaN}return rt.parseAmountValue=D,rt}var bm;function Cg(){if(bm)return Cr;bm=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.validateAccountSet=Cr.AccountSetTfFlags=Cr.AccountSetAsfFlags=void 0;const e=Oe(),t=Ce();var n;(function(a){a[a.asfRequireDest=1]="asfRequireDest",a[a.asfRequireAuth=2]="asfRequireAuth",a[a.asfDisallowXRP=3]="asfDisallowXRP",a[a.asfDisableMaster=4]="asfDisableMaster",a[a.asfAccountTxnID=5]="asfAccountTxnID",a[a.asfNoFreeze=6]="asfNoFreeze",a[a.asfGlobalFreeze=7]="asfGlobalFreeze",a[a.asfDefaultRipple=8]="asfDefaultRipple",a[a.asfDepositAuth=9]="asfDepositAuth",a[a.asfAuthorizedNFTokenMinter=10]="asfAuthorizedNFTokenMinter",a[a.asfDisallowIncomingNFTokenOffer=12]="asfDisallowIncomingNFTokenOffer",a[a.asfDisallowIncomingCheck=13]="asfDisallowIncomingCheck",a[a.asfDisallowIncomingPayChan=14]="asfDisallowIncomingPayChan",a[a.asfDisallowIncomingTrustline=15]="asfDisallowIncomingTrustline",a[a.asfAllowTrustLineClawback=16]="asfAllowTrustLineClawback"})(n||(Cr.AccountSetAsfFlags=n={}));var r;(function(a){a[a.tfRequireDestTag=65536]="tfRequireDestTag",a[a.tfOptionalDestTag=131072]="tfOptionalDestTag",a[a.tfRequireAuth=262144]="tfRequireAuth",a[a.tfOptionalAuth=524288]="tfOptionalAuth",a[a.tfDisallowXRP=1048576]="tfDisallowXRP",a[a.tfAllowXRP=2097152]="tfAllowXRP"})(r||(Cr.AccountSetTfFlags=r={}));const s=3,i=15;function o(a){if((0,t.validateBaseTransaction)(a),(0,t.validateOptionalField)(a,"NFTokenMinter",t.isAccount),a.ClearFlag!==void 0){if(typeof a.ClearFlag!="number")throw new e.ValidationError("AccountSet: invalid ClearFlag");if(!Object.values(n).includes(a.ClearFlag))throw new e.ValidationError("AccountSet: invalid ClearFlag")}if(a.Domain!==void 0&&typeof a.Domain!="string")throw new e.ValidationError("AccountSet: invalid Domain");if(a.EmailHash!==void 0&&typeof a.EmailHash!="string")throw new e.ValidationError("AccountSet: invalid EmailHash");if(a.MessageKey!==void 0&&typeof a.MessageKey!="string")throw new e.ValidationError("AccountSet: invalid MessageKey");if(a.SetFlag!==void 0){if(typeof a.SetFlag!="number")throw new e.ValidationError("AccountSet: invalid SetFlag");if(!Object.values(n).includes(a.SetFlag))throw new e.ValidationError("AccountSet: invalid SetFlag")}if(a.TransferRate!==void 0&&typeof a.TransferRate!="number")throw new e.ValidationError("AccountSet: invalid TransferRate");if(a.TickSize!==void 0){if(typeof a.TickSize!="number")throw new e.ValidationError("AccountSet: invalid TickSize");if(a.TickSize!==0&&(a.TickSize<s||a.TickSize>i))throw new e.ValidationError("AccountSet: invalid TickSize")}}return Cr.validateAccountSet=o,Cr}var fs={},vm;function jg(){if(vm)return fs;vm=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.validateAMMDeposit=fs.AMMDepositFlags=void 0;const e=Oe(),t=Ce();var n;(function(s){s[s.tfLPToken=65536]="tfLPToken",s[s.tfSingleAsset=524288]="tfSingleAsset",s[s.tfTwoAsset=1048576]="tfTwoAsset",s[s.tfOneAssetLPToken=2097152]="tfOneAssetLPToken",s[s.tfLimitLPToken=4194304]="tfLimitLPToken",s[s.tfTwoAssetIfEmpty=8388608]="tfTwoAssetIfEmpty"})(n||(fs.AMMDepositFlags=n={}));function r(s){if((0,t.validateBaseTransaction)(s),s.Asset==null)throw new e.ValidationError("AMMDeposit: missing field Asset");if(!(0,t.isCurrency)(s.Asset))throw new e.ValidationError("AMMDeposit: Asset must be a Currency");if(s.Asset2==null)throw new e.ValidationError("AMMDeposit: missing field Asset2");if(!(0,t.isCurrency)(s.Asset2))throw new e.ValidationError("AMMDeposit: Asset2 must be a Currency");if(s.Amount2!=null&&s.Amount==null)throw new e.ValidationError("AMMDeposit: must set Amount with Amount2");if(s.EPrice!=null&&s.Amount==null)throw new e.ValidationError("AMMDeposit: must set Amount with EPrice");if(s.LPTokenOut==null&&s.Amount==null)throw new e.ValidationError("AMMDeposit: must set at least LPTokenOut or Amount");if(s.LPTokenOut!=null&&!(0,t.isIssuedCurrency)(s.LPTokenOut))throw new e.ValidationError("AMMDeposit: LPTokenOut must be an IssuedCurrencyAmount");if(s.Amount!=null&&!(0,t.isAmount)(s.Amount))throw new e.ValidationError("AMMDeposit: Amount must be an Amount");if(s.Amount2!=null&&!(0,t.isAmount)(s.Amount2))throw new e.ValidationError("AMMDeposit: Amount2 must be an Amount");if(s.EPrice!=null&&!(0,t.isAmount)(s.EPrice))throw new e.ValidationError("AMMDeposit: EPrice must be an Amount")}return fs.validateAMMDeposit=r,fs}var ps={},Em;function Pg(){if(Em)return ps;Em=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.validateAMMWithdraw=ps.AMMWithdrawFlags=void 0;const e=Oe(),t=Ce();var n;(function(s){s[s.tfLPToken=65536]="tfLPToken",s[s.tfWithdrawAll=131072]="tfWithdrawAll",s[s.tfOneAssetWithdrawAll=262144]="tfOneAssetWithdrawAll",s[s.tfSingleAsset=524288]="tfSingleAsset",s[s.tfTwoAsset=1048576]="tfTwoAsset",s[s.tfOneAssetLPToken=2097152]="tfOneAssetLPToken",s[s.tfLimitLPToken=4194304]="tfLimitLPToken"})(n||(ps.AMMWithdrawFlags=n={}));function r(s){if((0,t.validateBaseTransaction)(s),s.Asset==null)throw new e.ValidationError("AMMWithdraw: missing field Asset");if(!(0,t.isCurrency)(s.Asset))throw new e.ValidationError("AMMWithdraw: Asset must be a Currency");if(s.Asset2==null)throw new e.ValidationError("AMMWithdraw: missing field Asset2");if(!(0,t.isCurrency)(s.Asset2))throw new e.ValidationError("AMMWithdraw: Asset2 must be a Currency");if(s.Amount2!=null&&s.Amount==null)throw new e.ValidationError("AMMWithdraw: must set Amount with Amount2");if(s.EPrice!=null&&s.Amount==null)throw new e.ValidationError("AMMWithdraw: must set Amount with EPrice");if(s.LPTokenIn!=null&&!(0,t.isIssuedCurrency)(s.LPTokenIn))throw new e.ValidationError("AMMWithdraw: LPTokenIn must be an IssuedCurrencyAmount");if(s.Amount!=null&&!(0,t.isAmount)(s.Amount))throw new e.ValidationError("AMMWithdraw: Amount must be an Amount");if(s.Amount2!=null&&!(0,t.isAmount)(s.Amount2))throw new e.ValidationError("AMMWithdraw: Amount2 must be an Amount");if(s.EPrice!=null&&!(0,t.isAmount)(s.EPrice))throw new e.ValidationError("AMMWithdraw: EPrice must be an Amount")}return ps.validateAMMWithdraw=r,ps}var gs={},Am;function kg(){if(Am)return gs;Am=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.validateNFTokenCreateOffer=gs.NFTokenCreateOfferFlags=void 0;const e=Oe(),t=oo(),n=Ce();var r;(function(a){a[a.tfSellNFToken=1]="tfSellNFToken"})(r||(gs.NFTokenCreateOfferFlags=r={}));function s(a){if(a.Owner!=null)throw new e.ValidationError("NFTokenCreateOffer: Owner must not be present for sell offers")}function i(a){if(a.Owner==null)throw new e.ValidationError("NFTokenCreateOffer: Owner must be present for buy offers");if((0,n.parseAmountValue)(a.Amount)<=0)throw new e.ValidationError("NFTokenCreateOffer: Amount must be greater than 0 for buy offers")}function o(a){if((0,n.validateBaseTransaction)(a),a.Account===a.Owner)throw new e.ValidationError("NFTokenCreateOffer: Owner and Account must not be equal");if(a.Account===a.Destination)throw new e.ValidationError("NFTokenCreateOffer: Destination and Account must not be equal");if((0,n.validateOptionalField)(a,"Destination",n.isAccount),(0,n.validateOptionalField)(a,"Owner",n.isAccount),a.NFTokenID==null)throw new e.ValidationError("NFTokenCreateOffer: missing field NFTokenID");if(!(0,n.isAmount)(a.Amount))throw new e.ValidationError("NFTokenCreateOffer: invalid Amount");typeof a.Flags=="number"&&(0,t.isFlagEnabled)(a.Flags,r.tfSellNFToken)?s(a):i(a)}return gs.validateNFTokenCreateOffer=o,gs}var ys={},Sm;function Rg(){if(Sm)return ys;Sm=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.validateNFTokenMint=ys.NFTokenMintFlags=void 0;const e=Oe(),t=oo(),n=Ce();var r;(function(i){i[i.tfBurnable=1]="tfBurnable",i[i.tfOnlyXRP=2]="tfOnlyXRP",i[i.tfTrustLine=4]="tfTrustLine",i[i.tfTransferable=8]="tfTransferable"})(r||(ys.NFTokenMintFlags=r={}));function s(i){if((0,n.validateBaseTransaction)(i),i.Account===i.Issuer)throw new e.ValidationError("NFTokenMint: Issuer must not be equal to Account");if((0,n.validateOptionalField)(i,"Issuer",n.isAccount),typeof i.URI=="string"&&i.URI==="")throw new e.ValidationError("NFTokenMint: URI must not be empty string");if(typeof i.URI=="string"&&!(0,t.isHex)(i.URI))throw new e.ValidationError("NFTokenMint: URI must be in hex format");if(i.NFTokenTaxon==null)throw new e.ValidationError("NFTokenMint: missing field NFTokenTaxon")}return ys.validateNFTokenMint=s,ys}var ms={},Tm;function Bg(){if(Tm)return ms;Tm=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.validateOfferCreate=ms.OfferCreateFlags=void 0;const e=Oe(),t=Ce();var n;(function(s){s[s.tfPassive=65536]="tfPassive",s[s.tfImmediateOrCancel=131072]="tfImmediateOrCancel",s[s.tfFillOrKill=262144]="tfFillOrKill",s[s.tfSell=524288]="tfSell"})(n||(ms.OfferCreateFlags=n={}));function r(s){if((0,t.validateBaseTransaction)(s),s.TakerGets===void 0)throw new e.ValidationError("OfferCreate: missing field TakerGets");if(s.TakerPays===void 0)throw new e.ValidationError("OfferCreate: missing field TakerPays");if(typeof s.TakerGets!="string"&&!(0,t.isAmount)(s.TakerGets))throw new e.ValidationError("OfferCreate: invalid TakerGets");if(typeof s.TakerPays!="string"&&!(0,t.isAmount)(s.TakerPays))throw new e.ValidationError("OfferCreate: invalid TakerPays");if(s.Expiration!==void 0&&typeof s.Expiration!="number")throw new e.ValidationError("OfferCreate: invalid Expiration");if(s.OfferSequence!==void 0&&typeof s.OfferSequence!="number")throw new e.ValidationError("OfferCreate: invalid OfferSequence")}return ms.validateOfferCreate=r,ms}var ws={},Mm;function Ug(){if(Mm)return ws;Mm=1,Object.defineProperty(ws,"__esModule",{value:!0}),ws.validatePayment=ws.PaymentFlags=void 0;const e=Oe(),t=oo(),n=Ce();var r;(function(c){c[c.tfNoRippleDirect=65536]="tfNoRippleDirect",c[c.tfPartialPayment=131072]="tfPartialPayment",c[c.tfLimitQuality=262144]="tfLimitQuality"})(r||(ws.PaymentFlags=r={}));function s(c){if((0,n.validateBaseTransaction)(c),c.Amount===void 0)throw new e.ValidationError("PaymentTransaction: missing field Amount");if(!(0,n.isAmount)(c.Amount))throw new e.ValidationError("PaymentTransaction: invalid Amount");if((0,n.validateRequiredField)(c,"Destination",n.isAccount),(0,n.validateOptionalField)(c,"DestinationTag",n.isNumber),c.InvoiceID!==void 0&&typeof c.InvoiceID!="string")throw new e.ValidationError("PaymentTransaction: InvoiceID must be a string");if(c.Paths!==void 0&&!u(c.Paths))throw new e.ValidationError("PaymentTransaction: invalid Paths");if(c.SendMax!==void 0&&!(0,n.isAmount)(c.SendMax))throw new e.ValidationError("PaymentTransaction: invalid SendMax");i(c)}ws.validatePayment=s;function i(c){var l;if(c.DeliverMin!=null){if(c.Flags==null)throw new e.ValidationError("PaymentTransaction: tfPartialPayment flag required with DeliverMin");const d=c.Flags;if(!(typeof d=="number"?(0,t.isFlagEnabled)(d,r.tfPartialPayment):(l=d.tfPartialPayment)!==null&&l!==void 0?l:!1))throw new e.ValidationError("PaymentTransaction: tfPartialPayment flag required with DeliverMin");if(!(0,n.isAmount)(c.DeliverMin))throw new e.ValidationError("PaymentTransaction: invalid DeliverMin")}}function o(c){return c.account!==void 0&&typeof c.account!="string"||c.currency!==void 0&&typeof c.currency!="string"||c.issuer!==void 0&&typeof c.issuer!="string"?!1:c.account!==void 0&&c.currency===void 0&&c.issuer===void 0||c.currency!==void 0||c.issuer!==void 0}function a(c){for(const l of c)if(!o(l))return!1;return!0}function u(c){if(!Array.isArray(c)||c.length===0)return!1;for(const l of c)if(!Array.isArray(l)||l.length===0||!a(l))return!1;return!0}return ws}var bs={},Nm;function zg(){if(Nm)return bs;Nm=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.validatePaymentChannelClaim=bs.PaymentChannelClaimFlags=void 0;const e=Oe(),t=Ce();var n;(function(s){s[s.tfRenew=65536]="tfRenew",s[s.tfClose=131072]="tfClose"})(n||(bs.PaymentChannelClaimFlags=n={}));function r(s){if((0,t.validateBaseTransaction)(s),s.Channel===void 0)throw new e.ValidationError("PaymentChannelClaim: missing Channel");if(typeof s.Channel!="string")throw new e.ValidationError("PaymentChannelClaim: Channel must be a string");if(s.Balance!==void 0&&typeof s.Balance!="string")throw new e.ValidationError("PaymentChannelClaim: Balance must be a string");if(s.Amount!==void 0&&typeof s.Amount!="string")throw new e.ValidationError("PaymentChannelClaim: Amount must be a string");if(s.Signature!==void 0&&typeof s.Signature!="string")throw new e.ValidationError("PaymentChannelClaim: Signature must be a string");if(s.PublicKey!==void 0&&typeof s.PublicKey!="string")throw new e.ValidationError("PaymentChannelClaim: PublicKey must be a string")}return bs.validatePaymentChannelClaim=r,bs}var vs={},Im;function Fg(){if(Im)return vs;Im=1,Object.defineProperty(vs,"__esModule",{value:!0}),vs.validateTrustSet=vs.TrustSetFlags=void 0;const e=Oe(),t=Ce();var n;(function(s){s[s.tfSetfAuth=65536]="tfSetfAuth",s[s.tfSetNoRipple=131072]="tfSetNoRipple",s[s.tfClearNoRipple=262144]="tfClearNoRipple",s[s.tfSetFreeze=1048576]="tfSetFreeze",s[s.tfClearFreeze=2097152]="tfClearFreeze"})(n||(vs.TrustSetFlags=n={}));function r(s){(0,t.validateBaseTransaction)(s);const{LimitAmount:i,QualityIn:o,QualityOut:a}=s;if(i===void 0)throw new e.ValidationError("TrustSet: missing field LimitAmount");if(!(0,t.isAmount)(i))throw new e.ValidationError("TrustSet: invalid LimitAmount");if(o!==void 0&&typeof o!="number")throw new e.ValidationError("TrustSet: QualityIn must be a number");if(a!==void 0&&typeof a!="number")throw new e.ValidationError("TrustSet: QualityOut must be a number")}return vs.validateTrustSet=r,vs}var Es={},_m;function Hg(){if(_m)return Es;_m=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.validateXChainModifyBridge=Es.XChainModifyBridgeFlags=void 0;const e=Ce();var t;(function(r){r[r.tfClearAccountCreateAmount=65536]="tfClearAccountCreateAmount"})(t||(Es.XChainModifyBridgeFlags=t={}));function n(r){(0,e.validateBaseTransaction)(r),(0,e.validateRequiredField)(r,"XChainBridge",e.isXChainBridge),(0,e.validateOptionalField)(r,"SignatureReward",e.isAmount),(0,e.validateOptionalField)(r,"MinAccountCreateAmount",e.isAmount)}return Es.validateXChainModifyBridge=n,Es}var Om;function Vg(){if(Om)return rs;Om=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.setTransactionFlagsToNumber=rs.parseAccountRootFlags=void 0;const e=Oe(),t=nS(),n=Cg(),r=jg(),s=Pg(),i=kg(),o=Rg(),a=Bg(),u=Ug(),c=zg(),l=Fg(),d=Hg(),f=oo();function h(b){const A={};return Object.values(t.AccountRootFlags).forEach(E=>{typeof E=="string"&&(0,f.isFlagEnabled)(b,t.AccountRootFlags[E])&&(A[E]=!0)}),A}rs.parseAccountRootFlags=h;const p={AccountSet:n.AccountSetTfFlags,AMMDeposit:r.AMMDepositFlags,AMMWithdraw:s.AMMWithdrawFlags,NFTokenCreateOffer:i.NFTokenCreateOfferFlags,NFTokenMint:o.NFTokenMintFlags,OfferCreate:a.OfferCreateFlags,PaymentChannelClaim:c.PaymentChannelClaimFlags,Payment:u.PaymentFlags,TrustSet:l.TrustSetFlags,XChainModifyBridge:d.XChainModifyBridgeFlags};function g(b){if(b.Flags==null){b.Flags=0;return}typeof b.Flags!="number"&&(b.Flags=p[b.TransactionType]?y(b.Flags,p[b.TransactionType]):0)}rs.setTransactionFlagsToNumber=g;function y(b,A){return Object.keys(b).reduce((E,_)=>{if(A[_]==null)throw new e.ValidationError(`flag ${_} doesn't exist in flagEnum: ${JSON.stringify(A)}`);return b[_]?E|A[_]:E},0)}return rs}var As={},Dn={},Dm;function RI(){if(Dm)return Dn;Dm=1;var e=Dn&&Dn.__awaiter||function(d,f,h,p){function g(y){return y instanceof h?y:new h(function(b){b(y)})}return new(h||(h=Promise))(function(y,b){function A(S){try{_(p.next(S))}catch(I){b(I)}}function E(S){try{_(p.throw(S))}catch(I){b(I)}}function _(S){S.done?y(S.value):g(S.value).then(A,E)}_((p=p.apply(d,f||[])).next())})};Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.getLastLedgerSequence=Dn.getSignedTx=Dn.waitForFinalTransactionOutcome=Dn.submitRequest=void 0;const t=fr(),n=Oe(),r=1e3;function s(d){return e(this,void 0,void 0,function*(){return new Promise(f=>{setTimeout(f,d)})})}function i(d,f,h=!1){return e(this,void 0,void 0,function*(){if(!a(f))throw new n.ValidationError("Transaction must be signed");const g={command:"submit",tx_blob:typeof f=="string"?f:(0,t.encode)(f),fail_hard:l(f)||h};return d.request(g)})}Dn.submitRequest=i;function o(d,f,h,p){return e(this,void 0,void 0,function*(){yield s(r);const g=yield d.getLedgerIndex();if(h<g)throw new n.XrplError(`The latest ledger sequence ${g} is greater than the transaction's LastLedgerSequence (${h}).
Preliminary result: ${p}`);const y=yield d.request({command:"tx",transaction:f}).catch(b=>e(this,void 0,void 0,function*(){var A;const E=(A=b?.data)===null||A===void 0?void 0:A.error;if(E==="txnNotFound")return o(d,f,h,p);throw new Error(`${E} 
 Preliminary result: ${p}.
Full error details: ${String(b)}`)}));return y.result.validated?y:o(d,f,h,p)})}Dn.waitForFinalTransactionOutcome=o;function a(d){const f=typeof d=="string"?(0,t.decode)(d):d;if(typeof f=="string")return!1;if(f.Signers!=null){const h=f.Signers;for(const p of h)if(p.Signer.SigningPubKey==null||p.Signer.TxnSignature==null)return!1;return!0}return f.SigningPubKey!=null&&f.TxnSignature!=null}function u(d,f,{autofill:h=!0,wallet:p}={}){return e(this,void 0,void 0,function*(){if(a(f))return f;if(!p)throw new n.ValidationError("Wallet must be provided when submitting an unsigned transaction");let g=typeof f=="string"?(0,t.decode)(f):f;return h&&(g=yield d.autofill(g)),p.sign(g).tx_blob})}Dn.getSignedTx=u;function c(d){return(typeof d=="string"?(0,t.decode)(d):d).LastLedgerSequence}Dn.getLastLedgerSequence=c;function l(d){return(typeof d=="string"?(0,t.decode)(d):d).TransactionType==="AccountDelete"}return Dn}var Fa={},xm;function gS(){if(xm)return Fa;xm=1,Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.ensureClassicAddress=void 0;const e=Rn();function t(n){if((0,e.isValidXAddress)(n)){const{classicAddress:r,tag:s}=(0,e.xAddressToClassicAddress)(n);if(s!==!1)throw new Error("This command does not support the use of a tag. Use an address without a tag.");return r}return n}return Fa.ensureClassicAddress=t,Fa}var Lm;function BI(){return Lm||(Lm=1,(function(e){var t=As&&As.__createBinding||(Object.create?(function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}):(function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]})),n=As&&As.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(RI(),e),n(gS(),e)})(As)),As}var St={},Ha={},Va={},Ss={},Ts={},cn={},Cm;function yS(){if(Cm)return cn;Cm=1,Object.defineProperty(cn,"__esModule",{value:!0}),cn.ripemd160=cn.RIPEMD160=cn.md5=cn.MD5=cn.sha1=cn.SHA1=void 0;const e=rS(),t=Mn(),n=Uint32Array.from([1732584193,4023233417,2562383102,271733878,3285377520]),r=new Uint32Array(80);class s extends e.HashMD{constructor(){super(64,20,8,!1),this.A=n[0]|0,this.B=n[1]|0,this.C=n[2]|0,this.D=n[3]|0,this.E=n[4]|0}get(){const{A:x,B:j,C:V,D:Y,E:q}=this;return[x,j,V,Y,q]}set(x,j,V,Y,q){this.A=x|0,this.B=j|0,this.C=V|0,this.D=Y|0,this.E=q|0}process(x,j){for(let T=0;T<16;T++,j+=4)r[T]=x.getUint32(j,!1);for(let T=16;T<80;T++)r[T]=(0,t.rotl)(r[T-3]^r[T-8]^r[T-14]^r[T-16],1);let{A:V,B:Y,C:q,D:R,E:v}=this;for(let T=0;T<80;T++){let m,w;T<20?(m=(0,e.Chi)(Y,q,R),w=1518500249):T<40?(m=Y^q^R,w=1859775393):T<60?(m=(0,e.Maj)(Y,q,R),w=2400959708):(m=Y^q^R,w=3395469782);const N=(0,t.rotl)(V,5)+m+v+w+r[T]|0;v=R,R=q,q=(0,t.rotl)(Y,30),Y=V,V=N}V=V+this.A|0,Y=Y+this.B|0,q=q+this.C|0,R=R+this.D|0,v=v+this.E|0,this.set(V,Y,q,R,v)}roundClean(){(0,t.clean)(r)}destroy(){this.set(0,0,0,0,0),(0,t.clean)(this.buffer)}}cn.SHA1=s,cn.sha1=(0,t.createHasher)(()=>new s);const i=Math.pow(2,32),o=Array.from({length:64},(L,x)=>Math.floor(i*Math.abs(Math.sin(x+1)))),a=n.slice(0,4),u=new Uint32Array(16);class c extends e.HashMD{constructor(){super(64,16,8,!0),this.A=a[0]|0,this.B=a[1]|0,this.C=a[2]|0,this.D=a[3]|0}get(){const{A:x,B:j,C:V,D:Y}=this;return[x,j,V,Y]}set(x,j,V,Y){this.A=x|0,this.B=j|0,this.C=V|0,this.D=Y|0}process(x,j){for(let v=0;v<16;v++,j+=4)u[v]=x.getUint32(j,!0);let{A:V,B:Y,C:q,D:R}=this;for(let v=0;v<64;v++){let T,m,w;v<16?(T=(0,e.Chi)(Y,q,R),m=v,w=[7,12,17,22]):v<32?(T=(0,e.Chi)(R,Y,q),m=(5*v+1)%16,w=[5,9,14,20]):v<48?(T=Y^q^R,m=(3*v+5)%16,w=[4,11,16,23]):(T=q^(Y|~R),m=7*v%16,w=[6,10,15,21]),T=T+V+o[v]+u[m],V=R,R=q,q=Y,Y=Y+(0,t.rotl)(T,w[v%4])}V=V+this.A|0,Y=Y+this.B|0,q=q+this.C|0,R=R+this.D|0,this.set(V,Y,q,R)}roundClean(){(0,t.clean)(u)}destroy(){this.set(0,0,0,0),(0,t.clean)(this.buffer)}}cn.MD5=c,cn.md5=(0,t.createHasher)(()=>new c);const l=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),d=Uint8Array.from(new Array(16).fill(0).map((L,x)=>x)),f=d.map(L=>(9*L+5)%16),h=(()=>{const j=[[d],[f]];for(let V=0;V<4;V++)for(let Y of j)Y.push(Y[V].map(q=>l[q]));return j})(),p=h[0],g=h[1],y=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(L=>Uint8Array.from(L)),b=p.map((L,x)=>L.map(j=>y[x][j])),A=g.map((L,x)=>L.map(j=>y[x][j])),E=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),_=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function S(L,x,j,V){return L===0?x^j^V:L===1?x&j|~x&V:L===2?(x|~j)^V:L===3?x&V|j&~V:x^(j|~V)}const I=new Uint32Array(16);class D extends e.HashMD{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:x,h1:j,h2:V,h3:Y,h4:q}=this;return[x,j,V,Y,q]}set(x,j,V,Y,q){this.h0=x|0,this.h1=j|0,this.h2=V|0,this.h3=Y|0,this.h4=q|0}process(x,j){for(let O=0;O<16;O++,j+=4)I[O]=x.getUint32(j,!0);let V=this.h0|0,Y=V,q=this.h1|0,R=q,v=this.h2|0,T=v,m=this.h3|0,w=m,N=this.h4|0,C=N;for(let O=0;O<5;O++){const B=4-O,W=E[O],P=_[O],X=p[O],ee=g[O],se=b[O],Z=A[O];for(let J=0;J<16;J++){const z=(0,t.rotl)(V+S(O,q,v,m)+I[X[J]]+W,se[J])+N|0;V=N,N=m,m=(0,t.rotl)(v,10)|0,v=q,q=z}for(let J=0;J<16;J++){const z=(0,t.rotl)(Y+S(B,R,T,w)+I[ee[J]]+P,Z[J])+C|0;Y=C,C=w,w=(0,t.rotl)(T,10)|0,T=R,R=z}}this.set(this.h1+v+w|0,this.h2+m+C|0,this.h3+N+Y|0,this.h4+V+R|0,this.h0+q+T|0)}roundClean(){(0,t.clean)(I)}destroy(){this.destroyed=!0,(0,t.clean)(this.buffer),this.set(0,0,0,0,0)}}return cn.RIPEMD160=D,cn.ripemd160=(0,t.createHasher)(()=>new D),cn}var jm;function UI(){if(jm)return Ts;jm=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.ripemd160=Ts.RIPEMD160=void 0;const e=yS();return Ts.RIPEMD160=e.RIPEMD160,Ts.ripemd160=e.ripemd160,Ts}var Pm;function zI(){if(Pm)return Ss;Pm=1;var e=Ss&&Ss.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.ripemd160=void 0;const t=UI(),n=e(Ng());return Ss.ripemd160=(0,n.default)(t.ripemd160),Ss}var Ur={},Qh={},qa={},$h={},Zh={},km;function qg(){return km||(km=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=e.HMAC=void 0;const t=Mn();class n extends t.Hash{constructor(i,o){super(),this.finished=!1,this.destroyed=!1,(0,t.ahash)(i);const a=(0,t.toBytes)(o);if(this.iHash=i.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,c=new Uint8Array(u);c.set(a.length>u?i.create().update(a).digest():a);for(let l=0;l<c.length;l++)c[l]^=54;this.iHash.update(c),this.oHash=i.create();for(let l=0;l<c.length;l++)c[l]^=106;this.oHash.update(c),(0,t.clean)(c)}update(i){return(0,t.aexists)(this),this.iHash.update(i),this}digestInto(i){(0,t.aexists)(this),(0,t.abytes)(i,this.outputLen),this.finished=!0,this.iHash.digestInto(i),this.oHash.update(i),this.oHash.digestInto(i),this.destroy()}digest(){const i=new Uint8Array(this.oHash.outputLen);return this.digestInto(i),i}_cloneInto(i){i||(i=Object.create(Object.getPrototypeOf(this),{}));const{oHash:o,iHash:a,finished:u,destroyed:c,blockLen:l,outputLen:d}=this;return i=i,i.finished=u,i.destroyed=c,i.blockLen=l,i.outputLen=d,i.oHash=o._cloneInto(i.oHash),i.iHash=a._cloneInto(i.iHash),i}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}e.HMAC=n;const r=(s,i,o)=>new n(s,i).update(o).digest();e.hmac=r,e.hmac.create=(s,i)=>new n(s,i)})(Zh)),Zh}var Jh={},Rm;function pi(){return Rm||(Rm=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.notImplemented=e.bitMask=e.utf8ToBytes=e.randomBytes=e.isBytes=e.hexToBytes=e.concatBytes=e.bytesToUtf8=e.bytesToHex=e.anumber=e.abytes=void 0,e.abool=i,e._abool2=o,e._abytes2=a,e.numberToHexUnpadded=u,e.hexToNumber=c,e.bytesToNumberBE=l,e.bytesToNumberLE=d,e.numberToBytesBE=f,e.numberToBytesLE=h,e.numberToVarBytesBE=p,e.ensureBytes=g,e.equalBytes=y,e.copyBytes=b,e.asciiToBytes=A,e.inRange=_,e.aInRange=S,e.bitLen=I,e.bitGet=D,e.bitSet=L,e.createHmacDrbg=j,e.validateObject=Y,e.isHash=q,e._validateObject=R,e.memoized=T;const t=Mn();var n=Mn();Object.defineProperty(e,"abytes",{enumerable:!0,get:function(){return n.abytes}}),Object.defineProperty(e,"anumber",{enumerable:!0,get:function(){return n.anumber}}),Object.defineProperty(e,"bytesToHex",{enumerable:!0,get:function(){return n.bytesToHex}}),Object.defineProperty(e,"bytesToUtf8",{enumerable:!0,get:function(){return n.bytesToUtf8}}),Object.defineProperty(e,"concatBytes",{enumerable:!0,get:function(){return n.concatBytes}}),Object.defineProperty(e,"hexToBytes",{enumerable:!0,get:function(){return n.hexToBytes}}),Object.defineProperty(e,"isBytes",{enumerable:!0,get:function(){return n.isBytes}}),Object.defineProperty(e,"randomBytes",{enumerable:!0,get:function(){return n.randomBytes}}),Object.defineProperty(e,"utf8ToBytes",{enumerable:!0,get:function(){return n.utf8ToBytes}});const r=BigInt(0),s=BigInt(1);function i(m,w){if(typeof w!="boolean")throw new Error(m+" boolean expected, got "+w)}function o(m,w=""){if(typeof m!="boolean"){const N=w&&`"${w}"`;throw new Error(N+"expected boolean, got type="+typeof m)}return m}function a(m,w,N=""){const C=(0,t.isBytes)(m),O=m?.length,B=w!==void 0;if(!C||B&&O!==w){const W=N&&`"${N}" `,P=B?` of length ${w}`:"",X=C?`length=${O}`:`type=${typeof m}`;throw new Error(W+"expected Uint8Array"+P+", got "+X)}return m}function u(m){const w=m.toString(16);return w.length&1?"0"+w:w}function c(m){if(typeof m!="string")throw new Error("hex string expected, got "+typeof m);return m===""?r:BigInt("0x"+m)}function l(m){return c((0,t.bytesToHex)(m))}function d(m){return(0,t.abytes)(m),c((0,t.bytesToHex)(Uint8Array.from(m).reverse()))}function f(m,w){return(0,t.hexToBytes)(m.toString(16).padStart(w*2,"0"))}function h(m,w){return f(m,w).reverse()}function p(m){return(0,t.hexToBytes)(u(m))}function g(m,w,N){let C;if(typeof w=="string")try{C=(0,t.hexToBytes)(w)}catch(B){throw new Error(m+" must be hex string or Uint8Array, cause: "+B)}else if((0,t.isBytes)(w))C=Uint8Array.from(w);else throw new Error(m+" must be hex string or Uint8Array");const O=C.length;if(typeof N=="number"&&O!==N)throw new Error(m+" of length "+N+" expected, got "+O);return C}function y(m,w){if(m.length!==w.length)return!1;let N=0;for(let C=0;C<m.length;C++)N|=m[C]^w[C];return N===0}function b(m){return Uint8Array.from(m)}function A(m){return Uint8Array.from(m,(w,N)=>{const C=w.charCodeAt(0);if(w.length!==1||C>127)throw new Error(`string contains non-ASCII character "${m[N]}" with code ${C} at position ${N}`);return C})}const E=m=>typeof m=="bigint"&&r<=m;function _(m,w,N){return E(m)&&E(w)&&E(N)&&w<=m&&m<N}function S(m,w,N,C){if(!_(w,N,C))throw new Error("expected valid "+m+": "+N+" <= n < "+C+", got "+w)}function I(m){let w;for(w=0;m>r;m>>=s,w+=1);return w}function D(m,w){return m>>BigInt(w)&s}function L(m,w,N){return m|(N?s:r)<<BigInt(w)}const x=m=>(s<<BigInt(m))-s;e.bitMask=x;function j(m,w,N){if(typeof m!="number"||m<2)throw new Error("hashLen must be a number");if(typeof w!="number"||w<2)throw new Error("qByteLen must be a number");if(typeof N!="function")throw new Error("hmacFn must be a function");const C=z=>new Uint8Array(z),O=z=>Uint8Array.of(z);let B=C(m),W=C(m),P=0;const X=()=>{B.fill(1),W.fill(0),P=0},ee=(...z)=>N(W,B,...z),se=(z=C(0))=>{W=ee(O(0),z),B=ee(),z.length!==0&&(W=ee(O(1),z),B=ee())},Z=()=>{if(P++>=1e3)throw new Error("drbg: tried 1000 values");let z=0;const K=[];for(;z<w;){B=ee();const H=B.slice();K.push(H),z+=B.length}return(0,t.concatBytes)(...K)};return(z,K)=>{X(),se(z);let H;for(;!(H=K(Z()));)se();return X(),H}}const V={bigint:m=>typeof m=="bigint",function:m=>typeof m=="function",boolean:m=>typeof m=="boolean",string:m=>typeof m=="string",stringOrUint8Array:m=>typeof m=="string"||(0,t.isBytes)(m),isSafeInteger:m=>Number.isSafeInteger(m),array:m=>Array.isArray(m),field:(m,w)=>w.Fp.isValid(m),hash:m=>typeof m=="function"&&Number.isSafeInteger(m.outputLen)};function Y(m,w,N={}){const C=(O,B,W)=>{const P=V[B];if(typeof P!="function")throw new Error("invalid validator function");const X=m[O];if(!(W&&X===void 0)&&!P(X,m))throw new Error("param "+String(O)+" is invalid. Expected "+B+", got "+X)};for(const[O,B]of Object.entries(w))C(O,B,!1);for(const[O,B]of Object.entries(N))C(O,B,!0);return m}function q(m){return typeof m=="function"&&Number.isSafeInteger(m.outputLen)}function R(m,w,N={}){if(!m||typeof m!="object")throw new Error("expected valid options object");function C(O,B,W){const P=m[O];if(W&&P===void 0)return;const X=typeof P;if(X!==B||P===null)throw new Error(`param "${O}" is invalid: expected ${B}, got ${X}`)}Object.entries(w).forEach(([O,B])=>C(O,B,!1)),Object.entries(N).forEach(([O,B])=>C(O,B,!0))}const v=()=>{throw new Error("not implemented")};e.notImplemented=v;function T(m){const w=new WeakMap;return(N,...C)=>{const O=w.get(N);if(O!==void 0)return O;const B=m(N,...C);return w.set(N,B),B}}})(Jh)),Jh}var Un={},st={},Bm;function Zi(){if(Bm)return st;Bm=1,Object.defineProperty(st,"__esModule",{value:!0}),st.isNegativeLE=void 0,st.mod=d,st.pow=f,st.pow2=h,st.invert=p,st.tonelliShanks=E,st.FpSqrt=_,st.validateField=D,st.FpPow=L,st.FpInvertBatch=x,st.FpDiv=j,st.FpLegendre=V,st.FpIsSquare=Y,st.nLength=q,st.Field=R,st.FpSqrtOdd=v,st.FpSqrtEven=T,st.hashToPrivateScalar=m,st.getFieldBytesLength=w,st.getMinHashLength=N,st.mapHashToField=C;const e=pi(),t=BigInt(0),n=BigInt(1),r=BigInt(2),s=BigInt(3),i=BigInt(4),o=BigInt(5),a=BigInt(7),u=BigInt(8),c=BigInt(9),l=BigInt(16);function d(O,B){const W=O%B;return W>=t?W:B+W}function f(O,B,W){return L(R(W),O,B)}function h(O,B,W){let P=O;for(;B-- >t;)P*=P,P%=W;return P}function p(O,B){if(O===t)throw new Error("invert: expected non-zero number");if(B<=t)throw new Error("invert: expected positive modulus, got "+B);let W=d(O,B),P=B,X=t,ee=n;for(;W!==t;){const Z=P/W,J=P%W,z=X-ee*Z;P=W,W=J,X=ee,ee=z}if(P!==n)throw new Error("invert: does not exist");return d(X,B)}function g(O,B,W){if(!O.eql(O.sqr(B),W))throw new Error("Cannot find square root")}function y(O,B){const W=(O.ORDER+n)/i,P=O.pow(B,W);return g(O,P,B),P}function b(O,B){const W=(O.ORDER-o)/u,P=O.mul(B,r),X=O.pow(P,W),ee=O.mul(B,X),se=O.mul(O.mul(ee,r),X),Z=O.mul(ee,O.sub(se,O.ONE));return g(O,Z,B),Z}function A(O){const B=R(O),W=E(O),P=W(B,B.neg(B.ONE)),X=W(B,P),ee=W(B,B.neg(P)),se=(O+a)/l;return(Z,J)=>{let z=Z.pow(J,se),K=Z.mul(z,P);const H=Z.mul(z,X),U=Z.mul(z,ee),F=Z.eql(Z.sqr(K),J),$=Z.eql(Z.sqr(H),J);z=Z.cmov(z,K,F),K=Z.cmov(U,H,$);const te=Z.eql(Z.sqr(K),J),ne=Z.cmov(z,K,te);return g(Z,ne,J),ne}}function E(O){if(O<s)throw new Error("sqrt is not defined for small field");let B=O-n,W=0;for(;B%r===t;)B/=r,W++;let P=r;const X=R(O);for(;V(X,P)===1;)if(P++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(W===1)return y;let ee=X.pow(P,B);const se=(B+n)/r;return function(J,z){if(J.is0(z))return z;if(V(J,z)!==1)throw new Error("Cannot find square root");let K=W,H=J.mul(J.ONE,ee),U=J.pow(z,B),F=J.pow(z,se);for(;!J.eql(U,J.ONE);){if(J.is0(U))return J.ZERO;let $=1,te=J.sqr(U);for(;!J.eql(te,J.ONE);)if($++,te=J.sqr(te),$===K)throw new Error("Cannot find square root");const ne=n<<BigInt(K-$-1),ie=J.pow(H,ne);K=$,H=J.sqr(ie),U=J.mul(U,H),F=J.mul(F,ie)}return F}}function _(O){return O%i===s?y:O%u===o?b:O%l===c?A(O):E(O)}const S=(O,B)=>(d(O,B)&n)===n;st.isNegativeLE=S;const I=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function D(O){const B={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},W=I.reduce((P,X)=>(P[X]="function",P),B);return(0,e._validateObject)(O,W),O}function L(O,B,W){if(W<t)throw new Error("invalid exponent, negatives unsupported");if(W===t)return O.ONE;if(W===n)return B;let P=O.ONE,X=B;for(;W>t;)W&n&&(P=O.mul(P,X)),X=O.sqr(X),W>>=n;return P}function x(O,B,W=!1){const P=new Array(B.length).fill(W?O.ZERO:void 0),X=B.reduce((se,Z,J)=>O.is0(Z)?se:(P[J]=se,O.mul(se,Z)),O.ONE),ee=O.inv(X);return B.reduceRight((se,Z,J)=>O.is0(Z)?se:(P[J]=O.mul(se,P[J]),O.mul(se,Z)),ee),P}function j(O,B,W){return O.mul(B,typeof W=="bigint"?p(W,O.ORDER):O.inv(W))}function V(O,B){const W=(O.ORDER-n)/r,P=O.pow(B,W),X=O.eql(P,O.ONE),ee=O.eql(P,O.ZERO),se=O.eql(P,O.neg(O.ONE));if(!X&&!ee&&!se)throw new Error("invalid Legendre symbol result");return X?1:ee?0:-1}function Y(O,B){return V(O,B)===1}function q(O,B){B!==void 0&&(0,e.anumber)(B);const W=B!==void 0?B:O.toString(2).length,P=Math.ceil(W/8);return{nBitLength:W,nByteLength:P}}function R(O,B,W=!1,P={}){if(O<=t)throw new Error("invalid field: expected ORDER > 0, got "+O);let X,ee,se=!1,Z;if(typeof B=="object"&&B!=null){if(P.sqrt||W)throw new Error("cannot specify opts in two arguments");const U=B;U.BITS&&(X=U.BITS),U.sqrt&&(ee=U.sqrt),typeof U.isLE=="boolean"&&(W=U.isLE),typeof U.modFromBytes=="boolean"&&(se=U.modFromBytes),Z=U.allowedLengths}else typeof B=="number"&&(X=B),P.sqrt&&(ee=P.sqrt);const{nBitLength:J,nByteLength:z}=q(O,X);if(z>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let K;const H=Object.freeze({ORDER:O,isLE:W,BITS:J,BYTES:z,MASK:(0,e.bitMask)(J),ZERO:t,ONE:n,allowedLengths:Z,create:U=>d(U,O),isValid:U=>{if(typeof U!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof U);return t<=U&&U<O},is0:U=>U===t,isValidNot0:U=>!H.is0(U)&&H.isValid(U),isOdd:U=>(U&n)===n,neg:U=>d(-U,O),eql:(U,F)=>U===F,sqr:U=>d(U*U,O),add:(U,F)=>d(U+F,O),sub:(U,F)=>d(U-F,O),mul:(U,F)=>d(U*F,O),pow:(U,F)=>L(H,U,F),div:(U,F)=>d(U*p(F,O),O),sqrN:U=>U*U,addN:(U,F)=>U+F,subN:(U,F)=>U-F,mulN:(U,F)=>U*F,inv:U=>p(U,O),sqrt:ee||(U=>(K||(K=_(O)),K(H,U))),toBytes:U=>W?(0,e.numberToBytesLE)(U,z):(0,e.numberToBytesBE)(U,z),fromBytes:(U,F=!0)=>{if(Z){if(!Z.includes(U.length)||U.length>z)throw new Error("Field.fromBytes: expected "+Z+" bytes, got "+U.length);const te=new Uint8Array(z);te.set(U,W?0:te.length-U.length),U=te}if(U.length!==z)throw new Error("Field.fromBytes: expected "+z+" bytes, got "+U.length);let $=W?(0,e.bytesToNumberLE)(U):(0,e.bytesToNumberBE)(U);if(se&&($=d($,O)),!F&&!H.isValid($))throw new Error("invalid field element: outside of range 0..ORDER");return $},invertBatch:U=>x(H,U),cmov:(U,F,$)=>$?F:U});return Object.freeze(H)}function v(O,B){if(!O.isOdd)throw new Error("Field doesn't have isOdd");const W=O.sqrt(B);return O.isOdd(W)?W:O.neg(W)}function T(O,B){if(!O.isOdd)throw new Error("Field doesn't have isOdd");const W=O.sqrt(B);return O.isOdd(W)?O.neg(W):W}function m(O,B,W=!1){O=(0,e.ensureBytes)("privateHash",O);const P=O.length,X=q(B).nByteLength+8;if(X<24||P<X||P>1024)throw new Error("hashToPrivateScalar: expected "+X+"-1024 bytes of input, got "+P);const ee=W?(0,e.bytesToNumberLE)(O):(0,e.bytesToNumberBE)(O);return d(ee,B-n)+n}function w(O){if(typeof O!="bigint")throw new Error("field order must be bigint");const B=O.toString(2).length;return Math.ceil(B/8)}function N(O){const B=w(O);return B+Math.ceil(B/2)}function C(O,B,W=!1){const P=O.length,X=w(B),ee=N(B);if(P<16||P<ee||P>1024)throw new Error("expected "+ee+"-1024 bytes of input, got "+P);const se=W?(0,e.bytesToNumberLE)(O):(0,e.bytesToNumberBE)(O),Z=d(se,B-n)+n;return W?(0,e.numberToBytesLE)(Z,X):(0,e.numberToBytesBE)(Z,X)}return st}var Um;function Gg(){if(Um)return Un;Um=1,Object.defineProperty(Un,"__esModule",{value:!0}),Un.wNAF=void 0,Un.negateCt=s,Un.normalizeZ=i,Un.mulEndoUnsafe=y,Un.pippenger=b,Un.precomputeMSMUnsafe=A,Un.validateBasic=E,Un._createCurveFields=S;const e=pi(),t=Zi(),n=BigInt(0),r=BigInt(1);function s(I,D){const L=D.negate();return I?L:D}function i(I,D){const L=(0,t.FpInvertBatch)(I.Fp,D.map(x=>x.Z));return D.map((x,j)=>I.fromAffine(x.toAffine(L[j])))}function o(I,D){if(!Number.isSafeInteger(I)||I<=0||I>D)throw new Error("invalid window size, expected [1.."+D+"], got W="+I)}function a(I,D){o(I,D);const L=Math.ceil(D/I)+1,x=2**(I-1),j=2**I,V=(0,e.bitMask)(I),Y=BigInt(I);return{windows:L,windowSize:x,mask:V,maxNumber:j,shiftBy:Y}}function u(I,D,L){const{windowSize:x,mask:j,maxNumber:V,shiftBy:Y}=L;let q=Number(I&j),R=I>>Y;q>x&&(q-=V,R+=r);const v=D*x,T=v+Math.abs(q)-1,m=q===0,w=q<0,N=D%2!==0;return{nextN:R,offset:T,isZero:m,isNeg:w,isNegF:N,offsetF:v}}function c(I,D){if(!Array.isArray(I))throw new Error("array expected");I.forEach((L,x)=>{if(!(L instanceof D))throw new Error("invalid point at index "+x)})}function l(I,D){if(!Array.isArray(I))throw new Error("array of scalars expected");I.forEach((L,x)=>{if(!D.isValid(L))throw new Error("invalid scalar at index "+x)})}const d=new WeakMap,f=new WeakMap;function h(I){return f.get(I)||1}function p(I){if(I!==n)throw new Error("invalid wNAF")}class g{constructor(D,L){this.BASE=D.BASE,this.ZERO=D.ZERO,this.Fn=D.Fn,this.bits=L}_unsafeLadder(D,L,x=this.ZERO){let j=D;for(;L>n;)L&r&&(x=x.add(j)),j=j.double(),L>>=r;return x}precomputeWindow(D,L){const{windows:x,windowSize:j}=a(L,this.bits),V=[];let Y=D,q=Y;for(let R=0;R<x;R++){q=Y,V.push(q);for(let v=1;v<j;v++)q=q.add(Y),V.push(q);Y=q.double()}return V}wNAF(D,L,x){if(!this.Fn.isValid(x))throw new Error("invalid scalar");let j=this.ZERO,V=this.BASE;const Y=a(D,this.bits);for(let q=0;q<Y.windows;q++){const{nextN:R,offset:v,isZero:T,isNeg:m,isNegF:w,offsetF:N}=u(x,q,Y);x=R,T?V=V.add(s(w,L[N])):j=j.add(s(m,L[v]))}return p(x),{p:j,f:V}}wNAFUnsafe(D,L,x,j=this.ZERO){const V=a(D,this.bits);for(let Y=0;Y<V.windows&&x!==n;Y++){const{nextN:q,offset:R,isZero:v,isNeg:T}=u(x,Y,V);if(x=q,!v){const m=L[R];j=j.add(T?m.negate():m)}}return p(x),j}getPrecomputes(D,L,x){let j=d.get(L);return j||(j=this.precomputeWindow(L,D),D!==1&&(typeof x=="function"&&(j=x(j)),d.set(L,j))),j}cached(D,L,x){const j=h(D);return this.wNAF(j,this.getPrecomputes(j,D,x),L)}unsafe(D,L,x,j){const V=h(D);return V===1?this._unsafeLadder(D,L,j):this.wNAFUnsafe(V,this.getPrecomputes(V,D,x),L,j)}createCache(D,L){o(L,this.bits),f.set(D,L),d.delete(D)}hasCache(D){return h(D)!==1}}Un.wNAF=g;function y(I,D,L,x){let j=D,V=I.ZERO,Y=I.ZERO;for(;L>n||x>n;)L&r&&(V=V.add(j)),x&r&&(Y=Y.add(j)),j=j.double(),L>>=r,x>>=r;return{p1:V,p2:Y}}function b(I,D,L,x){c(L,I),l(x,D);const j=L.length,V=x.length;if(j!==V)throw new Error("arrays of points and scalars must have equal length");const Y=I.ZERO,q=(0,e.bitLen)(BigInt(j));let R=1;q>12?R=q-3:q>4?R=q-2:q>0&&(R=2);const v=(0,e.bitMask)(R),T=new Array(Number(v)+1).fill(Y),m=Math.floor((D.BITS-1)/R)*R;let w=Y;for(let N=m;N>=0;N-=R){T.fill(Y);for(let O=0;O<V;O++){const B=x[O],W=Number(B>>BigInt(N)&v);T[W]=T[W].add(L[O])}let C=Y;for(let O=T.length-1,B=Y;O>0;O--)B=B.add(T[O]),C=C.add(B);if(w=w.add(C),N!==0)for(let O=0;O<R;O++)w=w.double()}return w}function A(I,D,L,x){o(x,D.BITS),c(L,I);const j=I.ZERO,V=2**x-1,Y=Math.ceil(D.BITS/x),q=(0,e.bitMask)(x),R=L.map(v=>{const T=[];for(let m=0,w=v;m<V;m++)T.push(w),w=w.add(v);return T});return v=>{if(l(v,D),v.length>L.length)throw new Error("array of scalars must be smaller than array of points");let T=j;for(let m=0;m<Y;m++){if(T!==j)for(let N=0;N<x;N++)T=T.double();const w=BigInt(Y*x-(m+1)*x);for(let N=0;N<v.length;N++){const C=v[N],O=Number(C>>w&q);O&&(T=T.add(R[N][O-1]))}}return T}}function E(I){return(0,t.validateField)(I.Fp),(0,e.validateObject)(I,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,t.nLength)(I.n,I.nBitLength),...I,p:I.Fp.ORDER})}function _(I,D,L){if(D){if(D.ORDER!==I)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return(0,t.validateField)(D),D}else return(0,t.Field)(I,{isLE:L})}function S(I,D,L={},x){if(x===void 0&&(x=I==="edwards"),!D||typeof D!="object")throw new Error(`expected valid ${I} CURVE object`);for(const R of["p","n","h"]){const v=D[R];if(!(typeof v=="bigint"&&v>n))throw new Error(`CURVE.${R} must be positive bigint`)}const j=_(D.p,L.Fp,x),V=_(D.n,L.Fn,x),q=["Gx","Gy","a",I==="weierstrass"?"b":"d"];for(const R of q)if(!j.isValid(D[R]))throw new Error(`CURVE.${R} must be valid field element of CURVE.Fp`);return D=Object.freeze(Object.assign({},D)),{CURVE:D,Fp:j,Fn:V}}return Un}var zm;function mS(){return zm||(zm=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DER=e.DERErr=void 0,e._splitEndoScalar=a,e._normFnElement=y,e.weierstrassN=b,e.SWUFpSqrtRatio=E,e.mapToCurveSimpleSWU=_,e.ecdh=I,e.ecdsa=D,e.weierstrassPoints=L,e._legacyHelperEquat=V,e.weierstrass=R;const t=qg(),n=Mn(),r=pi(),s=Gg(),i=Zi(),o=(v,T)=>(v+(v>=0?T:-T)/h)/T;function a(v,T,m){const[[w,N],[C,O]]=T,B=o(O*v,m),W=o(-N*v,m);let P=v-B*w-W*C,X=-B*N-W*O;const ee=P<d,se=X<d;ee&&(P=-P),se&&(X=-X);const Z=(0,r.bitMask)(Math.ceil((0,r.bitLen)(m)/2))+f;if(P<d||P>=Z||X<d||X>=Z)throw new Error("splitScalar (endomorphism): failed, k="+v);return{k1neg:ee,k1:P,k2neg:se,k2:X}}function u(v){if(!["compact","recovered","der"].includes(v))throw new Error('Signature format must be "compact", "recovered", or "der"');return v}function c(v,T){const m={};for(let w of Object.keys(T))m[w]=v[w]===void 0?T[w]:v[w];return(0,r._abool2)(m.lowS,"lowS"),(0,r._abool2)(m.prehash,"prehash"),m.format!==void 0&&u(m.format),m}class l extends Error{constructor(T=""){super(T)}}e.DERErr=l,e.DER={Err:l,_tlv:{encode:(v,T)=>{const{Err:m}=e.DER;if(v<0||v>256)throw new m("tlv.encode: wrong tag");if(T.length&1)throw new m("tlv.encode: unpadded data");const w=T.length/2,N=(0,r.numberToHexUnpadded)(w);if(N.length/2&128)throw new m("tlv.encode: long form length too big");const C=w>127?(0,r.numberToHexUnpadded)(N.length/2|128):"";return(0,r.numberToHexUnpadded)(v)+C+N+T},decode(v,T){const{Err:m}=e.DER;let w=0;if(v<0||v>256)throw new m("tlv.encode: wrong tag");if(T.length<2||T[w++]!==v)throw new m("tlv.decode: wrong tlv");const N=T[w++],C=!!(N&128);let O=0;if(!C)O=N;else{const W=N&127;if(!W)throw new m("tlv.decode(long): indefinite length not supported");if(W>4)throw new m("tlv.decode(long): byte length is too big");const P=T.subarray(w,w+W);if(P.length!==W)throw new m("tlv.decode: length bytes not complete");if(P[0]===0)throw new m("tlv.decode(long): zero leftmost byte");for(const X of P)O=O<<8|X;if(w+=W,O<128)throw new m("tlv.decode(long): not minimal encoding")}const B=T.subarray(w,w+O);if(B.length!==O)throw new m("tlv.decode: wrong value length");return{v:B,l:T.subarray(w+O)}}},_int:{encode(v){const{Err:T}=e.DER;if(v<d)throw new T("integer: negative integers are not allowed");let m=(0,r.numberToHexUnpadded)(v);if(Number.parseInt(m[0],16)&8&&(m="00"+m),m.length&1)throw new T("unexpected DER parsing assertion: unpadded hex");return m},decode(v){const{Err:T}=e.DER;if(v[0]&128)throw new T("invalid signature integer: negative");if(v[0]===0&&!(v[1]&128))throw new T("invalid signature integer: unnecessary leading zero");return(0,r.bytesToNumberBE)(v)}},toSig(v){const{Err:T,_int:m,_tlv:w}=e.DER,N=(0,r.ensureBytes)("signature",v),{v:C,l:O}=w.decode(48,N);if(O.length)throw new T("invalid signature: left bytes after parsing");const{v:B,l:W}=w.decode(2,C),{v:P,l:X}=w.decode(2,W);if(X.length)throw new T("invalid signature: left bytes after parsing");return{r:m.decode(B),s:m.decode(P)}},hexFromSig(v){const{_tlv:T,_int:m}=e.DER,w=T.encode(2,m.encode(v.r)),N=T.encode(2,m.encode(v.s)),C=w+N;return T.encode(48,C)}};const d=BigInt(0),f=BigInt(1),h=BigInt(2),p=BigInt(3),g=BigInt(4);function y(v,T){const{BYTES:m}=v;let w;if(typeof T=="bigint")w=T;else{let N=(0,r.ensureBytes)("private key",T);try{w=v.fromBytes(N)}catch{throw new Error(`invalid private key: expected ui8a of size ${m}, got ${typeof T}`)}}if(!v.isValidNot0(w))throw new Error("invalid private key: out of range [1..N-1]");return w}function b(v,T={}){const m=(0,s._createCurveFields)("weierstrass",v,T),{Fp:w,Fn:N}=m;let C=m.CURVE;const{h:O,n:B}=C;(0,r._validateObject)(T,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:W}=T;if(W&&(!w.is0(C.a)||typeof W.beta!="bigint"||!Array.isArray(W.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const P=S(w,N);function X(){if(!w.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function ee(me,pe,he){const{x:fe,y:M}=pe.toAffine(),k=w.toBytes(fe);if((0,r._abool2)(he,"isCompressed"),he){X();const G=!w.isOdd(M);return(0,r.concatBytes)(A(G),k)}else return(0,r.concatBytes)(Uint8Array.of(4),k,w.toBytes(M))}function se(me){(0,r._abytes2)(me,void 0,"Point");const{publicKey:pe,publicKeyUncompressed:he}=P,fe=me.length,M=me[0],k=me.subarray(1);if(fe===pe&&(M===2||M===3)){const G=w.fromBytes(k);if(!w.isValid(G))throw new Error("bad point: is not on curve, wrong x");const re=z(G);let ae;try{ae=w.sqrt(re)}catch(_e){const Ie=_e instanceof Error?": "+_e.message:"";throw new Error("bad point: is not on curve, sqrt error"+Ie)}X();const le=w.isOdd(ae);return(M&1)===1!==le&&(ae=w.neg(ae)),{x:G,y:ae}}else if(fe===he&&M===4){const G=w.BYTES,re=w.fromBytes(k.subarray(0,G)),ae=w.fromBytes(k.subarray(G,G*2));if(!K(re,ae))throw new Error("bad point: is not on curve");return{x:re,y:ae}}else throw new Error(`bad point: got length ${fe}, expected compressed=${pe} or uncompressed=${he}`)}const Z=T.toBytes||ee,J=T.fromBytes||se;function z(me){const pe=w.sqr(me),he=w.mul(pe,me);return w.add(w.add(he,w.mul(me,C.a)),C.b)}function K(me,pe){const he=w.sqr(pe),fe=z(me);return w.eql(he,fe)}if(!K(C.Gx,C.Gy))throw new Error("bad curve params: generator point");const H=w.mul(w.pow(C.a,p),g),U=w.mul(w.sqr(C.b),BigInt(27));if(w.is0(w.add(H,U)))throw new Error("bad curve params: a or b");function F(me,pe,he=!1){if(!w.isValid(pe)||he&&w.is0(pe))throw new Error(`bad point coordinate ${me}`);return pe}function $(me){if(!(me instanceof oe))throw new Error("ProjectivePoint expected")}function te(me){if(!W||!W.basises)throw new Error("no endo");return a(me,W.basises,N.ORDER)}const ne=(0,r.memoized)((me,pe)=>{const{X:he,Y:fe,Z:M}=me;if(w.eql(M,w.ONE))return{x:he,y:fe};const k=me.is0();pe==null&&(pe=k?w.ONE:w.inv(M));const G=w.mul(he,pe),re=w.mul(fe,pe),ae=w.mul(M,pe);if(k)return{x:w.ZERO,y:w.ZERO};if(!w.eql(ae,w.ONE))throw new Error("invZ was invalid");return{x:G,y:re}}),ie=(0,r.memoized)(me=>{if(me.is0()){if(T.allowInfinityPoint&&!w.is0(me.Y))return;throw new Error("bad point: ZERO")}const{x:pe,y:he}=me.toAffine();if(!w.isValid(pe)||!w.isValid(he))throw new Error("bad point: x or y not field elements");if(!K(pe,he))throw new Error("bad point: equation left != right");if(!me.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function ce(me,pe,he,fe,M){return he=new oe(w.mul(he.X,me),he.Y,he.Z),pe=(0,s.negateCt)(fe,pe),he=(0,s.negateCt)(M,he),pe.add(he)}class oe{constructor(pe,he,fe){this.X=F("x",pe),this.Y=F("y",he,!0),this.Z=F("z",fe),Object.freeze(this)}static CURVE(){return C}static fromAffine(pe){const{x:he,y:fe}=pe||{};if(!pe||!w.isValid(he)||!w.isValid(fe))throw new Error("invalid affine point");if(pe instanceof oe)throw new Error("projective point not allowed");return w.is0(he)&&w.is0(fe)?oe.ZERO:new oe(he,fe,w.ONE)}static fromBytes(pe){const he=oe.fromAffine(J((0,r._abytes2)(pe,void 0,"point")));return he.assertValidity(),he}static fromHex(pe){return oe.fromBytes((0,r.ensureBytes)("pointHex",pe))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(pe=8,he=!0){return we.createCache(this,pe),he||this.multiply(p),this}assertValidity(){ie(this)}hasEvenY(){const{y:pe}=this.toAffine();if(!w.isOdd)throw new Error("Field doesn't support isOdd");return!w.isOdd(pe)}equals(pe){$(pe);const{X:he,Y:fe,Z:M}=this,{X:k,Y:G,Z:re}=pe,ae=w.eql(w.mul(he,re),w.mul(k,M)),le=w.eql(w.mul(fe,re),w.mul(G,M));return ae&&le}negate(){return new oe(this.X,w.neg(this.Y),this.Z)}double(){const{a:pe,b:he}=C,fe=w.mul(he,p),{X:M,Y:k,Z:G}=this;let re=w.ZERO,ae=w.ZERO,le=w.ZERO,ge=w.mul(M,M),_e=w.mul(k,k),Ie=w.mul(G,G),ve=w.mul(M,k);return ve=w.add(ve,ve),le=w.mul(M,G),le=w.add(le,le),re=w.mul(pe,le),ae=w.mul(fe,Ie),ae=w.add(re,ae),re=w.sub(_e,ae),ae=w.add(_e,ae),ae=w.mul(re,ae),re=w.mul(ve,re),le=w.mul(fe,le),Ie=w.mul(pe,Ie),ve=w.sub(ge,Ie),ve=w.mul(pe,ve),ve=w.add(ve,le),le=w.add(ge,ge),ge=w.add(le,ge),ge=w.add(ge,Ie),ge=w.mul(ge,ve),ae=w.add(ae,ge),Ie=w.mul(k,G),Ie=w.add(Ie,Ie),ge=w.mul(Ie,ve),re=w.sub(re,ge),le=w.mul(Ie,_e),le=w.add(le,le),le=w.add(le,le),new oe(re,ae,le)}add(pe){$(pe);const{X:he,Y:fe,Z:M}=this,{X:k,Y:G,Z:re}=pe;let ae=w.ZERO,le=w.ZERO,ge=w.ZERO;const _e=C.a,Ie=w.mul(C.b,p);let ve=w.mul(he,k),Te=w.mul(fe,G),ke=w.mul(M,re),pn=w.add(he,fe),ht=w.add(k,G);pn=w.mul(pn,ht),ht=w.add(ve,Te),pn=w.sub(pn,ht),ht=w.add(he,M);let Wt=w.add(k,re);return ht=w.mul(ht,Wt),Wt=w.add(ve,ke),ht=w.sub(ht,Wt),Wt=w.add(fe,M),ae=w.add(G,re),Wt=w.mul(Wt,ae),ae=w.add(Te,ke),Wt=w.sub(Wt,ae),ge=w.mul(_e,ht),ae=w.mul(Ie,ke),ge=w.add(ae,ge),ae=w.sub(Te,ge),ge=w.add(Te,ge),le=w.mul(ae,ge),Te=w.add(ve,ve),Te=w.add(Te,ve),ke=w.mul(_e,ke),ht=w.mul(Ie,ht),Te=w.add(Te,ke),ke=w.sub(ve,ke),ke=w.mul(_e,ke),ht=w.add(ht,ke),ve=w.mul(Te,ht),le=w.add(le,ve),ve=w.mul(Wt,ht),ae=w.mul(pn,ae),ae=w.sub(ae,ve),ve=w.mul(pn,Te),ge=w.mul(Wt,ge),ge=w.add(ge,ve),new oe(ae,le,ge)}subtract(pe){return this.add(pe.negate())}is0(){return this.equals(oe.ZERO)}multiply(pe){const{endo:he}=T;if(!N.isValidNot0(pe))throw new Error("invalid scalar: out of range");let fe,M;const k=G=>we.cached(this,G,re=>(0,s.normalizeZ)(oe,re));if(he){const{k1neg:G,k1:re,k2neg:ae,k2:le}=te(pe),{p:ge,f:_e}=k(re),{p:Ie,f:ve}=k(le);M=_e.add(ve),fe=ce(he.beta,ge,Ie,G,ae)}else{const{p:G,f:re}=k(pe);fe=G,M=re}return(0,s.normalizeZ)(oe,[fe,M])[0]}multiplyUnsafe(pe){const{endo:he}=T,fe=this;if(!N.isValid(pe))throw new Error("invalid scalar: out of range");if(pe===d||fe.is0())return oe.ZERO;if(pe===f)return fe;if(we.hasCache(this))return this.multiply(pe);if(he){const{k1neg:M,k1:k,k2neg:G,k2:re}=te(pe),{p1:ae,p2:le}=(0,s.mulEndoUnsafe)(oe,fe,k,re);return ce(he.beta,ae,le,M,G)}else return we.unsafe(fe,pe)}multiplyAndAddUnsafe(pe,he,fe){const M=this.multiplyUnsafe(he).add(pe.multiplyUnsafe(fe));return M.is0()?void 0:M}toAffine(pe){return ne(this,pe)}isTorsionFree(){const{isTorsionFree:pe}=T;return O===f?!0:pe?pe(oe,this):we.unsafe(this,B).is0()}clearCofactor(){const{clearCofactor:pe}=T;return O===f?this:pe?pe(oe,this):this.multiplyUnsafe(O)}isSmallOrder(){return this.multiplyUnsafe(O).is0()}toBytes(pe=!0){return(0,r._abool2)(pe,"isCompressed"),this.assertValidity(),Z(oe,this,pe)}toHex(pe=!0){return(0,r.bytesToHex)(this.toBytes(pe))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(pe=!0){return this.toBytes(pe)}_setWindowSize(pe){this.precompute(pe)}static normalizeZ(pe){return(0,s.normalizeZ)(oe,pe)}static msm(pe,he){return(0,s.pippenger)(oe,N,pe,he)}static fromPrivateKey(pe){return oe.BASE.multiply(y(N,pe))}}oe.BASE=new oe(C.Gx,C.Gy,w.ONE),oe.ZERO=new oe(w.ZERO,w.ONE,w.ZERO),oe.Fp=w,oe.Fn=N;const de=N.BITS,we=new s.wNAF(oe,T.endo?Math.ceil(de/2):de);return oe.BASE.precompute(8),oe}function A(v){return Uint8Array.of(v?2:3)}function E(v,T){const m=v.ORDER;let w=d;for(let J=m-f;J%h===d;J/=h)w+=f;const N=w,C=h<<N-f-f,O=C*h,B=(m-f)/O,W=(B-f)/h,P=O-f,X=C,ee=v.pow(T,B),se=v.pow(T,(B+f)/h);let Z=(J,z)=>{let K=ee,H=v.pow(z,P),U=v.sqr(H);U=v.mul(U,z);let F=v.mul(J,U);F=v.pow(F,W),F=v.mul(F,H),H=v.mul(F,z),U=v.mul(F,J);let $=v.mul(U,H);F=v.pow($,X);let te=v.eql(F,v.ONE);H=v.mul(U,se),F=v.mul($,K),U=v.cmov(H,U,te),$=v.cmov(F,$,te);for(let ne=N;ne>f;ne--){let ie=ne-h;ie=h<<ie-f;let ce=v.pow($,ie);const oe=v.eql(ce,v.ONE);H=v.mul(U,K),K=v.mul(K,K),ce=v.mul($,K),U=v.cmov(H,U,oe),$=v.cmov(ce,$,oe)}return{isValid:te,value:U}};if(v.ORDER%g===p){const J=(v.ORDER-p)/g,z=v.sqrt(v.neg(T));Z=(K,H)=>{let U=v.sqr(H);const F=v.mul(K,H);U=v.mul(U,F);let $=v.pow(U,J);$=v.mul($,F);const te=v.mul($,z),ne=v.mul(v.sqr($),H),ie=v.eql(ne,K);let ce=v.cmov(te,$,ie);return{isValid:ie,value:ce}}}return Z}function _(v,T){(0,i.validateField)(v);const{A:m,B:w,Z:N}=T;if(!v.isValid(m)||!v.isValid(w)||!v.isValid(N))throw new Error("mapToCurveSimpleSWU: invalid opts");const C=E(v,N);if(!v.isOdd)throw new Error("Field does not have .isOdd()");return O=>{let B,W,P,X,ee,se,Z,J;B=v.sqr(O),B=v.mul(B,N),W=v.sqr(B),W=v.add(W,B),P=v.add(W,v.ONE),P=v.mul(P,w),X=v.cmov(N,v.neg(W),!v.eql(W,v.ZERO)),X=v.mul(X,m),W=v.sqr(P),se=v.sqr(X),ee=v.mul(se,m),W=v.add(W,ee),W=v.mul(W,P),se=v.mul(se,X),ee=v.mul(se,w),W=v.add(W,ee),Z=v.mul(B,P);const{isValid:z,value:K}=C(W,se);J=v.mul(B,O),J=v.mul(J,K),Z=v.cmov(Z,P,z),J=v.cmov(J,K,z);const H=v.isOdd(O)===v.isOdd(J);J=v.cmov(v.neg(J),J,H);const U=(0,i.FpInvertBatch)(v,[X],!0)[0];return Z=v.mul(Z,U),{x:Z,y:J}}}function S(v,T){return{secretKey:T.BYTES,publicKey:1+v.BYTES,publicKeyUncompressed:1+2*v.BYTES,publicKeyHasPrefix:!0,signature:2*T.BYTES}}function I(v,T={}){const{Fn:m}=v,w=T.randomBytes||r.randomBytes,N=Object.assign(S(v.Fp,m),{seed:(0,i.getMinHashLength)(m.ORDER)});function C(Z){try{return!!y(m,Z)}catch{return!1}}function O(Z,J){const{publicKey:z,publicKeyUncompressed:K}=N;try{const H=Z.length;return J===!0&&H!==z||J===!1&&H!==K?!1:!!v.fromBytes(Z)}catch{return!1}}function B(Z=w(N.seed)){return(0,i.mapHashToField)((0,r._abytes2)(Z,N.seed,"seed"),m.ORDER)}function W(Z,J=!0){return v.BASE.multiply(y(m,Z)).toBytes(J)}function P(Z){const J=B(Z);return{secretKey:J,publicKey:W(J)}}function X(Z){if(typeof Z=="bigint")return!1;if(Z instanceof v)return!0;const{secretKey:J,publicKey:z,publicKeyUncompressed:K}=N;if(m.allowedLengths||J===z)return;const H=(0,r.ensureBytes)("key",Z).length;return H===z||H===K}function ee(Z,J,z=!0){if(X(Z)===!0)throw new Error("first arg must be private key");if(X(J)===!1)throw new Error("second arg must be public key");const K=y(m,Z);return v.fromHex(J).multiply(K).toBytes(z)}return Object.freeze({getPublicKey:W,getSharedSecret:ee,keygen:P,Point:v,utils:{isValidSecretKey:C,isValidPublicKey:O,randomSecretKey:B,isValidPrivateKey:C,randomPrivateKey:B,normPrivateKeyToScalar:Z=>y(m,Z),precompute(Z=8,J=v.BASE){return J.precompute(Z,!1)}},lengths:N})}function D(v,T,m={}){(0,n.ahash)(T),(0,r._validateObject)(m,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const w=m.randomBytes||r.randomBytes,N=m.hmac||((he,...fe)=>(0,t.hmac)(T,he,(0,r.concatBytes)(...fe))),{Fp:C,Fn:O}=v,{ORDER:B,BITS:W}=O,{keygen:P,getPublicKey:X,getSharedSecret:ee,utils:se,lengths:Z}=I(v,m),J={prehash:!1,lowS:typeof m.lowS=="boolean"?m.lowS:!1,format:void 0,extraEntropy:!1},z="compact";function K(he){const fe=B>>f;return he>fe}function H(he,fe){if(!O.isValidNot0(fe))throw new Error(`invalid signature ${he}: out of range 1..Point.Fn.ORDER`);return fe}function U(he,fe){u(fe);const M=Z.signature,k=fe==="compact"?M:fe==="recovered"?M+1:void 0;return(0,r._abytes2)(he,k,`${fe} signature`)}class F{constructor(fe,M,k){this.r=H("r",fe),this.s=H("s",M),k!=null&&(this.recovery=k),Object.freeze(this)}static fromBytes(fe,M=z){U(fe,M);let k;if(M==="der"){const{r:le,s:ge}=e.DER.toSig((0,r._abytes2)(fe));return new F(le,ge)}M==="recovered"&&(k=fe[0],M="compact",fe=fe.subarray(1));const G=O.BYTES,re=fe.subarray(0,G),ae=fe.subarray(G,G*2);return new F(O.fromBytes(re),O.fromBytes(ae),k)}static fromHex(fe,M){return this.fromBytes((0,r.hexToBytes)(fe),M)}addRecoveryBit(fe){return new F(this.r,this.s,fe)}recoverPublicKey(fe){const M=C.ORDER,{r:k,s:G,recovery:re}=this;if(re==null||![0,1,2,3].includes(re))throw new Error("recovery id invalid");if(B*h<M&&re>1)throw new Error("recovery id is ambiguous for h>1 curve");const le=re===2||re===3?k+B:k;if(!C.isValid(le))throw new Error("recovery id 2 or 3 invalid");const ge=C.toBytes(le),_e=v.fromBytes((0,r.concatBytes)(A((re&1)===0),ge)),Ie=O.inv(le),ve=te((0,r.ensureBytes)("msgHash",fe)),Te=O.create(-ve*Ie),ke=O.create(G*Ie),pn=v.BASE.multiplyUnsafe(Te).add(_e.multiplyUnsafe(ke));if(pn.is0())throw new Error("point at infinify");return pn.assertValidity(),pn}hasHighS(){return K(this.s)}toBytes(fe=z){if(u(fe),fe==="der")return(0,r.hexToBytes)(e.DER.hexFromSig(this));const M=O.toBytes(this.r),k=O.toBytes(this.s);if(fe==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return(0,r.concatBytes)(Uint8Array.of(this.recovery),M,k)}return(0,r.concatBytes)(M,k)}toHex(fe){return(0,r.bytesToHex)(this.toBytes(fe))}assertValidity(){}static fromCompact(fe){return F.fromBytes((0,r.ensureBytes)("sig",fe),"compact")}static fromDER(fe){return F.fromBytes((0,r.ensureBytes)("sig",fe),"der")}normalizeS(){return this.hasHighS()?new F(this.r,O.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return(0,r.bytesToHex)(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return(0,r.bytesToHex)(this.toBytes("compact"))}}const $=m.bits2int||function(fe){if(fe.length>8192)throw new Error("input is too large");const M=(0,r.bytesToNumberBE)(fe),k=fe.length*8-W;return k>0?M>>BigInt(k):M},te=m.bits2int_modN||function(fe){return O.create($(fe))},ne=(0,r.bitMask)(W);function ie(he){return(0,r.aInRange)("num < 2^"+W,he,d,ne),O.toBytes(he)}function ce(he,fe){return(0,r._abytes2)(he,void 0,"message"),fe?(0,r._abytes2)(T(he),void 0,"prehashed message"):he}function oe(he,fe,M){if(["recovered","canonical"].some(Te=>Te in M))throw new Error("sign() legacy options not supported");const{lowS:k,prehash:G,extraEntropy:re}=c(M,J);he=ce(he,G);const ae=te(he),le=y(O,fe),ge=[ie(le),ie(ae)];if(re!=null&&re!==!1){const Te=re===!0?w(Z.secretKey):re;ge.push((0,r.ensureBytes)("extraEntropy",Te))}const _e=(0,r.concatBytes)(...ge),Ie=ae;function ve(Te){const ke=$(Te);if(!O.isValidNot0(ke))return;const pn=O.inv(ke),ht=v.BASE.multiply(ke).toAffine(),Wt=O.create(ht.x);if(Wt===d)return;const Xu=O.create(pn*O.create(Ie+Wt*le));if(Xu===d)return;let ay=(ht.x===Wt?0:2)|Number(ht.y&f),cy=Xu;return k&&K(Xu)&&(cy=O.neg(Xu),ay^=1),new F(Wt,cy,ay)}return{seed:_e,k2sig:ve}}function de(he,fe,M={}){he=(0,r.ensureBytes)("message",he);const{seed:k,k2sig:G}=oe(he,fe,M);return(0,r.createHmacDrbg)(T.outputLen,O.BYTES,N)(k,G)}function we(he){let fe;const M=typeof he=="string"||(0,r.isBytes)(he),k=!M&&he!==null&&typeof he=="object"&&typeof he.r=="bigint"&&typeof he.s=="bigint";if(!M&&!k)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(k)fe=new F(he.r,he.s);else if(M){try{fe=F.fromBytes((0,r.ensureBytes)("sig",he),"der")}catch(G){if(!(G instanceof e.DER.Err))throw G}if(!fe)try{fe=F.fromBytes((0,r.ensureBytes)("sig",he),"compact")}catch{return!1}}return fe||!1}function me(he,fe,M,k={}){const{lowS:G,prehash:re,format:ae}=c(k,J);if(M=(0,r.ensureBytes)("publicKey",M),fe=ce((0,r.ensureBytes)("message",fe),re),"strict"in k)throw new Error("options.strict was renamed to lowS");const le=ae===void 0?we(he):F.fromBytes((0,r.ensureBytes)("sig",he),ae);if(le===!1)return!1;try{const ge=v.fromBytes(M);if(G&&le.hasHighS())return!1;const{r:_e,s:Ie}=le,ve=te(fe),Te=O.inv(Ie),ke=O.create(ve*Te),pn=O.create(_e*Te),ht=v.BASE.multiplyUnsafe(ke).add(ge.multiplyUnsafe(pn));return ht.is0()?!1:O.create(ht.x)===_e}catch{return!1}}function pe(he,fe,M={}){const{prehash:k}=c(M,J);return fe=ce(fe,k),F.fromBytes(he,"recovered").recoverPublicKey(fe).toBytes()}return Object.freeze({keygen:P,getPublicKey:X,getSharedSecret:ee,utils:se,lengths:Z,Point:v,sign:de,verify:me,recoverPublicKey:pe,Signature:F,hash:T})}function L(v){const{CURVE:T,curveOpts:m}=x(v),w=b(T,m);return Y(v,w)}function x(v){const T={a:v.a,b:v.b,p:v.Fp.ORDER,n:v.n,h:v.h,Gx:v.Gx,Gy:v.Gy},m=v.Fp;let w=v.allowedPrivateKeyLengths?Array.from(new Set(v.allowedPrivateKeyLengths.map(O=>Math.ceil(O/2)))):void 0;const N=(0,i.Field)(T.n,{BITS:v.nBitLength,allowedLengths:w,modFromBytes:v.wrapPrivateKey}),C={Fp:m,Fn:N,allowInfinityPoint:v.allowInfinityPoint,endo:v.endo,isTorsionFree:v.isTorsionFree,clearCofactor:v.clearCofactor,fromBytes:v.fromBytes,toBytes:v.toBytes};return{CURVE:T,curveOpts:C}}function j(v){const{CURVE:T,curveOpts:m}=x(v),w={hmac:v.hmac,randomBytes:v.randomBytes,lowS:v.lowS,bits2int:v.bits2int,bits2int_modN:v.bits2int_modN};return{CURVE:T,curveOpts:m,hash:v.hash,ecdsaOpts:w}}function V(v,T,m){function w(N){const C=v.sqr(N),O=v.mul(C,N);return v.add(v.add(O,v.mul(N,T)),m)}return w}function Y(v,T){const{Fp:m,Fn:w}=T;function N(O){return(0,r.inRange)(O,f,w.ORDER)}const C=V(m,v.a,v.b);return Object.assign({},{CURVE:v,Point:T,ProjectivePoint:T,normPrivateKeyToScalar:O=>y(w,O),weierstrassEquation:C,isWithinCurveOrder:N})}function q(v,T){const m=T.Point;return Object.assign({},T,{ProjectivePoint:m,CURVE:Object.assign({},v,(0,i.nLength)(m.Fn.ORDER,m.Fn.BITS))})}function R(v){const{CURVE:T,curveOpts:m,hash:w,ecdsaOpts:N}=j(v),C=b(T,m),O=D(C,w,N);return q(v,O)}})($h)),$h}var Fm;function FI(){if(Fm)return qa;Fm=1,Object.defineProperty(qa,"__esModule",{value:!0}),qa.getHash=t,qa.createCurve=n;const e=mS();function t(r){return{hash:r}}function n(r,s){const i=o=>(0,e.weierstrass)({...r,hash:o});return{...i(s),create:i}}return qa}var ef={},Hm;function wS(){return Hm||(Hm=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._DST_scalar=void 0,e.expand_message_xmd=u,e.expand_message_xof=c,e.hash_to_field=l,e.isogenyMap=d,e.createHasher=f;const t=pi(),n=Zi(),r=t.bytesToNumberBE;function s(h,p){if(o(h),o(p),h<0||h>=1<<8*p)throw new Error("invalid I2OSP input: "+h);const g=Array.from({length:p}).fill(0);for(let y=p-1;y>=0;y--)g[y]=h&255,h>>>=8;return new Uint8Array(g)}function i(h,p){const g=new Uint8Array(h.length);for(let y=0;y<h.length;y++)g[y]=h[y]^p[y];return g}function o(h){if(!Number.isSafeInteger(h))throw new Error("number expected")}function a(h){if(!(0,t.isBytes)(h)&&typeof h!="string")throw new Error("DST must be Uint8Array or string");return typeof h=="string"?(0,t.utf8ToBytes)(h):h}function u(h,p,g,y){(0,t.abytes)(h),o(g),p=a(p),p.length>255&&(p=y((0,t.concatBytes)((0,t.utf8ToBytes)("H2C-OVERSIZE-DST-"),p)));const{outputLen:b,blockLen:A}=y,E=Math.ceil(g/b);if(g>65535||E>255)throw new Error("expand_message_xmd: invalid lenInBytes");const _=(0,t.concatBytes)(p,s(p.length,1)),S=s(0,A),I=s(g,2),D=new Array(E),L=y((0,t.concatBytes)(S,h,I,s(0,1),_));D[0]=y((0,t.concatBytes)(L,s(1,1),_));for(let j=1;j<=E;j++){const V=[i(L,D[j-1]),s(j+1,1),_];D[j]=y((0,t.concatBytes)(...V))}return(0,t.concatBytes)(...D).slice(0,g)}function c(h,p,g,y,b){if((0,t.abytes)(h),o(g),p=a(p),p.length>255){const A=Math.ceil(2*y/8);p=b.create({dkLen:A}).update((0,t.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(p).digest()}if(g>65535||p.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return b.create({dkLen:g}).update(h).update(s(g,2)).update(p).update(s(p.length,1)).digest()}function l(h,p,g){(0,t._validateObject)(g,{p:"bigint",m:"number",k:"number",hash:"function"});const{p:y,k:b,m:A,hash:E,expand:_,DST:S}=g;if(!(0,t.isHash)(g.hash))throw new Error("expected valid hash");(0,t.abytes)(h),o(p);const I=y.toString(2).length,D=Math.ceil((I+b)/8),L=p*A*D;let x;if(_==="xmd")x=u(h,S,L,E);else if(_==="xof")x=c(h,S,L,b,E);else if(_==="_internal_pass")x=h;else throw new Error('expand must be "xmd" or "xof"');const j=new Array(p);for(let V=0;V<p;V++){const Y=new Array(A);for(let q=0;q<A;q++){const R=D*(q+V*A),v=x.subarray(R,R+D);Y[q]=(0,n.mod)(r(v),y)}j[V]=Y}return j}function d(h,p){const g=p.map(y=>Array.from(y).reverse());return(y,b)=>{const[A,E,_,S]=g.map(L=>L.reduce((x,j)=>h.add(h.mul(x,y),j))),[I,D]=(0,n.FpInvertBatch)(h,[E,S],!0);return y=h.mul(A,I),b=h.mul(b,h.mul(_,D)),{x:y,y:b}}}e._DST_scalar=(0,t.utf8ToBytes)("HashToScalar-");function f(h,p,g){if(typeof p!="function")throw new Error("mapToCurve() must be defined");function y(A){return h.fromAffine(p(A))}function b(A){const E=A.clearCofactor();return E.equals(h.ZERO)?h.ZERO:(E.assertValidity(),E)}return{defaults:g,hashToCurve(A,E){const _=Object.assign({},g,E),S=l(A,2,_),I=y(S[0]),D=y(S[1]);return b(I.add(D))},encodeToCurve(A,E){const _=g.encodeDST?{DST:g.encodeDST}:{},S=Object.assign({},g,_,E),I=l(A,1,S),D=y(I[0]);return b(D)},mapToCurve(A){if(!Array.isArray(A))throw new Error("expected array of bigints");for(const E of A)if(typeof E!="bigint")throw new Error("expected array of bigints");return b(y(A))},hashToScalar(A,E){const _=h.Fn.ORDER,S=Object.assign({},g,{p:_,m:1,DST:e._DST_scalar},E);return l(A,1,S)[0][0]}}}})(ef)),ef}var Vm;function Kg(){return Vm||(Vm=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.encodeToCurve=e.hashToCurve=e.secp256k1_hasher=e.schnorr=e.secp256k1=void 0;const t=oa(),n=Mn(),r=FI(),s=wS(),i=Zi(),o=mS(),a=pi(),u={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},c={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},l=BigInt(0),d=BigInt(1),f=BigInt(2);function h(q){const R=u.p,v=BigInt(3),T=BigInt(6),m=BigInt(11),w=BigInt(22),N=BigInt(23),C=BigInt(44),O=BigInt(88),B=q*q*q%R,W=B*B*q%R,P=(0,i.pow2)(W,v,R)*W%R,X=(0,i.pow2)(P,v,R)*W%R,ee=(0,i.pow2)(X,f,R)*B%R,se=(0,i.pow2)(ee,m,R)*ee%R,Z=(0,i.pow2)(se,w,R)*se%R,J=(0,i.pow2)(Z,C,R)*Z%R,z=(0,i.pow2)(J,O,R)*J%R,K=(0,i.pow2)(z,C,R)*Z%R,H=(0,i.pow2)(K,v,R)*W%R,U=(0,i.pow2)(H,N,R)*se%R,F=(0,i.pow2)(U,T,R)*B%R,$=(0,i.pow2)(F,f,R);if(!p.eql(p.sqr($),q))throw new Error("Cannot find square root");return $}const p=(0,i.Field)(u.p,{sqrt:h});e.secp256k1=(0,r.createCurve)({...u,Fp:p,lowS:!0,endo:c},t.sha256);const g={};function y(q,...R){let v=g[q];if(v===void 0){const T=(0,t.sha256)((0,a.utf8ToBytes)(q));v=(0,a.concatBytes)(T,T),g[q]=v}return(0,t.sha256)((0,a.concatBytes)(v,...R))}const b=q=>q.toBytes(!0).slice(1),A=e.secp256k1.Point,E=q=>q%f===l;function _(q){const{Fn:R,BASE:v}=A,T=(0,o._normFnElement)(R,q),m=v.multiply(T);return{scalar:E(m.y)?T:R.neg(T),bytes:b(m)}}function S(q){const R=p;if(!R.isValidNot0(q))throw new Error("invalid x: Fail if x  p");const v=R.create(q*q),T=R.create(v*q+BigInt(7));let m=R.sqrt(T);E(m)||(m=R.neg(m));const w=A.fromAffine({x:q,y:m});return w.assertValidity(),w}const I=a.bytesToNumberBE;function D(...q){return A.Fn.create(I(y("BIP0340/challenge",...q)))}function L(q){return _(q).bytes}function x(q,R,v=(0,n.randomBytes)(32)){const{Fn:T}=A,m=(0,a.ensureBytes)("message",q),{bytes:w,scalar:N}=_(R),C=(0,a.ensureBytes)("auxRand",v,32),O=T.toBytes(N^I(y("BIP0340/aux",C))),B=y("BIP0340/nonce",O,w,m),{bytes:W,scalar:P}=_(B),X=D(W,w,m),ee=new Uint8Array(64);if(ee.set(W,0),ee.set(T.toBytes(T.create(P+X*N)),32),!j(ee,m,w))throw new Error("sign: Invalid signature produced");return ee}function j(q,R,v){const{Fn:T,BASE:m}=A,w=(0,a.ensureBytes)("signature",q,64),N=(0,a.ensureBytes)("message",R),C=(0,a.ensureBytes)("publicKey",v,32);try{const O=S(I(C)),B=I(w.subarray(0,32));if(!(0,a.inRange)(B,d,u.p))return!1;const W=I(w.subarray(32,64));if(!(0,a.inRange)(W,d,u.n))return!1;const P=D(T.toBytes(B),b(O),N),X=m.multiplyUnsafe(W).add(O.multiplyUnsafe(T.neg(P))),{x:ee,y:se}=X.toAffine();return!(X.is0()||!E(se)||ee!==B)}catch{return!1}}e.schnorr=(()=>{const v=(m=(0,n.randomBytes)(48))=>(0,i.mapHashToField)(m,u.n);e.secp256k1.utils.randomSecretKey;function T(m){const w=v(m);return{secretKey:w,publicKey:L(w)}}return{keygen:T,getPublicKey:L,sign:x,verify:j,Point:A,utils:{randomSecretKey:v,randomPrivateKey:v,taggedHash:y,lift_x:S,pointToBytes:b,numberToBytesBE:a.numberToBytesBE,bytesToNumberBE:a.bytesToNumberBE,mod:i.mod},lengths:{secretKey:32,publicKey:32,publicKeyHasPrefix:!1,signature:64,seed:48}}})();const V=(0,s.isogenyMap)(p,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(q=>q.map(R=>BigInt(R)))),Y=(0,o.mapToCurveSimpleSWU)(p,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:p.create(BigInt("-11"))});e.secp256k1_hasher=(0,s.createHasher)(e.secp256k1.Point,q=>{const{x:R,y:v}=Y(p.create(q[0]));return V(R,v)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:p.ORDER,m:1,k:128,expand:"xmd",hash:t.sha256}),e.hashToCurve=e.secp256k1_hasher.hashToCurve,e.encodeToCurve=e.secp256k1_hasher.encodeToCurve})(Qh)),Qh}var $u={},Me={},qm;function bS(){if(qm)return Me;qm=1,Object.defineProperty(Me,"__esModule",{value:!0}),Me.isHash=Me.validateObject=Me.memoized=Me.notImplemented=Me.createHmacDrbg=Me.bitMask=Me.bitSet=Me.bitGet=Me.bitLen=Me.aInRange=Me.inRange=Me.asciiToBytes=Me.copyBytes=Me.equalBytes=Me.ensureBytes=Me.numberToVarBytesBE=Me.numberToBytesLE=Me.numberToBytesBE=Me.bytesToNumberLE=Me.bytesToNumberBE=Me.hexToNumber=Me.numberToHexUnpadded=Me.abool=Me.utf8ToBytes=Me.randomBytes=Me.isBytes=Me.hexToBytes=Me.concatBytes=Me.bytesToUtf8=Me.bytesToHex=Me.anumber=Me.abytes=void 0;const e=pi();return Me.abytes=e.abytes,Me.anumber=e.anumber,Me.bytesToHex=e.bytesToHex,Me.bytesToUtf8=e.bytesToUtf8,Me.concatBytes=e.concatBytes,Me.hexToBytes=e.hexToBytes,Me.isBytes=e.isBytes,Me.randomBytes=e.randomBytes,Me.utf8ToBytes=e.utf8ToBytes,Me.abool=e.abool,Me.numberToHexUnpadded=e.numberToHexUnpadded,Me.hexToNumber=e.hexToNumber,Me.bytesToNumberBE=e.bytesToNumberBE,Me.bytesToNumberLE=e.bytesToNumberLE,Me.numberToBytesBE=e.numberToBytesBE,Me.numberToBytesLE=e.numberToBytesLE,Me.numberToVarBytesBE=e.numberToVarBytesBE,Me.ensureBytes=e.ensureBytes,Me.equalBytes=e.equalBytes,Me.copyBytes=e.copyBytes,Me.asciiToBytes=e.asciiToBytes,Me.inRange=e.inRange,Me.aInRange=e.aInRange,Me.bitLen=e.bitLen,Me.bitGet=e.bitGet,Me.bitSet=e.bitSet,Me.bitMask=e.bitMask,Me.createHmacDrbg=e.createHmacDrbg,Me.notImplemented=e.notImplemented,Me.memoized=e.memoized,Me.validateObject=e.validateObject,Me.isHash=e.isHash,Me}var Gm;function kd(){if(Gm)return $u;Gm=1,Object.defineProperty($u,"__esModule",{value:!0});const e=Lg(),t=bS();let n=class vS{constructor(){this.hash=e.sha512.create()}static half(s){return new vS().add(s).first256()}add(s){return this.hash.update(s),this}addU32(s){const i=new Uint8Array(4);return new DataView(i.buffer).setUint32(0,s),this.add(i)}finish(){return this.hash.digest()}first256(){return this.finish().slice(0,32)}first256BigInt(){return(0,t.bytesToNumberBE)(this.first256())}};return $u.default=n,$u}var Km;function ES(){if(Km)return Ur;Km=1;var e=Ur&&Ur.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.accountPublicFromPublicGenerator=Ur.derivePrivateKey=void 0;const t=Kg(),n=e(kd()),r=BigInt(0);function s(a,u){const c=t.secp256k1.CURVE.n;for(let l=0;l<=4294967295;l++){const d=new n.default().add(a);u!==void 0&&d.addU32(u),d.addU32(l);const f=d.first256BigInt();if(f>r&&f<c)return f}throw new Error("impossible unicorn ;)")}function i(a,u={}){const c=u.validator,l=t.secp256k1.CURVE.n,d=s(a);if(c)return d;const f=t.secp256k1.ProjectivePoint.BASE.multiply(d).toRawBytes(!0),h=u.accountIndex||0;return(s(f,h)+d)%l}Ur.derivePrivateKey=i;function o(a){const u=t.secp256k1.ProjectivePoint.fromHex(a),c=s(a,0),l=t.secp256k1.ProjectivePoint.BASE.multiply(c);return u.add(l).toRawBytes(!0)}return Ur.accountPublicFromPublicGenerator=o,Ur}var Zu={},Ym;function Yg(){if(Ym)return Zu;Ym=1,Object.defineProperty(Zu,"__esModule",{value:!0});const e={ok(t,n){if(!t)throw new Error(n)}};return Zu.default=e,Zu}var zr={},Wm;function HI(){if(Wm)return zr;Wm=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.getAlgorithmFromPrivateKey=zr.getAlgorithmFromPublicKey=zr.getAlgorithmFromKey=void 0;var e;(function(c){c[c.NONE=-1]="NONE",c[c.ED25519=237]="ED25519",c[c.SECP256K1_PUB_X=2]="SECP256K1_PUB_X",c[c.SECP256K1_PUB_X_ODD_Y=3]="SECP256K1_PUB_X_ODD_Y",c[c.SECP256K1_PUB_XY=4]="SECP256K1_PUB_XY",c[c.SECP256K1_PRIVATE=0]="SECP256K1_PRIVATE"})(e||(e={}));const t={[`private_${e.NONE}_32`]:"ecdsa-secp256k1",[`private_${e.SECP256K1_PRIVATE}_33`]:"ecdsa-secp256k1",[`private_${e.ED25519}_33`]:"ed25519",[`public_${e.ED25519}_33`]:"ed25519",[`public_${e.SECP256K1_PUB_X}_33`]:"ecdsa-secp256k1",[`public_${e.SECP256K1_PUB_X_ODD_Y}_33`]:"ecdsa-secp256k1",[`public_${e.SECP256K1_PUB_XY}_65`]:"ecdsa-secp256k1"};function n(c){return{prefix:c.length<2?e.NONE:parseInt(c.slice(0,2),16),len:c.length/2}}function r(c){return c===e.NONE?"None":`0x${c.toString(16).padStart(2,"0")}`}function s(c){const d={algorithm:17,prefix:6};return Object.entries(t).filter(([f])=>f.startsWith(c)).map(([f,h])=>{const[,p,g]=f.split("_"),y=h.padEnd(d.algorithm),b=r(Number(p)).padEnd(d.prefix);return`${y} - Prefix: ${b} Length: ${g} bytes`}).join(`
`)}function i({key:c,type:l,prefix:d,len:f}){const h=s(l);return`invalid_key:

Type: ${l}
Key: ${c}
Prefix: ${r(d)} 
Length: ${f} bytes

Acceptable ${l} formats are:
${h}
`}function o(c,l){const{prefix:d,len:f}=n(c),h=l==="private"&&f===32?e.NONE:d,p=t[`${l}_${h}_${f}`];if(!p)throw new Error(i({key:c,type:l,len:f,prefix:h}));return p}zr.getAlgorithmFromKey=o;function a(c){return o(c,"public")}zr.getAlgorithmFromPublicKey=a;function u(c){return o(c,"private")}return zr.getAlgorithmFromPrivateKey=u,zr}var bo={},Xm;function VI(){if(Xm)return bo;Xm=1;var e=bo&&bo.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(bo,"__esModule",{value:!0});const t=bS(),n=Kg(),r=Ve(),s=ES(),i=e(Yg()),o=e(kd()),a="00",u={deriveKeypair(c,l){const d=(0,s.derivePrivateKey)(c,l),f=a+(0,r.bytesToHex)((0,t.numberToBytesBE)(d,32)),h=(0,r.bytesToHex)(n.secp256k1.getPublicKey(d,!0));return{privateKey:f,publicKey:h}},sign(c,l){i.default.ok(l.length===66&&l.startsWith(a)||l.length===64);const d=l.length===66?l.slice(2):l;return n.secp256k1.sign(o.default.half(c),d,{lowS:!0,extraEntropy:void 0}).toDERHex(!0).toUpperCase()},verify(c,l,d){const f=n.secp256k1.Signature.fromDER(l);return n.secp256k1.verify(f,o.default.half(c),d)}};return bo.default=u,bo}var vo={},tf={},gi={},Qm;function qI(){if(Qm)return gi;Qm=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.PrimeEdwardsPoint=void 0,gi.edwards=u,gi.eddsa=l,gi.twistedEdwards=h;const e=pi(),t=Gg(),n=Zi(),r=BigInt(0),s=BigInt(1),i=BigInt(2),o=BigInt(8);function a(p,g,y,b){const A=p.sqr(y),E=p.sqr(b),_=p.add(p.mul(g.a,A),E),S=p.add(p.ONE,p.mul(g.d,p.mul(A,E)));return p.eql(_,S)}function u(p,g={}){const y=(0,t._createCurveFields)("edwards",p,g,g.FpFnLE),{Fp:b,Fn:A}=y;let E=y.CURVE;const{h:_}=E;(0,e._validateObject)(g,{},{uvRatio:"function"});const S=i<<BigInt(A.BYTES*8)-s,I=R=>b.create(R),D=g.uvRatio||((R,v)=>{try{return{isValid:!0,value:b.sqrt(b.div(R,v))}}catch{return{isValid:!1,value:r}}});if(!a(b,E,E.Gx,E.Gy))throw new Error("bad curve params: generator point");function L(R,v,T=!1){const m=T?s:r;return(0,e.aInRange)("coordinate "+R,v,m,S),v}function x(R){if(!(R instanceof Y))throw new Error("ExtendedPoint expected")}const j=(0,e.memoized)((R,v)=>{const{X:T,Y:m,Z:w}=R,N=R.is0();v==null&&(v=N?o:b.inv(w));const C=I(T*v),O=I(m*v),B=b.mul(w,v);if(N)return{x:r,y:s};if(B!==s)throw new Error("invZ was invalid");return{x:C,y:O}}),V=(0,e.memoized)(R=>{const{a:v,d:T}=E;if(R.is0())throw new Error("bad point: ZERO");const{X:m,Y:w,Z:N,T:C}=R,O=I(m*m),B=I(w*w),W=I(N*N),P=I(W*W),X=I(O*v),ee=I(W*I(X+B)),se=I(P+I(T*I(O*B)));if(ee!==se)throw new Error("bad point: equation left != right (1)");const Z=I(m*w),J=I(N*C);if(Z!==J)throw new Error("bad point: equation left != right (2)");return!0});class Y{constructor(v,T,m,w){this.X=L("x",v),this.Y=L("y",T),this.Z=L("z",m,!0),this.T=L("t",w),Object.freeze(this)}static CURVE(){return E}static fromAffine(v){if(v instanceof Y)throw new Error("extended point not allowed");const{x:T,y:m}=v||{};return L("x",T),L("y",m),new Y(T,m,s,I(T*m))}static fromBytes(v,T=!1){const m=b.BYTES,{a:w,d:N}=E;v=(0,e.copyBytes)((0,e._abytes2)(v,m,"point")),(0,e._abool2)(T,"zip215");const C=(0,e.copyBytes)(v),O=v[m-1];C[m-1]=O&-129;const B=(0,e.bytesToNumberLE)(C),W=T?S:b.ORDER;(0,e.aInRange)("point.y",B,r,W);const P=I(B*B),X=I(P-s),ee=I(N*P-w);let{isValid:se,value:Z}=D(X,ee);if(!se)throw new Error("bad point: invalid y coordinate");const J=(Z&s)===s,z=(O&128)!==0;if(!T&&Z===r&&z)throw new Error("bad point: x=0 and x_0=1");return z!==J&&(Z=I(-Z)),Y.fromAffine({x:Z,y:B})}static fromHex(v,T=!1){return Y.fromBytes((0,e.ensureBytes)("point",v),T)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(v=8,T=!0){return q.createCache(this,v),T||this.multiply(i),this}assertValidity(){V(this)}equals(v){x(v);const{X:T,Y:m,Z:w}=this,{X:N,Y:C,Z:O}=v,B=I(T*O),W=I(N*w),P=I(m*O),X=I(C*w);return B===W&&P===X}is0(){return this.equals(Y.ZERO)}negate(){return new Y(I(-this.X),this.Y,this.Z,I(-this.T))}double(){const{a:v}=E,{X:T,Y:m,Z:w}=this,N=I(T*T),C=I(m*m),O=I(i*I(w*w)),B=I(v*N),W=T+m,P=I(I(W*W)-N-C),X=B+C,ee=X-O,se=B-C,Z=I(P*ee),J=I(X*se),z=I(P*se),K=I(ee*X);return new Y(Z,J,K,z)}add(v){x(v);const{a:T,d:m}=E,{X:w,Y:N,Z:C,T:O}=this,{X:B,Y:W,Z:P,T:X}=v,ee=I(w*B),se=I(N*W),Z=I(O*m*X),J=I(C*P),z=I((w+N)*(B+W)-ee-se),K=J-Z,H=J+Z,U=I(se-T*ee),F=I(z*K),$=I(H*U),te=I(z*U),ne=I(K*H);return new Y(F,$,ne,te)}subtract(v){return this.add(v.negate())}multiply(v){if(!A.isValidNot0(v))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:T,f:m}=q.cached(this,v,w=>(0,t.normalizeZ)(Y,w));return(0,t.normalizeZ)(Y,[T,m])[0]}multiplyUnsafe(v,T=Y.ZERO){if(!A.isValid(v))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return v===r?Y.ZERO:this.is0()||v===s?this:q.unsafe(this,v,m=>(0,t.normalizeZ)(Y,m),T)}isSmallOrder(){return this.multiplyUnsafe(_).is0()}isTorsionFree(){return q.unsafe(this,E.n).is0()}toAffine(v){return j(this,v)}clearCofactor(){return _===s?this:this.multiplyUnsafe(_)}toBytes(){const{x:v,y:T}=this.toAffine(),m=b.toBytes(T);return m[m.length-1]|=v&s?128:0,m}toHex(){return(0,e.bytesToHex)(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(v){return(0,t.normalizeZ)(Y,v)}static msm(v,T){return(0,t.pippenger)(Y,A,v,T)}_setWindowSize(v){this.precompute(v)}toRawBytes(){return this.toBytes()}}Y.BASE=new Y(E.Gx,E.Gy,s,I(E.Gx*E.Gy)),Y.ZERO=new Y(r,s,s,r),Y.Fp=b,Y.Fn=A;const q=new t.wNAF(Y,A.BITS);return Y.BASE.precompute(8),Y}class c{constructor(g){this.ep=g}static fromBytes(g){(0,e.notImplemented)()}static fromHex(g){(0,e.notImplemented)()}get x(){return this.toAffine().x}get y(){return this.toAffine().y}clearCofactor(){return this}assertValidity(){this.ep.assertValidity()}toAffine(g){return this.ep.toAffine(g)}toHex(){return(0,e.bytesToHex)(this.toBytes())}toString(){return this.toHex()}isTorsionFree(){return!0}isSmallOrder(){return!1}add(g){return this.assertSame(g),this.init(this.ep.add(g.ep))}subtract(g){return this.assertSame(g),this.init(this.ep.subtract(g.ep))}multiply(g){return this.init(this.ep.multiply(g))}multiplyUnsafe(g){return this.init(this.ep.multiplyUnsafe(g))}double(){return this.init(this.ep.double())}negate(){return this.init(this.ep.negate())}precompute(g,y){return this.init(this.ep.precompute(g,y))}toRawBytes(){return this.toBytes()}}gi.PrimeEdwardsPoint=c;function l(p,g,y={}){if(typeof g!="function")throw new Error('"hash" function param is required');(0,e._validateObject)(y,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:b}=y,{BASE:A,Fp:E,Fn:_}=p,S=y.randomBytes||e.randomBytes,I=y.adjustScalarBytes||(W=>W),D=y.domain||((W,P,X)=>{if((0,e._abool2)(X,"phflag"),P.length||X)throw new Error("Contexts/pre-hash are not supported");return W});function L(W){return _.create((0,e.bytesToNumberLE)(W))}function x(W){const P=m.secretKey;W=(0,e.ensureBytes)("private key",W,P);const X=(0,e.ensureBytes)("hashed private key",g(W),2*P),ee=I(X.slice(0,P)),se=X.slice(P,2*P),Z=L(ee);return{head:ee,prefix:se,scalar:Z}}function j(W){const{head:P,prefix:X,scalar:ee}=x(W),se=A.multiply(ee),Z=se.toBytes();return{head:P,prefix:X,scalar:ee,point:se,pointBytes:Z}}function V(W){return j(W).pointBytes}function Y(W=Uint8Array.of(),...P){const X=(0,e.concatBytes)(...P);return L(g(D(X,(0,e.ensureBytes)("context",W),!!b)))}function q(W,P,X={}){W=(0,e.ensureBytes)("message",W),b&&(W=b(W));const{prefix:ee,scalar:se,pointBytes:Z}=j(P),J=Y(X.context,ee,W),z=A.multiply(J).toBytes(),K=Y(X.context,z,Z,W),H=_.create(J+K*se);if(!_.isValid(H))throw new Error("sign failed: invalid s");const U=(0,e.concatBytes)(z,_.toBytes(H));return(0,e._abytes2)(U,m.signature,"result")}const R={zip215:!0};function v(W,P,X,ee=R){const{context:se,zip215:Z}=ee,J=m.signature;W=(0,e.ensureBytes)("signature",W,J),P=(0,e.ensureBytes)("message",P),X=(0,e.ensureBytes)("publicKey",X,m.publicKey),Z!==void 0&&(0,e._abool2)(Z,"zip215"),b&&(P=b(P));const z=J/2,K=W.subarray(0,z),H=(0,e.bytesToNumberLE)(W.subarray(z,J));let U,F,$;try{U=p.fromBytes(X,Z),F=p.fromBytes(K,Z),$=A.multiplyUnsafe(H)}catch{return!1}if(!Z&&U.isSmallOrder())return!1;const te=Y(se,F.toBytes(),U.toBytes(),P);return F.add(U.multiplyUnsafe(te)).subtract($).clearCofactor().is0()}const T=E.BYTES,m={secretKey:T,publicKey:T,signature:2*T,seed:T};function w(W=S(m.seed)){return(0,e._abytes2)(W,m.seed,"seed")}function N(W){const P=B.randomSecretKey(W);return{secretKey:P,publicKey:V(P)}}function C(W){return(0,e.isBytes)(W)&&W.length===_.BYTES}function O(W,P){try{return!!p.fromBytes(W,P)}catch{return!1}}const B={getExtendedPublicKey:j,randomSecretKey:w,isValidSecretKey:C,isValidPublicKey:O,toMontgomery(W){const{y:P}=p.fromBytes(W),X=m.publicKey,ee=X===32;if(!ee&&X!==57)throw new Error("only defined for 25519 and 448");const se=ee?E.div(s+P,s-P):E.div(P-s,P+s);return E.toBytes(se)},toMontgomerySecret(W){const P=m.secretKey;(0,e._abytes2)(W,P);const X=g(W.subarray(0,P));return I(X).subarray(0,P)},randomPrivateKey:w,precompute(W=8,P=p.BASE){return P.precompute(W,!1)}};return Object.freeze({keygen:N,getPublicKey:V,sign:q,verify:v,utils:B,Point:p,lengths:m})}function d(p){const g={a:p.a,d:p.d,p:p.Fp.ORDER,n:p.n,h:p.h,Gx:p.Gx,Gy:p.Gy},y=p.Fp,b=(0,n.Field)(g.n,p.nBitLength,!0),A={Fp:y,Fn:b,uvRatio:p.uvRatio},E={randomBytes:p.randomBytes,adjustScalarBytes:p.adjustScalarBytes,domain:p.domain,prehash:p.prehash,mapToCurve:p.mapToCurve};return{CURVE:g,curveOpts:A,hash:p.hash,eddsaOpts:E}}function f(p,g){const y=g.Point;return Object.assign({},g,{ExtendedPoint:y,CURVE:p,nBitLength:y.Fn.BITS,nByteLength:y.Fn.BYTES})}function h(p){const{CURVE:g,curveOpts:y,hash:b,eddsaOpts:A}=d(p),E=u(g,y),_=l(E,b,A);return f(p,_)}return gi}var Ju={},$m;function GI(){if($m)return Ju;$m=1,Object.defineProperty(Ju,"__esModule",{value:!0}),Ju.montgomery=o;const e=pi(),t=Zi(),n=BigInt(0),r=BigInt(1),s=BigInt(2);function i(a){return(0,e._validateObject)(a,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...a})}function o(a){const u=i(a),{P:c,type:l,adjustScalarBytes:d,powPminus2:f,randomBytes:h}=u,p=l==="x25519";if(!p&&l!=="x448")throw new Error("invalid type");const g=h||e.randomBytes,y=p?255:448,b=p?32:56,A=BigInt(p?9:5),E=BigInt(p?121665:39081),_=p?s**BigInt(254):s**BigInt(447),S=p?BigInt(8)*s**BigInt(251)-r:BigInt(4)*s**BigInt(445)-r,I=_+S+r,D=C=>(0,t.mod)(C,c),L=x(A);function x(C){return(0,e.numberToBytesLE)(D(C),b)}function j(C){const O=(0,e.ensureBytes)("u coordinate",C,b);return p&&(O[31]&=127),D((0,e.bytesToNumberLE)(O))}function V(C){return(0,e.bytesToNumberLE)(d((0,e.ensureBytes)("scalar",C,b)))}function Y(C,O){const B=v(j(O),V(C));if(B===n)throw new Error("invalid private or public key received");return x(B)}function q(C){return Y(C,L)}function R(C,O,B){const W=D(C*(O-B));return O=D(O-W),B=D(B+W),{x_2:O,x_3:B}}function v(C,O){(0,e.aInRange)("u",C,n,c),(0,e.aInRange)("scalar",O,_,I);const B=O,W=C;let P=r,X=n,ee=C,se=r,Z=n;for(let z=BigInt(y-1);z>=n;z--){const K=B>>z&r;Z^=K,{x_2:P,x_3:ee}=R(Z,P,ee),{x_2:X,x_3:se}=R(Z,X,se),Z=K;const H=P+X,U=D(H*H),F=P-X,$=D(F*F),te=U-$,ne=ee+se,ie=ee-se,ce=D(ie*H),oe=D(ne*F),de=ce+oe,we=ce-oe;ee=D(de*de),se=D(W*D(we*we)),P=D(U*$),X=D(te*(U+D(E*te)))}({x_2:P,x_3:ee}=R(Z,P,ee)),{x_2:X,x_3:se}=R(Z,X,se);const J=f(X);return D(P*J)}const T={secretKey:b,publicKey:b,seed:b},m=(C=g(b))=>((0,e.abytes)(C,T.seed),C);function w(C){const O=m(C);return{secretKey:O,publicKey:q(O)}}return{keygen:w,getSharedSecret:(C,O)=>Y(C,O),getPublicKey:C=>q(C),scalarMult:Y,scalarMultBase:q,utils:{randomSecretKey:m,randomPrivateKey:m},GuBytes:L.slice(),lengths:T}}return Ju}var Zm;function KI(){return Zm||(Zm=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hash_to_ristretto255=e.hashToRistretto255=e.encodeToCurve=e.hashToCurve=e.RistrettoPoint=e.edwardsToMontgomery=e.ED25519_TORSION_SUBGROUP=e.ristretto255_hasher=e.ristretto255=e.ed25519_hasher=e.x25519=e.ed25519ph=e.ed25519ctx=e.ed25519=void 0,e.edwardsToMontgomeryPub=ee,e.edwardsToMontgomeryPriv=se;const t=oa(),n=Mn(),r=Gg(),s=qI(),i=wS(),o=Zi(),a=GI(),u=pi(),c=BigInt(0),l=BigInt(1),d=BigInt(2),f=BigInt(3),h=BigInt(5),p=BigInt(8),g=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),y={p:g,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:p,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function b(Z){const J=BigInt(10),z=BigInt(20),K=BigInt(40),H=BigInt(80),U=g,$=Z*Z%U*Z%U,te=(0,o.pow2)($,d,U)*$%U,ne=(0,o.pow2)(te,l,U)*Z%U,ie=(0,o.pow2)(ne,h,U)*ne%U,ce=(0,o.pow2)(ie,J,U)*ie%U,oe=(0,o.pow2)(ce,z,U)*ce%U,de=(0,o.pow2)(oe,K,U)*oe%U,we=(0,o.pow2)(de,H,U)*de%U,me=(0,o.pow2)(we,H,U)*de%U,pe=(0,o.pow2)(me,J,U)*ie%U;return{pow_p_5_8:(0,o.pow2)(pe,d,U)*Z%U,b2:$}}function A(Z){return Z[0]&=248,Z[31]&=127,Z[31]|=64,Z}const E=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function _(Z,J){const z=g,K=(0,o.mod)(J*J*J,z),H=(0,o.mod)(K*K*J,z),U=b(Z*H).pow_p_5_8;let F=(0,o.mod)(Z*K*U,z);const $=(0,o.mod)(J*F*F,z),te=F,ne=(0,o.mod)(F*E,z),ie=$===Z,ce=$===(0,o.mod)(-Z,z),oe=$===(0,o.mod)(-Z*E,z);return ie&&(F=te),(ce||oe)&&(F=ne),(0,o.isNegativeLE)(F,z)&&(F=(0,o.mod)(-F,z)),{isValid:ie||ce,value:F}}const S=(0,o.Field)(y.p,{isLE:!0}),I=(0,o.Field)(y.n,{isLE:!0}),D={...y,Fp:S,hash:t.sha512,adjustScalarBytes:A,uvRatio:_};e.ed25519=(0,s.twistedEdwards)(D);function L(Z,J,z){if(J.length>255)throw new Error("Context is too big");return(0,n.concatBytes)((0,n.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([z?1:0,J.length]),J,Z)}e.ed25519ctx=(0,s.twistedEdwards)({...D,domain:L}),e.ed25519ph=(0,s.twistedEdwards)(Object.assign({},D,{domain:L,prehash:t.sha512})),e.x25519=(()=>{const Z=S.ORDER;return(0,a.montgomery)({P:Z,type:"x25519",powPminus2:J=>{const{pow_p_5_8:z,b2:K}=b(J);return(0,o.mod)((0,o.pow2)(z,f,Z)*K,Z)},adjustScalarBytes:A})})();const x=(g+f)/p,j=S.pow(d,x),V=S.sqrt(S.neg(S.ONE));function Y(Z){const J=(g-h)/p,z=BigInt(486662);let K=S.sqr(Z);K=S.mul(K,d);let H=S.add(K,S.ONE),U=S.neg(z),F=S.sqr(H),$=S.mul(F,H),te=S.mul(K,z);te=S.mul(te,U),te=S.add(te,F),te=S.mul(te,U);let ne=S.sqr($);F=S.sqr(ne),ne=S.mul(ne,$),ne=S.mul(ne,te),F=S.mul(F,ne);let ie=S.pow(F,J);ie=S.mul(ie,ne);let ce=S.mul(ie,V);F=S.sqr(ie),F=S.mul(F,$);let oe=S.eql(F,te),de=S.cmov(ce,ie,oe),we=S.mul(U,K),me=S.mul(ie,Z);me=S.mul(me,j);let pe=S.mul(me,V),he=S.mul(te,K);F=S.sqr(me),F=S.mul(F,$);let fe=S.eql(F,he),M=S.cmov(pe,me,fe);F=S.sqr(de),F=S.mul(F,$);let k=S.eql(F,te),G=S.cmov(we,U,k),re=S.cmov(M,de,k),ae=S.isOdd(re);return re=S.cmov(re,S.neg(re),k!==ae),{xMn:G,xMd:H,yMn:re,yMd:l}}const q=(0,o.FpSqrtEven)(S,S.neg(BigInt(486664)));function R(Z){const{xMn:J,xMd:z,yMn:K,yMd:H}=Y(Z);let U=S.mul(J,H);U=S.mul(U,q);let F=S.mul(z,K),$=S.sub(J,z),te=S.add(J,z),ne=S.mul(F,te),ie=S.eql(ne,S.ZERO);U=S.cmov(U,S.ZERO,ie),F=S.cmov(F,S.ONE,ie),$=S.cmov($,S.ONE,ie),te=S.cmov(te,S.ONE,ie);const[ce,oe]=(0,o.FpInvertBatch)(S,[F,te],!0);return{x:S.mul(U,ce),y:S.mul($,oe)}}e.ed25519_hasher=(0,i.createHasher)(e.ed25519.Point,Z=>R(Z[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:g,m:1,k:128,expand:"xmd",hash:t.sha512});const v=E,T=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),m=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),w=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),N=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),C=Z=>_(l,Z),O=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),B=Z=>e.ed25519.Point.Fp.create((0,u.bytesToNumberLE)(Z)&O);function W(Z){const{d:J}=y,z=g,K=he=>S.create(he),H=K(v*Z*Z),U=K((H+l)*w);let F=BigInt(-1);const $=K((F-J*H)*K(H+J));let{isValid:te,value:ne}=_(U,$),ie=K(ne*Z);(0,o.isNegativeLE)(ie,z)||(ie=K(-ie)),te||(ne=ie),te||(F=H);const ce=K(F*(H-l)*N-$),oe=ne*ne,de=K((ne+ne)*$),we=K(ce*T),me=K(l-oe),pe=K(l+oe);return new e.ed25519.Point(K(de*pe),K(me*we),K(we*pe),K(de*me))}function P(Z){(0,n.abytes)(Z,64);const J=B(Z.subarray(0,32)),z=W(J),K=B(Z.subarray(32,64)),H=W(K);return new X(z.add(H))}class X extends s.PrimeEdwardsPoint{constructor(J){super(J)}static fromAffine(J){return new X(e.ed25519.Point.fromAffine(J))}assertSame(J){if(!(J instanceof X))throw new Error("RistrettoPoint expected")}init(J){return new X(J)}static hashToCurve(J){return P((0,u.ensureBytes)("ristrettoHash",J,64))}static fromBytes(J){(0,n.abytes)(J,32);const{a:z,d:K}=y,H=g,U=k=>S.create(k),F=B(J);if(!(0,u.equalBytes)(S.toBytes(F),J)||(0,o.isNegativeLE)(F,H))throw new Error("invalid ristretto255 encoding 1");const $=U(F*F),te=U(l+z*$),ne=U(l-z*$),ie=U(te*te),ce=U(ne*ne),oe=U(z*K*ie-ce),{isValid:de,value:we}=C(U(oe*ce)),me=U(we*ne),pe=U(we*me*oe);let he=U((F+F)*me);(0,o.isNegativeLE)(he,H)&&(he=U(-he));const fe=U(te*pe),M=U(he*fe);if(!de||(0,o.isNegativeLE)(M,H)||fe===c)throw new Error("invalid ristretto255 encoding 2");return new X(new e.ed25519.Point(he,fe,l,M))}static fromHex(J){return X.fromBytes((0,u.ensureBytes)("ristrettoHex",J,32))}static msm(J,z){return(0,r.pippenger)(X,e.ed25519.Point.Fn,J,z)}toBytes(){let{X:J,Y:z,Z:K,T:H}=this.ep;const U=g,F=pe=>S.create(pe),$=F(F(K+z)*F(K-z)),te=F(J*z),ne=F(te*te),{value:ie}=C(F($*ne)),ce=F(ie*$),oe=F(ie*te),de=F(ce*oe*H);let we;if((0,o.isNegativeLE)(H*de,U)){let pe=F(z*v),he=F(J*v);J=pe,z=he,we=F(ce*m)}else we=oe;(0,o.isNegativeLE)(J*de,U)&&(z=F(-z));let me=F((K-z)*we);return(0,o.isNegativeLE)(me,U)&&(me=F(-me)),S.toBytes(me)}equals(J){this.assertSame(J);const{X:z,Y:K}=this.ep,{X:H,Y:U}=J.ep,F=ne=>S.create(ne),$=F(z*U)===F(K*H),te=F(K*U)===F(z*H);return $||te}is0(){return this.equals(X.ZERO)}}X.BASE=new X(e.ed25519.Point.BASE),X.ZERO=new X(e.ed25519.Point.ZERO),X.Fp=S,X.Fn=I,e.ristretto255={Point:X},e.ristretto255_hasher={hashToCurve(Z,J){const z=J?.DST||"ristretto255_XMD:SHA-512_R255MAP_RO_",K=(0,i.expand_message_xmd)(Z,z,64,t.sha512);return P(K)},hashToScalar(Z,J={DST:i._DST_scalar}){const z=(0,i.expand_message_xmd)(Z,J.DST,64,t.sha512);return I.create((0,u.bytesToNumberLE)(z))}},e.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];function ee(Z){return e.ed25519.utils.toMontgomery((0,u.ensureBytes)("pub",Z))}e.edwardsToMontgomery=ee;function se(Z){return e.ed25519.utils.toMontgomerySecret((0,u.ensureBytes)("pub",Z))}e.RistrettoPoint=X,e.hashToCurve=e.ed25519_hasher.hashToCurve,e.encodeToCurve=e.ed25519_hasher.encodeToCurve,e.hashToRistretto255=e.ristretto255_hasher.hashToCurve,e.hash_to_ristretto255=e.ristretto255_hasher.hashToCurve})(tf)),tf}var Jm;function YI(){if(Jm)return vo;Jm=1;var e=vo&&vo.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(vo,"__esModule",{value:!0});const t=KI(),n=Ve(),r=e(Yg()),s=e(kd()),i="ED",o={deriveKeypair(a){const u=s.default.half(a),c=i+(0,n.bytesToHex)(u),l=i+(0,n.bytesToHex)(t.ed25519.getPublicKey(u));return{privateKey:c,publicKey:l}},sign(a,u){return r.default.ok(a instanceof Uint8Array,"message must be array of octets"),r.default.ok(u.length===66,"private key must be 33 bytes including prefix"),(0,n.bytesToHex)(t.ed25519.sign(a,u.slice(2)))},verify(a,u,c){return r.default.ok(c.length===66,"public key must be 33 bytes including prefix"),t.ed25519.verify(u,a,c.slice(2),{zip215:!1})}};return vo.default=o,vo}var ew;function ao(){return ew||(ew=1,(function(e){var t=Va&&Va.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeSeed=e.deriveNodeAddress=e.deriveAddress=e.verify=e.sign=e.deriveKeypair=e.generateSeed=void 0;const n=Rn();Object.defineProperty(e,"decodeSeed",{enumerable:!0,get:function(){return n.decodeSeed}});const r=zI(),s=iS(),i=Ve(),o=ES(),a=t(kd()),u=t(Yg()),c=HI(),l=t(VI()),d=t(YI());function f(S){return{"ecdsa-secp256k1":l.default,ed25519:d.default}[S]}function h(S={}){u.default.ok(!S.entropy||S.entropy.length>=16,"entropy too short");const I=S.entropy?S.entropy.slice(0,16):(0,i.randomBytes)(16),D=S.algorithm==="ed25519"?"ed25519":"secp256k1";return(0,n.encodeSeed)(I,D)}e.generateSeed=h;function p(S,I){var D;const L=(0,n.decodeSeed)(S),j=((D=I?.algorithm)!==null&&D!==void 0?D:L.type)==="ed25519"?"ed25519":"ecdsa-secp256k1",V=f(j),Y=V.deriveKeypair(L.bytes,I),q=a.default.half("This test message should verify."),R=V.sign(q,Y.privateKey);if(!V.verify(q,R,Y.publicKey))throw new Error("derived keypair did not generate verifiable signature");return Y}e.deriveKeypair=p;function g(S,I){const D=(0,c.getAlgorithmFromPrivateKey)(I);return f(D).sign((0,i.hexToBytes)(S),I)}e.sign=g;function y(S,I,D){const L=(0,c.getAlgorithmFromPublicKey)(D);return f(L).verify((0,i.hexToBytes)(S),I,D)}e.verify=y;function b(S){return(0,r.ripemd160)((0,s.sha256)(S))}function A(S){return(0,n.encodeAccountID)(b(S))}function E(S){return A((0,i.hexToBytes)(S))}e.deriveAddress=E;function _(S){const I=(0,n.decodeNodePublic)(S),D=(0,o.accountPublicFromPublicGenerator)(I);return A(D)}e.deriveNodeAddress=_})(Va)),Va}var nf={},tw;function WI(){return tw||(tw=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.deriveXAddress=e.deriveAddress=e.deriveKeypair=void 0;const t=Rn(),n=ao();Object.defineProperty(e,"deriveKeypair",{enumerable:!0,get:function(){return n.deriveKeypair}}),Object.defineProperty(e,"deriveAddress",{enumerable:!0,get:function(){return n.deriveAddress}});function r(s){const i=(0,n.deriveAddress)(s.publicKey);return(0,t.classicAddressToXAddress)(i,s.tag,s.test)}e.deriveXAddress=r})(nf)),nf}var Eo={},Ms={},nw;function AS(){if(nw)return Ms;nw=1,Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.omitBy=Ms.groupBy=void 0;function e(n,r){function s(i,o,a,u){const c=r(o,a,u)||0,l=i[c]||[];return l.push(o),i[c]=l,i}return n.reduce(s,{})}Ms.groupBy=e;function t(n,r){return Object.keys(n).filter(o=>!r(n[o],o)).reduce((o,a)=>(o[a]=n[a],o),{})}return Ms.omitBy=t,Ms}var Fr={},rw;function Rd(){if(rw)return Fr;rw=1;var e=Fr&&Fr.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.xrpToDrops=Fr.dropsToXrp=void 0;const t=e(Nn()),n=Oe(),r=1e6,s=6,i=10,o=/^-?[0-9.]+$/u;function a(c){const l=new t.default(c).toString(i);if(typeof c=="string"&&l==="NaN")throw new n.ValidationError(`dropsToXrp: invalid value '${c}', should be a BigNumber or string-encoded number.`);if(l.includes("."))throw new n.ValidationError(`dropsToXrp: value '${l}' has too many decimal places.`);if(!o.exec(l))throw new n.ValidationError(`dropsToXrp: failed sanity check - value '${l}', does not match (^-?[0-9]+$).`);return new t.default(l).dividedBy(r).toNumber()}Fr.dropsToXrp=a;function u(c){const l=new t.default(c).toString(i);if(typeof c=="string"&&l==="NaN")throw new n.ValidationError(`xrpToDrops: invalid value '${c}', should be a BigNumber or string-encoded number.`);if(!o.exec(l))throw new n.ValidationError(`xrpToDrops: failed sanity check - value '${l}', does not match (^-?[0-9.]+$).`);const d=l.split(".");if(d.length>2)throw new n.ValidationError(`xrpToDrops: failed sanity check - value '${l}' has too many decimal points.`);if((d[1]||"0").length>s)throw new n.ValidationError(`xrpToDrops: value '${l}' has too many decimal places.`);return new t.default(l).times(r).integerValue(t.default.ROUND_FLOOR).toString(i)}return Fr.xrpToDrops=u,Fr}var iw;function XI(){if(iw)return Eo;iw=1;var e=Eo&&Eo.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Eo,"__esModule",{value:!0});const t=e(Nn()),n=AS(),r=Rd();function s(h){const p=Object.keys(h)[0],g=h[p];return Object.assign(Object.assign({},g),{NodeType:p,LedgerEntryType:g.LedgerEntryType,LedgerIndex:g.LedgerIndex,NewFields:g.NewFields,FinalFields:g.FinalFields,PreviousFields:g.PreviousFields})}function i(h){return h.AffectedNodes.length===0?[]:h.AffectedNodes.map(s)}function o(h){const p=(0,n.groupBy)(h,g=>g.account);return Object.entries(p).map(([g,y])=>({account:g,balances:y.map(b=>b.balance)}))}function a(h){return typeof h=="string"?new t.default(h):new t.default(h.value)}function u(h){var p,g,y;let b=null;return!((p=h.NewFields)===null||p===void 0)&&p.Balance?b=a(h.NewFields.Balance):!((g=h.PreviousFields)===null||g===void 0)&&g.Balance&&(!((y=h.FinalFields)===null||y===void 0)&&y.Balance)&&(b=a(h.FinalFields.Balance).minus(a(h.PreviousFields.Balance))),b===null||b.isZero()?null:b}function c(h){var p,g,y;const b=u(h);return b===null?null:{account:(g=(p=h.FinalFields)===null||p===void 0?void 0:p.Account)!==null&&g!==void 0?g:(y=h.NewFields)===null||y===void 0?void 0:y.Account,balance:{currency:"XRP",value:(0,r.dropsToXrp)(b).toString()}}}function l(h){const p=new t.default(h.balance.value).negated();return{account:h.balance.issuer,balance:{issuer:h.account,currency:h.balance.currency,value:p.toString()}}}function d(h){var p,g;const y=u(h);if(y===null)return null;const b=h.NewFields==null?h.FinalFields:h.NewFields,A={account:(p=b?.LowLimit)===null||p===void 0?void 0:p.issuer,balance:{issuer:(g=b?.HighLimit)===null||g===void 0?void 0:g.issuer,currency:(b?.Balance).currency,value:y.toString()}};return[A,l(A)]}function f(h){const p=i(h).map(g=>{if(g.LedgerEntryType==="AccountRoot"){const y=c(g);return y==null?[]:[y]}if(g.LedgerEntryType==="RippleState"){const y=d(g);return y??[]}return[]});return o(p.flat())}return Eo.default=f,Eo}var el={},Hr={},sw;function Wg(){if(sw)return Hr;sw=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.isDeletedNode=Hr.isModifiedNode=Hr.isCreatedNode=void 0;function e(r){return Object.prototype.hasOwnProperty.call(r,"CreatedNode")}Hr.isCreatedNode=e;function t(r){return Object.prototype.hasOwnProperty.call(r,"ModifiedNode")}Hr.isModifiedNode=t;function n(r){return Object.prototype.hasOwnProperty.call(r,"DeletedNode")}return Hr.isDeletedNode=n,Hr}var ow;function QI(){if(ow)return el;ow=1,Object.defineProperty(el,"__esModule",{value:!0});const e=fr(),t=Wg();function n(s){return typeof s=="string"?(0,e.decode)(s):s}function r(s){if(typeof s!="string"&&s?.AffectedNodes===void 0)throw new TypeError(`Unable to parse the parameter given to getNFTokenID.
      'meta' must be the metadata from an NFTokenMint transaction. Received ${JSON.stringify(s)} instead.`);const o=n(s).AffectedNodes.filter(l=>{var d;return(0,t.isCreatedNode)(l)?l.CreatedNode.LedgerEntryType==="NFTokenPage":(0,t.isModifiedNode)(l)?l.ModifiedNode.LedgerEntryType==="NFTokenPage"&&!!(!((d=l.ModifiedNode.PreviousFields)===null||d===void 0)&&d.NFTokens):!1}),a=new Set(o.flatMap(l=>{var d;return((0,t.isModifiedNode)(l)?(d=l.ModifiedNode.PreviousFields)===null||d===void 0?void 0:d.NFTokens:[]).map(h=>h.NFToken.NFTokenID)}).filter(l=>!!l));return o.flatMap(l=>{var d,f,h,p,g,y;return((y=(h=(f=(d=l.ModifiedNode)===null||d===void 0?void 0:d.FinalFields)===null||f===void 0?void 0:f.NFTokens)!==null&&h!==void 0?h:(g=(p=l.CreatedNode)===null||p===void 0?void 0:p.NewFields)===null||g===void 0?void 0:g.NFTokens)!==null&&y!==void 0?y:[]).map(b=>b.NFToken.NFTokenID)}).filter(l=>!!l).find(l=>!a.has(l))}return el.default=r,el}var tl={},aw;function $I(){if(aw)return tl;aw=1,Object.defineProperty(tl,"__esModule",{value:!0});const e=fr(),t=Wg();function n(s){return typeof s=="string"?(0,e.decode)(s):s}function r(s){if(typeof s!="string"&&s?.AffectedNodes===void 0)throw new TypeError(`Unable to parse the parameter given to getXChainClaimID.
      'meta' must be the metadata from an XChainCreateClaimID transaction. Received ${JSON.stringify(s)} instead.`);const i=n(s);if(!i.TransactionResult)throw new TypeError("Cannot get XChainClaimID from un-validated transaction");return i.TransactionResult!=="tesSUCCESS"?void 0:i.AffectedNodes.find(a=>(0,t.isCreatedNode)(a)&&a.CreatedNode.LedgerEntryType==="XChainOwnedClaimID").CreatedNode.NewFields.XChainClaimID}return tl.default=r,tl}var er={},bt={},nl={},cw;function Bd(){if(cw)return nl;cw=1,Object.defineProperty(nl,"__esModule",{value:!0});var e;return(function(t){t[t.TRANSACTION_ID=1415073280]="TRANSACTION_ID",t[t.TRANSACTION_NODE=1397638144]="TRANSACTION_NODE",t[t.INNER_NODE=1296649728]="INNER_NODE",t[t.LEAF_NODE=1296846336]="LEAF_NODE",t[t.TRANSACTION_SIGN=1398036480]="TRANSACTION_SIGN",t[t.TRANSACTION_SIGN_TESTNET=1937012736]="TRANSACTION_SIGN_TESTNET",t[t.TRANSACTION_MULTISIGN=1397576704]="TRANSACTION_MULTISIGN",t[t.LEDGER=1280791040]="LEDGER"})(e||(e={})),nl.default=e,nl}var rl={},uw;function Ud(){if(uw)return rl;uw=1,Object.defineProperty(rl,"__esModule",{value:!0});const e=Lg(),t=Ve(),n=32;function r(s){return(0,t.bytesToHex)((0,e.sha512)((0,t.hexToBytes)(s)).slice(0,n))}return rl.default=r,rl}var Vr={},Ao={},So={},Ns={},lw;function Xg(){if(lw)return Ns;lw=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.Node=Ns.NodeType=void 0;var e;(function(n){n[n.INNER=1]="INNER",n[n.TRANSACTION_NO_METADATA=2]="TRANSACTION_NO_METADATA",n[n.TRANSACTION_METADATA=3]="TRANSACTION_METADATA",n[n.ACCOUNT_STATE=4]="ACCOUNT_STATE"})(e||(Ns.NodeType=e={}));class t{}return Ns.Node=t,Ns}var dw;function SS(){if(dw)return So;dw=1;var e=So&&So.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(So,"__esModule",{value:!0});const t=Oe(),n=e(Bd()),r=e(Ud()),s=Xg(),i=16;let o=class extends s.Node{constructor(u,c,l){super(),this.tag=u,this.type=l,this.data=c}get hash(){switch(this.type){case s.NodeType.ACCOUNT_STATE:{const u=n.default.LEAF_NODE.toString(i);return(0,r.default)(u+this.data+this.tag)}case s.NodeType.TRANSACTION_NO_METADATA:{const u=n.default.TRANSACTION_ID.toString(i);return(0,r.default)(u+this.data)}case s.NodeType.TRANSACTION_METADATA:{const u=n.default.TRANSACTION_NODE.toString(i);return(0,r.default)(u+this.data+this.tag)}default:throw new t.XrplError("Tried to hash a SHAMap node of unknown type.")}}addItem(u,c){throw new t.XrplError("Cannot call addItem on a LeafNode")}};return So.default=o,So}var hw;function ZI(){if(hw)return Ao;hw=1;var e=Ao&&Ao.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Ao,"__esModule",{value:!0});const t=Oe(),n=e(Bd()),r=e(Ud()),s=e(SS()),i=Xg(),o="0000000000000000000000000000000000000000000000000000000000000000",a=15,u=16;let c=class wp extends i.Node{constructor(d=0){super(),this.leaves={},this.type=i.NodeType.INNER,this.depth=d,this.empty=!0}get hash(){if(this.empty)return o;let d="";for(let h=0;h<=a;h++){const p=this.leaves[h],g=p==null?o:p.hash;d+=g}const f=n.default.INNER_NODE.toString(u);return(0,r.default)(f+d)}addItem(d,f){const h=this.getNode(parseInt(d[this.depth],u));if(h===void 0){this.setNode(parseInt(d[this.depth],u),f);return}if(h instanceof wp)h.addItem(d,f);else if(h instanceof s.default){if(h.tag===d)throw new t.XrplError("Tried to add a node to a SHAMap that was already in there.");{const p=new wp(this.depth+1);p.addItem(h.tag,h),p.addItem(d,f),this.setNode(parseInt(d[this.depth],u),p)}}}setNode(d,f){if(d<0||d>a)throw new t.XrplError("Invalid slot: slot must be between 0-15.");this.leaves[d]=f,this.empty=!1}getNode(d){if(d<0||d>a)throw new t.XrplError("Invalid slot: slot must be between 0-15.");return this.leaves[d]}};return Ao.default=c,Ao}var fw;function JI(){return fw||(fw=1,(function(e){var t=Vr&&Vr.__createBinding||(Object.create?(function(a,u,c,l){l===void 0&&(l=c);var d=Object.getOwnPropertyDescriptor(u,c);(!d||("get"in d?!u.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return u[c]}}),Object.defineProperty(a,l,d)}):(function(a,u,c,l){l===void 0&&(l=c),a[l]=u[c]})),n=Vr&&Vr.__exportStar||function(a,u){for(var c in a)c!=="default"&&!Object.prototype.hasOwnProperty.call(u,c)&&t(u,a,c)},r=Vr&&Vr.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});const s=r(ZI()),i=r(SS());let o=class{constructor(){this.root=new s.default(0)}get hash(){return this.root.hash}addItem(u,c,l){this.root.addItem(u,new i.default(u,c,l))}};n(Xg(),e),e.default=o})(Vr)),Vr}var pw;function TS(){if(pw)return bt;pw=1;var e=bt&&bt.__createBinding||(Object.create?(function(I,D,L,x){x===void 0&&(x=L);var j=Object.getOwnPropertyDescriptor(D,L);(!j||("get"in j?!D.__esModule:j.writable||j.configurable))&&(j={enumerable:!0,get:function(){return D[L]}}),Object.defineProperty(I,x,j)}):(function(I,D,L,x){x===void 0&&(x=L),I[x]=D[L]})),t=bt&&bt.__setModuleDefault||(Object.create?(function(I,D){Object.defineProperty(I,"default",{enumerable:!0,value:D})}):function(I,D){I.default=D}),n=bt&&bt.__importStar||function(I){if(I&&I.__esModule)return I;var D={};if(I!=null)for(var L in I)L!=="default"&&Object.prototype.hasOwnProperty.call(I,L)&&e(D,I,L);return t(D,I),D},r=bt&&bt.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(bt,"__esModule",{value:!0}),bt.hashStateTree=bt.hashTxTree=bt.hashLedgerHeader=bt.hashSignedTx=void 0;const s=Ve(),i=r(Nn()),o=fr(),a=Oe(),u=r(Bd()),c=r(Ud()),l=n(JI()),d=16;function f(I,D){return Number(I).toString(d).padStart(D*2,"0")}function h(I,D){return new i.default(I).toString(d).padStart(D*2,"0")}function p(I){const D=I.length/2;if(D<=192)return(0,s.bytesToHex)([D])+I;if(D<=12480){const L=D-193;return(0,s.bytesToHex)([193+(L>>>8),L&255])+I}if(D<=918744){const L=D-12481;return(0,s.bytesToHex)([241+(L>>>16),L>>>8&255,L&255])+I}throw new a.XrplError("Variable integer overflow.")}function g(I){let D,L;if(typeof I=="string"?(D=I,L=(0,o.decode)(I)):(D=(0,o.encode)(I),L=I),L.TxnSignature===void 0&&L.Signers===void 0&&L.SigningPubKey===void 0)throw new a.ValidationError("The transaction must be signed to hash it.");const x=u.default.TRANSACTION_ID.toString(16).toUpperCase();return(0,c.default)(x.concat(D))}bt.hashSignedTx=g;function y(I){const L=u.default.LEDGER.toString(d).toUpperCase()+f(Number(I.ledger_index),4)+h(I.total_coins,8)+I.parent_hash+I.transaction_hash+I.account_hash+f(I.parent_close_time,4)+f(I.close_time,4)+f(I.close_time_resolution,1)+f(I.close_flags,1);return(0,c.default)(L)}bt.hashLedgerHeader=y;function b(I){var D;const L=new l.default;for(const x of I){const j=(0,o.encode)(x),V=(0,o.encode)((D=x.metaData)!==null&&D!==void 0?D:{}),Y=g(j),q=p(j)+p(V);L.addItem(Y,q,l.NodeType.TRANSACTION_METADATA)}return L.hash}bt.hashTxTree=b;function A(I){const D=new l.default;return I.forEach(L=>{const x=(0,o.encode)(L);D.addItem(L.index,x,l.NodeType.ACCOUNT_STATE)}),D.hash}bt.hashStateTree=A;function E(I,D){const{transaction_hash:L}=I;if(!D.computeTreeHashes)return L;if(I.transactions==null)throw new a.ValidationError("transactions is missing from the ledger");const x=b(I.transactions);if(L!==x)throw new a.ValidationError("transactionHash in header does not match computed hash of transactions",{transactionHashInHeader:L,computedHashOfTransactions:x});return x}function _(I,D){const{account_hash:L}=I;if(!D.computeTreeHashes)return L;if(I.accountState==null)throw new a.ValidationError("accountState is missing from the ledger");const x=A(I.accountState);if(L!==x)throw new a.ValidationError("stateHash in header does not match computed hash of state");return x}function S(I,D={}){const L={transaction_hash:E(I,D),account_hash:_(I,D)};return y(Object.assign(Object.assign({},I),L))}return bt.default=S,bt}var il={},gw;function e_(){if(gw)return il;gw=1,Object.defineProperty(il,"__esModule",{value:!0});const e={account:"a",dirNode:"d",generatorMap:"g",rippleState:"r",offer:"o",ownerDir:"O",bookDir:"B",contract:"c",skipList:"s",escrow:"u",amendment:"f",feeSettings:"e",ticket:"T",signerList:"S",paychan:"x",check:"C",depositPreauth:"p"};return il.default=e,il}var yw;function t_(){return yw||(yw=1,(function(e){var t=er&&er.__createBinding||(Object.create?(function(x,j,V,Y){Y===void 0&&(Y=V);var q=Object.getOwnPropertyDescriptor(j,V);(!q||("get"in q?!j.__esModule:q.writable||q.configurable))&&(q={enumerable:!0,get:function(){return j[V]}}),Object.defineProperty(x,Y,q)}):(function(x,j,V,Y){Y===void 0&&(Y=V),x[Y]=j[V]})),n=er&&er.__setModuleDefault||(Object.create?(function(x,j){Object.defineProperty(x,"default",{enumerable:!0,value:j})}):function(x,j){x.default=j}),r=er&&er.__importStar||function(x){if(x&&x.__esModule)return x;var j={};if(x!=null)for(var V in x)V!=="default"&&Object.prototype.hasOwnProperty.call(x,V)&&t(j,x,V);return n(j,x),j},s=er&&er.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(e,"__esModule",{value:!0}),e.hashTxTree=e.hashStateTree=e.hashLedger=e.hashSignedTx=e.hashLedgerHeader=e.hashPaymentChannel=e.hashEscrow=e.hashTrustline=e.hashOfferId=e.hashSignerListId=e.hashAccountRoot=e.hashTx=void 0;const i=Ve(),o=s(Nn()),a=Rn(),u=r(TS());e.hashLedger=u.default,Object.defineProperty(e,"hashLedgerHeader",{enumerable:!0,get:function(){return u.hashLedgerHeader}}),Object.defineProperty(e,"hashSignedTx",{enumerable:!0,get:function(){return u.hashSignedTx}}),Object.defineProperty(e,"hashTxTree",{enumerable:!0,get:function(){return u.hashTxTree}}),Object.defineProperty(e,"hashStateTree",{enumerable:!0,get:function(){return u.hashStateTree}});const c=s(Bd()),l=s(e_()),d=s(Ud()),f=16,h=4;function p(x){return(0,i.bytesToHex)((0,a.decodeAccountID)(x))}function g(x){return l.default[x].charCodeAt(0).toString(f).padStart(4,"0")}const y=255;function b(x){if(x.length!==3)return x;const j=Array(20).fill(0);return j[12]=x.charCodeAt(0)&y,j[13]=x.charCodeAt(1)&y,j[14]=x.charCodeAt(2)&y,(0,i.bytesToHex)(Uint8Array.from(j))}function A(x){const j=c.default.TRANSACTION_SIGN.toString(f).toUpperCase();return(0,d.default)(j+x)}e.hashTx=A;function E(x){return(0,d.default)(g("account")+p(x))}e.hashAccountRoot=E;function _(x){return(0,d.default)(`${g("signerList")+p(x)}00000000`)}e.hashSignerListId=_;function S(x,j){const V=l.default.offer.charCodeAt(0).toString(f).padStart(2,"0"),Y=j.toString(f).padStart(8,"0"),q=`00${V}`;return(0,d.default)(q+p(x)+Y)}e.hashOfferId=S;function I(x,j,V){const Y=p(x),q=p(j),R=new o.default(Y,16).isGreaterThan(new o.default(q,16)),v=R?q:Y,T=R?Y:q,m=g("rippleState");return(0,d.default)(m+v+T+b(V))}e.hashTrustline=I;function D(x,j){return(0,d.default)(g("escrow")+p(x)+j.toString(f).padStart(h*2,"0"))}e.hashEscrow=D;function L(x,j,V){return(0,d.default)(g("paychan")+p(x)+p(j)+V.toString(f).padStart(h*2,"0"))}e.hashPaymentChannel=L})(er)),er}var To={},mw;function n_(){if(mw)return To;mw=1;var e=To&&To.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(To,"__esModule",{value:!0});const t=Ve(),n=e(Nn()),r=Rn(),s=Oe();function i(a,u){const f=new n.default(384160001).multipliedBy(u).modulo(4294967296).plus(2459).modulo(4294967296).toNumber();return(a^f)>>>0}function o(a){if(a.length!==64)throw new s.XrplError(`Attempting to parse a nftokenID with length ${a.length}
    , but expected a token with length 64`);const c=new n.default(a.substring(48,56),16).toNumber(),l=new n.default(a.substring(56,64),16).toNumber();return{NFTokenID:a,Flags:new n.default(a.substring(0,4),16).toNumber(),TransferFee:new n.default(a.substring(4,8),16).toNumber(),Issuer:(0,r.encodeAccountID)((0,t.hexToBytes)(a.substring(8,48))),Taxon:i(c,l),Sequence:l}}return To.default=o,To}var Ut={},ww;function r_(){if(ww)return Ut;ww=1;var e=Ut&&Ut.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.percentToQuality=Ut.transferRateToDecimal=Ut.qualityToDecimal=Ut.decimalToQuality=Ut.percentToTransferRate=Ut.decimalToTransferRate=void 0;const t=e(Nn()),n=Oe(),r=10,s="1000000000",i="2000000000";function o(h){if(!h.endsWith("%"))throw new n.ValidationError(`Value ${h} must end with %`);const p=h.split("%").filter(g=>g!=="");if(p.length!==1)throw new n.ValidationError(`Value ${h} contains too many % signs`);return new t.default(p[0]).dividedBy("100").toString(r)}function a(h){const p=new t.default(h).times(s).plus(s);if(p.isLessThan(s)||p.isGreaterThan(i))throw new n.ValidationError("Decimal value must be between 0 and 1.00.");const g=p.toString(r);if(g===s)return 0;if(g==="NaN")throw new n.ValidationError("Value is not a number");if(g.includes("."))throw new n.ValidationError("Decimal exceeds maximum precision.");return Number(g)}Ut.decimalToTransferRate=a;function u(h){return a(o(h))}Ut.percentToTransferRate=u;function c(h){const g=new t.default(h).times(s).toString(r);if(g==="NaN")throw new n.ValidationError("Value is not a number");if(g.includes("-"))throw new n.ValidationError("Cannot have negative Quality");if(g===s)return 0;if(g.includes("."))throw new n.ValidationError("Decimal exceeds maximum precision.");return Number(g)}Ut.decimalToQuality=c;function l(h){if(!Number.isInteger(h))throw new n.ValidationError("Quality must be an integer");if(h<0)throw new n.ValidationError("Negative quality not allowed");return h===0?"1":new t.default(h).dividedBy(s).toString(r)}Ut.qualityToDecimal=l;function d(h){if(!Number.isInteger(h))throw new n.ValidationError("Error decoding, transfer Rate must be an integer");if(h===0)return"0";const p=new t.default(h).minus(s).dividedBy(s);if(p.isLessThan(0))throw new n.ValidationError("Error decoding, negative transfer rate");return p.toString(r)}Ut.transferRateToDecimal=d;function f(h){return c(o(h))}return Ut.percentToQuality=f,Ut}var sl={},bw;function i_(){if(bw)return sl;bw=1,Object.defineProperty(sl,"__esModule",{value:!0});const e=fr(),t=ao(),n=Rd();function r(s,i,o){const a=(0,e.encodeForSigningClaim)({channel:s,amount:(0,n.xrpToDrops)(i)});return(0,t.sign)(a,o)}return sl.default=r,sl}var Is={},vw;function s_(){if(vw)return Is;vw=1,Object.defineProperty(Is,"__esModule",{value:!0}),Is.convertStringToHex=Is.convertHexToString=void 0;const e=Ve();function t(r){return(0,e.stringToHex)(r)}Is.convertStringToHex=t;function n(r,s="utf8"){return(0,e.hexToString)(r,s)}return Is.convertHexToString=n,Is}var tr={},Ew;function o_(){if(Ew)return tr;Ew=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.isoTimeToRippleTime=tr.rippleTimeToISOTime=tr.unixTimeToRippleTime=tr.rippleTimeToUnixTime=void 0;const e=946684800;function t(i){return(i+e)*1e3}tr.rippleTimeToUnixTime=t;function n(i){return Math.round(i/1e3)-e}tr.unixTimeToRippleTime=n;function r(i){return new Date(t(i)).toISOString()}tr.rippleTimeToISOTime=r;function s(i){const o=typeof i=="string"?new Date(i):i;return n(o.getTime())}return tr.isoTimeToRippleTime=s,tr}var ol={},Aw;function a_(){if(Aw)return ol;Aw=1,Object.defineProperty(ol,"__esModule",{value:!0});const e=fr(),t=ao(),n=Rd();function r(s,i,o,a){const u=(0,e.encodeForSigningClaim)({channel:s,amount:(0,n.xrpToDrops)(i)});return(0,t.verify)(u,o,a)}return ol.default=r,ol}var Sw;function Qg(){return Sw||(Sw=1,(function(e){var t=Ha&&Ha.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(e,"__esModule",{value:!0}),e.getXChainClaimID=e.parseNFTokenID=e.getNFTokenID=e.encodeForSigningClaim=e.encodeForSigning=e.encodeForMultiSigning=e.decode=e.encode=e.decodeXAddress=e.encodeXAddress=e.decodeAccountPublic=e.encodeAccountPublic=e.decodeNodePublic=e.encodeNodePublic=e.decodeAccountID=e.encodeAccountID=e.decodeSeed=e.encodeSeed=e.isValidClassicAddress=e.isValidXAddress=e.xAddressToClassicAddress=e.classicAddressToXAddress=e.convertHexToString=e.convertStringToHex=e.verifyPaymentChannelClaim=e.verifyKeypairSignature=e.signPaymentChannelClaim=e.deriveXAddress=e.deriveAddress=e.deriveKeypair=e.hashes=e.isValidAddress=e.isValidSecret=e.qualityToDecimal=e.transferRateToDecimal=e.decimalToTransferRate=e.percentToTransferRate=e.decimalToQuality=e.percentToQuality=e.unixTimeToRippleTime=e.rippleTimeToUnixTime=e.isoTimeToRippleTime=e.rippleTimeToISOTime=e.hasNextPage=e.xrpToDrops=e.dropsToXrp=e.getBalanceChanges=void 0;const n=Rn();Object.defineProperty(e,"classicAddressToXAddress",{enumerable:!0,get:function(){return n.classicAddressToXAddress}}),Object.defineProperty(e,"decodeAccountID",{enumerable:!0,get:function(){return n.decodeAccountID}}),Object.defineProperty(e,"decodeAccountPublic",{enumerable:!0,get:function(){return n.decodeAccountPublic}}),Object.defineProperty(e,"decodeNodePublic",{enumerable:!0,get:function(){return n.decodeNodePublic}}),Object.defineProperty(e,"decodeSeed",{enumerable:!0,get:function(){return n.decodeSeed}}),Object.defineProperty(e,"decodeXAddress",{enumerable:!0,get:function(){return n.decodeXAddress}}),Object.defineProperty(e,"encodeAccountID",{enumerable:!0,get:function(){return n.encodeAccountID}}),Object.defineProperty(e,"encodeAccountPublic",{enumerable:!0,get:function(){return n.encodeAccountPublic}}),Object.defineProperty(e,"encodeNodePublic",{enumerable:!0,get:function(){return n.encodeNodePublic}}),Object.defineProperty(e,"encodeSeed",{enumerable:!0,get:function(){return n.encodeSeed}}),Object.defineProperty(e,"encodeXAddress",{enumerable:!0,get:function(){return n.encodeXAddress}}),Object.defineProperty(e,"isValidClassicAddress",{enumerable:!0,get:function(){return n.isValidClassicAddress}}),Object.defineProperty(e,"isValidXAddress",{enumerable:!0,get:function(){return n.isValidXAddress}}),Object.defineProperty(e,"xAddressToClassicAddress",{enumerable:!0,get:function(){return n.xAddressToClassicAddress}});const r=fr(),s=ao();Object.defineProperty(e,"verifyKeypairSignature",{enumerable:!0,get:function(){return s.verify}});const i=WI();Object.defineProperty(e,"deriveKeypair",{enumerable:!0,get:function(){return i.deriveKeypair}}),Object.defineProperty(e,"deriveAddress",{enumerable:!0,get:function(){return i.deriveAddress}}),Object.defineProperty(e,"deriveXAddress",{enumerable:!0,get:function(){return i.deriveXAddress}});const o=t(XI());e.getBalanceChanges=o.default;const a=t(QI());e.getNFTokenID=a.default;const u=t($I());e.getXChainClaimID=u.default;const c=t_(),l=t(n_());e.parseNFTokenID=l.default;const d=r_();Object.defineProperty(e,"percentToTransferRate",{enumerable:!0,get:function(){return d.percentToTransferRate}}),Object.defineProperty(e,"decimalToTransferRate",{enumerable:!0,get:function(){return d.decimalToTransferRate}}),Object.defineProperty(e,"transferRateToDecimal",{enumerable:!0,get:function(){return d.transferRateToDecimal}}),Object.defineProperty(e,"percentToQuality",{enumerable:!0,get:function(){return d.percentToQuality}}),Object.defineProperty(e,"decimalToQuality",{enumerable:!0,get:function(){return d.decimalToQuality}}),Object.defineProperty(e,"qualityToDecimal",{enumerable:!0,get:function(){return d.qualityToDecimal}});const f=t(i_());e.signPaymentChannelClaim=f.default;const h=s_();Object.defineProperty(e,"convertHexToString",{enumerable:!0,get:function(){return h.convertHexToString}}),Object.defineProperty(e,"convertStringToHex",{enumerable:!0,get:function(){return h.convertStringToHex}});const p=o_();Object.defineProperty(e,"rippleTimeToISOTime",{enumerable:!0,get:function(){return p.rippleTimeToISOTime}}),Object.defineProperty(e,"isoTimeToRippleTime",{enumerable:!0,get:function(){return p.isoTimeToRippleTime}}),Object.defineProperty(e,"rippleTimeToUnixTime",{enumerable:!0,get:function(){return p.rippleTimeToUnixTime}}),Object.defineProperty(e,"unixTimeToRippleTime",{enumerable:!0,get:function(){return p.unixTimeToRippleTime}});const g=t(a_());e.verifyPaymentChannelClaim=g.default;const y=Rd();Object.defineProperty(e,"xrpToDrops",{enumerable:!0,get:function(){return y.xrpToDrops}}),Object.defineProperty(e,"dropsToXrp",{enumerable:!0,get:function(){return y.dropsToXrp}});function b(j){try{return(0,i.deriveKeypair)(j),!0}catch{return!1}}e.isValidSecret=b;function A(j){return(0,r.encode)(j)}e.encode=A;function E(j){return(0,r.encodeForSigning)(j)}e.encodeForSigning=E;function _(j){return(0,r.encodeForSigningClaim)(j)}e.encodeForSigningClaim=_;function S(j,V){return(0,r.encodeForMultisigning)(j,V)}e.encodeForMultiSigning=S;function I(j){return(0,r.decode)(j)}e.decode=I;function D(j){return(0,n.isValidXAddress)(j)||(0,n.isValidClassicAddress)(j)}e.isValidAddress=D;function L(j){return!!j.result.marker}e.hasNextPage=L;const x={hashSignedTx:c.hashSignedTx,hashTx:c.hashTx,hashAccountRoot:c.hashAccountRoot,hashSignerListId:c.hashSignerListId,hashOfferId:c.hashOfferId,hashTrustline:c.hashTrustline,hashTxTree:c.hashTxTree,hashStateTree:c.hashStateTree,hashLedger:c.hashLedger,hashLedgerHeader:c.hashLedgerHeader,hashEscrow:c.hashEscrow,hashPaymentChannel:c.hashPaymentChannel};e.hashes=x})(Ha)),Ha}var yi={},Tw;function c_(){if(Tw)return yi;Tw=1;var e=yi&&yi.__awaiter||function(a,u,c,l){function d(f){return f instanceof c?f:new c(function(h){h(f)})}return new(c||(c=Promise))(function(f,h){function p(b){try{y(l.next(b))}catch(A){h(A)}}function g(b){try{y(l.throw(b))}catch(A){h(A)}}function y(b){b.done?f(b.value):d(b.value).then(p,g)}y((l=l.apply(a,u||[])).next())})},t=yi&&yi.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(yi,"__esModule",{value:!0});const n=t(Nn()),r=Oe(),s=6,i=10;function o(a,u){var c;return e(this,void 0,void 0,function*(){const l=u??a.feeCushion,d=(yield a.request({command:"server_info"})).result.info,f=(c=d.validated_ledger)===null||c===void 0?void 0:c.base_fee_xrp;if(f==null)throw new r.XrplError("getFeeXrp: Could not get base_fee_xrp from server_info");const h=new n.default(f);d.load_factor==null&&(d.load_factor=1);let p=h.times(d.load_factor).times(l);return p=n.default.min(p,a.maxFeeXRP),new n.default(p.toFixed(s)).toString(i)})}return yi.default=o,yi}var Mw;function u_(){if(Mw)return St;Mw=1;var e=St&&St.__awaiter||function(D,L,x,j){function V(Y){return Y instanceof x?Y:new x(function(q){q(Y)})}return new(x||(x=Promise))(function(Y,q){function R(m){try{T(j.next(m))}catch(w){q(w)}}function v(m){try{T(j.throw(m))}catch(w){q(w)}}function T(m){m.done?Y(m.value):V(m.value).then(R,v)}T((j=j.apply(D,L||[])).next())})},t=St&&St.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(St,"__esModule",{value:!0}),St.checkAccountDeleteBlockers=St.setLatestValidatedLedgerSequence=St.calculateFeePerTransactionType=St.setNextValidSequenceNumber=St.setValidAddresses=St.txNeedsNetworkID=void 0;const n=t(Nn()),r=Rn(),s=Oe(),i=Qg(),o=t(c_()),a=20,u=1024,c="1.11.0",l=21338;function d(D,L){if(D===L)return!0;const x=D.split("."),j=L.split("."),V=parseInt(x[0],10),Y=parseInt(x[1],10),q=parseInt(j[0],10),R=parseInt(j[1],10);if(V!==q)return V<q;if(Y!==R)return Y<R;const v=x[2].split("-"),T=j[2].split("-"),m=parseInt(v[0],10),w=parseInt(T[0],10);return m!==w?m<w:v.length!==T.length?v.length>T.length:v.length===2?v[1][0].startsWith(T[1][0])?v[1].startsWith("b")?parseInt(v[1].slice(1),10)<parseInt(T[1].slice(1),10):parseInt(v[1].slice(2),10)<parseInt(T[1].slice(2),10):v[1]<T[1]:!1}function f(D){return!!(D.networkID!==void 0&&D.networkID>u&&(D.buildVersion&&d(c,D.buildVersion)||D.networkID===l))}St.txNeedsNetworkID=f;function h(D){p(D,"Account","SourceTag"),D.Destination!=null&&p(D,"Destination","DestinationTag"),y(D,"Authorize"),y(D,"Unauthorize"),y(D,"Owner"),y(D,"RegularKey")}St.setValidAddresses=h;function p(D,L,x){const{classicAccount:j,tag:V}=g(D[L]);if(D[L]=j,V!=null&&V!==!1){if(D[x]&&D[x]!==V)throw new s.ValidationError(`The ${x}, if present, must match the tag of the ${L} X-address`);D[x]=V}}function g(D,L){if((0,r.isValidXAddress)(D)){const x=(0,r.xAddressToClassicAddress)(D);return{classicAccount:x.classicAddress,tag:x.tag}}return{classicAccount:D,tag:L}}function y(D,L){const x=D[L];if(typeof x=="string"){const{classicAccount:j}=g(x);D[L]=j}}function b(D,L){return e(this,void 0,void 0,function*(){const x={command:"account_info",account:L.Account,ledger_index:"current"},j=yield D.request(x);L.Sequence=j.result.account_data.Sequence})}St.setNextValidSequenceNumber=b;function A(D){var L;return e(this,void 0,void 0,function*(){const j=(L=(yield D.request({command:"server_state"})).result.state.validated_ledger)===null||L===void 0?void 0:L.reserve_inc;return j==null?Promise.reject(new Error("Could not fetch Owner Reserve.")):new n.default(j)})}function E(D,L,x=0){return e(this,void 0,void 0,function*(){const j=yield(0,o.default)(D),V=(0,i.xrpToDrops)(j);let Y=new n.default(V);if(L.TransactionType==="EscrowFinish"&&L.Fulfillment!=null){const v=Math.ceil(L.Fulfillment.length/2);Y=new n.default(_(V,33+v/16)).dp(0,n.default.ROUND_CEIL)}(L.TransactionType==="AccountDelete"||L.TransactionType==="AMMCreate")&&(Y=yield A(D)),x>0&&(Y=n.default.sum(Y,_(V,1+x)));const q=(0,i.xrpToDrops)(D.maxFeeXRP),R=L.TransactionType==="AccountDelete"?Y:n.default.min(Y,q);L.Fee=R.dp(0,n.default.ROUND_CEIL).toString(10)})}St.calculateFeePerTransactionType=E;function _(D,L){return new n.default(D).times(L).toString()}function S(D,L){return e(this,void 0,void 0,function*(){const x=yield D.getLedgerIndex();L.LastLedgerSequence=x+a})}St.setLatestValidatedLedgerSequence=S;function I(D,L){return e(this,void 0,void 0,function*(){const x={command:"account_objects",account:L.Account,ledger_index:"validated",deletion_blockers_only:!0},j=yield D.request(x);return new Promise((V,Y)=>{j.result.account_objects.length>0&&Y(new s.XrplError(`Account ${L.Account} cannot be deleted; there are Escrows, PayChannels, RippleStates, or Checks associated with the account.`,j.result.account_objects)),V()})})}return St.checkAccountDeleteBlockers=I,St}var Ga={},Nw;function l_(){if(Nw)return Ga;Nw=1,Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.formatBalances=void 0;function e(t){return t.map(n=>({value:n.balance,currency:n.currency,issuer:n.account}))}return Ga.formatBalances=e,Ga}var ut={},Ka={},Iw;function MS(){if(Iw)return Ka;Iw=1,Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.OfferFlags=void 0;var e;return(function(t){t[t.lsfPassive=65536]="lsfPassive",t[t.lsfSell=131072]="lsfSell"})(e||(Ka.OfferFlags=e={})),Ka}var _w;function d_(){if(_w)return ut;_w=1;var e=ut&&ut.__awaiter||function(y,b,A,E){function _(S){return S instanceof A?S:new A(function(I){I(S)})}return new(A||(A=Promise))(function(S,I){function D(j){try{x(E.next(j))}catch(V){I(V)}}function L(j){try{x(E.throw(j))}catch(V){I(V)}}function x(j){j.done?S(j.value):_(j.value).then(D,L)}x((E=E.apply(y,b||[])).next())})},t=ut&&ut.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(ut,"__esModule",{value:!0}),ut.sortAndLimitOffers=ut.separateBuySellOrders=ut.combineOrders=ut.extractOffers=ut.reverseRequest=ut.requestAllOffers=ut.createBookOffersRequest=ut.validateOrderbookOptions=void 0;const n=t(Nn()),r=Oe(),s=MS(),i=20;function o(y){return y.sort((b,A)=>{var E,_;const S=(E=b.quality)!==null&&E!==void 0?E:0,I=(_=A.quality)!==null&&_!==void 0?_:0;return new n.default(S).comparedTo(I)})}const a=new Set(["limit","ledger_index","ledger_hash","taker"]);function u(y){for(const b of Object.keys(y))if(!a.has(b))throw new r.ValidationError(`Unexpected option: ${b}`,y);if(y.limit&&typeof y.limit!="number")throw new r.ValidationError("limit must be a number",y.limit);if(y.ledger_index&&!(typeof y.ledger_index=="number"||typeof y.ledger_index=="string"&&["validated","closed","current"].includes(y.ledger_index)))throw new r.ValidationError('ledger_index must be a number or a string of "validated", "closed", or "current"',y.ledger_index);if(y.ledger_hash!==void 0&&y.ledger_hash!==null&&typeof y.ledger_hash!="string")throw new r.ValidationError("ledger_hash must be a string",y.ledger_hash);if(y.taker!==void 0&&typeof y.taker!="string")throw new r.ValidationError("taker must be a string",y.taker)}ut.validateOrderbookOptions=u;function c(y,b,A){var E,_;return{command:"book_offers",taker_pays:y,taker_gets:b,ledger_index:(E=A.ledger_index)!==null&&E!==void 0?E:"validated",ledger_hash:A.ledger_hash===null?void 0:A.ledger_hash,limit:(_=A.limit)!==null&&_!==void 0?_:i,taker:A.taker?A.taker:void 0}}ut.createBookOffersRequest=c;function l(y,b){return e(this,void 0,void 0,function*(){return(yield y.requestAll(b)).map(E=>E.result.offers)})}ut.requestAllOffers=l;function d(y){return Object.assign(Object.assign({},y),{taker_pays:y.taker_gets,taker_gets:y.taker_pays})}ut.reverseRequest=d;function f(y){return y.flatMap(b=>b)}ut.extractOffers=f;function h(y,b){return[...y,...b]}ut.combineOrders=h;function p(y){const b=[],A=[];return y.forEach(E=>{(E.Flags&s.OfferFlags.lsfSell)===0?b.push(E):A.push(E)}),{buy:b,sell:A}}ut.separateBuySellOrders=p;function g(y,b){return o(y).slice(0,b)}return ut.sortAndLimitOffers=g,ut}var _s={},rf={},Ow;function h_(){return Ow||(Ow=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.HDKey=e.HARDENED_OFFSET=void 0;const t=Zi(),n=Kg(),r=qg(),s=yS(),i=oa(),o=Mn(),a=Mg(),u=n.secp256k1.ProjectivePoint,c=(0,a.createBase58check)(i.sha256);function l(A){(0,o.abytes)(A);const E=A.length===0?"0":(0,o.bytesToHex)(A);return BigInt("0x"+E)}function d(A){if(typeof A!="bigint")throw new Error("bigint expected");return(0,o.hexToBytes)(A.toString(16).padStart(64,"0"))}const f=(0,o.utf8ToBytes)("Bitcoin seed"),h={private:76066276,public:76067358};e.HARDENED_OFFSET=2147483648;const p=A=>(0,s.ripemd160)((0,i.sha256)(A)),g=A=>(0,o.createView)(A).getUint32(0,!1),y=A=>{if(!Number.isSafeInteger(A)||A<0||A>2**32-1)throw new Error("invalid number, should be from 0 to 2**32-1, got "+A);const E=new Uint8Array(4);return(0,o.createView)(E).setUint32(0,A,!1),E};class b{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return g(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const E=this.privateKey;if(!E)throw new Error("No private key");return c.encode(this.serialize(this.versions.private,(0,o.concatBytes)(new Uint8Array([0]),E)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return c.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(E,_=h){if((0,o.abytes)(E),8*E.length<128||8*E.length>512)throw new Error("HDKey: seed length must be between 128 and 512 bits; 256 bits is advised, got "+E.length);const S=(0,r.hmac)(i.sha512,f,E);return new b({versions:_,chainCode:S.slice(32),privateKey:S.slice(0,32)})}static fromExtendedKey(E,_=h){const S=c.decode(E),I=(0,o.createView)(S),D=I.getUint32(0,!1),L={versions:_,depth:S[4],parentFingerprint:I.getUint32(5,!1),index:I.getUint32(9,!1),chainCode:S.slice(13,45)},x=S.slice(45),j=x[0]===0;if(D!==_[j?"private":"public"])throw new Error("Version mismatch");return j?new b({...L,privateKey:x.slice(1)}):new b({...L,publicKey:x})}static fromJSON(E){return b.fromExtendedKey(E.xpriv)}constructor(E){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!E||typeof E!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=E.versions||h,this.depth=E.depth||0,this.chainCode=E.chainCode||null,this.index=E.index||0,this.parentFingerprint=E.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(E.publicKey&&E.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(E.privateKey){if(!n.secp256k1.utils.isValidPrivateKey(E.privateKey))throw new Error("Invalid private key");this.privKey=typeof E.privateKey=="bigint"?E.privateKey:l(E.privateKey),this.privKeyBytes=d(this.privKey),this.pubKey=n.secp256k1.getPublicKey(E.privateKey,!0)}else if(E.publicKey)this.pubKey=u.fromHex(E.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=p(this.pubKey)}derive(E){if(!/^[mM]'?/.test(E))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(E))return this;const _=E.replace(/^[mM]'?\//,"").split("/");let S=this;for(const I of _){const D=/^(\d+)('?)$/.exec(I),L=D&&D[1];if(!D||D.length!==3||typeof L!="string")throw new Error("invalid child index: "+I);let x=+L;if(!Number.isSafeInteger(x)||x>=e.HARDENED_OFFSET)throw new Error("Invalid index");D[2]==="'"&&(x+=e.HARDENED_OFFSET),S=S.deriveChild(x)}return S}deriveChild(E){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let _=y(E);if(E>=e.HARDENED_OFFSET){const x=this.privateKey;if(!x)throw new Error("Could not derive hardened child key");_=(0,o.concatBytes)(new Uint8Array([0]),x,_)}else _=(0,o.concatBytes)(this.pubKey,_);const S=(0,r.hmac)(i.sha512,this.chainCode,_),I=l(S.slice(0,32)),D=S.slice(32);if(!n.secp256k1.utils.isValidPrivateKey(I))throw new Error("Tweak bigger than curve order");const L={versions:this.versions,chainCode:D,depth:this.depth+1,parentFingerprint:this.fingerprint,index:E};try{if(this.privateKey){const x=(0,t.mod)(this.privKey+I,n.secp256k1.CURVE.n);if(!n.secp256k1.utils.isValidPrivateKey(x))throw new Error("The tweak was out of range or the resulted private key is invalid");L.privateKey=x}else{const x=u.fromHex(this.pubKey).add(u.fromPrivateKey(I));if(x.equals(u.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");L.publicKey=x.toRawBytes(!0)}return new b(L)}catch{return this.deriveChild(E+1)}}sign(E){if(!this.privateKey)throw new Error("No privateKey set!");return(0,o.abytes)(E,32),n.secp256k1.sign(E,this.privKey).toCompactRawBytes()}verify(E,_){if((0,o.abytes)(E,32),(0,o.abytes)(_,64),!this.publicKey)throw new Error("No publicKey set!");let S;try{S=n.secp256k1.Signature.fromCompact(_)}catch{return!1}return n.secp256k1.verify(S,E,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(E,_){if(!this.chainCode)throw new Error("No chainCode set");return(0,o.abytes)(_,33),(0,o.concatBytes)(y(E),new Uint8Array([this.depth]),y(this.parentFingerprint),y(this.index),this.chainCode,_)}}e.HDKey=b})(rf)),rf}var qr={},Ya={},Dw;function f_(){if(Dw)return Ya;Dw=1,Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.pbkdf2=s,Ya.pbkdf2Async=i;const e=qg(),t=Mn();function n(o,a,u,c){(0,t.ahash)(o);const l=(0,t.checkOpts)({dkLen:32,asyncTick:10},c),{c:d,dkLen:f,asyncTick:h}=l;if((0,t.anumber)(d),(0,t.anumber)(f),(0,t.anumber)(h),d<1)throw new Error("iterations (c) should be >= 1");const p=(0,t.kdfInputToBytes)(a),g=(0,t.kdfInputToBytes)(u),y=new Uint8Array(f),b=e.hmac.create(o,p),A=b._cloneInto().update(g);return{c:d,dkLen:f,asyncTick:h,DK:y,PRF:b,PRFSalt:A}}function r(o,a,u,c,l){return o.destroy(),a.destroy(),c&&c.destroy(),(0,t.clean)(l),u}function s(o,a,u,c){const{c:l,dkLen:d,DK:f,PRF:h,PRFSalt:p}=n(o,a,u,c);let g;const y=new Uint8Array(4),b=(0,t.createView)(y),A=new Uint8Array(h.outputLen);for(let E=1,_=0;_<d;E++,_+=h.outputLen){const S=f.subarray(_,_+h.outputLen);b.setInt32(0,E,!1),(g=p._cloneInto(g)).update(y).digestInto(A),S.set(A.subarray(0,S.length));for(let I=1;I<l;I++){h._cloneInto(g).update(A).digestInto(A);for(let D=0;D<S.length;D++)S[D]^=A[D]}}return r(h,p,f,g,A)}async function i(o,a,u,c){const{c:l,dkLen:d,asyncTick:f,DK:h,PRF:p,PRFSalt:g}=n(o,a,u,c);let y;const b=new Uint8Array(4),A=(0,t.createView)(b),E=new Uint8Array(p.outputLen);for(let _=1,S=0;S<d;_++,S+=p.outputLen){const I=h.subarray(S,S+p.outputLen);A.setInt32(0,_,!1),(y=g._cloneInto(y)).update(b).digestInto(E),I.set(E.subarray(0,I.length)),await(0,t.asyncLoop)(l-1,f,()=>{p._cloneInto(y).update(E).digestInto(E);for(let D=0;D<I.length;D++)I[D]^=E[D]})}return r(p,g,h,y,E)}return Ya}var xw;function p_(){if(xw)return qr;xw=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.generateMnemonic=u,qr.mnemonicToEntropy=d,qr.entropyToMnemonic=f,qr.validateMnemonic=h,qr.mnemonicToSeed=g,qr.mnemonicToSeedSync=y;const e=f_(),t=oa(),n=Mn(),r=Mg(),s=b=>b[0]==="";function i(b){if(typeof b!="string")throw new TypeError("invalid mnemonic type: "+typeof b);return b.normalize("NFKD")}function o(b){const A=i(b),E=A.split(" ");if(![12,15,18,21,24].includes(E.length))throw new Error("Invalid mnemonic");return{nfkd:A,words:E}}function a(b){(0,n.abytes)(b,16,20,24,28,32)}function u(b,A=128){if((0,n.anumber)(A),A%32!==0||A>256)throw new TypeError("Invalid entropy");return f((0,n.randomBytes)(A/8),b)}const c=b=>{const A=8-b.length/4;return new Uint8Array([(0,t.sha256)(b)[0]>>A<<A])};function l(b){if(!Array.isArray(b)||b.length!==2048||typeof b[0]!="string")throw new Error("Wordlist: expected array of 2048 strings");return b.forEach(A=>{if(typeof A!="string")throw new Error("wordlist: non-string element: "+A)}),r.utils.chain(r.utils.checksum(1,c),r.utils.radix2(11,!0),r.utils.alphabet(b))}function d(b,A){const{words:E}=o(b),_=l(A).decode(E);return a(_),_}function f(b,A){return a(b),l(A).encode(b).join(s(A)?"":" ")}function h(b,A){try{d(b,A)}catch{return!1}return!0}const p=b=>i("mnemonic"+b);function g(b,A=""){return(0,e.pbkdf2Async)(t.sha512,o(b).nfkd,p(A),{c:2048,dkLen:64})}function y(b,A=""){return(0,e.pbkdf2)(t.sha512,o(b).nfkd,p(A),{c:2048,dkLen:64})}return qr}var Wa={},Lw;function g_(){return Lw||(Lw=1,Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.wordlist=void 0,Wa.wordlist=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split(`
`)),Wa}var al={},Cw;function $g(){if(Cw)return al;Cw=1,Object.defineProperty(al,"__esModule",{value:!0});var e;return(function(t){t.ed25519="ed25519",t.secp256k1="ecdsa-secp256k1"})(e||(e={})),al.default=e,al}var Os={},Xa={},Qa={},jw;function y_(){if(jw)return Qa;jw=1,Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.validateAccountDelete=void 0;const e=Ce();function t(n){(0,e.validateBaseTransaction)(n),(0,e.validateRequiredField)(n,"Destination",e.isAccount),(0,e.validateOptionalField)(n,"DestinationTag",e.isNumber)}return Qa.validateAccountDelete=t,Qa}var $a={},Pw;function m_(){if(Pw)return $a;Pw=1,Object.defineProperty($a,"__esModule",{value:!0}),$a.validateAMMBid=void 0;const e=Oe(),t=Ce(),n=4;function r(i){if((0,t.validateBaseTransaction)(i),i.Asset==null)throw new e.ValidationError("AMMBid: missing field Asset");if(!(0,t.isCurrency)(i.Asset))throw new e.ValidationError("AMMBid: Asset must be a Currency");if(i.Asset2==null)throw new e.ValidationError("AMMBid: missing field Asset2");if(!(0,t.isCurrency)(i.Asset2))throw new e.ValidationError("AMMBid: Asset2 must be a Currency");if(i.BidMin!=null&&!(0,t.isAmount)(i.BidMin))throw new e.ValidationError("AMMBid: BidMin must be an Amount");if(i.BidMax!=null&&!(0,t.isAmount)(i.BidMax))throw new e.ValidationError("AMMBid: BidMax must be an Amount");if(i.AuthAccounts!=null){if(!Array.isArray(i.AuthAccounts))throw new e.ValidationError("AMMBid: AuthAccounts must be an AuthAccount array");if(i.AuthAccounts.length>n)throw new e.ValidationError(`AMMBid: AuthAccounts length must not be greater than ${n}`);s(i.Account,i.AuthAccounts)}}$a.validateAMMBid=r;function s(i,o){for(const a of o){if(a.AuthAccount==null||typeof a.AuthAccount!="object")throw new e.ValidationError("AMMBid: invalid AuthAccounts");if(a.AuthAccount.Account==null)throw new e.ValidationError("AMMBid: invalid AuthAccounts");if(typeof a.AuthAccount.Account!="string")throw new e.ValidationError("AMMBid: invalid AuthAccounts");if(a.AuthAccount.Account===i)throw new e.ValidationError("AMMBid: AuthAccounts must not include sender's address")}return!0}return $a}var sf={},kw;function NS(){return kw||(kw=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateAMMCreate=e.AMM_MAX_TRADING_FEE=void 0;const t=Oe(),n=Ce();e.AMM_MAX_TRADING_FEE=1e3;function r(s){if((0,n.validateBaseTransaction)(s),s.Amount==null)throw new t.ValidationError("AMMCreate: missing field Amount");if(!(0,n.isAmount)(s.Amount))throw new t.ValidationError("AMMCreate: Amount must be an Amount");if(s.Amount2==null)throw new t.ValidationError("AMMCreate: missing field Amount2");if(!(0,n.isAmount)(s.Amount2))throw new t.ValidationError("AMMCreate: Amount2 must be an Amount");if(s.TradingFee==null)throw new t.ValidationError("AMMCreate: missing field TradingFee");if(typeof s.TradingFee!="number")throw new t.ValidationError("AMMCreate: TradingFee must be a number");if(s.TradingFee<0||s.TradingFee>e.AMM_MAX_TRADING_FEE)throw new t.ValidationError(`AMMCreate: TradingFee must be between 0 and ${e.AMM_MAX_TRADING_FEE}`)}e.validateAMMCreate=r})(sf)),sf}var Za={},Rw;function w_(){if(Rw)return Za;Rw=1,Object.defineProperty(Za,"__esModule",{value:!0}),Za.validateAMMDelete=void 0;const e=Oe(),t=Ce();function n(r){if((0,t.validateBaseTransaction)(r),r.Asset==null)throw new e.ValidationError("AMMDelete: missing field Asset");if(!(0,t.isCurrency)(r.Asset))throw new e.ValidationError("AMMDelete: Asset must be a Currency");if(r.Asset2==null)throw new e.ValidationError("AMMDelete: missing field Asset2");if(!(0,t.isCurrency)(r.Asset2))throw new e.ValidationError("AMMDelete: Asset2 must be a Currency")}return Za.validateAMMDelete=n,Za}var Ja={},Bw;function b_(){if(Bw)return Ja;Bw=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.validateAMMVote=void 0;const e=Oe(),t=NS(),n=Ce();function r(s){if((0,n.validateBaseTransaction)(s),s.Asset==null)throw new e.ValidationError("AMMVote: missing field Asset");if(!(0,n.isCurrency)(s.Asset))throw new e.ValidationError("AMMVote: Asset must be a Currency");if(s.Asset2==null)throw new e.ValidationError("AMMVote: missing field Asset2");if(!(0,n.isCurrency)(s.Asset2))throw new e.ValidationError("AMMVote: Asset2 must be a Currency");if(s.TradingFee==null)throw new e.ValidationError("AMMVote: missing field TradingFee");if(typeof s.TradingFee!="number")throw new e.ValidationError("AMMVote: TradingFee must be a number");if(s.TradingFee<0||s.TradingFee>t.AMM_MAX_TRADING_FEE)throw new e.ValidationError(`AMMVote: TradingFee must be between 0 and ${t.AMM_MAX_TRADING_FEE}`)}return Ja.validateAMMVote=r,Ja}var ec={},Uw;function v_(){if(Uw)return ec;Uw=1,Object.defineProperty(ec,"__esModule",{value:!0}),ec.validateCheckCancel=void 0;const e=Oe(),t=Ce();function n(r){if((0,t.validateBaseTransaction)(r),r.CheckID!==void 0&&typeof r.CheckID!="string")throw new e.ValidationError("CheckCancel: invalid CheckID")}return ec.validateCheckCancel=n,ec}var tc={},zw;function E_(){if(zw)return tc;zw=1,Object.defineProperty(tc,"__esModule",{value:!0}),tc.validateCheckCash=void 0;const e=Oe(),t=Ce();function n(r){if((0,t.validateBaseTransaction)(r),r.Amount==null&&r.DeliverMin==null)throw new e.ValidationError("CheckCash: must have either Amount or DeliverMin");if(r.Amount!=null&&r.DeliverMin!=null)throw new e.ValidationError("CheckCash: cannot have both Amount and DeliverMin");if(r.Amount!=null&&r.Amount!==void 0&&!(0,t.isAmount)(r.Amount))throw new e.ValidationError("CheckCash: invalid Amount");if(r.DeliverMin!=null&&r.DeliverMin!==void 0&&!(0,t.isAmount)(r.DeliverMin))throw new e.ValidationError("CheckCash: invalid DeliverMin");if(r.CheckID!==void 0&&typeof r.CheckID!="string")throw new e.ValidationError("CheckCash: invalid CheckID")}return tc.validateCheckCash=n,tc}var nc={},Fw;function A_(){if(Fw)return nc;Fw=1,Object.defineProperty(nc,"__esModule",{value:!0}),nc.validateCheckCreate=void 0;const e=Oe(),t=Ce();function n(r){if((0,t.validateBaseTransaction)(r),r.SendMax===void 0)throw new e.ValidationError("CheckCreate: missing field SendMax");if((0,t.validateRequiredField)(r,"Destination",t.isAccount),(0,t.validateOptionalField)(r,"DestinationTag",t.isNumber),typeof r.SendMax!="string"&&!(0,t.isIssuedCurrency)(r.SendMax))throw new e.ValidationError("CheckCreate: invalid SendMax");if(r.Expiration!==void 0&&typeof r.Expiration!="number")throw new e.ValidationError("CheckCreate: invalid Expiration");if(r.InvoiceID!==void 0&&typeof r.InvoiceID!="string")throw new e.ValidationError("CheckCreate: invalid InvoiceID")}return nc.validateCheckCreate=n,nc}var rc={},Hw;function S_(){if(Hw)return rc;Hw=1,Object.defineProperty(rc,"__esModule",{value:!0}),rc.validateClawback=void 0;const e=Oe(),t=Ce();function n(r){if((0,t.validateBaseTransaction)(r),r.Amount==null)throw new e.ValidationError("Clawback: missing field Amount");if(!(0,t.isIssuedCurrency)(r.Amount))throw new e.ValidationError("Clawback: invalid Amount");if((0,t.isIssuedCurrency)(r.Amount)&&r.Account===r.Amount.issuer)throw new e.ValidationError("Clawback: invalid holder Account")}return rc.validateClawback=n,rc}var ic={},Vw;function T_(){if(Vw)return ic;Vw=1,Object.defineProperty(ic,"__esModule",{value:!0}),ic.validateDepositPreauth=void 0;const e=Oe(),t=Ce();function n(r){if((0,t.validateBaseTransaction)(r),r.Authorize!==void 0&&r.Unauthorize!==void 0)throw new e.ValidationError("DepositPreauth: can't provide both Authorize and Unauthorize fields");if(r.Authorize===void 0&&r.Unauthorize===void 0)throw new e.ValidationError("DepositPreauth: must provide either Authorize or Unauthorize field");if(r.Authorize!==void 0){if(typeof r.Authorize!="string")throw new e.ValidationError("DepositPreauth: Authorize must be a string");if(r.Account===r.Authorize)throw new e.ValidationError("DepositPreauth: Account can't preauthorize its own address")}if(r.Unauthorize!==void 0){if(typeof r.Unauthorize!="string")throw new e.ValidationError("DepositPreauth: Unauthorize must be a string");if(r.Account===r.Unauthorize)throw new e.ValidationError("DepositPreauth: Account can't unauthorize its own address")}}return ic.validateDepositPreauth=n,ic}var sc={},qw;function M_(){if(qw)return sc;qw=1,Object.defineProperty(sc,"__esModule",{value:!0}),sc.validateDIDDelete=void 0;const e=Ce();function t(n){(0,e.validateBaseTransaction)(n)}return sc.validateDIDDelete=t,sc}var oc={},Gw;function N_(){if(Gw)return oc;Gw=1,Object.defineProperty(oc,"__esModule",{value:!0}),oc.validateDIDSet=void 0;const e=Oe(),t=Ce();function n(r){if((0,t.validateBaseTransaction)(r),(0,t.validateOptionalField)(r,"Data",t.isString),(0,t.validateOptionalField)(r,"DIDDocument",t.isString),(0,t.validateOptionalField)(r,"URI",t.isString),r.Data===void 0&&r.DIDDocument===void 0&&r.URI===void 0)throw new e.ValidationError("DIDSet: Must have at least one of `Data`, `DIDDocument`, and `URI`")}return oc.validateDIDSet=n,oc}var ac={},Kw;function I_(){if(Kw)return ac;Kw=1,Object.defineProperty(ac,"__esModule",{value:!0}),ac.validateEscrowCancel=void 0;const e=Oe(),t=Ce();function n(r){if((0,t.validateBaseTransaction)(r),(0,t.validateRequiredField)(r,"Owner",t.isAccount),r.OfferSequence==null)throw new e.ValidationError("EscrowCancel: missing OfferSequence");if(typeof r.OfferSequence!="number"&&typeof r.OfferSequence!="string"||Number.isNaN(Number(r.OfferSequence)))throw new e.ValidationError("EscrowCancel: OfferSequence must be a number")}return ac.validateEscrowCancel=n,ac}var cc={},Yw;function __(){if(Yw)return cc;Yw=1,Object.defineProperty(cc,"__esModule",{value:!0}),cc.validateEscrowCreate=void 0;const e=Oe(),t=Ce();function n(r){if((0,t.validateBaseTransaction)(r),r.Amount===void 0)throw new e.ValidationError("EscrowCreate: missing field Amount");if(typeof r.Amount!="string")throw new e.ValidationError("EscrowCreate: Amount must be a string");if((0,t.validateRequiredField)(r,"Destination",t.isAccount),(0,t.validateOptionalField)(r,"DestinationTag",t.isNumber),r.CancelAfter===void 0&&r.FinishAfter===void 0)throw new e.ValidationError("EscrowCreate: Either CancelAfter or FinishAfter must be specified");if(r.FinishAfter===void 0&&r.Condition===void 0)throw new e.ValidationError("EscrowCreate: Either Condition or FinishAfter must be specified");if(r.CancelAfter!==void 0&&typeof r.CancelAfter!="number")throw new e.ValidationError("EscrowCreate: CancelAfter must be a number");if(r.FinishAfter!==void 0&&typeof r.FinishAfter!="number")throw new e.ValidationError("EscrowCreate: FinishAfter must be a number");if(r.Condition!==void 0&&typeof r.Condition!="string")throw new e.ValidationError("EscrowCreate: Condition must be a string")}return cc.validateEscrowCreate=n,cc}var uc={},Ww;function O_(){if(Ww)return uc;Ww=1,Object.defineProperty(uc,"__esModule",{value:!0}),uc.validateEscrowFinish=void 0;const e=Oe(),t=Ce();function n(r){if((0,t.validateBaseTransaction)(r),(0,t.validateRequiredField)(r,"Owner",t.isAccount),r.OfferSequence==null)throw new e.ValidationError("EscrowFinish: missing field OfferSequence");if(typeof r.OfferSequence!="number"&&typeof r.OfferSequence!="string"||Number.isNaN(Number(r.OfferSequence)))throw new e.ValidationError("EscrowFinish: OfferSequence must be a number");if(r.Condition!==void 0&&typeof r.Condition!="string")throw new e.ValidationError("EscrowFinish: Condition must be a string");if(r.Fulfillment!==void 0&&typeof r.Fulfillment!="string")throw new e.ValidationError("EscrowFinish: Fulfillment must be a string")}return uc.validateEscrowFinish=n,uc}var lc={},Xw;function D_(){if(Xw)return lc;Xw=1,Object.defineProperty(lc,"__esModule",{value:!0}),lc.validateNFTokenAcceptOffer=void 0;const e=Oe(),t=Ce();function n(s){const i=(0,t.parseAmountValue)(s.NFTokenBrokerFee);if(Number.isNaN(i))throw new e.ValidationError("NFTokenAcceptOffer: invalid NFTokenBrokerFee");if(i<=0)throw new e.ValidationError("NFTokenAcceptOffer: NFTokenBrokerFee must be greater than 0; omit if there is no fee");if(s.NFTokenSellOffer==null||s.NFTokenBuyOffer==null)throw new e.ValidationError("NFTokenAcceptOffer: both NFTokenSellOffer and NFTokenBuyOffer must be set if using brokered mode")}function r(s){if((0,t.validateBaseTransaction)(s),s.NFTokenBrokerFee!=null&&n(s),s.NFTokenSellOffer==null&&s.NFTokenBuyOffer==null)throw new e.ValidationError("NFTokenAcceptOffer: must set either NFTokenSellOffer or NFTokenBuyOffer")}return lc.validateNFTokenAcceptOffer=r,lc}var dc={},Qw;function x_(){if(Qw)return dc;Qw=1,Object.defineProperty(dc,"__esModule",{value:!0}),dc.validateNFTokenBurn=void 0;const e=Ce();function t(n){(0,e.validateBaseTransaction)(n),(0,e.validateRequiredField)(n,"NFTokenID",e.isString),(0,e.validateOptionalField)(n,"Owner",e.isAccount)}return dc.validateNFTokenBurn=t,dc}var hc={},$w;function L_(){if($w)return hc;$w=1,Object.defineProperty(hc,"__esModule",{value:!0}),hc.validateNFTokenCancelOffer=void 0;const e=Oe(),t=Ce();function n(r){if((0,t.validateBaseTransaction)(r),!Array.isArray(r.NFTokenOffers))throw new e.ValidationError("NFTokenCancelOffer: missing field NFTokenOffers");if(r.NFTokenOffers.length<1)throw new e.ValidationError("NFTokenCancelOffer: empty field NFTokenOffers")}return hc.validateNFTokenCancelOffer=n,hc}var fc={},Zw;function C_(){if(Zw)return fc;Zw=1,Object.defineProperty(fc,"__esModule",{value:!0}),fc.validateOfferCancel=void 0;const e=Oe(),t=Ce();function n(r){if((0,t.validateBaseTransaction)(r),r.OfferSequence===void 0)throw new e.ValidationError("OfferCancel: missing field OfferSequence");if(typeof r.OfferSequence!="number")throw new e.ValidationError("OfferCancel: OfferSequence must be a number")}return fc.validateOfferCancel=n,fc}var pc={},Jw;function j_(){if(Jw)return pc;Jw=1,Object.defineProperty(pc,"__esModule",{value:!0}),pc.validateOracleDelete=void 0;const e=Ce();function t(n){(0,e.validateBaseTransaction)(n),(0,e.validateRequiredField)(n,"OracleDocumentID",e.isNumber)}return pc.validateOracleDelete=t,pc}var gc={},eb;function P_(){if(eb)return gc;eb=1,Object.defineProperty(gc,"__esModule",{value:!0}),gc.validateOracleSet=void 0;const e=Oe(),t=Ce(),n=10,r=10;function s(i){(0,t.validateBaseTransaction)(i),(0,t.validateRequiredField)(i,"OracleDocumentID",t.isNumber),(0,t.validateRequiredField)(i,"LastUpdateTime",t.isNumber),(0,t.validateOptionalField)(i,"Provider",t.isString),(0,t.validateOptionalField)(i,"URI",t.isString),(0,t.validateOptionalField)(i,"AssetClass",t.isString),(0,t.validateRequiredField)(i,"PriceDataSeries",o=>{if(!Array.isArray(o))throw new e.ValidationError("OracleSet: PriceDataSeries must be an array");if(o.length>n)throw new e.ValidationError(`OracleSet: PriceDataSeries must have at most ${n} PriceData objects`);for(const a of o){if(typeof a!="object")throw new e.ValidationError("OracleSet: PriceDataSeries must be an array of objects");if(a.PriceData==null)throw new e.ValidationError("OracleSet: PriceDataSeries must have a `PriceData` object");if(Object.keys(a).length!==1)throw new e.ValidationError("OracleSet: PriceDataSeries must only have a single PriceData object");if(typeof a.PriceData.BaseAsset!="string")throw new e.ValidationError("OracleSet: PriceDataSeries must have a `BaseAsset` string");if(typeof a.PriceData.QuoteAsset!="string")throw new e.ValidationError("OracleSet: PriceDataSeries must have a `QuoteAsset` string");if(a.PriceData.AssetPrice==null!=(a.PriceData.Scale==null))throw new e.ValidationError("OracleSet: PriceDataSeries must have both `AssetPrice` and `Scale` if any are present");if("AssetPrice"in a.PriceData&&!(0,t.isNumber)(a.PriceData.AssetPrice))throw new e.ValidationError("OracleSet: invalid field AssetPrice");if("Scale"in a.PriceData&&!(0,t.isNumber)(a.PriceData.Scale))throw new e.ValidationError("OracleSet: invalid field Scale");if(a.PriceData.Scale<0||a.PriceData.Scale>r)throw new e.ValidationError(`OracleSet: Scale must be in range 0-${r}`)}return!0})}return gc.validateOracleSet=s,gc}var yc={},tb;function k_(){if(tb)return yc;tb=1,Object.defineProperty(yc,"__esModule",{value:!0}),yc.validatePaymentChannelCreate=void 0;const e=Oe(),t=Ce();function n(r){if((0,t.validateBaseTransaction)(r),r.Amount===void 0)throw new e.ValidationError("PaymentChannelCreate: missing Amount");if(typeof r.Amount!="string")throw new e.ValidationError("PaymentChannelCreate: Amount must be a string");if((0,t.validateRequiredField)(r,"Destination",t.isAccount),(0,t.validateOptionalField)(r,"DestinationTag",t.isNumber),r.SettleDelay===void 0)throw new e.ValidationError("PaymentChannelCreate: missing SettleDelay");if(typeof r.SettleDelay!="number")throw new e.ValidationError("PaymentChannelCreate: SettleDelay must be a number");if(r.PublicKey===void 0)throw new e.ValidationError("PaymentChannelCreate: missing PublicKey");if(typeof r.PublicKey!="string")throw new e.ValidationError("PaymentChannelCreate: PublicKey must be a string");if(r.CancelAfter!==void 0&&typeof r.CancelAfter!="number")throw new e.ValidationError("PaymentChannelCreate: CancelAfter must be a number")}return yc.validatePaymentChannelCreate=n,yc}var mc={},nb;function R_(){if(nb)return mc;nb=1,Object.defineProperty(mc,"__esModule",{value:!0}),mc.validatePaymentChannelFund=void 0;const e=Oe(),t=Ce();function n(r){if((0,t.validateBaseTransaction)(r),r.Channel===void 0)throw new e.ValidationError("PaymentChannelFund: missing Channel");if(typeof r.Channel!="string")throw new e.ValidationError("PaymentChannelFund: Channel must be a string");if(r.Amount===void 0)throw new e.ValidationError("PaymentChannelFund: missing Amount");if(typeof r.Amount!="string")throw new e.ValidationError("PaymentChannelFund: Amount must be a string");if(r.Expiration!==void 0&&typeof r.Expiration!="number")throw new e.ValidationError("PaymentChannelFund: Expiration must be a number")}return mc.validatePaymentChannelFund=n,mc}var wc={},rb;function B_(){if(rb)return wc;rb=1,Object.defineProperty(wc,"__esModule",{value:!0}),wc.validateSetRegularKey=void 0;const e=Oe(),t=Ce();function n(r){if((0,t.validateBaseTransaction)(r),r.RegularKey!==void 0&&typeof r.RegularKey!="string")throw new e.ValidationError("SetRegularKey: RegularKey must be a string")}return wc.validateSetRegularKey=n,wc}var bc={},ib;function U_(){if(ib)return bc;ib=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.validateSignerListSet=void 0;const e=Oe(),t=Ce(),n=32,r=/^[0-9A-Fa-f]{64}$/u;function s(i){if((0,t.validateBaseTransaction)(i),i.SignerQuorum===void 0)throw new e.ValidationError("SignerListSet: missing field SignerQuorum");if(typeof i.SignerQuorum!="number")throw new e.ValidationError("SignerListSet: invalid SignerQuorum");if(i.SignerQuorum!==0){if(i.SignerEntries===void 0)throw new e.ValidationError("SignerListSet: missing field SignerEntries");if(!Array.isArray(i.SignerEntries))throw new e.ValidationError("SignerListSet: invalid SignerEntries");if(i.SignerEntries.length===0)throw new e.ValidationError("SignerListSet: need at least 1 member in SignerEntries");if(i.SignerEntries.length>n)throw new e.ValidationError(`SignerListSet: maximum of ${n} members allowed in SignerEntries`);for(const o of i.SignerEntries){const a=o,{WalletLocator:u}=a.SignerEntry;if(u!==void 0&&!r.test(u))throw new e.ValidationError("SignerListSet: WalletLocator in SignerEntry must be a 256-bit (32-byte) hexadecimal value")}}}return bc.validateSignerListSet=s,bc}var vc={},sb;function z_(){if(sb)return vc;sb=1,Object.defineProperty(vc,"__esModule",{value:!0}),vc.validateTicketCreate=void 0;const e=Oe(),t=Ce(),n=250;function r(s){(0,t.validateBaseTransaction)(s);const{TicketCount:i}=s;if(i===void 0)throw new e.ValidationError("TicketCreate: missing field TicketCount");if(typeof i!="number")throw new e.ValidationError("TicketCreate: TicketCount must be a number");if(!Number.isInteger(i)||i<1||i>n)throw new e.ValidationError("TicketCreate: TicketCount must be an integer from 1 to 250")}return vc.validateTicketCreate=r,vc}var Ec={},ob;function F_(){if(ob)return Ec;ob=1,Object.defineProperty(Ec,"__esModule",{value:!0}),Ec.validateXChainAccountCreateCommit=void 0;const e=Ce();function t(n){(0,e.validateBaseTransaction)(n),(0,e.validateRequiredField)(n,"XChainBridge",e.isXChainBridge),(0,e.validateRequiredField)(n,"SignatureReward",e.isAmount),(0,e.validateRequiredField)(n,"Destination",e.isAccount),(0,e.validateRequiredField)(n,"Amount",e.isAmount)}return Ec.validateXChainAccountCreateCommit=t,Ec}var Ac={},ab;function H_(){if(ab)return Ac;ab=1,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.validateXChainAddAccountCreateAttestation=void 0;const e=Ce();function t(n){(0,e.validateBaseTransaction)(n),(0,e.validateRequiredField)(n,"Amount",e.isAmount),(0,e.validateRequiredField)(n,"AttestationRewardAccount",e.isAccount),(0,e.validateRequiredField)(n,"AttestationSignerAccount",e.isAccount),(0,e.validateRequiredField)(n,"Destination",e.isAccount),(0,e.validateRequiredField)(n,"OtherChainSource",e.isAccount),(0,e.validateRequiredField)(n,"PublicKey",e.isString),(0,e.validateRequiredField)(n,"Signature",e.isString),(0,e.validateRequiredField)(n,"SignatureReward",e.isAmount),(0,e.validateRequiredField)(n,"WasLockingChainSend",r=>r===0||r===1),(0,e.validateRequiredField)(n,"XChainAccountCreateCount",r=>(0,e.isNumber)(r)||(0,e.isString)(r)),(0,e.validateRequiredField)(n,"XChainBridge",e.isXChainBridge)}return Ac.validateXChainAddAccountCreateAttestation=t,Ac}var Sc={},cb;function V_(){if(cb)return Sc;cb=1,Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.validateXChainAddClaimAttestation=void 0;const e=Ce();function t(n){(0,e.validateBaseTransaction)(n),(0,e.validateRequiredField)(n,"Amount",e.isAmount),(0,e.validateRequiredField)(n,"AttestationRewardAccount",e.isAccount),(0,e.validateRequiredField)(n,"AttestationSignerAccount",e.isAccount),(0,e.validateOptionalField)(n,"Destination",e.isAccount),(0,e.validateRequiredField)(n,"OtherChainSource",e.isAccount),(0,e.validateRequiredField)(n,"PublicKey",e.isString),(0,e.validateRequiredField)(n,"Signature",e.isString),(0,e.validateRequiredField)(n,"WasLockingChainSend",r=>r===0||r===1),(0,e.validateRequiredField)(n,"XChainBridge",e.isXChainBridge),(0,e.validateRequiredField)(n,"XChainClaimID",r=>(0,e.isNumber)(r)||(0,e.isString)(r))}return Sc.validateXChainAddClaimAttestation=t,Sc}var Tc={},ub;function q_(){if(ub)return Tc;ub=1,Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.validateXChainClaim=void 0;const e=Ce();function t(n){(0,e.validateBaseTransaction)(n),(0,e.validateRequiredField)(n,"XChainBridge",e.isXChainBridge),(0,e.validateRequiredField)(n,"XChainClaimID",r=>(0,e.isNumber)(r)||(0,e.isString)(r)),(0,e.validateRequiredField)(n,"Destination",e.isAccount),(0,e.validateOptionalField)(n,"DestinationTag",e.isNumber),(0,e.validateRequiredField)(n,"Amount",e.isAmount)}return Tc.validateXChainClaim=t,Tc}var Mc={},lb;function G_(){if(lb)return Mc;lb=1,Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.validateXChainCommit=void 0;const e=Ce();function t(n){(0,e.validateBaseTransaction)(n),(0,e.validateRequiredField)(n,"XChainBridge",e.isXChainBridge),(0,e.validateRequiredField)(n,"XChainClaimID",r=>(0,e.isNumber)(r)||(0,e.isString)(r)),(0,e.validateOptionalField)(n,"OtherChainDestination",e.isAccount),(0,e.validateRequiredField)(n,"Amount",e.isAmount)}return Mc.validateXChainCommit=t,Mc}var Nc={},db;function K_(){if(db)return Nc;db=1,Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.validateXChainCreateBridge=void 0;const e=Ce();function t(n){(0,e.validateBaseTransaction)(n),(0,e.validateRequiredField)(n,"XChainBridge",e.isXChainBridge),(0,e.validateRequiredField)(n,"SignatureReward",e.isAmount),(0,e.validateOptionalField)(n,"MinAccountCreateAmount",e.isAmount)}return Nc.validateXChainCreateBridge=t,Nc}var Ic={},hb;function Y_(){if(hb)return Ic;hb=1,Object.defineProperty(Ic,"__esModule",{value:!0}),Ic.validateXChainCreateClaimID=void 0;const e=Ce();function t(n){(0,e.validateBaseTransaction)(n),(0,e.validateRequiredField)(n,"XChainBridge",e.isXChainBridge),(0,e.validateRequiredField)(n,"SignatureReward",e.isAmount),(0,e.validateRequiredField)(n,"OtherChainSource",e.isAccount)}return Ic.validateXChainCreateClaimID=t,Ic}var fb;function W_(){if(fb)return Xa;fb=1,Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.validate=void 0;const e=Oe(),t=oo(),n=Vg(),r=y_(),s=Cg(),i=m_(),o=NS(),a=w_(),u=jg(),c=b_(),l=Pg(),d=v_(),f=E_(),h=A_(),p=S_(),g=Ce(),y=T_(),b=M_(),A=N_(),E=I_(),_=__(),S=O_(),I=D_(),D=x_(),L=L_(),x=kg(),j=Rg(),V=C_(),Y=Bg(),q=j_(),R=P_(),v=Ug(),T=zg(),m=k_(),w=R_(),N=B_(),C=U_(),O=z_(),B=Fg(),W=F_(),P=H_(),X=V_(),ee=q_(),se=G_(),Z=K_(),J=Y_(),z=Hg();function K(H){const U=Object.assign({},H);if(U.TransactionType==null)throw new e.ValidationError("Object does not have a `TransactionType`");if(typeof U.TransactionType!="string")throw new e.ValidationError("Object's `TransactionType` is not a string");if(U.Memos!=null&&typeof U.Memos!="object")throw new e.ValidationError("Memo must be array");switch(U.Memos!=null&&U.Memos.forEach(F=>{if(F?.Memo==null)throw new e.ValidationError("Memo data must be in a `Memo` field");if(F.Memo.MemoData&&!(0,t.isHex)(F.Memo.MemoData))throw new e.ValidationError("MemoData field must be a hex value");if(F.Memo.MemoType&&!(0,t.isHex)(F.Memo.MemoType))throw new e.ValidationError("MemoType field must be a hex value");if(F.Memo.MemoFormat&&!(0,t.isHex)(F.Memo.MemoFormat))throw new e.ValidationError("MemoFormat field must be a hex value")}),Object.keys(U).forEach(F=>{if(U[F]&&(0,g.isIssuedCurrency)(U[F])){const te=U[F].currency;if(te.length===3&&te.toUpperCase()==="XRP")throw new e.ValidationError(`Cannot have an issued currency with a similar standard code to XRP (received '${te}'). XRP is not an issued currency.`)}}),(0,n.setTransactionFlagsToNumber)(U),U.TransactionType){case"AMMBid":(0,i.validateAMMBid)(U);break;case"AMMCreate":(0,o.validateAMMCreate)(U);break;case"AMMDelete":(0,a.validateAMMDelete)(U);break;case"AMMDeposit":(0,u.validateAMMDeposit)(U);break;case"AMMVote":(0,c.validateAMMVote)(U);break;case"AMMWithdraw":(0,l.validateAMMWithdraw)(U);break;case"AccountDelete":(0,r.validateAccountDelete)(U);break;case"AccountSet":(0,s.validateAccountSet)(U);break;case"CheckCancel":(0,d.validateCheckCancel)(U);break;case"CheckCash":(0,f.validateCheckCash)(U);break;case"CheckCreate":(0,h.validateCheckCreate)(U);break;case"Clawback":(0,p.validateClawback)(U);break;case"DIDDelete":(0,b.validateDIDDelete)(U);break;case"DIDSet":(0,A.validateDIDSet)(U);break;case"DepositPreauth":(0,y.validateDepositPreauth)(U);break;case"EscrowCancel":(0,E.validateEscrowCancel)(U);break;case"EscrowCreate":(0,_.validateEscrowCreate)(U);break;case"EscrowFinish":(0,S.validateEscrowFinish)(U);break;case"NFTokenAcceptOffer":(0,I.validateNFTokenAcceptOffer)(U);break;case"NFTokenBurn":(0,D.validateNFTokenBurn)(U);break;case"NFTokenCancelOffer":(0,L.validateNFTokenCancelOffer)(U);break;case"NFTokenCreateOffer":(0,x.validateNFTokenCreateOffer)(U);break;case"NFTokenMint":(0,j.validateNFTokenMint)(U);break;case"OfferCancel":(0,V.validateOfferCancel)(U);break;case"OfferCreate":(0,Y.validateOfferCreate)(U);break;case"OracleDelete":(0,q.validateOracleDelete)(U);break;case"OracleSet":(0,R.validateOracleSet)(U);break;case"Payment":(0,v.validatePayment)(U);break;case"PaymentChannelClaim":(0,T.validatePaymentChannelClaim)(U);break;case"PaymentChannelCreate":(0,m.validatePaymentChannelCreate)(U);break;case"PaymentChannelFund":(0,w.validatePaymentChannelFund)(U);break;case"SetRegularKey":(0,N.validateSetRegularKey)(U);break;case"SignerListSet":(0,C.validateSignerListSet)(U);break;case"TicketCreate":(0,O.validateTicketCreate)(U);break;case"TrustSet":(0,B.validateTrustSet)(U);break;case"XChainAccountCreateCommit":(0,W.validateXChainAccountCreateCommit)(U);break;case"XChainAddAccountCreateAttestation":(0,P.validateXChainAddAccountCreateAttestation)(U);break;case"XChainAddClaimAttestation":(0,X.validateXChainAddClaimAttestation)(U);break;case"XChainClaim":(0,ee.validateXChainClaim)(U);break;case"XChainCommit":(0,se.validateXChainCommit)(U);break;case"XChainCreateBridge":(0,Z.validateXChainCreateBridge)(U);break;case"XChainCreateClaimID":(0,J.validateXChainCreateClaimID)(U);break;case"XChainModifyBridge":(0,z.validateXChainModifyBridge)(U);break;default:throw new e.ValidationError(`Invalid field TransactionType: ${U.TransactionType}`)}}return Xa.validate=K,Xa}var _c={},pb;function X_(){if(pb)return _c;pb=1,Object.defineProperty(_c,"__esModule",{value:!0}),_c.EnableAmendmentFlags=void 0;var e;return(function(t){t[t.tfGotMajority=65536]="tfGotMajority",t[t.tfLostMajority=131072]="tfLostMajority"})(e||(_c.EnableAmendmentFlags=e={})),_c}var gb;function zd(){return gb||(gb=1,(function(e){var t=Os&&Os.__createBinding||(Object.create?(function(g,y,b,A){A===void 0&&(A=b);var E=Object.getOwnPropertyDescriptor(y,b);(!E||("get"in E?!y.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return y[b]}}),Object.defineProperty(g,A,E)}):(function(g,y,b,A){A===void 0&&(A=b),g[A]=y[b]})),n=Os&&Os.__exportStar||function(g,y){for(var b in g)b!=="default"&&!Object.prototype.hasOwnProperty.call(y,b)&&t(y,g,b)};Object.defineProperty(e,"__esModule",{value:!0}),e.XChainModifyBridgeFlags=e.TrustSetFlags=e.PaymentChannelClaimFlags=e.PaymentFlags=e.OfferCreateFlags=e.NFTokenMintFlags=e.NFTokenCreateOfferFlags=e.EnableAmendmentFlags=e.AMMWithdrawFlags=e.AMMDepositFlags=e.AccountSetTfFlags=e.AccountSetAsfFlags=e.validate=void 0;var r=W_();Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return r.validate}}),n(Wg(),e);var s=Cg();Object.defineProperty(e,"AccountSetAsfFlags",{enumerable:!0,get:function(){return s.AccountSetAsfFlags}}),Object.defineProperty(e,"AccountSetTfFlags",{enumerable:!0,get:function(){return s.AccountSetTfFlags}});var i=jg();Object.defineProperty(e,"AMMDepositFlags",{enumerable:!0,get:function(){return i.AMMDepositFlags}});var o=Pg();Object.defineProperty(e,"AMMWithdrawFlags",{enumerable:!0,get:function(){return o.AMMWithdrawFlags}});var a=X_();Object.defineProperty(e,"EnableAmendmentFlags",{enumerable:!0,get:function(){return a.EnableAmendmentFlags}});var u=kg();Object.defineProperty(e,"NFTokenCreateOfferFlags",{enumerable:!0,get:function(){return u.NFTokenCreateOfferFlags}});var c=Rg();Object.defineProperty(e,"NFTokenMintFlags",{enumerable:!0,get:function(){return c.NFTokenMintFlags}});var l=Bg();Object.defineProperty(e,"OfferCreateFlags",{enumerable:!0,get:function(){return l.OfferCreateFlags}});var d=Ug();Object.defineProperty(e,"PaymentFlags",{enumerable:!0,get:function(){return d.PaymentFlags}});var f=zg();Object.defineProperty(e,"PaymentChannelClaimFlags",{enumerable:!0,get:function(){return f.PaymentChannelClaimFlags}});var h=Fg();Object.defineProperty(e,"TrustSetFlags",{enumerable:!0,get:function(){return h.TrustSetFlags}});var p=Hg();Object.defineProperty(e,"XChainModifyBridgeFlags",{enumerable:!0,get:function(){return p.XChainModifyBridgeFlags}})})(Os)),Os}var Gr={};const Q_=JSON.parse('["A","ABE","ACE","ACT","AD","ADA","ADD","AGO","AID","AIM","AIR","ALL","ALP","AM","AMY","AN","ANA","AND","ANN","ANT","ANY","APE","APS","APT","ARC","ARE","ARK","ARM","ART","AS","ASH","ASK","AT","ATE","AUG","AUK","AVE","AWE","AWK","AWL","AWN","AX","AYE","BAD","BAG","BAH","BAM","BAN","BAR","BAT","BAY","BE","BED","BEE","BEG","BEN","BET","BEY","BIB","BID","BIG","BIN","BIT","BOB","BOG","BON","BOO","BOP","BOW","BOY","BUB","BUD","BUG","BUM","BUN","BUS","BUT","BUY","BY","BYE","CAB","CAL","CAM","CAN","CAP","CAR","CAT","CAW","COD","COG","COL","CON","COO","COP","COT","COW","COY","CRY","CUB","CUE","CUP","CUR","CUT","DAB","DAD","DAM","DAN","DAR","DAY","DEE","DEL","DEN","DES","DEW","DID","DIE","DIG","DIN","DIP","DO","DOE","DOG","DON","DOT","DOW","DRY","DUB","DUD","DUE","DUG","DUN","EAR","EAT","ED","EEL","EGG","EGO","ELI","ELK","ELM","ELY","EM","END","EST","ETC","EVA","EVE","EWE","EYE","FAD","FAN","FAR","FAT","FAY","FED","FEE","FEW","FIB","FIG","FIN","FIR","FIT","FLO","FLY","FOE","FOG","FOR","FRY","FUM","FUN","FUR","GAB","GAD","GAG","GAL","GAM","GAP","GAS","GAY","GEE","GEL","GEM","GET","GIG","GIL","GIN","GO","GOT","GUM","GUN","GUS","GUT","GUY","GYM","GYP","HA","HAD","HAL","HAM","HAN","HAP","HAS","HAT","HAW","HAY","HE","HEM","HEN","HER","HEW","HEY","HI","HID","HIM","HIP","HIS","HIT","HO","HOB","HOC","HOE","HOG","HOP","HOT","HOW","HUB","HUE","HUG","HUH","HUM","HUT","I","ICY","IDA","IF","IKE","ILL","INK","INN","IO","ION","IQ","IRA","IRE","IRK","IS","IT","ITS","IVY","JAB","JAG","JAM","JAN","JAR","JAW","JAY","JET","JIG","JIM","JO","JOB","JOE","JOG","JOT","JOY","JUG","JUT","KAY","KEG","KEN","KEY","KID","KIM","KIN","KIT","LA","LAB","LAC","LAD","LAG","LAM","LAP","LAW","LAY","LEA","LED","LEE","LEG","LEN","LEO","LET","LEW","LID","LIE","LIN","LIP","LIT","LO","LOB","LOG","LOP","LOS","LOT","LOU","LOW","LOY","LUG","LYE","MA","MAC","MAD","MAE","MAN","MAO","MAP","MAT","MAW","MAY","ME","MEG","MEL","MEN","MET","MEW","MID","MIN","MIT","MOB","MOD","MOE","MOO","MOP","MOS","MOT","MOW","MUD","MUG","MUM","MY","NAB","NAG","NAN","NAP","NAT","NAY","NE","NED","NEE","NET","NEW","NIB","NIL","NIP","NIT","NO","NOB","NOD","NON","NOR","NOT","NOV","NOW","NU","NUN","NUT","O","OAF","OAK","OAR","OAT","ODD","ODE","OF","OFF","OFT","OH","OIL","OK","OLD","ON","ONE","OR","ORB","ORE","ORR","OS","OTT","OUR","OUT","OVA","OW","OWE","OWL","OWN","OX","PA","PAD","PAL","PAM","PAN","PAP","PAR","PAT","PAW","PAY","PEA","PEG","PEN","PEP","PER","PET","PEW","PHI","PI","PIE","PIN","PIT","PLY","PO","POD","POE","POP","POT","POW","PRO","PRY","PUB","PUG","PUN","PUP","PUT","QUO","RAG","RAM","RAN","RAP","RAT","RAW","RAY","REB","RED","REP","RET","RIB","RID","RIG","RIM","RIO","RIP","ROB","ROD","ROE","RON","ROT","ROW","ROY","RUB","RUE","RUG","RUM","RUN","RYE","SAC","SAD","SAG","SAL","SAM","SAN","SAP","SAT","SAW","SAY","SEA","SEC","SEE","SEN","SET","SEW","SHE","SHY","SIN","SIP","SIR","SIS","SIT","SKI","SKY","SLY","SO","SOB","SOD","SON","SOP","SOW","SOY","SPA","SPY","SUB","SUD","SUE","SUM","SUN","SUP","TAB","TAD","TAG","TAN","TAP","TAR","TEA","TED","TEE","TEN","THE","THY","TIC","TIE","TIM","TIN","TIP","TO","TOE","TOG","TOM","TON","TOO","TOP","TOW","TOY","TRY","TUB","TUG","TUM","TUN","TWO","UN","UP","US","USE","VAN","VAT","VET","VIE","WAD","WAG","WAR","WAS","WAY","WE","WEB","WED","WEE","WET","WHO","WHY","WIN","WIT","WOK","WON","WOO","WOW","WRY","WU","YAM","YAP","YAW","YE","YEA","YES","YET","YOU","ABED","ABEL","ABET","ABLE","ABUT","ACHE","ACID","ACME","ACRE","ACTA","ACTS","ADAM","ADDS","ADEN","AFAR","AFRO","AGEE","AHEM","AHOY","AIDA","AIDE","AIDS","AIRY","AJAR","AKIN","ALAN","ALEC","ALGA","ALIA","ALLY","ALMA","ALOE","ALSO","ALTO","ALUM","ALVA","AMEN","AMES","AMID","AMMO","AMOK","AMOS","AMRA","ANDY","ANEW","ANNA","ANNE","ANTE","ANTI","AQUA","ARAB","ARCH","AREA","ARGO","ARID","ARMY","ARTS","ARTY","ASIA","ASKS","ATOM","AUNT","AURA","AUTO","AVER","AVID","AVIS","AVON","AVOW","AWAY","AWRY","BABE","BABY","BACH","BACK","BADE","BAIL","BAIT","BAKE","BALD","BALE","BALI","BALK","BALL","BALM","BAND","BANE","BANG","BANK","BARB","BARD","BARE","BARK","BARN","BARR","BASE","BASH","BASK","BASS","BATE","BATH","BAWD","BAWL","BEAD","BEAK","BEAM","BEAN","BEAR","BEAT","BEAU","BECK","BEEF","BEEN","BEER","BEET","BELA","BELL","BELT","BEND","BENT","BERG","BERN","BERT","BESS","BEST","BETA","BETH","BHOY","BIAS","BIDE","BIEN","BILE","BILK","BILL","BIND","BING","BIRD","BITE","BITS","BLAB","BLAT","BLED","BLEW","BLOB","BLOC","BLOT","BLOW","BLUE","BLUM","BLUR","BOAR","BOAT","BOCA","BOCK","BODE","BODY","BOGY","BOHR","BOIL","BOLD","BOLO","BOLT","BOMB","BONA","BOND","BONE","BONG","BONN","BONY","BOOK","BOOM","BOON","BOOT","BORE","BORG","BORN","BOSE","BOSS","BOTH","BOUT","BOWL","BOYD","BRAD","BRAE","BRAG","BRAN","BRAY","BRED","BREW","BRIG","BRIM","BROW","BUCK","BUDD","BUFF","BULB","BULK","BULL","BUNK","BUNT","BUOY","BURG","BURL","BURN","BURR","BURT","BURY","BUSH","BUSS","BUST","BUSY","BYTE","CADY","CAFE","CAGE","CAIN","CAKE","CALF","CALL","CALM","CAME","CANE","CANT","CARD","CARE","CARL","CARR","CART","CASE","CASH","CASK","CAST","CAVE","CEIL","CELL","CENT","CERN","CHAD","CHAR","CHAT","CHAW","CHEF","CHEN","CHEW","CHIC","CHIN","CHOU","CHOW","CHUB","CHUG","CHUM","CITE","CITY","CLAD","CLAM","CLAN","CLAW","CLAY","CLOD","CLOG","CLOT","CLUB","CLUE","COAL","COAT","COCA","COCK","COCO","CODA","CODE","CODY","COED","COIL","COIN","COKE","COLA","COLD","COLT","COMA","COMB","COME","COOK","COOL","COON","COOT","CORD","CORE","CORK","CORN","COST","COVE","COWL","CRAB","CRAG","CRAM","CRAY","CREW","CRIB","CROW","CRUD","CUBA","CUBE","CUFF","CULL","CULT","CUNY","CURB","CURD","CURE","CURL","CURT","CUTS","DADE","DALE","DAME","DANA","DANE","DANG","DANK","DARE","DARK","DARN","DART","DASH","DATA","DATE","DAVE","DAVY","DAWN","DAYS","DEAD","DEAF","DEAL","DEAN","DEAR","DEBT","DECK","DEED","DEEM","DEER","DEFT","DEFY","DELL","DENT","DENY","DESK","DIAL","DICE","DIED","DIET","DIME","DINE","DING","DINT","DIRE","DIRT","DISC","DISH","DISK","DIVE","DOCK","DOES","DOLE","DOLL","DOLT","DOME","DONE","DOOM","DOOR","DORA","DOSE","DOTE","DOUG","DOUR","DOVE","DOWN","DRAB","DRAG","DRAM","DRAW","DREW","DRUB","DRUG","DRUM","DUAL","DUCK","DUCT","DUEL","DUET","DUKE","DULL","DUMB","DUNE","DUNK","DUSK","DUST","DUTY","EACH","EARL","EARN","EASE","EAST","EASY","EBEN","ECHO","EDDY","EDEN","EDGE","EDGY","EDIT","EDNA","EGAN","ELAN","ELBA","ELLA","ELSE","EMIL","EMIT","EMMA","ENDS","ERIC","EROS","EVEN","EVER","EVIL","EYED","FACE","FACT","FADE","FAIL","FAIN","FAIR","FAKE","FALL","FAME","FANG","FARM","FAST","FATE","FAWN","FEAR","FEAT","FEED","FEEL","FEET","FELL","FELT","FEND","FERN","FEST","FEUD","FIEF","FIGS","FILE","FILL","FILM","FIND","FINE","FINK","FIRE","FIRM","FISH","FISK","FIST","FITS","FIVE","FLAG","FLAK","FLAM","FLAT","FLAW","FLEA","FLED","FLEW","FLIT","FLOC","FLOG","FLOW","FLUB","FLUE","FOAL","FOAM","FOGY","FOIL","FOLD","FOLK","FOND","FONT","FOOD","FOOL","FOOT","FORD","FORE","FORK","FORM","FORT","FOSS","FOUL","FOUR","FOWL","FRAU","FRAY","FRED","FREE","FRET","FREY","FROG","FROM","FUEL","FULL","FUME","FUND","FUNK","FURY","FUSE","FUSS","GAFF","GAGE","GAIL","GAIN","GAIT","GALA","GALE","GALL","GALT","GAME","GANG","GARB","GARY","GASH","GATE","GAUL","GAUR","GAVE","GAWK","GEAR","GELD","GENE","GENT","GERM","GETS","GIBE","GIFT","GILD","GILL","GILT","GINA","GIRD","GIRL","GIST","GIVE","GLAD","GLEE","GLEN","GLIB","GLOB","GLOM","GLOW","GLUE","GLUM","GLUT","GOAD","GOAL","GOAT","GOER","GOES","GOLD","GOLF","GONE","GONG","GOOD","GOOF","GORE","GORY","GOSH","GOUT","GOWN","GRAB","GRAD","GRAY","GREG","GREW","GREY","GRID","GRIM","GRIN","GRIT","GROW","GRUB","GULF","GULL","GUNK","GURU","GUSH","GUST","GWEN","GWYN","HAAG","HAAS","HACK","HAIL","HAIR","HALE","HALF","HALL","HALO","HALT","HAND","HANG","HANK","HANS","HARD","HARK","HARM","HART","HASH","HAST","HATE","HATH","HAUL","HAVE","HAWK","HAYS","HEAD","HEAL","HEAR","HEAT","HEBE","HECK","HEED","HEEL","HEFT","HELD","HELL","HELM","HERB","HERD","HERE","HERO","HERS","HESS","HEWN","HICK","HIDE","HIGH","HIKE","HILL","HILT","HIND","HINT","HIRE","HISS","HIVE","HOBO","HOCK","HOFF","HOLD","HOLE","HOLM","HOLT","HOME","HONE","HONK","HOOD","HOOF","HOOK","HOOT","HORN","HOSE","HOST","HOUR","HOVE","HOWE","HOWL","HOYT","HUCK","HUED","HUFF","HUGE","HUGH","HUGO","HULK","HULL","HUNK","HUNT","HURD","HURL","HURT","HUSH","HYDE","HYMN","IBIS","ICON","IDEA","IDLE","IFFY","INCA","INCH","INTO","IONS","IOTA","IOWA","IRIS","IRMA","IRON","ISLE","ITCH","ITEM","IVAN","JACK","JADE","JAIL","JAKE","JANE","JAVA","JEAN","JEFF","JERK","JESS","JEST","JIBE","JILL","JILT","JIVE","JOAN","JOBS","JOCK","JOEL","JOEY","JOHN","JOIN","JOKE","JOLT","JOVE","JUDD","JUDE","JUDO","JUDY","JUJU","JUKE","JULY","JUNE","JUNK","JUNO","JURY","JUST","JUTE","KAHN","KALE","KANE","KANT","KARL","KATE","KEEL","KEEN","KENO","KENT","KERN","KERR","KEYS","KICK","KILL","KIND","KING","KIRK","KISS","KITE","KLAN","KNEE","KNEW","KNIT","KNOB","KNOT","KNOW","KOCH","KONG","KUDO","KURD","KURT","KYLE","LACE","LACK","LACY","LADY","LAID","LAIN","LAIR","LAKE","LAMB","LAME","LAND","LANE","LANG","LARD","LARK","LASS","LAST","LATE","LAUD","LAVA","LAWN","LAWS","LAYS","LEAD","LEAF","LEAK","LEAN","LEAR","LEEK","LEER","LEFT","LEND","LENS","LENT","LEON","LESK","LESS","LEST","LETS","LIAR","LICE","LICK","LIED","LIEN","LIES","LIEU","LIFE","LIFT","LIKE","LILA","LILT","LILY","LIMA","LIMB","LIME","LIND","LINE","LINK","LINT","LION","LISA","LIST","LIVE","LOAD","LOAF","LOAM","LOAN","LOCK","LOFT","LOGE","LOIS","LOLA","LONE","LONG","LOOK","LOON","LOOT","LORD","LORE","LOSE","LOSS","LOST","LOUD","LOVE","LOWE","LUCK","LUCY","LUGE","LUKE","LULU","LUND","LUNG","LURA","LURE","LURK","LUSH","LUST","LYLE","LYNN","LYON","LYRA","MACE","MADE","MAGI","MAID","MAIL","MAIN","MAKE","MALE","MALI","MALL","MALT","MANA","MANN","MANY","MARC","MARE","MARK","MARS","MART","MARY","MASH","MASK","MASS","MAST","MATE","MATH","MAUL","MAYO","MEAD","MEAL","MEAN","MEAT","MEEK","MEET","MELD","MELT","MEMO","MEND","MENU","MERT","MESH","MESS","MICE","MIKE","MILD","MILE","MILK","MILL","MILT","MIMI","MIND","MINE","MINI","MINK","MINT","MIRE","MISS","MIST","MITE","MITT","MOAN","MOAT","MOCK","MODE","MOLD","MOLE","MOLL","MOLT","MONA","MONK","MONT","MOOD","MOON","MOOR","MOOT","MORE","MORN","MORT","MOSS","MOST","MOTH","MOVE","MUCH","MUCK","MUDD","MUFF","MULE","MULL","MURK","MUSH","MUST","MUTE","MUTT","MYRA","MYTH","NAGY","NAIL","NAIR","NAME","NARY","NASH","NAVE","NAVY","NEAL","NEAR","NEAT","NECK","NEED","NEIL","NELL","NEON","NERO","NESS","NEST","NEWS","NEWT","NIBS","NICE","NICK","NILE","NINA","NINE","NOAH","NODE","NOEL","NOLL","NONE","NOOK","NOON","NORM","NOSE","NOTE","NOUN","NOVA","NUDE","NULL","NUMB","OATH","OBEY","OBOE","ODIN","OHIO","OILY","OINT","OKAY","OLAF","OLDY","OLGA","OLIN","OMAN","OMEN","OMIT","ONCE","ONES","ONLY","ONTO","ONUS","ORAL","ORGY","OSLO","OTIS","OTTO","OUCH","OUST","OUTS","OVAL","OVEN","OVER","OWLY","OWNS","QUAD","QUIT","QUOD","RACE","RACK","RACY","RAFT","RAGE","RAID","RAIL","RAIN","RAKE","RANK","RANT","RARE","RASH","RATE","RAVE","RAYS","READ","REAL","REAM","REAR","RECK","REED","REEF","REEK","REEL","REID","REIN","RENA","REND","RENT","REST","RICE","RICH","RICK","RIDE","RIFT","RILL","RIME","RING","RINK","RISE","RISK","RITE","ROAD","ROAM","ROAR","ROBE","ROCK","RODE","ROIL","ROLL","ROME","ROOD","ROOF","ROOK","ROOM","ROOT","ROSA","ROSE","ROSS","ROSY","ROTH","ROUT","ROVE","ROWE","ROWS","RUBE","RUBY","RUDE","RUDY","RUIN","RULE","RUNG","RUNS","RUNT","RUSE","RUSH","RUSK","RUSS","RUST","RUTH","SACK","SAFE","SAGE","SAID","SAIL","SALE","SALK","SALT","SAME","SAND","SANE","SANG","SANK","SARA","SAUL","SAVE","SAYS","SCAN","SCAR","SCAT","SCOT","SEAL","SEAM","SEAR","SEAT","SEED","SEEK","SEEM","SEEN","SEES","SELF","SELL","SEND","SENT","SETS","SEWN","SHAG","SHAM","SHAW","SHAY","SHED","SHIM","SHIN","SHOD","SHOE","SHOT","SHOW","SHUN","SHUT","SICK","SIDE","SIFT","SIGH","SIGN","SILK","SILL","SILO","SILT","SINE","SING","SINK","SIRE","SITE","SITS","SITU","SKAT","SKEW","SKID","SKIM","SKIN","SKIT","SLAB","SLAM","SLAT","SLAY","SLED","SLEW","SLID","SLIM","SLIT","SLOB","SLOG","SLOT","SLOW","SLUG","SLUM","SLUR","SMOG","SMUG","SNAG","SNOB","SNOW","SNUB","SNUG","SOAK","SOAR","SOCK","SODA","SOFA","SOFT","SOIL","SOLD","SOME","SONG","SOON","SOOT","SORE","SORT","SOUL","SOUR","SOWN","STAB","STAG","STAN","STAR","STAY","STEM","STEW","STIR","STOW","STUB","STUN","SUCH","SUDS","SUIT","SULK","SUMS","SUNG","SUNK","SURE","SURF","SWAB","SWAG","SWAM","SWAN","SWAT","SWAY","SWIM","SWUM","TACK","TACT","TAIL","TAKE","TALE","TALK","TALL","TANK","TASK","TATE","TAUT","TEAL","TEAM","TEAR","TECH","TEEM","TEEN","TEET","TELL","TEND","TENT","TERM","TERN","TESS","TEST","THAN","THAT","THEE","THEM","THEN","THEY","THIN","THIS","THUD","THUG","TICK","TIDE","TIDY","TIED","TIER","TILE","TILL","TILT","TIME","TINA","TINE","TINT","TINY","TIRE","TOAD","TOGO","TOIL","TOLD","TOLL","TONE","TONG","TONY","TOOK","TOOL","TOOT","TORE","TORN","TOTE","TOUR","TOUT","TOWN","TRAG","TRAM","TRAY","TREE","TREK","TRIG","TRIM","TRIO","TROD","TROT","TROY","TRUE","TUBA","TUBE","TUCK","TUFT","TUNA","TUNE","TUNG","TURF","TURN","TUSK","TWIG","TWIN","TWIT","ULAN","UNIT","URGE","USED","USER","USES","UTAH","VAIL","VAIN","VALE","VARY","VASE","VAST","VEAL","VEDA","VEIL","VEIN","VEND","VENT","VERB","VERY","VETO","VICE","VIEW","VINE","VISE","VOID","VOLT","VOTE","WACK","WADE","WAGE","WAIL","WAIT","WAKE","WALE","WALK","WALL","WALT","WAND","WANE","WANG","WANT","WARD","WARM","WARN","WART","WASH","WAST","WATS","WATT","WAVE","WAVY","WAYS","WEAK","WEAL","WEAN","WEAR","WEED","WEEK","WEIR","WELD","WELL","WELT","WENT","WERE","WERT","WEST","WHAM","WHAT","WHEE","WHEN","WHET","WHOA","WHOM","WICK","WIFE","WILD","WILL","WIND","WINE","WING","WINK","WINO","WIRE","WISE","WISH","WITH","WOLF","WONT","WOOD","WOOL","WORD","WORE","WORK","WORM","WORN","WOVE","WRIT","WYNN","YALE","YANG","YANK","YARD","YARN","YAWL","YAWN","YEAH","YEAR","YELL","YOGA","YOKE"]');var yb;function IS(){if(yb)return Gr;yb=1;var e=Gr&&Gr.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.keyToRFC1751Mnemonic=Gr.rfc1751MnemonicToKey=void 0;const t=Ve(),r=e(Q_).default,s=["0000","0001","0010","0011","0100","0101","0110","0111","1000","1001","1010","1011","1100","1101","1110","1111"];function i(p){let g="";for(const y of p)g+=s[y>>4]+s[y&15];return g}function o(p,g,y){const b=p.substring(g,g+y);let A=0;for(let E=0;E<b.length;E++)A=A*2+b.charCodeAt(E)-48;return A}function a(p){const g=(0,t.hexToBytes)(p.replace(/\s+/gu,""));let y=l(h(g));const b=[];for(let E=0;E<(8-y.length%8)%8;E++)b.push(0);y=b.concat(y);const A=[];for(let E=0;E<y.length;E+=8){const _=y.slice(E,E+8);let S=i(_),I=0;for(let D=0;D<64;D+=2)I+=o(S,D,2);_.push(I<<6&255),S=i(_);for(let D=0;D<64;D+=11)A.push(r[o(S,D,11)])}return A.join(" ")}Gr.keyToRFC1751Mnemonic=a;function u(p){const g=p.split(" ");let y=[];for(let A=0;A<g.length;A+=6){const{subKey:E,word:_}=c(g,A),S=i(E);let I=0;for(let x=0;x<64;x+=2)I+=o(S,x,2);const D=o(S,64,2),L=I&3;if(D!==L)throw new Error(`Parity error at ${_}`);y=y.concat(E.slice(0,8))}return h(Uint8Array.from(y))}Gr.rfc1751MnemonicToKey=u;function c(p,g){const y=p.slice(g,g+6);let b=0;const A=[0,0,0,0,0,0,0,0,0];let E="";for(E of y){const S=r.indexOf(E.toUpperCase());if(S===-1)throw new TypeError(`Expected an RFC1751 word, but received '${E}'. For the full list of words in the RFC1751 encoding see https://datatracker.ietf.org/doc/html/rfc1751`);const I=(8-(b+11)%8)%8,D=S<<I,L=D>>16,x=D>>8&255,j=D&255,V=Math.floor(b/8);I>5?(A[V]|=L,A[V+1]|=x,A[V+2]|=j):I>-3?(A[V]|=x,A[V+1]|=j):A[V]|=j,b+=11}return{subKey:A.slice(),word:E}}function l(p){return Array.prototype.slice.call(p)}function d(p,g,y){const b=p[g];p[g]=p[y],p[y]=b}function f(p){const g=p.length;for(let y=0;y<g;y+=8)d(p,y,y+7),d(p,y+1,y+6),d(p,y+2,y+5),d(p,y+3,y+4);return p}function h(p){const g=f(p);return(0,t.concat)([g.slice(8,16),g.slice(0,8)])}return Gr}var Ds={},mb;function _S(){if(mb)return Ds;mb=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.multisign=Ds.verifySignature=void 0;const e=Ve(),t=Nn(),n=Rn(),r=fr(),s=ao(),i=Oe(),o=zd();function a(g){if(g.length===0)throw new i.ValidationError("There were 0 transactions to multisign");const y=g.map(b=>p(b));return y.forEach(b=>{if((0,o.validate)(b),b.Signers==null||b.Signers.length===0)throw new i.ValidationError("For multisigning all transactions must include a Signers field containing an array of signatures. You may have forgotten to pass the 'forMultisign' parameter when signing.");if(b.SigningPubKey!=="")throw new i.ValidationError("SigningPubKey must be an empty string for all transactions when multisigning.")}),c(y),(0,r.encode)(l(y))}Ds.multisign=a;function u(g,y){const b=p(g);let A=y;if(typeof b.TxnSignature!="string"||!b.TxnSignature)throw new Error("Transaction is missing a signature, TxnSignature");if(!A){if(typeof b.SigningPubKey!="string"||!b.SigningPubKey)throw new Error("Transaction is missing a public key, SigningPubKey");A=b.SigningPubKey}return(0,s.verify)((0,r.encodeForSigning)(b),b.TxnSignature,A)}Ds.verifySignature=u;function c(g){const y=JSON.stringify(Object.assign(Object.assign({},g[0]),{Signers:null}));if(g.slice(1).some(b=>JSON.stringify(Object.assign(Object.assign({},b),{Signers:null}))!==y))throw new i.ValidationError("txJSON is not the same for all signedTransactions")}function l(g){const y=g.flatMap(b=>{var A;return(A=b.Signers)!==null&&A!==void 0?A:[]}).sort(d);return Object.assign(Object.assign({},g[0]),{Signers:y})}function d(g,y){return h(g.Signer.Account).comparedTo(h(y.Signer.Account))}const f=16;function h(g){const y=(0,e.bytesToHex)((0,n.decodeAccountID)(g));return new t.BigNumber(y,f)}function p(g){return typeof g=="object"?(0,r.decode)((0,r.encode)(g)):(0,r.decode)(g)}return Ds}var wb;function Fd(){if(wb)return _s;wb=1;var e=_s&&_s.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(_s,"__esModule",{value:!0}),_s.Wallet=void 0;const t=h_(),n=p_(),r=g_(),s=Ve(),i=e(Nn()),o=Rn(),a=fr(),u=ao(),c=e($g()),l=Oe(),d=zd(),f=gS(),h=AS(),p=TS(),g=IS(),y=_S(),b=c.default.ed25519,A="m/44'/144'/0'/0/0";function E(D){if(!(D.privateKey instanceof Uint8Array))throw new l.ValidationError("Unable to derive privateKey from mnemonic input");if(!(D.publicKey instanceof Uint8Array))throw new l.ValidationError("Unable to derive publicKey from mnemonic input")}let _=class Li{constructor(L,x,j={}){this.publicKey=L,this.privateKey=x,this.classicAddress=j.masterAddress?(0,f.ensureClassicAddress)(j.masterAddress):(0,u.deriveAddress)(L),this.seed=j.seed}get address(){return this.classicAddress}static generate(L=b){if(!Object.values(c.default).includes(L))throw new l.ValidationError("Invalid cryptographic signing algorithm");const x=(0,u.generateSeed)({algorithm:L});return Li.fromSeed(x,{algorithm:L})}static fromSeed(L,x={}){return Li.deriveWallet(L,{algorithm:x.algorithm,masterAddress:x.masterAddress})}static fromEntropy(L,x={}){var j;const V=(j=x.algorithm)!==null&&j!==void 0?j:b,Y={entropy:Uint8Array.from(L),algorithm:V},q=(0,u.generateSeed)(Y);return Li.deriveWallet(q,{algorithm:V,masterAddress:x.masterAddress})}static fromMnemonic(L,x={}){var j;if(x.mnemonicEncoding==="rfc1751")return Li.fromRFC1751Mnemonic(L,{masterAddress:x.masterAddress,algorithm:x.algorithm});if(!(0,n.validateMnemonic)(L,r.wordlist))throw new l.ValidationError("Unable to parse the given mnemonic using bip39 encoding");const V=(0,n.mnemonicToSeedSync)(L),q=t.HDKey.fromMasterSeed(V).derive((j=x.derivationPath)!==null&&j!==void 0?j:A);E(q);const R=(0,s.bytesToHex)(q.publicKey),v=(0,s.bytesToHex)(q.privateKey);return new Li(R,`00${v}`,{masterAddress:x.masterAddress})}static fromRFC1751Mnemonic(L,x){const j=(0,g.rfc1751MnemonicToKey)(L);let V;x.algorithm===c.default.ed25519?V="ed25519":V="secp256k1";const Y=(0,o.encodeSeed)(j,V);return Li.fromSeed(Y,{masterAddress:x.masterAddress,algorithm:x.algorithm})}static deriveWallet(L,x={}){var j;const{publicKey:V,privateKey:Y}=(0,u.deriveKeypair)(L,{algorithm:(j=x.algorithm)!==null&&j!==void 0?j:b});return new Li(V,Y,{seed:L,masterAddress:x.masterAddress})}sign(L,x){let j=!1;typeof x=="string"&&x.startsWith("X")?j=x:x&&(j=this.classicAddress);const V=(0,h.omitBy)(Object.assign({},L),R=>R==null);if(V.TxnSignature||V.Signers)throw new l.ValidationError('txJSON must not contain "TxnSignature" or "Signers" properties');I(V),(0,d.validate)(V);const Y=Object.assign({},V);if(Y.SigningPubKey=j?"":this.publicKey,j){const R={Account:j,SigningPubKey:this.publicKey,TxnSignature:S(Y,this.privateKey,j)};Y.Signers=[{Signer:R}]}else Y.TxnSignature=S(Y,this.privateKey);const q=(0,a.encode)(Y);return{tx_blob:q,hash:(0,p.hashSignedTx)(q)}}verifyTransaction(L){return(0,y.verifySignature)(L,this.publicKey)}getXAddress(L=!1,x=!1){return(0,o.classicAddressToXAddress)(this.classicAddress,L,x)}};_s.Wallet=_,_.fromSecret=_.fromSeed;function S(D,L,x){if(x){const j=(0,o.isValidXAddress)(x)?(0,o.xAddressToClassicAddress)(x).classicAddress:x;return(0,u.sign)((0,a.encodeForMultisigning)(D,j),L)}return(0,u.sign)((0,a.encodeForSigning)(D),L)}function I(D){D.TransactionType==="Payment"&&typeof D.Amount!="string"&&D.Amount.value.includes(".")&&D.Amount.value.endsWith("0")&&(D.Amount=Object.assign({},D.Amount),D.Amount.value=new i.default(D.Amount.value).toString())}return _s}var xn={},cl={exports:{}},bb;function $_(){return bb||(bb=1,(function(e,t){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof globalThis<"u"&&globalThis,r=(function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i})();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof i<"u"&&i||{},u={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function c(v){return v&&DataView.prototype.isPrototypeOf(v)}if(u.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(v){return v&&l.indexOf(Object.prototype.toString.call(v))>-1};function f(v){if(typeof v!="string"&&(v=String(v)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(v)||v==="")throw new TypeError('Invalid character in header field name: "'+v+'"');return v.toLowerCase()}function h(v){return typeof v!="string"&&(v=String(v)),v}function p(v){var T={next:function(){var m=v.shift();return{done:m===void 0,value:m}}};return u.iterable&&(T[Symbol.iterator]=function(){return T}),T}function g(v){this.map={},v instanceof g?v.forEach(function(T,m){this.append(m,T)},this):Array.isArray(v)?v.forEach(function(T){if(T.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+T.length);this.append(T[0],T[1])},this):v&&Object.getOwnPropertyNames(v).forEach(function(T){this.append(T,v[T])},this)}g.prototype.append=function(v,T){v=f(v),T=h(T);var m=this.map[v];this.map[v]=m?m+", "+T:T},g.prototype.delete=function(v){delete this.map[f(v)]},g.prototype.get=function(v){return v=f(v),this.has(v)?this.map[v]:null},g.prototype.has=function(v){return this.map.hasOwnProperty(f(v))},g.prototype.set=function(v,T){this.map[f(v)]=h(T)},g.prototype.forEach=function(v,T){for(var m in this.map)this.map.hasOwnProperty(m)&&v.call(T,this.map[m],m,this)},g.prototype.keys=function(){var v=[];return this.forEach(function(T,m){v.push(m)}),p(v)},g.prototype.values=function(){var v=[];return this.forEach(function(T){v.push(T)}),p(v)},g.prototype.entries=function(){var v=[];return this.forEach(function(T,m){v.push([m,T])}),p(v)},u.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function y(v){if(!v._noBody){if(v.bodyUsed)return Promise.reject(new TypeError("Already read"));v.bodyUsed=!0}}function b(v){return new Promise(function(T,m){v.onload=function(){T(v.result)},v.onerror=function(){m(v.error)}})}function A(v){var T=new FileReader,m=b(T);return T.readAsArrayBuffer(v),m}function E(v){var T=new FileReader,m=b(T),w=/charset=([A-Za-z0-9_-]+)/.exec(v.type),N=w?w[1]:"utf-8";return T.readAsText(v,N),m}function _(v){for(var T=new Uint8Array(v),m=new Array(T.length),w=0;w<T.length;w++)m[w]=String.fromCharCode(T[w]);return m.join("")}function S(v){if(v.slice)return v.slice(0);var T=new Uint8Array(v.byteLength);return T.set(new Uint8Array(v)),T.buffer}function I(){return this.bodyUsed=!1,this._initBody=function(v){this.bodyUsed=this.bodyUsed,this._bodyInit=v,v?typeof v=="string"?this._bodyText=v:u.blob&&Blob.prototype.isPrototypeOf(v)?this._bodyBlob=v:u.formData&&FormData.prototype.isPrototypeOf(v)?this._bodyFormData=v:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(v)?this._bodyText=v.toString():u.arrayBuffer&&u.blob&&c(v)?(this._bodyArrayBuffer=S(v.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(v)||d(v))?this._bodyArrayBuffer=S(v):this._bodyText=v=Object.prototype.toString.call(v):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof v=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(v)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var v=y(this);if(v)return v;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var v=y(this);return v||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(u.blob)return this.blob().then(A);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var v=y(this);if(v)return v;if(this._bodyBlob)return E(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(_(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(j)}),this.json=function(){return this.text().then(JSON.parse)},this}var D=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function L(v){var T=v.toUpperCase();return D.indexOf(T)>-1?T:v}function x(v,T){if(!(this instanceof x))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');T=T||{};var m=T.body;if(v instanceof x){if(v.bodyUsed)throw new TypeError("Already read");this.url=v.url,this.credentials=v.credentials,T.headers||(this.headers=new g(v.headers)),this.method=v.method,this.mode=v.mode,this.signal=v.signal,!m&&v._bodyInit!=null&&(m=v._bodyInit,v.bodyUsed=!0)}else this.url=String(v);if(this.credentials=T.credentials||this.credentials||"same-origin",(T.headers||!this.headers)&&(this.headers=new g(T.headers)),this.method=L(T.method||this.method||"GET"),this.mode=T.mode||this.mode||null,this.signal=T.signal||this.signal||(function(){if("AbortController"in a){var C=new AbortController;return C.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&m)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(m),(this.method==="GET"||this.method==="HEAD")&&(T.cache==="no-store"||T.cache==="no-cache")){var w=/([?&])_=[^&]*/;if(w.test(this.url))this.url=this.url.replace(w,"$1_="+new Date().getTime());else{var N=/\?/;this.url+=(N.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}x.prototype.clone=function(){return new x(this,{body:this._bodyInit})};function j(v){var T=new FormData;return v.trim().split("&").forEach(function(m){if(m){var w=m.split("="),N=w.shift().replace(/\+/g," "),C=w.join("=").replace(/\+/g," ");T.append(decodeURIComponent(N),decodeURIComponent(C))}}),T}function V(v){var T=new g,m=v.replace(/\r?\n[\t ]+/g," ");return m.split("\r").map(function(w){return w.indexOf(`
`)===0?w.substr(1,w.length):w}).forEach(function(w){var N=w.split(":"),C=N.shift().trim();if(C){var O=N.join(":").trim();try{T.append(C,O)}catch(B){console.warn("Response "+B.message)}}}),T}I.call(x.prototype);function Y(v,T){if(!(this instanceof Y))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(T||(T={}),this.type="default",this.status=T.status===void 0?200:T.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=T.statusText===void 0?"":""+T.statusText,this.headers=new g(T.headers),this.url=T.url||"",this._initBody(v)}I.call(Y.prototype),Y.prototype.clone=function(){return new Y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},Y.error=function(){var v=new Y(null,{status:200,statusText:""});return v.ok=!1,v.status=0,v.type="error",v};var q=[301,302,303,307,308];Y.redirect=function(v,T){if(q.indexOf(T)===-1)throw new RangeError("Invalid status code");return new Y(null,{status:T,headers:{location:v}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(T,m){this.message=T,this.name=m;var w=Error(T);this.stack=w.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function R(v,T){return new Promise(function(m,w){var N=new x(v,T);if(N.signal&&N.signal.aborted)return w(new o.DOMException("Aborted","AbortError"));var C=new XMLHttpRequest;function O(){C.abort()}C.onload=function(){var P={statusText:C.statusText,headers:V(C.getAllResponseHeaders()||"")};N.url.indexOf("file://")===0&&(C.status<200||C.status>599)?P.status=200:P.status=C.status,P.url="responseURL"in C?C.responseURL:P.headers.get("X-Request-URL");var X="response"in C?C.response:C.responseText;setTimeout(function(){m(new Y(X,P))},0)},C.onerror=function(){setTimeout(function(){w(new TypeError("Network request failed"))},0)},C.ontimeout=function(){setTimeout(function(){w(new TypeError("Network request timed out"))},0)},C.onabort=function(){setTimeout(function(){w(new o.DOMException("Aborted","AbortError"))},0)};function B(P){try{return P===""&&a.location.href?a.location.href:P}catch{return P}}if(C.open(N.method,B(N.url),!0),N.credentials==="include"?C.withCredentials=!0:N.credentials==="omit"&&(C.withCredentials=!1),"responseType"in C&&(u.blob?C.responseType="blob":u.arrayBuffer&&(C.responseType="arraybuffer")),T&&typeof T.headers=="object"&&!(T.headers instanceof g||a.Headers&&T.headers instanceof a.Headers)){var W=[];Object.getOwnPropertyNames(T.headers).forEach(function(P){W.push(f(P)),C.setRequestHeader(P,h(T.headers[P]))}),N.headers.forEach(function(P,X){W.indexOf(X)===-1&&C.setRequestHeader(X,P)})}else N.headers.forEach(function(P,X){C.setRequestHeader(X,P)});N.signal&&(N.signal.addEventListener("abort",O),C.onreadystatechange=function(){C.readyState===4&&N.signal.removeEventListener("abort",O)}),C.send(typeof N._bodyInit>"u"?null:N._bodyInit)})}return R.polyfill=!0,a.fetch||(a.fetch=R,a.Headers=g,a.Request=x,a.Response=Y),o.Headers=g,o.Request=x,o.Response=Y,o.fetch=R,o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;t=s.fetch,t.default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t})(cl,cl.exports)),cl.exports}var of={},vb;function Z_(){return vb||(vb=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultFaucetPath=e.getFaucetHost=e.FaucetNetworkPaths=e.FaucetNetwork=void 0;const t=Oe();var n;(function(i){i.Testnet="faucet.altnet.rippletest.net",i.Devnet="faucet.devnet.rippletest.net",i.HooksV3Testnet="hooks-testnet-v3.xrpl-labs.com"})(n||(e.FaucetNetwork=n={})),e.FaucetNetworkPaths={[n.Testnet]:"/accounts",[n.Devnet]:"/accounts",[n.HooksV3Testnet]:"/accounts"};function r(i){const o=i.url;if(o.includes("hooks-testnet-v3"))return n.HooksV3Testnet;if(o.includes("altnet")||o.includes("testnet"))return n.Testnet;if(o.includes("sidechain-net2"))throw new t.XRPLFaucetError("Cannot fund an account on an issuing chain. Accounts must be created via the bridge.");if(o.includes("devnet"))return n.Devnet;throw new t.XRPLFaucetError("Faucet URL is not defined or inferrable.")}e.getFaucetHost=r;function s(i){return i===void 0?"/accounts":e.FaucetNetworkPaths[i]||"/accounts"}e.getDefaultFaucetPath=s})(of)),of}var Eb;function J_(){if(Eb)return xn;Eb=1;var e=xn&&xn.__awaiter||function(g,y,b,A){function E(_){return _ instanceof b?_:new b(function(S){S(_)})}return new(b||(b=Promise))(function(_,S){function I(x){try{L(A.next(x))}catch(j){S(j)}}function D(x){try{L(A.throw(x))}catch(j){S(j)}}function L(x){x.done?_(x.value):E(x.value).then(I,D)}L((A=A.apply(g,y||[])).next())})},t=xn&&xn.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(xn,"__esModule",{value:!0}),xn.requestFunding=xn.getStartingBalance=xn.generateWalletToFund=void 0;const n=t($_()),r=Rn(),s=Oe(),i=Z_(),o=Fd(),a=1,u=20;function c(g){return g&&(0,r.isValidClassicAddress)(g.classicAddress)?g:o.Wallet.generate()}xn.generateWalletToFund=c;function l(g,y){return e(this,void 0,void 0,function*(){let b=0;try{b=Number(yield g.getXrpBalance(y))}catch{}return b})}xn.getStartingBalance=l;function d(g,y,b,A,E){var _,S,I;return e(this,void 0,void 0,function*(){const D=(_=g.faucetHost)!==null&&_!==void 0?_:(0,i.getFaucetHost)(y);if(!D)throw new s.XRPLFaucetError("No faucet hostname could be derived");const L=(S=g.faucetPath)!==null&&S!==void 0?S:(0,i.getDefaultFaucetPath)(D),x=yield(0,n.default)(`https://${D}${L}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)}),j=yield x.json();if(x.ok&&(!((I=x.headers.get("Content-Type"))===null||I===void 0)&&I.startsWith("application/json"))){const V=j.account.classicAddress;return f(y,V,A,b)}return h(x,j)})}xn.requestFunding=d;function f(g,y,b,A){return e(this,void 0,void 0,function*(){if(!y)return Promise.reject(new s.XRPLFaucetError("The faucet account is undefined"));try{const E=yield p(g,y,A);if(E>A)return{wallet:b,balance:E};throw new s.XRPLFaucetError(`Unable to fund address with faucet after waiting ${a*u} seconds`)}catch(E){throw E instanceof Error?new s.XRPLFaucetError(E.message):E}})}function h(g,y){return e(this,void 0,void 0,function*(){return Promise.reject(new s.XRPLFaucetError(`Request failed: ${JSON.stringify({body:y||{},contentType:g.headers.get("Content-Type"),statusCode:g.status})}`))})}function p(g,y,b){return e(this,void 0,void 0,function*(){return new Promise((A,E)=>{let _=u;const S=setInterval(()=>e(this,void 0,void 0,function*(){_<0?(clearInterval(S),A(b)):_-=1;try{let I;try{I=Number(yield g.getXrpBalance(y))}catch{}I>b&&(clearInterval(S),A(I))}catch(I){clearInterval(S),I instanceof Error&&E(new s.XRPLFaucetError(`Unable to check if the address ${y} balance has increased. Error: ${I.message}`)),E(I)}}),a*1e3)})})}return xn}var xs={},ul={},Ab;function eO(){if(Ab)return ul;Ab=1,Object.defineProperty(ul,"__esModule",{value:!0});const e=Tg();class t extends e.EventEmitter{constructor(r,s,i){super(),this.ws=new WebSocket(r),this.ws.onclose=o=>{let a;o.reason&&(a=new TextEncoder().encode(o.reason)),this.emit("close",o.code,a)},this.ws.onopen=()=>{this.emit("open")},this.ws.onerror=o=>{this.emit("error",o)},this.ws.onmessage=o=>{this.emit("message",o.data)}}get readyState(){return this.ws.readyState}close(r,s){this.readyState===1&&this.ws.close(r,s)}send(r){this.ws.send(r)}}return t.CONNECTING=0,t.OPEN=1,t.CLOSING=2,t.CLOSED=3,ul.default=t,ul}var Mo={},Sb;function tO(){if(Sb)return Mo;Sb=1;var e=Mo&&Mo.__awaiter||function(n,r,s,i){function o(a){return a instanceof s?a:new s(function(u){u(a)})}return new(s||(s=Promise))(function(a,u){function c(f){try{d(i.next(f))}catch(h){u(h)}}function l(f){try{d(i.throw(f))}catch(h){u(h)}}function d(f){f.done?a(f.value):o(f.value).then(c,l)}d((i=i.apply(n,r||[])).next())})};Object.defineProperty(Mo,"__esModule",{value:!0});let t=class{constructor(){this.promisesAwaitingConnection=[]}resolveAllAwaiting(){this.promisesAwaitingConnection.map(({resolve:r})=>r()),this.promisesAwaitingConnection=[]}rejectAllAwaiting(r){this.promisesAwaitingConnection.map(({reject:s})=>s(r)),this.promisesAwaitingConnection=[]}awaitConnection(){return e(this,void 0,void 0,function*(){return new Promise((r,s)=>{this.promisesAwaitingConnection.push({resolve:r,reject:s})})})}};return Mo.default=t,Mo}var ll={},Tb;function nO(){if(Tb)return ll;Tb=1,Object.defineProperty(ll,"__esModule",{value:!0});const e=100,t=1e3;let n=class{constructor(s={}){var i,o;this.factor=2,this.numAttempts=0,this.ms=(i=s.min)!==null&&i!==void 0?i:e,this.max=(o=s.max)!==null&&o!==void 0?o:t}get attempts(){return this.numAttempts}duration(){const s=this.ms*Math.pow(this.factor,this.numAttempts);return this.numAttempts+=1,Math.floor(Math.min(s,this.max))}reset(){this.numAttempts=0}};return ll.default=n,ll}var No={},Mb;function rO(){if(Mb)return No;Mb=1;var e=No&&No.__awaiter||function(r,s,i,o){function a(u){return u instanceof i?u:new i(function(c){c(u)})}return new(i||(i=Promise))(function(u,c){function l(h){try{f(o.next(h))}catch(p){c(p)}}function d(h){try{f(o.throw(h))}catch(p){c(p)}}function f(h){h.done?u(h.value):a(h.value).then(l,d)}f((o=o.apply(r,s||[])).next())})};Object.defineProperty(No,"__esModule",{value:!0});const t=Oe();let n=class{constructor(){this.nextId=0,this.promisesAwaitingResponse=new Map}addPromise(s,i){return e(this,void 0,void 0,function*(){return new Promise((o,a)=>{this.promisesAwaitingResponse.set(s,{resolve:o,reject:a,timer:i})})})}resolve(s,i){const o=this.promisesAwaitingResponse.get(s);if(o==null)throw new t.XrplError(`No existing promise with id ${s}`,{type:"resolve",response:i});clearTimeout(o.timer),o.resolve(i),this.deletePromise(s)}reject(s,i){const o=this.promisesAwaitingResponse.get(s);if(o==null)throw new t.XrplError(`No existing promise with id ${s}`,{type:"reject",error:i});clearTimeout(o.timer),o.reject(i),this.deletePromise(s)}rejectAll(s){this.promisesAwaitingResponse.forEach((i,o,a)=>{this.reject(o,s),this.deletePromise(o)})}createRequest(s,i){let o;s.id==null?(o=this.nextId,this.nextId+=1):o=s.id;const a=JSON.stringify(Object.assign(Object.assign({},s),{id:o})),u=setTimeout(()=>{this.reject(o,new t.TimeoutError(`Timeout for request: ${JSON.stringify(s)} with id ${o}`,s))},i);if(u.unref&&u.unref(),this.promisesAwaitingResponse.has(o))throw clearTimeout(u),new t.XrplError(`Response with id '${o}' is already pending`,s);const c=new Promise((l,d)=>{this.promisesAwaitingResponse.set(o,{resolve:l,reject:d,timer:u})});return[o,a,c]}handleResponse(s){var i,o;if(s.id==null||!(typeof s.id=="string"||typeof s.id=="number"))throw new t.ResponseFormatError("valid id not found in response",s);if(this.promisesAwaitingResponse.has(s.id)){if(s.status==null){const a=new t.ResponseFormatError("Response has no status");this.reject(s.id,a)}if(s.status==="error"){const a=s,u=new t.RippledError((i=a.error_message)!==null&&i!==void 0?i:a.error,a);this.reject(s.id,u);return}if(s.status!=="success"){const a=new t.ResponseFormatError(`unrecognized response.status: ${(o=s.status)!==null&&o!==void 0?o:""}`,s);this.reject(s.id,a);return}delete s.status,this.resolve(s.id,s)}}deletePromise(s){this.promisesAwaitingResponse.delete(s)}};return No.default=n,No}var Nb;function iO(){return Nb||(Nb=1,(function(e){var t=xs&&xs.__awaiter||function(y,b,A,E){function _(S){return S instanceof A?S:new A(function(I){I(S)})}return new(A||(A=Promise))(function(S,I){function D(j){try{x(E.next(j))}catch(V){I(V)}}function L(j){try{x(E.throw(j))}catch(V){I(V)}}function x(j){j.done?S(j.value):_(j.value).then(D,L)}x((E=E.apply(y,b||[])).next())})},n=xs&&xs.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0}),e.Connection=e.INTENTIONAL_DISCONNECT_CODE=void 0;const r=Ve(),s=n(eO()),i=Tg(),o=Oe(),a=n(tO()),u=n(nO()),c=n(rO()),l=60,d=20,f=5;e.INTENTIONAL_DISCONNECT_CODE=4e3;function h(y,b){const A={agent:b.agent};b.headers&&(A.headers=b.headers),b.authorization!=null&&(A.headers=Object.assign(Object.assign({},A.headers),{Authorization:`Basic ${btoa(b.authorization)}`}));const E=Object.assign({},A);return new s.default(y,E)}function p(y,b){return t(this,void 0,void 0,function*(){return new Promise((A,E)=>{y.send(b,_=>{_?E(new o.DisconnectedError(_.message,_)):A()})})})}class g extends i.EventEmitter{constructor(b,A={}){super(),this.ws=null,this.reconnectTimeoutID=null,this.heartbeatIntervalID=null,this.retryConnectionBackoff=new u.default({min:100,max:l*1e3}),this.requestManager=new c.default,this.connectionManager=new a.default,this.trace=()=>{},this.url=b,this.config=Object.assign({timeout:d*1e3,connectionTimeout:f*1e3},A),typeof A.trace=="function"?this.trace=A.trace:A.trace&&(this.trace=console.log)}get state(){return this.ws?this.ws.readyState:s.default.CLOSED}get shouldBeConnected(){return this.ws!==null}isConnected(){return this.state===s.default.OPEN}connect(){return t(this,void 0,void 0,function*(){if(this.isConnected())return Promise.resolve();if(this.state===s.default.CONNECTING)return this.connectionManager.awaitConnection();if(!this.url)return Promise.reject(new o.ConnectionError("Cannot connect because no server was specified"));if(this.ws!=null)return Promise.reject(new o.XrplError("Websocket connection never cleaned up.",{state:this.state}));const b=setTimeout(()=>{this.onConnectionFailed(new o.ConnectionError(`Error: connect() timed out after ${this.config.connectionTimeout} ms. If your internet connection is working, the rippled server may be blocked or inaccessible. You can also try setting the 'connectionTimeout' option in the Client constructor.`))},this.config.connectionTimeout);if(this.ws=h(this.url,this.config),this.ws==null)throw new o.XrplError("Connect: created null websocket");return this.ws.on("error",A=>this.onConnectionFailed(A)),this.ws.on("error",()=>clearTimeout(b)),this.ws.on("close",A=>this.onConnectionFailed(A)),this.ws.on("close",()=>clearTimeout(b)),this.ws.once("open",()=>{this.onceOpen(b)}),this.connectionManager.awaitConnection()})}disconnect(){return t(this,void 0,void 0,function*(){return this.clearHeartbeatInterval(),this.reconnectTimeoutID!==null&&(clearTimeout(this.reconnectTimeoutID),this.reconnectTimeoutID=null),this.state===s.default.CLOSED||this.ws==null?Promise.resolve(void 0):new Promise(b=>{this.ws==null&&b(void 0),this.ws!=null&&this.ws.once("close",A=>b(A)),this.ws!=null&&this.state!==s.default.CLOSING&&this.ws.close(e.INTENTIONAL_DISCONNECT_CODE)})})}reconnect(){return t(this,void 0,void 0,function*(){this.emit("reconnect"),yield this.disconnect(),yield this.connect()})}request(b,A){return t(this,void 0,void 0,function*(){if(!this.shouldBeConnected||this.ws==null)throw new o.NotConnectedError(JSON.stringify(b),b);const[E,_,S]=this.requestManager.createRequest(b,A??this.config.timeout);return this.trace("send",_),p(this.ws,_).catch(I=>{this.requestManager.reject(E,I)}),S})}getUrl(){var b;return(b=this.url)!==null&&b!==void 0?b:""}onMessage(b){this.trace("receive",b);let A;try{A=JSON.parse(b)}catch(E){E instanceof Error&&this.emit("error","badMessage",E.message,b);return}if(A.type==null&&A.error){this.emit("error",A.error,A.error_message,A);return}if(A.type&&this.emit(A.type,A),A.type==="response")try{this.requestManager.handleResponse(A)}catch(E){E instanceof Error?this.emit("error","badMessage",E.message,b):this.emit("error","badMessage",E,E)}}onceOpen(b){return t(this,void 0,void 0,function*(){if(this.ws==null)throw new o.XrplError("onceOpen: ws is null");this.ws.removeAllListeners(),clearTimeout(b),this.ws.on("message",A=>this.onMessage(A)),this.ws.on("error",A=>this.emit("error","websocket",A.message,A)),this.ws.once("close",(A,E)=>{if(this.ws==null)throw new o.XrplError("onceClose: ws is null");this.clearHeartbeatInterval(),this.requestManager.rejectAll(new o.DisconnectedError(`websocket was closed, ${E?(0,r.hexToString)((0,r.bytesToHex)(E)):""}`)),this.ws.removeAllListeners(),this.ws=null,A===void 0?this.emit("disconnected",1011):this.emit("disconnected",A),A!==e.INTENTIONAL_DISCONNECT_CODE&&A!==void 0&&this.intentionalDisconnect()});try{this.retryConnectionBackoff.reset(),this.startHeartbeatInterval(),this.connectionManager.resolveAllAwaiting(),this.emit("connected")}catch(A){A instanceof Error&&(this.connectionManager.rejectAllAwaiting(A),yield this.disconnect().catch(()=>{}))}})}intentionalDisconnect(){const b=this.retryConnectionBackoff.duration();this.trace("reconnect",`Retrying connection in ${b}ms.`),this.emit("reconnecting",this.retryConnectionBackoff.attempts),this.reconnectTimeoutID=setTimeout(()=>{this.reconnect().catch(A=>{this.emit("error","reconnect",A.message,A)})},b)}clearHeartbeatInterval(){this.heartbeatIntervalID&&clearInterval(this.heartbeatIntervalID)}startHeartbeatInterval(){this.clearHeartbeatInterval(),this.heartbeatIntervalID=setInterval(()=>{this.heartbeat()},this.config.timeout)}heartbeat(){return t(this,void 0,void 0,function*(){this.request({command:"ping"}).catch(()=>t(this,void 0,void 0,function*(){return this.reconnect().catch(b=>{this.emit("error","reconnect",b.message,b)})}))})}onConnectionFailed(b){this.ws&&(this.ws.removeAllListeners(),this.ws.on("error",()=>{}),this.ws.close(),this.ws=null),typeof b=="number"?this.connectionManager.rejectAllAwaiting(new o.NotConnectedError(`Connection failed with code ${b}.`,{code:b})):b?.message?this.connectionManager.rejectAllAwaiting(new o.NotConnectedError(b.message,b)):this.connectionManager.rejectAllAwaiting(new o.NotConnectedError("Connection failed."))}}e.Connection=g})(xs)),xs}var Kr={},Ib;function sO(){if(Ib)return Kr;Ib=1;var e=Kr&&Kr.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.handleStreamPartialPayment=Kr.handlePartialPayment=void 0;const t=e(Nn()),n=fr(),r=zd(),s=oo(),i=2001;function o(p,g){if(typeof p=="string"&&typeof g=="string")return p===g;if(typeof p=="string"||typeof g=="string")return!1;const y=new t.default(p.value),b=new t.default(g.value);return p.currency===g.currency&&p.issuer===g.issuer&&y.isEqualTo(b)}function a(p,g){var y;if(p==null||g==null||p.TransactionType!=="Payment")return!1;let b=g;if(typeof b=="string"){if(b==="unavailable")return!1;b=(0,n.decode)(b)}if(!(typeof p.Flags=="number"?(0,s.isFlagEnabled)(p.Flags,r.PaymentFlags.tfPartialPayment):(y=p.Flags)===null||y===void 0?void 0:y.tfPartialPayment))return!1;const E=b.delivered_amount,_=p.Amount;return E===void 0?!1:!o(E,_)}function u(p){return a(p.result,p.result.meta)}function c(p){return a(p.result.tx_json,p.result.metadata)}function l(p){const{transactions:g}=p.result;return g.some(b=>a(b.tx,b.meta))}function d(p,g){switch(p){case"tx":return u(g);case"transaction_entry":return c(g);case"account_tx":return l(g);default:return!1}}function f(p,g){var y;if(d(p,g)){const b=(y=g.warnings)!==null&&y!==void 0?y:[],A={id:i,message:"This response contains a Partial Payment"};b.push(A),g.warnings=b}}Kr.handlePartialPayment=f;function h(p,g){var y;if(a(p.transaction,p.meta)){const b=(y=p.warnings)!==null&&y!==void 0?y:[],A={id:i,message:"This response contains a Partial Payment"};b.push(A),p.warnings=b,g("Partial payment received",JSON.stringify(p))}}return Kr.handleStreamPartialPayment=h,Kr}var _b;function oO(){if(_b)return ns;_b=1;var e=ns&&ns.__awaiter||function(S,I,D,L){function x(j){return j instanceof D?j:new D(function(V){V(j)})}return new(D||(D=Promise))(function(j,V){function Y(v){try{R(L.next(v))}catch(T){V(T)}}function q(v){try{R(L.throw(v))}catch(T){V(T)}}function R(v){v.done?j(v.value):x(v.value).then(Y,q)}R((L=L.apply(S,I||[])).next())})};Object.defineProperty(ns,"__esModule",{value:!0}),ns.Client=void 0;const t=Tg(),n=Oe(),r=Vg(),s=BI(),i=u_(),o=l_(),a=d_(),u=Qg(),c=Fd(),l=J_(),d=iO(),f=sO();function h(S){switch(S){case"account_channels":return"channels";case"account_lines":return"lines";case"account_objects":return"account_objects";case"account_tx":return"transactions";case"account_offers":case"book_offers":return"offers";case"ledger_data":return"state";default:return null}}function p(S,I,D){return Math.min(Math.max(S,I),D)}const g=1.2,y="2",b=10,A=400,E=1e3;class _ extends t.EventEmitter{constructor(I,D={}){var L,x;if(super(),typeof I!="string"||!/wss?(?:\+unix)?:\/\//u.exec(I))throw new n.ValidationError("server URI must start with `wss://`, `ws://`, `wss+unix://`, or `ws+unix://`.");this.feeCushion=(L=D.feeCushion)!==null&&L!==void 0?L:g,this.maxFeeXRP=(x=D.maxFeeXRP)!==null&&x!==void 0?x:y,this.connection=new d.Connection(I,D),this.connection.on("error",(j,V,Y)=>{this.emit("error",j,V,Y)}),this.connection.on("reconnect",()=>{this.connection.on("connected",()=>this.emit("connected"))}),this.connection.on("disconnected",j=>{let V=j;V===d.INTENTIONAL_DISCONNECT_CODE&&(V=E),this.emit("disconnected",V)}),this.connection.on("ledgerClosed",j=>{this.emit("ledgerClosed",j)}),this.connection.on("transaction",j=>{(0,f.handleStreamPartialPayment)(j,this.connection.trace),this.emit("transaction",j)}),this.connection.on("validationReceived",j=>{this.emit("validationReceived",j)}),this.connection.on("manifestReceived",j=>{this.emit("manifestReceived",j)}),this.connection.on("peerStatusChange",j=>{this.emit("peerStatusChange",j)}),this.connection.on("consensusPhase",j=>{this.emit("consensusPhase",j)}),this.connection.on("path_find",j=>{this.emit("path_find",j)})}get url(){return this.connection.getUrl()}request(I){return e(this,void 0,void 0,function*(){const D=yield this.connection.request(Object.assign(Object.assign({},I),{account:I.account?(0,s.ensureClassicAddress)(I.account):void 0}));return(0,f.handlePartialPayment)(I.command,D),D})}requestNextPage(I,D){return e(this,void 0,void 0,function*(){if(!D.result.marker)return Promise.reject(new n.NotFoundError("response does not have a next page"));const L=Object.assign(Object.assign({},I),{marker:D.result.marker});return this.request(L)})}on(I,D){return super.on(I,D)}requestAll(I,D){return e(this,void 0,void 0,function*(){const L=D??h(I.command);if(!L)throw new n.ValidationError(`no collect key for command ${I.command}`);const x=I.limit==null?1/0:I.limit;let j=0,V=I.marker;const Y=[];do{const q=p(x-j,b,A),R=Object.assign(Object.assign({},I),{limit:q,marker:V}),v=yield this.connection.request(R),T=v.result;if(!(L in T))throw new n.XrplError(`${L} not in result`);const m=T[L];V=T.marker,Y.push(v),Array.isArray(m)&&(j+=m.length)}while(V&&j<x);return Y})}getServerInfo(){var I;return e(this,void 0,void 0,function*(){try{const D=yield this.request({command:"server_info"});this.networkID=(I=D.result.info.network_id)!==null&&I!==void 0?I:void 0,this.buildVersion=D.result.info.build_version}catch(D){console.error(D)}})}connect(){return e(this,void 0,void 0,function*(){return this.connection.connect().then(()=>e(this,void 0,void 0,function*(){yield this.getServerInfo(),this.emit("connected")}))})}disconnect(){return e(this,void 0,void 0,function*(){yield this.connection.disconnect()})}isConnected(){return this.connection.isConnected()}autofill(I,D){return e(this,void 0,void 0,function*(){const L=Object.assign({},I);(0,i.setValidAddresses)(L),(0,r.setTransactionFlagsToNumber)(L);const x=[];return L.NetworkID==null&&(L.NetworkID=(0,i.txNeedsNetworkID)(this)?this.networkID:void 0),L.Sequence==null&&x.push((0,i.setNextValidSequenceNumber)(this,L)),L.Fee==null&&x.push((0,i.calculateFeePerTransactionType)(this,L,D)),L.LastLedgerSequence==null&&x.push((0,i.setLatestValidatedLedgerSequence)(this,L)),L.TransactionType==="AccountDelete"&&x.push((0,i.checkAccountDeleteBlockers)(this,L)),Promise.all(x).then(()=>L)})}submit(I,D){return e(this,void 0,void 0,function*(){const L=yield(0,s.getSignedTx)(this,I,D);return(0,s.submitRequest)(this,L,D?.failHard)})}submitAndWait(I,D){return e(this,void 0,void 0,function*(){const L=yield(0,s.getSignedTx)(this,I,D),x=(0,s.getLastLedgerSequence)(L);if(x==null)throw new n.ValidationError("Transaction must contain a LastLedgerSequence value for reliable submission.");const j=yield(0,s.submitRequest)(this,L,D?.failHard),V=u.hashes.hashSignedTx(L);return(0,s.waitForFinalTransactionOutcome)(this,V,x,j.result.engine_result)})}prepareTransaction(I,D){return e(this,void 0,void 0,function*(){return this.autofill(I,D)})}getXrpBalance(I,D={}){var L;return e(this,void 0,void 0,function*(){const x={command:"account_info",account:I,ledger_index:(L=D.ledger_index)!==null&&L!==void 0?L:"validated",ledger_hash:D.ledger_hash},j=yield this.request(x);return(0,u.dropsToXrp)(j.result.account_data.Balance)})}getBalances(I,D={}){var L;return e(this,void 0,void 0,function*(){const x=[];let j=Promise.resolve(0);D.peer||(j=this.getXrpBalance(I,{ledger_hash:D.ledger_hash,ledger_index:D.ledger_index}));const V={command:"account_lines",account:I,ledger_index:(L=D.ledger_index)!==null&&L!==void 0?L:"validated",ledger_hash:D.ledger_hash,peer:D.peer,limit:D.limit},Y=this.requestAll(V);return yield Promise.all([j,Y]).then(([q,R])=>{const v=R.flatMap(T=>(0,o.formatBalances)(T.result.lines));q!==0&&x.push({currency:"XRP",value:q.toString()}),x.push(...v)}),x.slice(0,D.limit)})}getOrderbook(I,D,L={}){return e(this,void 0,void 0,function*(){(0,a.validateOrderbookOptions)(L);const x=(0,a.createBookOffersRequest)(I,D,L),j=yield(0,a.requestAllOffers)(this,x),V=yield(0,a.requestAllOffers)(this,(0,a.reverseRequest)(x)),Y=(0,a.extractOffers)(j),q=(0,a.extractOffers)(V),R=(0,a.combineOrders)(Y,q),{buy:v,sell:T}=(0,a.separateBuySellOrders)(R);return{buy:(0,a.sortAndLimitOffers)(v,L.limit),sell:(0,a.sortAndLimitOffers)(T,L.limit)}})}getLedgerIndex(){return e(this,void 0,void 0,function*(){return(yield this.request({command:"ledger",ledger_index:"validated"})).result.ledger_index})}fundWallet(I,D={}){return e(this,void 0,void 0,function*(){if(!this.isConnected())throw new n.RippledError("Client not connected, cannot call faucet");const L=!!I,x=I&&(0,u.isValidClassicAddress)(I.classicAddress)?I:c.Wallet.generate(),j={destination:x.classicAddress,xrpAmount:D.amount,usageContext:D.usageContext,userAgent:"xrpl.js"};let V=0;if(L)try{V=Number(yield this.getXrpBalance(x.classicAddress))}catch{}return(0,l.requestFunding)(D,this,V,x,j)})}}return ns.Client=_,ns}var nr={},af={},Oc={},Ob;function aO(){return Ob||(Ob=1,Object.defineProperty(Oc,"__esModule",{value:!0}),Oc.AMENDMENTS_ID=void 0,Oc.AMENDMENTS_ID="7DB0788C020F02780A673DC74757F23823FA3014C1866E72CC4CD8B226CD6EF4"),Oc}var Dc={},Db;function cO(){return Db||(Db=1,Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.FEE_SETTINGS_ID=void 0,Dc.FEE_SETTINGS_ID="4BC50C9B0D8515D3EAAE1E74B29A95804346C491EE1A95BF25E4AAB854A6A651"),Dc}var xc={},xb;function uO(){return xb||(xb=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.NEGATIVE_UNL_ID=void 0,xc.NEGATIVE_UNL_ID="2E8A59AA9D3B5B186B0B9E0F62E6C02587CA74A4D778938E957B6357D364B244"),xc}var Lc={},Lb;function lO(){if(Lb)return Lc;Lb=1,Object.defineProperty(Lc,"__esModule",{value:!0}),Lc.RippleStateFlags=void 0;var e;return(function(t){t[t.lsfLowReserve=65536]="lsfLowReserve",t[t.lsfHighReserve=131072]="lsfHighReserve",t[t.lsfLowAuth=262144]="lsfLowAuth",t[t.lsfHighAuth=524288]="lsfHighAuth",t[t.lsfLowNoRipple=1048576]="lsfLowNoRipple",t[t.lsfHighNoRipple=2097152]="lsfHighNoRipple",t[t.lsfLowFreeze=4194304]="lsfLowFreeze",t[t.lsfHighFreeze=8388608]="lsfHighFreeze",t[t.lsfAMMNode=16777216]="lsfAMMNode"})(e||(Lc.RippleStateFlags=e={})),Lc}var Cc={},Cb;function dO(){if(Cb)return Cc;Cb=1,Object.defineProperty(Cc,"__esModule",{value:!0}),Cc.SignerListFlags=void 0;var e;return(function(t){t[t.lsfOneOwnerCount=65536]="lsfOneOwnerCount"})(e||(Cc.SignerListFlags=e={})),Cc}var jb;function hO(){return jb||(jb=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SignerListFlags=e.RippleStateFlags=e.OfferFlags=e.NEGATIVE_UNL_ID=e.FEE_SETTINGS_ID=e.AMENDMENTS_ID=e.AccountRootFlags=void 0;const t=nS();Object.defineProperty(e,"AccountRootFlags",{enumerable:!0,get:function(){return t.AccountRootFlags}});const n=aO();Object.defineProperty(e,"AMENDMENTS_ID",{enumerable:!0,get:function(){return n.AMENDMENTS_ID}});const r=cO();Object.defineProperty(e,"FEE_SETTINGS_ID",{enumerable:!0,get:function(){return r.FEE_SETTINGS_ID}});const s=uO();Object.defineProperty(e,"NEGATIVE_UNL_ID",{enumerable:!0,get:function(){return s.NEGATIVE_UNL_ID}});const i=MS();Object.defineProperty(e,"OfferFlags",{enumerable:!0,get:function(){return i.OfferFlags}});const o=lO();Object.defineProperty(e,"RippleStateFlags",{enumerable:!0,get:function(){return o.RippleStateFlags}});const a=dO();Object.defineProperty(e,"SignerListFlags",{enumerable:!0,get:function(){return a.SignerListFlags}})})(af)),af}var cf={},Pb;function fO(){return Pb||(Pb=1,Object.defineProperty(cf,"__esModule",{value:!0})),cf}var uf={},kb;function pO(){return kb||(kb=1,Object.defineProperty(uf,"__esModule",{value:!0})),uf}var Rb;function gO(){return Rb||(Rb=1,(function(e){var t=nr&&nr.__createBinding||(Object.create?(function(o,a,u,c){c===void 0&&(c=u);var l=Object.getOwnPropertyDescriptor(a,u);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[u]}}),Object.defineProperty(o,c,l)}):(function(o,a,u,c){c===void 0&&(c=u),o[c]=a[u]})),n=nr&&nr.__setModuleDefault||(Object.create?(function(o,a){Object.defineProperty(o,"default",{enumerable:!0,value:a})}):function(o,a){o.default=a}),r=nr&&nr.__importStar||function(o){if(o&&o.__esModule)return o;var a={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&t(a,o,u);return n(a,o),a},s=nr&&nr.__exportStar||function(o,a){for(var u in o)u!=="default"&&!Object.prototype.hasOwnProperty.call(a,u)&&t(a,o,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.parseAccountRootFlags=e.setTransactionFlagsToNumber=e.LedgerEntry=void 0,e.LedgerEntry=r(hO());var i=Vg();Object.defineProperty(e,"setTransactionFlagsToNumber",{enumerable:!0,get:function(){return i.setTransactionFlagsToNumber}}),Object.defineProperty(e,"parseAccountRootFlags",{enumerable:!0,get:function(){return i.parseAccountRootFlags}}),s(fO(),e),s(zd(),e),s(pO(),e)})(nr)),nr}var Ls={},Cs={},jc={},zt={},Bb;function OS(){if(Bb)return zt;Bb=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.parseSecretString=zt.checkChecksum=zt.calculateChecksum=zt.secretToEntropy=zt.entropyToSecret=zt.randomSecret=zt.randomEntropy=void 0;const e=Ve();function t(){return(0,e.randomBytes)(16)}zt.randomEntropy=t;function n(u,c){return c*(u*2+1)%9}zt.calculateChecksum=n;function r(u,c,l){let d,f;if(typeof c=="string"){if(c.length!==6)throw new Error("value must have a length of 6");d=parseInt(c.slice(5),10),f=parseInt(c.slice(0,5),10)}else{if(typeof l!="number")throw new Error("checksum must be a number when value is a number");d=l,f=c}return f*(u*2+1)%9===d}zt.checkChecksum=r;function s(u){const c=new Array(Math.ceil(u.length/2)),l=Array.from(c,(d,f)=>{const h=u.slice(f*2,(f+1)*2),p=parseInt((0,e.bytesToHex)(h),16);return"0".repeat(5-String(p).length)+String(p)+String(n(f,p))});if(l.length!==8)throw new Error("Chucks must have 8 digits");return l}zt.entropyToSecret=s;function i(){return s(t())}zt.randomSecret=i;function o(u){return(0,e.concat)(u.map((c,l)=>{const d=Number(c.slice(0,5)),f=Number(c.slice(5));if(c.length!==6)throw new Error("Invalid secret: number invalid");if(!r(l,d,f))throw new Error("Invalid secret part: checksum invalid");const h=`0000${d.toString(16)}`.slice(-4);return(0,e.hexToBytes)(h)}))}zt.secretToEntropy=o;function a(u){const c=u.replace(/[^0-9]/gu,"");if(c.length!==48)throw new Error("Invalid secret string (should contain 8 blocks of 6 digits");return Array.from(new Array(8),(l,d)=>c.slice(d*6,(d+1)*6))}return zt.parseSecretString=a,zt}var Ub;function yO(){if(Ub)return jc;Ub=1,Object.defineProperty(jc,"__esModule",{value:!0}),jc.Account=void 0;const e=ao(),t=OS();let n=class{constructor(i){this._account={familySeed:"",address:"",keypair:{publicKey:"",privateKey:""}},typeof i=="string"?this._secret=(0,t.parseSecretString)(i):Array.isArray(i)?this._secret=i:i instanceof Uint8Array?this._secret=(0,t.entropyToSecret)(i):this._secret=(0,t.randomSecret)(),r(this._secret),this.derive()}getSecret(){return this._secret}getSecretString(){return this._secret.join(" ")}getAddress(){return this._account.address}getFamilySeed(){return this._account.familySeed}getKeypair(){return this._account.keypair}toString(){return this.getSecretString()}derive(){try{const i=(0,t.secretToEntropy)(this._secret);this._account.familySeed=(0,e.generateSeed)({entropy:i}),this._account.keypair=(0,e.deriveKeypair)(this._account.familySeed),this._account.address=(0,e.deriveAddress)(this._account.keypair.publicKey)}catch(i){let o="Unknown Error";throw i instanceof Error&&(o=i.message),new Error(o)}}};jc.Account=n;function r(s){if(s.length!==8)throw new Error("Secret must have 8 numbers");s.forEach(i=>{if(i.length!==6)throw new Error("Each secret number must be 6 digits")})}return jc}var zb;function mO(){return zb||(zb=1,(function(e){var t=Cs&&Cs.__createBinding||(Object.create?(function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}):(function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]})),n=Cs&&Cs.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(yO(),e),n(OS(),e)})(Cs)),Cs}var Fb;function wO(){if(Fb)return Ls;Fb=1;var e=Ls&&Ls.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.walletFromSecretNumbers=void 0;const t=mO(),n=e($g()),r=Fd();function s(i,o){var a;const u=new t.Account(i).getFamilySeed(),c={masterAddress:void 0,algorithm:void 0};return o===void 0?c.algorithm=n.default.secp256k1:(c.masterAddress=o.masterAddress,c.algorithm=(a=o.algorithm)!==null&&a!==void 0?a:n.default.secp256k1),r.Wallet.fromSecret(u,c)}return Ls.walletFromSecretNumbers=s,Ls}var Hb;function bO(){return Hb||(Hb=1,(function(e){var t=Lr&&Lr.__createBinding||(Object.create?(function(c,l,d,f){f===void 0&&(f=d);var h=Object.getOwnPropertyDescriptor(l,d);(!h||("get"in h?!l.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return l[d]}}),Object.defineProperty(c,f,h)}):(function(c,l,d,f){f===void 0&&(f=d),c[f]=l[d]})),n=Lr&&Lr.__exportStar||function(c,l){for(var d in c)d!=="default"&&!Object.prototype.hasOwnProperty.call(l,d)&&t(l,c,d)},r=Lr&&Lr.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.rfc1751MnemonicToKey=e.keyToRFC1751Mnemonic=e.walletFromSecretNumbers=e.Wallet=e.ECDSA=e.Client=void 0;var s=oO();Object.defineProperty(e,"Client",{enumerable:!0,get:function(){return s.Client}}),n(gO(),e),n(Qg(),e);var i=$g();Object.defineProperty(e,"ECDSA",{enumerable:!0,get:function(){return r(i).default}}),n(Oe(),e);var o=Fd();Object.defineProperty(e,"Wallet",{enumerable:!0,get:function(){return o.Wallet}});var a=wO();Object.defineProperty(e,"walletFromSecretNumbers",{enumerable:!0,get:function(){return a.walletFromSecretNumbers}});var u=IS();Object.defineProperty(e,"keyToRFC1751Mnemonic",{enumerable:!0,get:function(){return u.keyToRFC1751Mnemonic}}),Object.defineProperty(e,"rfc1751MnemonicToKey",{enumerable:!0,get:function(){return u.rfc1751MnemonicToKey}}),n(_S(),e)})(Lr)),Lr}bO();var ci={},vO=Object.defineProperty,DS=e=>{throw TypeError(e)},EO=(e,t,n)=>t in e?vO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Q=(e,t,n)=>EO(e,typeof t!="symbol"?t+"":t,n),AO=(e,t,n)=>t.has(e)||DS("Cannot "+n),dl=(e,t,n)=>(AO(e,t,"read from private field"),t.get(e)),lf=(e,t,n)=>t.has(e)?DS("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function aa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function xS(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var LS={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(u,c,l){this.fn=u,this.context=c,this.once=l||!1}function i(u,c,l,d,f){if(typeof l!="function")throw new TypeError("The listener must be a function");var h=new s(l,d||u,f),p=n?n+c:c;return u._events[p]?u._events[p].fn?u._events[p]=[u._events[p],h]:u._events[p].push(h):(u._events[p]=h,u._eventsCount++),u}function o(u,c){--u._eventsCount===0?u._events=new r:delete u._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],c,l;if(this._eventsCount===0)return u;for(l in c=this._events)t.call(c,l)&&u.push(n?l.slice(1):l);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},a.prototype.listeners=function(u){var c=n?n+u:u,l=this._events[c];if(!l)return[];if(l.fn)return[l.fn];for(var d=0,f=l.length,h=new Array(f);d<f;d++)h[d]=l[d].fn;return h},a.prototype.listenerCount=function(u){var c=n?n+u:u,l=this._events[c];return l?l.fn?1:l.length:0},a.prototype.emit=function(u,c,l,d,f,h){var p=n?n+u:u;if(!this._events[p])return!1;var g=this._events[p],y=arguments.length,b,A;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,l),!0;case 4:return g.fn.call(g.context,c,l,d),!0;case 5:return g.fn.call(g.context,c,l,d,f),!0;case 6:return g.fn.call(g.context,c,l,d,f,h),!0}for(A=1,b=new Array(y-1);A<y;A++)b[A-1]=arguments[A];g.fn.apply(g.context,b)}else{var E=g.length,_;for(A=0;A<E;A++)switch(g[A].once&&this.removeListener(u,g[A].fn,void 0,!0),y){case 1:g[A].fn.call(g[A].context);break;case 2:g[A].fn.call(g[A].context,c);break;case 3:g[A].fn.call(g[A].context,c,l);break;case 4:g[A].fn.call(g[A].context,c,l,d);break;default:if(!b)for(_=1,b=new Array(y-1);_<y;_++)b[_-1]=arguments[_];g[A].fn.apply(g[A].context,b)}}return!0},a.prototype.on=function(u,c,l){return i(this,u,c,l,!1)},a.prototype.once=function(u,c,l){return i(this,u,c,l,!0)},a.prototype.removeListener=function(u,c,l,d){var f=n?n+u:u;if(!this._events[f])return this;if(!c)return o(this,f),this;var h=this._events[f];if(h.fn)h.fn===c&&(!d||h.once)&&(!l||h.context===l)&&o(this,f);else{for(var p=0,g=[],y=h.length;p<y;p++)(h[p].fn!==c||d&&!h[p].once||l&&h[p].context!==l)&&g.push(h[p]);g.length?this._events[f]=g.length===1?g[0]:g:o(this,f)}return this},a.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&o(this,c)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a})(LS);var SO=LS.exports;const TO=aa(SO),li={mainnet:{id:"mainnet",name:"Mainnet",wss:"wss://xrplcluster.com",rpc:"https://xrplcluster.com",walletConnectId:"xrpl:0"},testnet:{id:"testnet",name:"Testnet",wss:"wss://s.altnet.rippletest.net:51233/",rpc:"https://testnet.xrpl-labs.com",walletConnectId:"xrpl:1"},devnet:{id:"devnet",name:"Devnet",wss:"wss://s.devnet.rippletest.net:51233/",rpc:"https://s.devnet.rippletest.net:51234/",walletConnectId:"xrpl:2"}};var un=(e=>(e.WALLET_NOT_FOUND="WALLET_NOT_FOUND",e.WALLET_NOT_INSTALLED="WALLET_NOT_INSTALLED",e.WALLET_NOT_AVAILABLE="WALLET_NOT_AVAILABLE",e.CONNECTION_FAILED="CONNECTION_FAILED",e.CONNECTION_REJECTED="CONNECTION_REJECTED",e.SIGN_FAILED="SIGN_FAILED",e.SIGN_REJECTED="SIGN_REJECTED",e.NETWORK_NOT_SUPPORTED="NETWORK_NOT_SUPPORTED",e.NETWORK_MISMATCH="NETWORK_MISMATCH",e.NOT_CONNECTED="NOT_CONNECTED",e.ALREADY_CONNECTED="ALREADY_CONNECTED",e.UNSUPPORTED_METHOD="UNSUPPORTED_METHOD",e.UNKNOWN_ERROR="UNKNOWN_ERROR",e))(un||{});class sn extends Error{constructor(t,n,r){super(n),this.name="WalletError",this.code=t,this.originalError=r,Error.captureStackTrace&&Error.captureStackTrace(this,sn)}toJSON(){return{name:this.name,code:this.code,message:this.message,stack:this.stack,originalError:this.originalError?{name:this.originalError.name,message:this.originalError.message,stack:this.originalError.stack}:void 0}}}const xe={notFound:e=>new sn(un.WALLET_NOT_FOUND,`Wallet with id "${e}" was not found. Make sure the adapter is registered.`),notInstalled:e=>new sn(un.WALLET_NOT_INSTALLED,`${e} is not installed. Please install the wallet extension or app.`),notAvailable:e=>new sn(un.WALLET_NOT_AVAILABLE,`${e} is not currently available.`),connectionFailed:(e,t)=>new sn(un.CONNECTION_FAILED,`Failed to connect to ${e}. ${t?.message||""}`,t),connectionRejected:e=>new sn(un.CONNECTION_REJECTED,`Connection to ${e} was rejected by the user.`),signFailed:e=>new sn(un.SIGN_FAILED,`Failed to sign transaction. ${e?.message||""}`,e),signRejected:()=>new sn(un.SIGN_REJECTED,"Transaction signing was rejected by the user."),networkNotSupported:(e,t)=>new sn(un.NETWORK_NOT_SUPPORTED,`Network "${e}" is not supported by ${t}.`),networkMismatch:(e,t)=>new sn(un.NETWORK_MISMATCH,`Network mismatch. Expected "${e}" but wallet is connected to "${t}".`),notConnected:()=>new sn(un.NOT_CONNECTED,"No wallet is currently connected. Please connect a wallet first."),alreadyConnected:e=>new sn(un.ALREADY_CONNECTED,`${e} is already connected. Disconnect first before connecting to another wallet.`),unsupportedMethod:e=>new sn(un.UNSUPPORTED_METHOD,e),unknown:(e,t)=>new sn(un.UNKNOWN_ERROR,e,t)},Vb={debug:0,info:1,warn:2,error:3,none:4};function MO(){var e;return typeof process<"u"&&(e=ci)!=null&&e.NODE_ENV?!1:typeof window<"u"?window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.includes("dev"):!1}class Zg{constructor(t={}){this.level=t.level||(MO()?"debug":"warn"),this.prefix=t.prefix||"[xrpl-connect]"}shouldLog(t){return Vb[t]>=Vb[this.level]}formatMessage(t,n){const r=new Date().toISOString();return`${this.prefix} [${t.toUpperCase()}] ${r} - ${n}`}debug(t,...n){this.shouldLog("debug")&&console.debug(this.formatMessage("debug",t),...n)}info(t,...n){this.shouldLog("info")&&console.info(this.formatMessage("info",t),...n)}warn(t,...n){this.shouldLog("warn")&&console.warn(this.formatMessage("warn",t),...n)}error(t,...n){this.shouldLog("error")&&console.error(this.formatMessage("error",t),...n)}setLevel(t){this.level=t}getLevel(){return this.level}}function ju(e,t){return new Zg({prefix:e,level:t})}const Vi=ju("[Storage]");class CS{constructor(){this.prefix="xrpl-connect:"}async get(t){try{return typeof window>"u"||!window.localStorage?null:window.localStorage.getItem(this.prefix+t)}catch(n){return Vi.warn("Failed to read from localStorage:",n),null}}async set(t,n){try{if(typeof window>"u"||!window.localStorage)return;window.localStorage.setItem(this.prefix+t,n)}catch(r){Vi.warn("Failed to write to localStorage:",r)}}async remove(t){try{if(typeof window>"u"||!window.localStorage)return;window.localStorage.removeItem(this.prefix+t)}catch(n){Vi.warn("Failed to remove from localStorage:",n)}}async clear(){try{if(typeof window>"u"||!window.localStorage)return;const t=[];for(let n=0;n<window.localStorage.length;n++){const r=window.localStorage.key(n);r!=null&&r.startsWith(this.prefix)&&t.push(r)}t.forEach(n=>window.localStorage.removeItem(n))}catch(t){Vi.warn("Failed to clear localStorage:",t)}}}class jS{constructor(){this.storage=new Map}async get(t){return this.storage.get(t)||null}async set(t,n){this.storage.set(t,n)}async remove(t){this.storage.delete(t)}async clear(){this.storage.clear()}}var Io;let PS=(Io=class{constructor(e){this.adapter=e||(typeof window<"u"&&window.localStorage?new CS:new jS)}async saveState(e){try{const t=JSON.stringify(e);await this.adapter.set(Io.STATE_KEY,t)}catch(t){Vi.warn("Failed to save state:",t)}}async loadState(){try{const e=await this.adapter.get(Io.STATE_KEY);return e?JSON.parse(e):null}catch(e){return Vi.warn("Failed to load state:",e),null}}async clearState(){try{await this.adapter.remove(Io.STATE_KEY)}catch(e){Vi.warn("Failed to clear state:",e)}}async clear(){try{await this.adapter.clear()}catch(e){Vi.warn("Failed to clear storage:",e)}}},Io.STATE_KEY="wallet-state",Io);const kS={STATE_MAX_AGE:10080*60*1e3};class NO extends TO{constructor(t){super(),this.adapters=new Map,this.currentAdapter=null,this.currentAccount=null,this.options=t,this.logger=new Zg(t.logger),this.storage=new PS(t.storage),t.adapters.forEach(n=>{this.adapters.set(n.id,n),this.logger.debug(`Registered adapter: ${n.name} (${n.id})`)}),t.autoConnect&&this.autoConnect()}async autoConnect(){try{const t=await this.storage.loadState();t&&this.isStateValid(t)&&(this.logger.debug("Attempting auto-reconnect",t),await this.reconnect())}catch(t){this.logger.warn("Auto-connect failed:",t)}}isStateValid(t){return Date.now()-t.timestamp<kS.STATE_MAX_AGE}async connect(t,n){this.logger.info(`Connecting to wallet: ${t}`);const r=this.adapters.get(t);if(!r)throw xe.notFound(t);if(this.currentAdapter&&this.currentAdapter.id!==t)throw xe.alreadyConnected(this.currentAdapter.name);try{if(!await r.isAvailable())throw xe.notAvailable(r.name);const s={...n,network:n?.network||this.options.network},i=await r.connect(s);this.currentAdapter=r,this.currentAccount=i;const o={walletId:r.id,account:i,network:i.network,timestamp:Date.now()};return await this.storage.saveState(o),r.on&&(r.on("disconnect",()=>this.handleAdapterDisconnect()),r.on("accountChanged",a=>this.handleAccountChanged(a)),r.on("networkChanged",a=>this.handleNetworkChanged(a))),this.logger.info(`Connected to ${r.name}`,i),this.emit("connect",i),i}catch(s){throw this.logger.error(`Failed to connect to ${r.name}:`,s),xe.connectionFailed(r.name,s)}}async disconnect(){if(!this.currentAdapter){this.logger.warn("No wallet connected");return}const t=this.currentAdapter.name;this.logger.info(`Disconnecting from ${t}`);try{await this.currentAdapter.disconnect(),await this.cleanup(),this.logger.info(`Disconnected from ${t}`),this.emit("disconnect")}catch(n){throw this.logger.error(`Failed to disconnect from ${t}:`,n),n}}async reconnect(){const t=await this.storage.loadState();if(!t)return this.logger.debug("No stored state found for reconnection"),null;try{return await this.connect(t.walletId)}catch(n){return this.logger.warn("Reconnection failed:",n),await this.storage.clearState(),null}}async signAndSubmit(t,n=!0){if(!this.currentAdapter)throw xe.notConnected();this.logger.debug(`${n?"Signing and submitting":"Signing"} transaction`,t);try{const r=await this.currentAdapter.signAndSubmit(t,n);return this.logger.info(`Transaction ${n?"submitted":"signed"}`,r.hash||r.id),r}catch(r){throw this.logger.error(`Failed to ${n?"submit":"sign"} transaction:`,r),xe.signFailed(r)}}async signMessage(t){if(!this.currentAdapter)throw xe.notConnected();this.logger.debug("Signing message");try{const n=await this.currentAdapter.signMessage(t);return this.logger.info("Message signed"),n}catch(n){throw this.logger.error("Failed to sign message:",n),xe.signFailed(n)}}async getAvailableWallets(){const t=[];for(const n of this.adapters.values())try{await n.isAvailable()&&t.push(n)}catch(r){this.logger.warn(`Failed to check availability for ${n.name}:`,r)}return t}get connected(){return this.currentAdapter!==null&&this.currentAccount!==null}get account(){return this.currentAccount}get wallet(){return this.currentAdapter}get wallets(){return Array.from(this.adapters.values())}async handleAdapterDisconnect(){this.logger.info("Wallet disconnected (adapter event)"),await this.cleanup(),this.emit("disconnect")}handleAccountChanged(t){this.logger.info("Account changed",t),this.currentAccount=t,this.emit("accountChanged",t)}handleNetworkChanged(t){this.logger.info("Network changed",t),this.currentAccount&&(this.currentAccount.network=t),this.emit("networkChanged",t)}async cleanup(){this.currentAdapter=null,this.currentAccount=null,await this.storage.clearState()}}var De={},Hd={};Hd.byteLength=OO;Hd.toByteArray=xO;Hd.fromByteArray=jO;var _r=[],Gn=[],IO=typeof Uint8Array<"u"?Uint8Array:Array,df="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var _o=0,_O=df.length;_o<_O;++_o)_r[_o]=df[_o],Gn[df.charCodeAt(_o)]=_o;Gn[45]=62;Gn[95]=63;function RS(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function OO(e){var t=RS(e),n=t[0],r=t[1];return(n+r)*3/4-r}function DO(e,t,n){return(t+n)*3/4-n}function xO(e){var t,n=RS(e),r=n[0],s=n[1],i=new IO(DO(e,r,s)),o=0,a=s>0?r-4:r,u;for(u=0;u<a;u+=4)t=Gn[e.charCodeAt(u)]<<18|Gn[e.charCodeAt(u+1)]<<12|Gn[e.charCodeAt(u+2)]<<6|Gn[e.charCodeAt(u+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return s===2&&(t=Gn[e.charCodeAt(u)]<<2|Gn[e.charCodeAt(u+1)]>>4,i[o++]=t&255),s===1&&(t=Gn[e.charCodeAt(u)]<<10|Gn[e.charCodeAt(u+1)]<<4|Gn[e.charCodeAt(u+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function LO(e){return _r[e>>18&63]+_r[e>>12&63]+_r[e>>6&63]+_r[e&63]}function CO(e,t,n){for(var r,s=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),s.push(LO(r));return s.join("")}function jO(e){for(var t,n=e.length,r=n%3,s=[],i=16383,o=0,a=n-r;o<a;o+=i)s.push(CO(e,o,o+i>a?a:o+i));return r===1?(t=e[n-1],s.push(_r[t>>2]+_r[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],s.push(_r[t>>10]+_r[t>>4&63]+_r[t<<2&63]+"=")),s.join("")}var Jg={};Jg.read=function(e,t,n,r,s){var i,o,a=s*8-r-1,u=(1<<a)-1,c=u>>1,l=-7,d=n?s-1:0,f=n?-1:1,h=e[t+d];for(d+=f,i=h&(1<<-l)-1,h>>=-l,l+=a;l>0;i=i*256+e[t+d],d+=f,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=r;l>0;o=o*256+e[t+d],d+=f,l-=8);if(i===0)i=1-c;else{if(i===u)return o?NaN:(h?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-c}return(h?-1:1)*o*Math.pow(2,i-r)};Jg.write=function(e,t,n,r,s,i){var o,a,u,c=i*8-s-1,l=(1<<c)-1,d=l>>1,f=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,p=r?1:-1,g=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+d>=1?t+=f/u:t+=f*Math.pow(2,1-d),t*u>=2&&(o++,u/=2),o+d>=l?(a=0,o=l):o+d>=1?(a=(t*u-1)*Math.pow(2,s),o=o+d):(a=t*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;e[n+h]=a&255,h+=p,a/=256,s-=8);for(o=o<<s|a,c+=s;c>0;e[n+h]=o&255,h+=p,o/=256,c-=8);e[n+h-p]|=g*128};(function(e){const t=Hd,n=Jg,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=A,e.INSPECT_MAX_BYTES=50;const s=2147483647;e.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const M=new Uint8Array(1),k={foo:function(){return 42}};return Object.setPrototypeOf(k,Uint8Array.prototype),Object.setPrototypeOf(M,k),M.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(M){if(M>s)throw new RangeError('The value "'+M+'" is invalid for option "size"');const k=new Uint8Array(M);return Object.setPrototypeOf(k,a.prototype),k}function a(M,k,G){if(typeof M=="number"){if(typeof k=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(M)}return u(M,k,G)}a.poolSize=8192;function u(M,k,G){if(typeof M=="string")return f(M,k);if(ArrayBuffer.isView(M))return p(M);if(M==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M);if(we(M,ArrayBuffer)||M&&we(M.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(we(M,SharedArrayBuffer)||M&&we(M.buffer,SharedArrayBuffer)))return g(M,k,G);if(typeof M=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const re=M.valueOf&&M.valueOf();if(re!=null&&re!==M)return a.from(re,k,G);const ae=y(M);if(ae)return ae;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof M[Symbol.toPrimitive]=="function")return a.from(M[Symbol.toPrimitive]("string"),k,G);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M)}a.from=function(M,k,G){return u(M,k,G)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(M){if(typeof M!="number")throw new TypeError('"size" argument must be of type number');if(M<0)throw new RangeError('The value "'+M+'" is invalid for option "size"')}function l(M,k,G){return c(M),M<=0?o(M):k!==void 0?typeof G=="string"?o(M).fill(k,G):o(M).fill(k):o(M)}a.alloc=function(M,k,G){return l(M,k,G)};function d(M){return c(M),o(M<0?0:b(M)|0)}a.allocUnsafe=function(M){return d(M)},a.allocUnsafeSlow=function(M){return d(M)};function f(M,k){if((typeof k!="string"||k==="")&&(k="utf8"),!a.isEncoding(k))throw new TypeError("Unknown encoding: "+k);const G=E(M,k)|0;let re=o(G);const ae=re.write(M,k);return ae!==G&&(re=re.slice(0,ae)),re}function h(M){const k=M.length<0?0:b(M.length)|0,G=o(k);for(let re=0;re<k;re+=1)G[re]=M[re]&255;return G}function p(M){if(we(M,Uint8Array)){const k=new Uint8Array(M);return g(k.buffer,k.byteOffset,k.byteLength)}return h(M)}function g(M,k,G){if(k<0||M.byteLength<k)throw new RangeError('"offset" is outside of buffer bounds');if(M.byteLength<k+(G||0))throw new RangeError('"length" is outside of buffer bounds');let re;return k===void 0&&G===void 0?re=new Uint8Array(M):G===void 0?re=new Uint8Array(M,k):re=new Uint8Array(M,k,G),Object.setPrototypeOf(re,a.prototype),re}function y(M){if(a.isBuffer(M)){const k=b(M.length)|0,G=o(k);return G.length===0||M.copy(G,0,0,k),G}if(M.length!==void 0)return typeof M.length!="number"||me(M.length)?o(0):h(M);if(M.type==="Buffer"&&Array.isArray(M.data))return h(M.data)}function b(M){if(M>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return M|0}function A(M){return+M!=M&&(M=0),a.alloc(+M)}a.isBuffer=function(M){return M!=null&&M._isBuffer===!0&&M!==a.prototype},a.compare=function(M,k){if(we(M,Uint8Array)&&(M=a.from(M,M.offset,M.byteLength)),we(k,Uint8Array)&&(k=a.from(k,k.offset,k.byteLength)),!a.isBuffer(M)||!a.isBuffer(k))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(M===k)return 0;let G=M.length,re=k.length;for(let ae=0,le=Math.min(G,re);ae<le;++ae)if(M[ae]!==k[ae]){G=M[ae],re=k[ae];break}return G<re?-1:re<G?1:0},a.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(M,k){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(M.length===0)return a.alloc(0);let G;if(k===void 0)for(k=0,G=0;G<M.length;++G)k+=M[G].length;const re=a.allocUnsafe(k);let ae=0;for(G=0;G<M.length;++G){let le=M[G];if(we(le,Uint8Array))ae+le.length>re.length?(a.isBuffer(le)||(le=a.from(le)),le.copy(re,ae)):Uint8Array.prototype.set.call(re,le,ae);else if(a.isBuffer(le))le.copy(re,ae);else throw new TypeError('"list" argument must be an Array of Buffers');ae+=le.length}return re};function E(M,k){if(a.isBuffer(M))return M.length;if(ArrayBuffer.isView(M)||we(M,ArrayBuffer))return M.byteLength;if(typeof M!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof M);const G=M.length,re=arguments.length>2&&arguments[2]===!0;if(!re&&G===0)return 0;let ae=!1;for(;;)switch(k){case"ascii":case"latin1":case"binary":return G;case"utf8":case"utf-8":return ne(M).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G*2;case"hex":return G>>>1;case"base64":return oe(M).length;default:if(ae)return re?-1:ne(M).length;k=(""+k).toLowerCase(),ae=!0}}a.byteLength=E;function _(M,k,G){let re=!1;if((k===void 0||k<0)&&(k=0),k>this.length||((G===void 0||G>this.length)&&(G=this.length),G<=0)||(G>>>=0,k>>>=0,G<=k))return"";for(M||(M="utf8");;)switch(M){case"hex":return N(this,k,G);case"utf8":case"utf-8":return R(this,k,G);case"ascii":return m(this,k,G);case"latin1":case"binary":return w(this,k,G);case"base64":return q(this,k,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,k,G);default:if(re)throw new TypeError("Unknown encoding: "+M);M=(M+"").toLowerCase(),re=!0}}a.prototype._isBuffer=!0;function S(M,k,G){const re=M[k];M[k]=M[G],M[G]=re}a.prototype.swap16=function(){const M=this.length;if(M%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let k=0;k<M;k+=2)S(this,k,k+1);return this},a.prototype.swap32=function(){const M=this.length;if(M%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let k=0;k<M;k+=4)S(this,k,k+3),S(this,k+1,k+2);return this},a.prototype.swap64=function(){const M=this.length;if(M%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let k=0;k<M;k+=8)S(this,k,k+7),S(this,k+1,k+6),S(this,k+2,k+5),S(this,k+3,k+4);return this},a.prototype.toString=function(){const M=this.length;return M===0?"":arguments.length===0?R(this,0,M):_.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(M){if(!a.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M?!0:a.compare(this,M)===0},a.prototype.inspect=function(){let M="";const k=e.INSPECT_MAX_BYTES;return M=this.toString("hex",0,k).replace(/(.{2})/g,"$1 ").trim(),this.length>k&&(M+=" ... "),"<Buffer "+M+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(M,k,G,re,ae){if(we(M,Uint8Array)&&(M=a.from(M,M.offset,M.byteLength)),!a.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof M);if(k===void 0&&(k=0),G===void 0&&(G=M?M.length:0),re===void 0&&(re=0),ae===void 0&&(ae=this.length),k<0||G>M.length||re<0||ae>this.length)throw new RangeError("out of range index");if(re>=ae&&k>=G)return 0;if(re>=ae)return-1;if(k>=G)return 1;if(k>>>=0,G>>>=0,re>>>=0,ae>>>=0,this===M)return 0;let le=ae-re,ge=G-k;const _e=Math.min(le,ge),Ie=this.slice(re,ae),ve=M.slice(k,G);for(let Te=0;Te<_e;++Te)if(Ie[Te]!==ve[Te]){le=Ie[Te],ge=ve[Te];break}return le<ge?-1:ge<le?1:0};function I(M,k,G,re,ae){if(M.length===0)return-1;if(typeof G=="string"?(re=G,G=0):G>2147483647?G=2147483647:G<-2147483648&&(G=-2147483648),G=+G,me(G)&&(G=ae?0:M.length-1),G<0&&(G=M.length+G),G>=M.length){if(ae)return-1;G=M.length-1}else if(G<0)if(ae)G=0;else return-1;if(typeof k=="string"&&(k=a.from(k,re)),a.isBuffer(k))return k.length===0?-1:D(M,k,G,re,ae);if(typeof k=="number")return k=k&255,typeof Uint8Array.prototype.indexOf=="function"?ae?Uint8Array.prototype.indexOf.call(M,k,G):Uint8Array.prototype.lastIndexOf.call(M,k,G):D(M,[k],G,re,ae);throw new TypeError("val must be string, number or Buffer")}function D(M,k,G,re,ae){let le=1,ge=M.length,_e=k.length;if(re!==void 0&&(re=String(re).toLowerCase(),re==="ucs2"||re==="ucs-2"||re==="utf16le"||re==="utf-16le")){if(M.length<2||k.length<2)return-1;le=2,ge/=2,_e/=2,G/=2}function Ie(Te,ke){return le===1?Te[ke]:Te.readUInt16BE(ke*le)}let ve;if(ae){let Te=-1;for(ve=G;ve<ge;ve++)if(Ie(M,ve)===Ie(k,Te===-1?0:ve-Te)){if(Te===-1&&(Te=ve),ve-Te+1===_e)return Te*le}else Te!==-1&&(ve-=ve-Te),Te=-1}else for(G+_e>ge&&(G=ge-_e),ve=G;ve>=0;ve--){let Te=!0;for(let ke=0;ke<_e;ke++)if(Ie(M,ve+ke)!==Ie(k,ke)){Te=!1;break}if(Te)return ve}return-1}a.prototype.includes=function(M,k,G){return this.indexOf(M,k,G)!==-1},a.prototype.indexOf=function(M,k,G){return I(this,M,k,G,!0)},a.prototype.lastIndexOf=function(M,k,G){return I(this,M,k,G,!1)};function L(M,k,G,re){G=Number(G)||0;const ae=M.length-G;re?(re=Number(re),re>ae&&(re=ae)):re=ae;const le=k.length;re>le/2&&(re=le/2);let ge;for(ge=0;ge<re;++ge){const _e=parseInt(k.substr(ge*2,2),16);if(me(_e))return ge;M[G+ge]=_e}return ge}function x(M,k,G,re){return de(ne(k,M.length-G),M,G,re)}function j(M,k,G,re){return de(ie(k),M,G,re)}function V(M,k,G,re){return de(oe(k),M,G,re)}function Y(M,k,G,re){return de(ce(k,M.length-G),M,G,re)}a.prototype.write=function(M,k,G,re){if(k===void 0)re="utf8",G=this.length,k=0;else if(G===void 0&&typeof k=="string")re=k,G=this.length,k=0;else if(isFinite(k))k=k>>>0,isFinite(G)?(G=G>>>0,re===void 0&&(re="utf8")):(re=G,G=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ae=this.length-k;if((G===void 0||G>ae)&&(G=ae),M.length>0&&(G<0||k<0)||k>this.length)throw new RangeError("Attempt to write outside buffer bounds");re||(re="utf8");let le=!1;for(;;)switch(re){case"hex":return L(this,M,k,G);case"utf8":case"utf-8":return x(this,M,k,G);case"ascii":case"latin1":case"binary":return j(this,M,k,G);case"base64":return V(this,M,k,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,M,k,G);default:if(le)throw new TypeError("Unknown encoding: "+re);re=(""+re).toLowerCase(),le=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function q(M,k,G){return k===0&&G===M.length?t.fromByteArray(M):t.fromByteArray(M.slice(k,G))}function R(M,k,G){G=Math.min(M.length,G);const re=[];let ae=k;for(;ae<G;){const le=M[ae];let ge=null,_e=le>239?4:le>223?3:le>191?2:1;if(ae+_e<=G){let Ie,ve,Te,ke;switch(_e){case 1:le<128&&(ge=le);break;case 2:Ie=M[ae+1],(Ie&192)===128&&(ke=(le&31)<<6|Ie&63,ke>127&&(ge=ke));break;case 3:Ie=M[ae+1],ve=M[ae+2],(Ie&192)===128&&(ve&192)===128&&(ke=(le&15)<<12|(Ie&63)<<6|ve&63,ke>2047&&(ke<55296||ke>57343)&&(ge=ke));break;case 4:Ie=M[ae+1],ve=M[ae+2],Te=M[ae+3],(Ie&192)===128&&(ve&192)===128&&(Te&192)===128&&(ke=(le&15)<<18|(Ie&63)<<12|(ve&63)<<6|Te&63,ke>65535&&ke<1114112&&(ge=ke))}}ge===null?(ge=65533,_e=1):ge>65535&&(ge-=65536,re.push(ge>>>10&1023|55296),ge=56320|ge&1023),re.push(ge),ae+=_e}return T(re)}const v=4096;function T(M){const k=M.length;if(k<=v)return String.fromCharCode.apply(String,M);let G="",re=0;for(;re<k;)G+=String.fromCharCode.apply(String,M.slice(re,re+=v));return G}function m(M,k,G){let re="";G=Math.min(M.length,G);for(let ae=k;ae<G;++ae)re+=String.fromCharCode(M[ae]&127);return re}function w(M,k,G){let re="";G=Math.min(M.length,G);for(let ae=k;ae<G;++ae)re+=String.fromCharCode(M[ae]);return re}function N(M,k,G){const re=M.length;(!k||k<0)&&(k=0),(!G||G<0||G>re)&&(G=re);let ae="";for(let le=k;le<G;++le)ae+=pe[M[le]];return ae}function C(M,k,G){const re=M.slice(k,G);let ae="";for(let le=0;le<re.length-1;le+=2)ae+=String.fromCharCode(re[le]+re[le+1]*256);return ae}a.prototype.slice=function(M,k){const G=this.length;M=~~M,k=k===void 0?G:~~k,M<0?(M+=G,M<0&&(M=0)):M>G&&(M=G),k<0?(k+=G,k<0&&(k=0)):k>G&&(k=G),k<M&&(k=M);const re=this.subarray(M,k);return Object.setPrototypeOf(re,a.prototype),re};function O(M,k,G){if(M%1!==0||M<0)throw new RangeError("offset is not uint");if(M+k>G)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(M,k,G){M=M>>>0,k=k>>>0,G||O(M,k,this.length);let re=this[M],ae=1,le=0;for(;++le<k&&(ae*=256);)re+=this[M+le]*ae;return re},a.prototype.readUintBE=a.prototype.readUIntBE=function(M,k,G){M=M>>>0,k=k>>>0,G||O(M,k,this.length);let re=this[M+--k],ae=1;for(;k>0&&(ae*=256);)re+=this[M+--k]*ae;return re},a.prototype.readUint8=a.prototype.readUInt8=function(M,k){return M=M>>>0,k||O(M,1,this.length),this[M]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(M,k){return M=M>>>0,k||O(M,2,this.length),this[M]|this[M+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(M,k){return M=M>>>0,k||O(M,2,this.length),this[M]<<8|this[M+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(M,k){return M=M>>>0,k||O(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+this[M+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(M,k){return M=M>>>0,k||O(M,4,this.length),this[M]*16777216+(this[M+1]<<16|this[M+2]<<8|this[M+3])},a.prototype.readBigUInt64LE=he(function(M){M=M>>>0,U(M,"offset");const k=this[M],G=this[M+7];(k===void 0||G===void 0)&&F(M,this.length-8);const re=k+this[++M]*2**8+this[++M]*2**16+this[++M]*2**24,ae=this[++M]+this[++M]*2**8+this[++M]*2**16+G*2**24;return BigInt(re)+(BigInt(ae)<<BigInt(32))}),a.prototype.readBigUInt64BE=he(function(M){M=M>>>0,U(M,"offset");const k=this[M],G=this[M+7];(k===void 0||G===void 0)&&F(M,this.length-8);const re=k*2**24+this[++M]*2**16+this[++M]*2**8+this[++M],ae=this[++M]*2**24+this[++M]*2**16+this[++M]*2**8+G;return(BigInt(re)<<BigInt(32))+BigInt(ae)}),a.prototype.readIntLE=function(M,k,G){M=M>>>0,k=k>>>0,G||O(M,k,this.length);let re=this[M],ae=1,le=0;for(;++le<k&&(ae*=256);)re+=this[M+le]*ae;return ae*=128,re>=ae&&(re-=Math.pow(2,8*k)),re},a.prototype.readIntBE=function(M,k,G){M=M>>>0,k=k>>>0,G||O(M,k,this.length);let re=k,ae=1,le=this[M+--re];for(;re>0&&(ae*=256);)le+=this[M+--re]*ae;return ae*=128,le>=ae&&(le-=Math.pow(2,8*k)),le},a.prototype.readInt8=function(M,k){return M=M>>>0,k||O(M,1,this.length),this[M]&128?(255-this[M]+1)*-1:this[M]},a.prototype.readInt16LE=function(M,k){M=M>>>0,k||O(M,2,this.length);const G=this[M]|this[M+1]<<8;return G&32768?G|4294901760:G},a.prototype.readInt16BE=function(M,k){M=M>>>0,k||O(M,2,this.length);const G=this[M+1]|this[M]<<8;return G&32768?G|4294901760:G},a.prototype.readInt32LE=function(M,k){return M=M>>>0,k||O(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},a.prototype.readInt32BE=function(M,k){return M=M>>>0,k||O(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},a.prototype.readBigInt64LE=he(function(M){M=M>>>0,U(M,"offset");const k=this[M],G=this[M+7];(k===void 0||G===void 0)&&F(M,this.length-8);const re=this[M+4]+this[M+5]*2**8+this[M+6]*2**16+(G<<24);return(BigInt(re)<<BigInt(32))+BigInt(k+this[++M]*2**8+this[++M]*2**16+this[++M]*2**24)}),a.prototype.readBigInt64BE=he(function(M){M=M>>>0,U(M,"offset");const k=this[M],G=this[M+7];(k===void 0||G===void 0)&&F(M,this.length-8);const re=(k<<24)+this[++M]*2**16+this[++M]*2**8+this[++M];return(BigInt(re)<<BigInt(32))+BigInt(this[++M]*2**24+this[++M]*2**16+this[++M]*2**8+G)}),a.prototype.readFloatLE=function(M,k){return M=M>>>0,k||O(M,4,this.length),n.read(this,M,!0,23,4)},a.prototype.readFloatBE=function(M,k){return M=M>>>0,k||O(M,4,this.length),n.read(this,M,!1,23,4)},a.prototype.readDoubleLE=function(M,k){return M=M>>>0,k||O(M,8,this.length),n.read(this,M,!0,52,8)},a.prototype.readDoubleBE=function(M,k){return M=M>>>0,k||O(M,8,this.length),n.read(this,M,!1,52,8)};function B(M,k,G,re,ae,le){if(!a.isBuffer(M))throw new TypeError('"buffer" argument must be a Buffer instance');if(k>ae||k<le)throw new RangeError('"value" argument is out of bounds');if(G+re>M.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(M,k,G,re){if(M=+M,k=k>>>0,G=G>>>0,!re){const ge=Math.pow(2,8*G)-1;B(this,M,k,G,ge,0)}let ae=1,le=0;for(this[k]=M&255;++le<G&&(ae*=256);)this[k+le]=M/ae&255;return k+G},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(M,k,G,re){if(M=+M,k=k>>>0,G=G>>>0,!re){const ge=Math.pow(2,8*G)-1;B(this,M,k,G,ge,0)}let ae=G-1,le=1;for(this[k+ae]=M&255;--ae>=0&&(le*=256);)this[k+ae]=M/le&255;return k+G},a.prototype.writeUint8=a.prototype.writeUInt8=function(M,k,G){return M=+M,k=k>>>0,G||B(this,M,k,1,255,0),this[k]=M&255,k+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(M,k,G){return M=+M,k=k>>>0,G||B(this,M,k,2,65535,0),this[k]=M&255,this[k+1]=M>>>8,k+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(M,k,G){return M=+M,k=k>>>0,G||B(this,M,k,2,65535,0),this[k]=M>>>8,this[k+1]=M&255,k+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(M,k,G){return M=+M,k=k>>>0,G||B(this,M,k,4,4294967295,0),this[k+3]=M>>>24,this[k+2]=M>>>16,this[k+1]=M>>>8,this[k]=M&255,k+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(M,k,G){return M=+M,k=k>>>0,G||B(this,M,k,4,4294967295,0),this[k]=M>>>24,this[k+1]=M>>>16,this[k+2]=M>>>8,this[k+3]=M&255,k+4};function W(M,k,G,re,ae){H(k,re,ae,M,G,7);let le=Number(k&BigInt(4294967295));M[G++]=le,le=le>>8,M[G++]=le,le=le>>8,M[G++]=le,le=le>>8,M[G++]=le;let ge=Number(k>>BigInt(32)&BigInt(4294967295));return M[G++]=ge,ge=ge>>8,M[G++]=ge,ge=ge>>8,M[G++]=ge,ge=ge>>8,M[G++]=ge,G}function P(M,k,G,re,ae){H(k,re,ae,M,G,7);let le=Number(k&BigInt(4294967295));M[G+7]=le,le=le>>8,M[G+6]=le,le=le>>8,M[G+5]=le,le=le>>8,M[G+4]=le;let ge=Number(k>>BigInt(32)&BigInt(4294967295));return M[G+3]=ge,ge=ge>>8,M[G+2]=ge,ge=ge>>8,M[G+1]=ge,ge=ge>>8,M[G]=ge,G+8}a.prototype.writeBigUInt64LE=he(function(M,k=0){return W(this,M,k,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=he(function(M,k=0){return P(this,M,k,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(M,k,G,re){if(M=+M,k=k>>>0,!re){const _e=Math.pow(2,8*G-1);B(this,M,k,G,_e-1,-_e)}let ae=0,le=1,ge=0;for(this[k]=M&255;++ae<G&&(le*=256);)M<0&&ge===0&&this[k+ae-1]!==0&&(ge=1),this[k+ae]=(M/le>>0)-ge&255;return k+G},a.prototype.writeIntBE=function(M,k,G,re){if(M=+M,k=k>>>0,!re){const _e=Math.pow(2,8*G-1);B(this,M,k,G,_e-1,-_e)}let ae=G-1,le=1,ge=0;for(this[k+ae]=M&255;--ae>=0&&(le*=256);)M<0&&ge===0&&this[k+ae+1]!==0&&(ge=1),this[k+ae]=(M/le>>0)-ge&255;return k+G},a.prototype.writeInt8=function(M,k,G){return M=+M,k=k>>>0,G||B(this,M,k,1,127,-128),M<0&&(M=255+M+1),this[k]=M&255,k+1},a.prototype.writeInt16LE=function(M,k,G){return M=+M,k=k>>>0,G||B(this,M,k,2,32767,-32768),this[k]=M&255,this[k+1]=M>>>8,k+2},a.prototype.writeInt16BE=function(M,k,G){return M=+M,k=k>>>0,G||B(this,M,k,2,32767,-32768),this[k]=M>>>8,this[k+1]=M&255,k+2},a.prototype.writeInt32LE=function(M,k,G){return M=+M,k=k>>>0,G||B(this,M,k,4,2147483647,-2147483648),this[k]=M&255,this[k+1]=M>>>8,this[k+2]=M>>>16,this[k+3]=M>>>24,k+4},a.prototype.writeInt32BE=function(M,k,G){return M=+M,k=k>>>0,G||B(this,M,k,4,2147483647,-2147483648),M<0&&(M=4294967295+M+1),this[k]=M>>>24,this[k+1]=M>>>16,this[k+2]=M>>>8,this[k+3]=M&255,k+4},a.prototype.writeBigInt64LE=he(function(M,k=0){return W(this,M,k,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=he(function(M,k=0){return P(this,M,k,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function X(M,k,G,re,ae,le){if(G+re>M.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("Index out of range")}function ee(M,k,G,re,ae){return k=+k,G=G>>>0,ae||X(M,k,G,4),n.write(M,k,G,re,23,4),G+4}a.prototype.writeFloatLE=function(M,k,G){return ee(this,M,k,!0,G)},a.prototype.writeFloatBE=function(M,k,G){return ee(this,M,k,!1,G)};function se(M,k,G,re,ae){return k=+k,G=G>>>0,ae||X(M,k,G,8),n.write(M,k,G,re,52,8),G+8}a.prototype.writeDoubleLE=function(M,k,G){return se(this,M,k,!0,G)},a.prototype.writeDoubleBE=function(M,k,G){return se(this,M,k,!1,G)},a.prototype.copy=function(M,k,G,re){if(!a.isBuffer(M))throw new TypeError("argument should be a Buffer");if(G||(G=0),!re&&re!==0&&(re=this.length),k>=M.length&&(k=M.length),k||(k=0),re>0&&re<G&&(re=G),re===G||M.length===0||this.length===0)return 0;if(k<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("sourceEnd out of bounds");re>this.length&&(re=this.length),M.length-k<re-G&&(re=M.length-k+G);const ae=re-G;return this===M&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(k,G,re):Uint8Array.prototype.set.call(M,this.subarray(G,re),k),ae},a.prototype.fill=function(M,k,G,re){if(typeof M=="string"){if(typeof k=="string"?(re=k,k=0,G=this.length):typeof G=="string"&&(re=G,G=this.length),re!==void 0&&typeof re!="string")throw new TypeError("encoding must be a string");if(typeof re=="string"&&!a.isEncoding(re))throw new TypeError("Unknown encoding: "+re);if(M.length===1){const le=M.charCodeAt(0);(re==="utf8"&&le<128||re==="latin1")&&(M=le)}}else typeof M=="number"?M=M&255:typeof M=="boolean"&&(M=Number(M));if(k<0||this.length<k||this.length<G)throw new RangeError("Out of range index");if(G<=k)return this;k=k>>>0,G=G===void 0?this.length:G>>>0,M||(M=0);let ae;if(typeof M=="number")for(ae=k;ae<G;++ae)this[ae]=M;else{const le=a.isBuffer(M)?M:a.from(M,re),ge=le.length;if(ge===0)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(ae=0;ae<G-k;++ae)this[ae+k]=le[ae%ge]}return this};const Z={};function J(M,k,G){Z[M]=class extends G{constructor(){super(),Object.defineProperty(this,"message",{value:k.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${M}]`,this.stack,delete this.name}get code(){return M}set code(re){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:re,writable:!0})}toString(){return`${this.name} [${M}]: ${this.message}`}}}J("ERR_BUFFER_OUT_OF_BOUNDS",function(M){return M?`${M} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),J("ERR_INVALID_ARG_TYPE",function(M,k){return`The "${M}" argument must be of type number. Received type ${typeof k}`},TypeError),J("ERR_OUT_OF_RANGE",function(M,k,G){let re=`The value of "${M}" is out of range.`,ae=G;return Number.isInteger(G)&&Math.abs(G)>2**32?ae=z(String(G)):typeof G=="bigint"&&(ae=String(G),(G>BigInt(2)**BigInt(32)||G<-(BigInt(2)**BigInt(32)))&&(ae=z(ae)),ae+="n"),re+=` It must be ${k}. Received ${ae}`,re},RangeError);function z(M){let k="",G=M.length;const re=M[0]==="-"?1:0;for(;G>=re+4;G-=3)k=`_${M.slice(G-3,G)}${k}`;return`${M.slice(0,G)}${k}`}function K(M,k,G){U(k,"offset"),(M[k]===void 0||M[k+G]===void 0)&&F(k,M.length-(G+1))}function H(M,k,G,re,ae,le){if(M>G||M<k){const ge=typeof k=="bigint"?"n":"";let _e;throw k===0||k===BigInt(0)?_e=`>= 0${ge} and < 2${ge} ** ${(le+1)*8}${ge}`:_e=`>= -(2${ge} ** ${(le+1)*8-1}${ge}) and < 2 ** ${(le+1)*8-1}${ge}`,new Z.ERR_OUT_OF_RANGE("value",_e,M)}K(re,ae,le)}function U(M,k){if(typeof M!="number")throw new Z.ERR_INVALID_ARG_TYPE(k,"number",M)}function F(M,k,G){throw Math.floor(M)!==M?(U(M,G),new Z.ERR_OUT_OF_RANGE("offset","an integer",M)):k<0?new Z.ERR_BUFFER_OUT_OF_BOUNDS:new Z.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${k}`,M)}const $=/[^+/0-9A-Za-z-_]/g;function te(M){if(M=M.split("=")[0],M=M.trim().replace($,""),M.length<2)return"";for(;M.length%4!==0;)M=M+"=";return M}function ne(M,k){k=k||1/0;let G;const re=M.length;let ae=null;const le=[];for(let ge=0;ge<re;++ge){if(G=M.charCodeAt(ge),G>55295&&G<57344){if(!ae){if(G>56319){(k-=3)>-1&&le.push(239,191,189);continue}else if(ge+1===re){(k-=3)>-1&&le.push(239,191,189);continue}ae=G;continue}if(G<56320){(k-=3)>-1&&le.push(239,191,189),ae=G;continue}G=(ae-55296<<10|G-56320)+65536}else ae&&(k-=3)>-1&&le.push(239,191,189);if(ae=null,G<128){if((k-=1)<0)break;le.push(G)}else if(G<2048){if((k-=2)<0)break;le.push(G>>6|192,G&63|128)}else if(G<65536){if((k-=3)<0)break;le.push(G>>12|224,G>>6&63|128,G&63|128)}else if(G<1114112){if((k-=4)<0)break;le.push(G>>18|240,G>>12&63|128,G>>6&63|128,G&63|128)}else throw new Error("Invalid code point")}return le}function ie(M){const k=[];for(let G=0;G<M.length;++G)k.push(M.charCodeAt(G)&255);return k}function ce(M,k){let G,re,ae;const le=[];for(let ge=0;ge<M.length&&!((k-=2)<0);++ge)G=M.charCodeAt(ge),re=G>>8,ae=G%256,le.push(ae),le.push(re);return le}function oe(M){return t.toByteArray(te(M))}function de(M,k,G,re){let ae;for(ae=0;ae<re&&!(ae+G>=k.length||ae>=M.length);++ae)k[ae+G]=M[ae];return ae}function we(M,k){return M instanceof k||M!=null&&M.constructor!=null&&M.constructor.name!=null&&M.constructor.name===k.name}function me(M){return M!==M}const pe=(function(){const M="0123456789abcdef",k=new Array(256);for(let G=0;G<16;++G){const re=G*16;for(let ae=0;ae<16;++ae)k[re+ae]=M[G]+M[ae]}return k})();function he(M){return typeof BigInt>"u"?fe:M}function fe(){throw new Error("BigInt not supported")}})(De);var BS={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(ue,()=>(()=>{var n={873:(o,a)=>{var u,c,l=(function(){var d=function(R,v){var T=R,m=b[v],w=null,N=0,C=null,O=[],B={},W=function(H,U){w=(function(F){for(var $=new Array(F),te=0;te<F;te+=1){$[te]=new Array(F);for(var ne=0;ne<F;ne+=1)$[te][ne]=null}return $})(N=4*T+17),P(0,0),P(N-7,0),P(0,N-7),ee(),X(),Z(H,U),T>=7&&se(H),C==null&&(C=z(T,m,O)),J(C,U)},P=function(H,U){for(var F=-1;F<=7;F+=1)if(!(H+F<=-1||N<=H+F))for(var $=-1;$<=7;$+=1)U+$<=-1||N<=U+$||(w[H+F][U+$]=0<=F&&F<=6&&($==0||$==6)||0<=$&&$<=6&&(F==0||F==6)||2<=F&&F<=4&&2<=$&&$<=4)},X=function(){for(var H=8;H<N-8;H+=1)w[H][6]==null&&(w[H][6]=H%2==0);for(var U=8;U<N-8;U+=1)w[6][U]==null&&(w[6][U]=U%2==0)},ee=function(){for(var H=A.getPatternPosition(T),U=0;U<H.length;U+=1)for(var F=0;F<H.length;F+=1){var $=H[U],te=H[F];if(w[$][te]==null)for(var ne=-2;ne<=2;ne+=1)for(var ie=-2;ie<=2;ie+=1)w[$+ne][te+ie]=ne==-2||ne==2||ie==-2||ie==2||ne==0&&ie==0}},se=function(H){for(var U=A.getBCHTypeNumber(T),F=0;F<18;F+=1){var $=!H&&(U>>F&1)==1;w[Math.floor(F/3)][F%3+N-8-3]=$}for(F=0;F<18;F+=1)$=!H&&(U>>F&1)==1,w[F%3+N-8-3][Math.floor(F/3)]=$},Z=function(H,U){for(var F=m<<3|U,$=A.getBCHTypeInfo(F),te=0;te<15;te+=1){var ne=!H&&($>>te&1)==1;te<6?w[te][8]=ne:te<8?w[te+1][8]=ne:w[N-15+te][8]=ne}for(te=0;te<15;te+=1)ne=!H&&($>>te&1)==1,te<8?w[8][N-te-1]=ne:te<9?w[8][15-te-1+1]=ne:w[8][15-te-1]=ne;w[N-8][8]=!H},J=function(H,U){for(var F=-1,$=N-1,te=7,ne=0,ie=A.getMaskFunction(U),ce=N-1;ce>0;ce-=2)for(ce==6&&(ce-=1);;){for(var oe=0;oe<2;oe+=1)if(w[$][ce-oe]==null){var de=!1;ne<H.length&&(de=(H[ne]>>>te&1)==1),ie($,ce-oe)&&(de=!de),w[$][ce-oe]=de,(te-=1)==-1&&(ne+=1,te=7)}if(($+=F)<0||N<=$){$-=F,F=-F;break}}},z=function(H,U,F){for(var $=S.getRSBlocks(H,U),te=I(),ne=0;ne<F.length;ne+=1){var ie=F[ne];te.put(ie.getMode(),4),te.put(ie.getLength(),A.getLengthInBits(ie.getMode(),H)),ie.write(te)}var ce=0;for(ne=0;ne<$.length;ne+=1)ce+=$[ne].dataCount;if(te.getLengthInBits()>8*ce)throw"code length overflow. ("+te.getLengthInBits()+">"+8*ce+")";for(te.getLengthInBits()+4<=8*ce&&te.put(0,4);te.getLengthInBits()%8!=0;)te.putBit(!1);for(;!(te.getLengthInBits()>=8*ce||(te.put(236,8),te.getLengthInBits()>=8*ce));)te.put(17,8);return(function(oe,de){for(var we=0,me=0,pe=0,he=new Array(de.length),fe=new Array(de.length),M=0;M<de.length;M+=1){var k=de[M].dataCount,G=de[M].totalCount-k;me=Math.max(me,k),pe=Math.max(pe,G),he[M]=new Array(k);for(var re=0;re<he[M].length;re+=1)he[M][re]=255&oe.getBuffer()[re+we];we+=k;var ae=A.getErrorCorrectPolynomial(G),le=_(he[M],ae.getLength()-1).mod(ae);for(fe[M]=new Array(ae.getLength()-1),re=0;re<fe[M].length;re+=1){var ge=re+le.getLength()-fe[M].length;fe[M][re]=ge>=0?le.getAt(ge):0}}var _e=0;for(re=0;re<de.length;re+=1)_e+=de[re].totalCount;var Ie=new Array(_e),ve=0;for(re=0;re<me;re+=1)for(M=0;M<de.length;M+=1)re<he[M].length&&(Ie[ve]=he[M][re],ve+=1);for(re=0;re<pe;re+=1)for(M=0;M<de.length;M+=1)re<fe[M].length&&(Ie[ve]=fe[M][re],ve+=1);return Ie})(te,$)};B.addData=function(H,U){var F=null;switch(U=U||"Byte"){case"Numeric":F=D(H);break;case"Alphanumeric":F=L(H);break;case"Byte":F=x(H);break;case"Kanji":F=j(H);break;default:throw"mode:"+U}O.push(F),C=null},B.isDark=function(H,U){if(H<0||N<=H||U<0||N<=U)throw H+","+U;return w[H][U]},B.getModuleCount=function(){return N},B.make=function(){if(T<1){for(var H=1;H<40;H++){for(var U=S.getRSBlocks(H,m),F=I(),$=0;$<O.length;$++){var te=O[$];F.put(te.getMode(),4),F.put(te.getLength(),A.getLengthInBits(te.getMode(),H)),te.write(F)}var ne=0;for($=0;$<U.length;$++)ne+=U[$].dataCount;if(F.getLengthInBits()<=8*ne)break}T=H}W(!1,(function(){for(var ie=0,ce=0,oe=0;oe<8;oe+=1){W(!0,oe);var de=A.getLostPoint(B);(oe==0||ie>de)&&(ie=de,ce=oe)}return ce})())},B.createTableTag=function(H,U){H=H||2;var F="";F+='<table style="',F+=" border-width: 0px; border-style: none;",F+=" border-collapse: collapse;",F+=" padding: 0px; margin: "+(U=U===void 0?4*H:U)+"px;",F+='">',F+="<tbody>";for(var $=0;$<B.getModuleCount();$+=1){F+="<tr>";for(var te=0;te<B.getModuleCount();te+=1)F+='<td style="',F+=" border-width: 0px; border-style: none;",F+=" border-collapse: collapse;",F+=" padding: 0px; margin: 0px;",F+=" width: "+H+"px;",F+=" height: "+H+"px;",F+=" background-color: ",F+=B.isDark($,te)?"#000000":"#ffffff",F+=";",F+='"/>';F+="</tr>"}return(F+="</tbody>")+"</table>"},B.createSvgTag=function(H,U,F,$){var te={};typeof arguments[0]=="object"&&(H=(te=arguments[0]).cellSize,U=te.margin,F=te.alt,$=te.title),H=H||2,U=U===void 0?4*H:U,(F=typeof F=="string"?{text:F}:F||{}).text=F.text||null,F.id=F.text?F.id||"qrcode-description":null,($=typeof $=="string"?{text:$}:$||{}).text=$.text||null,$.id=$.text?$.id||"qrcode-title":null;var ne,ie,ce,oe,de=B.getModuleCount()*H+2*U,we="";for(oe="l"+H+",0 0,"+H+" -"+H+",0 0,-"+H+"z ",we+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',we+=te.scalable?"":' width="'+de+'px" height="'+de+'px"',we+=' viewBox="0 0 '+de+" "+de+'" ',we+=' preserveAspectRatio="xMinYMin meet"',we+=$.text||F.text?' role="img" aria-labelledby="'+K([$.id,F.id].join(" ").trim())+'"':"",we+=">",we+=$.text?'<title id="'+K($.id)+'">'+K($.text)+"</title>":"",we+=F.text?'<description id="'+K(F.id)+'">'+K(F.text)+"</description>":"",we+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',we+='<path d="',ie=0;ie<B.getModuleCount();ie+=1)for(ce=ie*H+U,ne=0;ne<B.getModuleCount();ne+=1)B.isDark(ie,ne)&&(we+="M"+(ne*H+U)+","+ce+oe);return(we+='" stroke="transparent" fill="black"/>')+"</svg>"},B.createDataURL=function(H,U){H=H||2,U=U===void 0?4*H:U;var F=B.getModuleCount()*H+2*U,$=U,te=F-U;return q(F,F,function(ne,ie){if($<=ne&&ne<te&&$<=ie&&ie<te){var ce=Math.floor((ne-$)/H),oe=Math.floor((ie-$)/H);return B.isDark(oe,ce)?0:1}return 1})},B.createImgTag=function(H,U,F){H=H||2,U=U===void 0?4*H:U;var $=B.getModuleCount()*H+2*U,te="";return te+="<img",te+=' src="',te+=B.createDataURL(H,U),te+='"',te+=' width="',te+=$,te+='"',te+=' height="',te+=$,te+='"',F&&(te+=' alt="',te+=K(F),te+='"'),te+"/>"};var K=function(H){for(var U="",F=0;F<H.length;F+=1){var $=H.charAt(F);switch($){case"<":U+="&lt;";break;case">":U+="&gt;";break;case"&":U+="&amp;";break;case'"':U+="&quot;";break;default:U+=$}}return U};return B.createASCII=function(H,U){if((H=H||1)<2)return(function(he){he=he===void 0?2:he;var fe,M,k,G,re,ae=1*B.getModuleCount()+2*he,le=he,ge=ae-he,_e={"":""," ":""," ":"","  ":" "},Ie={"":""," ":""," ":" ","  ":" "},ve="";for(fe=0;fe<ae;fe+=2){for(k=Math.floor((fe-le)/1),G=Math.floor((fe+1-le)/1),M=0;M<ae;M+=1)re="",le<=M&&M<ge&&le<=fe&&fe<ge&&B.isDark(k,Math.floor((M-le)/1))&&(re=" "),le<=M&&M<ge&&le<=fe+1&&fe+1<ge&&B.isDark(G,Math.floor((M-le)/1))?re+=" ":re+="",ve+=he<1&&fe+1>=ge?Ie[re]:_e[re];ve+=`
`}return ae%2&&he>0?ve.substring(0,ve.length-ae-1)+Array(ae+1).join(""):ve.substring(0,ve.length-1)})(U);H-=1,U=U===void 0?2*H:U;var F,$,te,ne,ie=B.getModuleCount()*H+2*U,ce=U,oe=ie-U,de=Array(H+1).join(""),we=Array(H+1).join("  "),me="",pe="";for(F=0;F<ie;F+=1){for(te=Math.floor((F-ce)/H),pe="",$=0;$<ie;$+=1)ne=1,ce<=$&&$<oe&&ce<=F&&F<oe&&B.isDark(te,Math.floor(($-ce)/H))&&(ne=0),pe+=ne?de:we;for(te=0;te<H;te+=1)me+=pe+`
`}return me.substring(0,me.length-1)},B.renderTo2dContext=function(H,U){U=U||2;for(var F=B.getModuleCount(),$=0;$<F;$++)for(var te=0;te<F;te++)H.fillStyle=B.isDark($,te)?"black":"white",H.fillRect($*U,te*U,U,U)},B};d.stringToBytes=(d.stringToBytesFuncs={default:function(R){for(var v=[],T=0;T<R.length;T+=1){var m=R.charCodeAt(T);v.push(255&m)}return v}}).default,d.createStringToBytes=function(R,v){var T=(function(){for(var w=Y(R),N=function(){var X=w.read();if(X==-1)throw"eof";return X},C=0,O={};;){var B=w.read();if(B==-1)break;var W=N(),P=N()<<8|N();O[String.fromCharCode(B<<8|W)]=P,C+=1}if(C!=v)throw C+" != "+v;return O})(),m=63;return function(w){for(var N=[],C=0;C<w.length;C+=1){var O=w.charCodeAt(C);if(O<128)N.push(O);else{var B=T[w.charAt(C)];typeof B=="number"?(255&B)==B?N.push(B):(N.push(B>>>8),N.push(255&B)):N.push(m)}}return N}};var f,h,p,g,y,b={L:1,M:0,Q:3,H:2},A=(f=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],h=1335,p=7973,y=function(R){for(var v=0;R!=0;)v+=1,R>>>=1;return v},(g={}).getBCHTypeInfo=function(R){for(var v=R<<10;y(v)-y(h)>=0;)v^=h<<y(v)-y(h);return 21522^(R<<10|v)},g.getBCHTypeNumber=function(R){for(var v=R<<12;y(v)-y(p)>=0;)v^=p<<y(v)-y(p);return R<<12|v},g.getPatternPosition=function(R){return f[R-1]},g.getMaskFunction=function(R){switch(R){case 0:return function(v,T){return(v+T)%2==0};case 1:return function(v,T){return v%2==0};case 2:return function(v,T){return T%3==0};case 3:return function(v,T){return(v+T)%3==0};case 4:return function(v,T){return(Math.floor(v/2)+Math.floor(T/3))%2==0};case 5:return function(v,T){return v*T%2+v*T%3==0};case 6:return function(v,T){return(v*T%2+v*T%3)%2==0};case 7:return function(v,T){return(v*T%3+(v+T)%2)%2==0};default:throw"bad maskPattern:"+R}},g.getErrorCorrectPolynomial=function(R){for(var v=_([1],0),T=0;T<R;T+=1)v=v.multiply(_([1,E.gexp(T)],0));return v},g.getLengthInBits=function(R,v){if(1<=v&&v<10)switch(R){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+R}else if(v<27)switch(R){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+R}else{if(!(v<41))throw"type:"+v;switch(R){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+R}}},g.getLostPoint=function(R){for(var v=R.getModuleCount(),T=0,m=0;m<v;m+=1)for(var w=0;w<v;w+=1){for(var N=0,C=R.isDark(m,w),O=-1;O<=1;O+=1)if(!(m+O<0||v<=m+O))for(var B=-1;B<=1;B+=1)w+B<0||v<=w+B||O==0&&B==0||C==R.isDark(m+O,w+B)&&(N+=1);N>5&&(T+=3+N-5)}for(m=0;m<v-1;m+=1)for(w=0;w<v-1;w+=1){var W=0;R.isDark(m,w)&&(W+=1),R.isDark(m+1,w)&&(W+=1),R.isDark(m,w+1)&&(W+=1),R.isDark(m+1,w+1)&&(W+=1),W!=0&&W!=4||(T+=3)}for(m=0;m<v;m+=1)for(w=0;w<v-6;w+=1)R.isDark(m,w)&&!R.isDark(m,w+1)&&R.isDark(m,w+2)&&R.isDark(m,w+3)&&R.isDark(m,w+4)&&!R.isDark(m,w+5)&&R.isDark(m,w+6)&&(T+=40);for(w=0;w<v;w+=1)for(m=0;m<v-6;m+=1)R.isDark(m,w)&&!R.isDark(m+1,w)&&R.isDark(m+2,w)&&R.isDark(m+3,w)&&R.isDark(m+4,w)&&!R.isDark(m+5,w)&&R.isDark(m+6,w)&&(T+=40);var P=0;for(w=0;w<v;w+=1)for(m=0;m<v;m+=1)R.isDark(m,w)&&(P+=1);return T+Math.abs(100*P/v/v-50)/5*10},g),E=(function(){for(var R=new Array(256),v=new Array(256),T=0;T<8;T+=1)R[T]=1<<T;for(T=8;T<256;T+=1)R[T]=R[T-4]^R[T-5]^R[T-6]^R[T-8];for(T=0;T<255;T+=1)v[R[T]]=T;return{glog:function(m){if(m<1)throw"glog("+m+")";return v[m]},gexp:function(m){for(;m<0;)m+=255;for(;m>=256;)m-=255;return R[m]}}})();function _(R,v){if(R.length===void 0)throw R.length+"/"+v;var T=(function(){for(var w=0;w<R.length&&R[w]==0;)w+=1;for(var N=new Array(R.length-w+v),C=0;C<R.length-w;C+=1)N[C]=R[C+w];return N})(),m={getAt:function(w){return T[w]},getLength:function(){return T.length},multiply:function(w){for(var N=new Array(m.getLength()+w.getLength()-1),C=0;C<m.getLength();C+=1)for(var O=0;O<w.getLength();O+=1)N[C+O]^=E.gexp(E.glog(m.getAt(C))+E.glog(w.getAt(O)));return _(N,0)},mod:function(w){if(m.getLength()-w.getLength()<0)return m;for(var N=E.glog(m.getAt(0))-E.glog(w.getAt(0)),C=new Array(m.getLength()),O=0;O<m.getLength();O+=1)C[O]=m.getAt(O);for(O=0;O<w.getLength();O+=1)C[O]^=E.gexp(E.glog(w.getAt(O))+N);return _(C,0).mod(w)}};return m}var S=(function(){var R=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],v=function(m,w){var N={};return N.totalCount=m,N.dataCount=w,N},T={getRSBlocks:function(m,w){var N=(function(se,Z){switch(Z){case b.L:return R[4*(se-1)+0];case b.M:return R[4*(se-1)+1];case b.Q:return R[4*(se-1)+2];case b.H:return R[4*(se-1)+3];default:return}})(m,w);if(N===void 0)throw"bad rs block @ typeNumber:"+m+"/errorCorrectionLevel:"+w;for(var C=N.length/3,O=[],B=0;B<C;B+=1)for(var W=N[3*B+0],P=N[3*B+1],X=N[3*B+2],ee=0;ee<W;ee+=1)O.push(v(P,X));return O}};return T})(),I=function(){var R=[],v=0,T={getBuffer:function(){return R},getAt:function(m){var w=Math.floor(m/8);return(R[w]>>>7-m%8&1)==1},put:function(m,w){for(var N=0;N<w;N+=1)T.putBit((m>>>w-N-1&1)==1)},getLengthInBits:function(){return v},putBit:function(m){var w=Math.floor(v/8);R.length<=w&&R.push(0),m&&(R[w]|=128>>>v%8),v+=1}};return T},D=function(R){var v=R,T={getMode:function(){return 1},getLength:function(N){return v.length},write:function(N){for(var C=v,O=0;O+2<C.length;)N.put(m(C.substring(O,O+3)),10),O+=3;O<C.length&&(C.length-O==1?N.put(m(C.substring(O,O+1)),4):C.length-O==2&&N.put(m(C.substring(O,O+2)),7))}},m=function(N){for(var C=0,O=0;O<N.length;O+=1)C=10*C+w(N.charAt(O));return C},w=function(N){if("0"<=N&&N<="9")return N.charCodeAt(0)-48;throw"illegal char :"+N};return T},L=function(R){var v=R,T={getMode:function(){return 2},getLength:function(w){return v.length},write:function(w){for(var N=v,C=0;C+1<N.length;)w.put(45*m(N.charAt(C))+m(N.charAt(C+1)),11),C+=2;C<N.length&&w.put(m(N.charAt(C)),6)}},m=function(w){if("0"<=w&&w<="9")return w.charCodeAt(0)-48;if("A"<=w&&w<="Z")return w.charCodeAt(0)-65+10;switch(w){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+w}};return T},x=function(R){var v=d.stringToBytes(R);return{getMode:function(){return 4},getLength:function(T){return v.length},write:function(T){for(var m=0;m<v.length;m+=1)T.put(v[m],8)}}},j=function(R){var v=d.stringToBytesFuncs.SJIS;if(!v)throw"sjis not supported.";(function(){var w=v("");if(w.length!=2||(w[0]<<8|w[1])!=38726)throw"sjis not supported."})();var T=v(R),m={getMode:function(){return 8},getLength:function(w){return~~(T.length/2)},write:function(w){for(var N=T,C=0;C+1<N.length;){var O=(255&N[C])<<8|255&N[C+1];if(33088<=O&&O<=40956)O-=33088;else{if(!(57408<=O&&O<=60351))throw"illegal char at "+(C+1)+"/"+O;O-=49472}O=192*(O>>>8&255)+(255&O),w.put(O,13),C+=2}if(C<N.length)throw"illegal char at "+(C+1)}};return m},V=function(){var R=[],v={writeByte:function(T){R.push(255&T)},writeShort:function(T){v.writeByte(T),v.writeByte(T>>>8)},writeBytes:function(T,m,w){m=m||0,w=w||T.length;for(var N=0;N<w;N+=1)v.writeByte(T[N+m])},writeString:function(T){for(var m=0;m<T.length;m+=1)v.writeByte(T.charCodeAt(m))},toByteArray:function(){return R},toString:function(){var T="";T+="[";for(var m=0;m<R.length;m+=1)m>0&&(T+=","),T+=R[m];return T+"]"}};return v},Y=function(R){var v=R,T=0,m=0,w=0,N={read:function(){for(;w<8;){if(T>=v.length){if(w==0)return-1;throw"unexpected end of file./"+w}var O=v.charAt(T);if(T+=1,O=="=")return w=0,-1;O.match(/^\s$/)||(m=m<<6|C(O.charCodeAt(0)),w+=6)}var B=m>>>w-8&255;return w-=8,B}},C=function(O){if(65<=O&&O<=90)return O-65;if(97<=O&&O<=122)return O-97+26;if(48<=O&&O<=57)return O-48+52;if(O==43)return 62;if(O==47)return 63;throw"c:"+O};return N},q=function(R,v,T){for(var m=(function(P,X){var ee=P,se=X,Z=new Array(P*X),J={setPixel:function(H,U,F){Z[U*ee+H]=F},write:function(H){H.writeString("GIF87a"),H.writeShort(ee),H.writeShort(se),H.writeByte(128),H.writeByte(0),H.writeByte(0),H.writeByte(0),H.writeByte(0),H.writeByte(0),H.writeByte(255),H.writeByte(255),H.writeByte(255),H.writeString(","),H.writeShort(0),H.writeShort(0),H.writeShort(ee),H.writeShort(se),H.writeByte(0);var U=z(2);H.writeByte(2);for(var F=0;U.length-F>255;)H.writeByte(255),H.writeBytes(U,F,255),F+=255;H.writeByte(U.length-F),H.writeBytes(U,F,U.length-F),H.writeByte(0),H.writeString(";")}},z=function(H){for(var U=1<<H,F=1+(1<<H),$=H+1,te=K(),ne=0;ne<U;ne+=1)te.add(String.fromCharCode(ne));te.add(String.fromCharCode(U)),te.add(String.fromCharCode(F));var ie,ce,oe,de=V(),we=(ie=de,ce=0,oe=0,{write:function(fe,M){if(fe>>>M)throw"length over";for(;ce+M>=8;)ie.writeByte(255&(fe<<ce|oe)),M-=8-ce,fe>>>=8-ce,oe=0,ce=0;oe|=fe<<ce,ce+=M},flush:function(){ce>0&&ie.writeByte(oe)}});we.write(U,$);var me=0,pe=String.fromCharCode(Z[me]);for(me+=1;me<Z.length;){var he=String.fromCharCode(Z[me]);me+=1,te.contains(pe+he)?pe+=he:(we.write(te.indexOf(pe),$),te.size()<4095&&(te.size()==1<<$&&($+=1),te.add(pe+he)),pe=he)}return we.write(te.indexOf(pe),$),we.write(F,$),we.flush(),de.toByteArray()},K=function(){var H={},U=0,F={add:function($){if(F.contains($))throw"dup key:"+$;H[$]=U,U+=1},size:function(){return U},indexOf:function($){return H[$]},contains:function($){return H[$]!==void 0}};return F};return J})(R,v),w=0;w<v;w+=1)for(var N=0;N<R;N+=1)m.setPixel(N,w,T(N,w));var C=V();m.write(C);for(var O=(function(){var P=0,X=0,ee=0,se="",Z={},J=function(K){se+=String.fromCharCode(z(63&K))},z=function(K){if(!(K<0)){if(K<26)return 65+K;if(K<52)return K-26+97;if(K<62)return K-52+48;if(K==62)return 43;if(K==63)return 47}throw"n:"+K};return Z.writeByte=function(K){for(P=P<<8|255&K,X+=8,ee+=1;X>=6;)J(P>>>X-6),X-=6},Z.flush=function(){if(X>0&&(J(P<<6-X),P=0,X=0),ee%3!=0)for(var K=3-ee%3,H=0;H<K;H+=1)se+="="},Z.toString=function(){return se},Z})(),B=C.toByteArray(),W=0;W<B.length;W+=1)O.writeByte(B[W]);return O.flush(),"data:image/gif;base64,"+O};return d})();l.stringToBytesFuncs["UTF-8"]=function(d){return(function(f){for(var h=[],p=0;p<f.length;p++){var g=f.charCodeAt(p);g<128?h.push(g):g<2048?h.push(192|g>>6,128|63&g):g<55296||g>=57344?h.push(224|g>>12,128|g>>6&63,128|63&g):(p++,g=65536+((1023&g)<<10|1023&f.charCodeAt(p)),h.push(240|g>>18,128|g>>12&63,128|g>>6&63,128|63&g))}return h})(d)},(c=typeof(u=function(){return l})=="function"?u.apply(a,[]):u)===void 0||(o.exports=c)}},r={};function s(o){var a=r[o];if(a!==void 0)return a.exports;var u=r[o]={exports:{}};return n[o](u,u.exports,s),u.exports}s.n=o=>{var a=o&&o.__esModule?()=>o.default:()=>o;return s.d(a,{a}),a},s.d=(o,a)=>{for(var u in a)s.o(a,u)&&!s.o(o,u)&&Object.defineProperty(o,u,{enumerable:!0,get:a[u]})},s.o=(o,a)=>Object.prototype.hasOwnProperty.call(o,a);var i={};return(()=>{s.d(i,{default:()=>v});const o=T=>!!T&&typeof T=="object"&&!Array.isArray(T);function a(T,...m){if(!m.length)return T;const w=m.shift();return w!==void 0&&o(T)&&o(w)?(T=Object.assign({},T),Object.keys(w).forEach(N=>{const C=T[N],O=w[N];Array.isArray(C)&&Array.isArray(O)?T[N]=O:o(C)&&o(O)?T[N]=a(Object.assign({},C),O):T[N]=O}),a(T,...m)):T}function u(T,m){const w=document.createElement("a");w.download=m,w.href=T,document.body.appendChild(w),w.click(),document.body.removeChild(w)}const c={L:.07,M:.15,Q:.25,H:.3};class l{constructor({svg:m,type:w,window:N}){this._svg=m,this._type=w,this._window=N}draw(m,w,N,C){let O;switch(this._type){case"dots":O=this._drawDot;break;case"classy":O=this._drawClassy;break;case"classy-rounded":O=this._drawClassyRounded;break;case"rounded":O=this._drawRounded;break;case"extra-rounded":O=this._drawExtraRounded;break;default:O=this._drawSquare}O.call(this,{x:m,y:w,size:N,getNeighbor:C})}_rotateFigure({x:m,y:w,size:N,rotation:C=0,draw:O}){var B;const W=m+N/2,P=w+N/2;O(),(B=this._element)===null||B===void 0||B.setAttribute("transform",`rotate(${180*C/Math.PI},${W},${P})`)}_basicDot(m){const{size:w,x:N,y:C}=m;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(N+w/2)),this._element.setAttribute("cy",String(C+w/2)),this._element.setAttribute("r",String(w/2))}}))}_basicSquare(m){const{size:w,x:N,y:C}=m;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(N)),this._element.setAttribute("y",String(C)),this._element.setAttribute("width",String(w)),this._element.setAttribute("height",String(w))}}))}_basicSideRounded(m){const{size:w,x:N,y:C}=m;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${N} ${C}v ${w}h `+w/2+`a ${w/2} ${w/2}, 0, 0, 0, 0 ${-w}`)}}))}_basicCornerRounded(m){const{size:w,x:N,y:C}=m;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${N} ${C}v ${w}h ${w}v `+-w/2+`a ${w/2} ${w/2}, 0, 0, 0, ${-w/2} ${-w/2}`)}}))}_basicCornerExtraRounded(m){const{size:w,x:N,y:C}=m;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${N} ${C}v ${w}h ${w}a ${w} ${w}, 0, 0, 0, ${-w} ${-w}`)}}))}_basicCornersRounded(m){const{size:w,x:N,y:C}=m;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${N} ${C}v `+w/2+`a ${w/2} ${w/2}, 0, 0, 0, ${w/2} ${w/2}h `+w/2+"v "+-w/2+`a ${w/2} ${w/2}, 0, 0, 0, ${-w/2} ${-w/2}`)}}))}_drawDot({x:m,y:w,size:N}){this._basicDot({x:m,y:w,size:N,rotation:0})}_drawSquare({x:m,y:w,size:N}){this._basicSquare({x:m,y:w,size:N,rotation:0})}_drawRounded({x:m,y:w,size:N,getNeighbor:C}){const O=C?+C(-1,0):0,B=C?+C(1,0):0,W=C?+C(0,-1):0,P=C?+C(0,1):0,X=O+B+W+P;if(X!==0)if(X>2||O&&B||W&&P)this._basicSquare({x:m,y:w,size:N,rotation:0});else{if(X===2){let ee=0;return O&&W?ee=Math.PI/2:W&&B?ee=Math.PI:B&&P&&(ee=-Math.PI/2),void this._basicCornerRounded({x:m,y:w,size:N,rotation:ee})}if(X===1){let ee=0;return W?ee=Math.PI/2:B?ee=Math.PI:P&&(ee=-Math.PI/2),void this._basicSideRounded({x:m,y:w,size:N,rotation:ee})}}else this._basicDot({x:m,y:w,size:N,rotation:0})}_drawExtraRounded({x:m,y:w,size:N,getNeighbor:C}){const O=C?+C(-1,0):0,B=C?+C(1,0):0,W=C?+C(0,-1):0,P=C?+C(0,1):0,X=O+B+W+P;if(X!==0)if(X>2||O&&B||W&&P)this._basicSquare({x:m,y:w,size:N,rotation:0});else{if(X===2){let ee=0;return O&&W?ee=Math.PI/2:W&&B?ee=Math.PI:B&&P&&(ee=-Math.PI/2),void this._basicCornerExtraRounded({x:m,y:w,size:N,rotation:ee})}if(X===1){let ee=0;return W?ee=Math.PI/2:B?ee=Math.PI:P&&(ee=-Math.PI/2),void this._basicSideRounded({x:m,y:w,size:N,rotation:ee})}}else this._basicDot({x:m,y:w,size:N,rotation:0})}_drawClassy({x:m,y:w,size:N,getNeighbor:C}){const O=C?+C(-1,0):0,B=C?+C(1,0):0,W=C?+C(0,-1):0,P=C?+C(0,1):0;O+B+W+P!==0?O||W?B||P?this._basicSquare({x:m,y:w,size:N,rotation:0}):this._basicCornerRounded({x:m,y:w,size:N,rotation:Math.PI/2}):this._basicCornerRounded({x:m,y:w,size:N,rotation:-Math.PI/2}):this._basicCornersRounded({x:m,y:w,size:N,rotation:Math.PI/2})}_drawClassyRounded({x:m,y:w,size:N,getNeighbor:C}){const O=C?+C(-1,0):0,B=C?+C(1,0):0,W=C?+C(0,-1):0,P=C?+C(0,1):0;O+B+W+P!==0?O||W?B||P?this._basicSquare({x:m,y:w,size:N,rotation:0}):this._basicCornerExtraRounded({x:m,y:w,size:N,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:m,y:w,size:N,rotation:-Math.PI/2}):this._basicCornersRounded({x:m,y:w,size:N,rotation:Math.PI/2})}}const d={dot:"dot",square:"square",extraRounded:"extra-rounded"},f=Object.values(d);class h{constructor({svg:m,type:w,window:N}){this._svg=m,this._type=w,this._window=N}draw(m,w,N,C){let O;switch(this._type){case d.square:O=this._drawSquare;break;case d.extraRounded:O=this._drawExtraRounded;break;default:O=this._drawDot}O.call(this,{x:m,y:w,size:N,rotation:C})}_rotateFigure({x:m,y:w,size:N,rotation:C=0,draw:O}){var B;const W=m+N/2,P=w+N/2;O(),(B=this._element)===null||B===void 0||B.setAttribute("transform",`rotate(${180*C/Math.PI},${W},${P})`)}_basicDot(m){const{size:w,x:N,y:C}=m,O=w/7;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${N+w/2} ${C}a ${w/2} ${w/2} 0 1 0 0.1 0zm 0 ${O}a ${w/2-O} ${w/2-O} 0 1 1 -0.1 0Z`)}}))}_basicSquare(m){const{size:w,x:N,y:C}=m,O=w/7;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${N} ${C}v ${w}h ${w}v `+-w+`zM ${N+O} ${C+O}h `+(w-2*O)+"v "+(w-2*O)+"h "+(2*O-w)+"z")}}))}_basicExtraRounded(m){const{size:w,x:N,y:C}=m,O=w/7;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${N} ${C+2.5*O}v `+2*O+`a ${2.5*O} ${2.5*O}, 0, 0, 0, ${2.5*O} ${2.5*O}h `+2*O+`a ${2.5*O} ${2.5*O}, 0, 0, 0, ${2.5*O} ${2.5*-O}v `+-2*O+`a ${2.5*O} ${2.5*O}, 0, 0, 0, ${2.5*-O} ${2.5*-O}h `+-2*O+`a ${2.5*O} ${2.5*O}, 0, 0, 0, ${2.5*-O} ${2.5*O}M ${N+2.5*O} ${C+O}h `+2*O+`a ${1.5*O} ${1.5*O}, 0, 0, 1, ${1.5*O} ${1.5*O}v `+2*O+`a ${1.5*O} ${1.5*O}, 0, 0, 1, ${1.5*-O} ${1.5*O}h `+-2*O+`a ${1.5*O} ${1.5*O}, 0, 0, 1, ${1.5*-O} ${1.5*-O}v `+-2*O+`a ${1.5*O} ${1.5*O}, 0, 0, 1, ${1.5*O} ${1.5*-O}`)}}))}_drawDot({x:m,y:w,size:N,rotation:C}){this._basicDot({x:m,y:w,size:N,rotation:C})}_drawSquare({x:m,y:w,size:N,rotation:C}){this._basicSquare({x:m,y:w,size:N,rotation:C})}_drawExtraRounded({x:m,y:w,size:N,rotation:C}){this._basicExtraRounded({x:m,y:w,size:N,rotation:C})}}const p={dot:"dot",square:"square"},g=Object.values(p);class y{constructor({svg:m,type:w,window:N}){this._svg=m,this._type=w,this._window=N}draw(m,w,N,C){let O;O=this._type===p.square?this._drawSquare:this._drawDot,O.call(this,{x:m,y:w,size:N,rotation:C})}_rotateFigure({x:m,y:w,size:N,rotation:C=0,draw:O}){var B;const W=m+N/2,P=w+N/2;O(),(B=this._element)===null||B===void 0||B.setAttribute("transform",`rotate(${180*C/Math.PI},${W},${P})`)}_basicDot(m){const{size:w,x:N,y:C}=m;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(N+w/2)),this._element.setAttribute("cy",String(C+w/2)),this._element.setAttribute("r",String(w/2))}}))}_basicSquare(m){const{size:w,x:N,y:C}=m;this._rotateFigure(Object.assign(Object.assign({},m),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(N)),this._element.setAttribute("y",String(C)),this._element.setAttribute("width",String(w)),this._element.setAttribute("height",String(w))}}))}_drawDot({x:m,y:w,size:N,rotation:C}){this._basicDot({x:m,y:w,size:N,rotation:C})}_drawSquare({x:m,y:w,size:N,rotation:C}){this._basicSquare({x:m,y:w,size:N,rotation:C})}}const b="circle",A=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],E=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];class _{constructor(m,w){this._roundSize=N=>this._options.dotsOptions.roundSize?Math.floor(N):N,this._window=w,this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(m.width)),this._element.setAttribute("height",String(m.height)),this._element.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),m.dotsOptions.roundSize||this._element.setAttribute("shape-rendering","crispEdges"),this._element.setAttribute("viewBox",`0 0 ${m.width} ${m.height}`),this._defs=this._window.document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._imageUri=m.image,this._instanceId=_.instanceCount++,this._options=m}get width(){return this._options.width}get height(){return this._options.height}getElement(){return this._element}async drawQR(m){const w=m.getModuleCount(),N=Math.min(this._options.width,this._options.height)-2*this._options.margin,C=this._options.shape===b?N/Math.sqrt(2):N,O=this._roundSize(C/w);let B={hideXDots:0,hideYDots:0,width:0,height:0};if(this._qr=m,this._options.image){if(await this.loadImage(),!this._image)return;const{imageOptions:W,qrOptions:P}=this._options,X=W.imageSize*c[P.errorCorrectionLevel],ee=Math.floor(X*w*w);B=(function({originalHeight:se,originalWidth:Z,maxHiddenDots:J,maxHiddenAxisDots:z,dotSize:K}){const H={x:0,y:0},U={x:0,y:0};if(se<=0||Z<=0||J<=0||K<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};const F=se/Z;return H.x=Math.floor(Math.sqrt(J/F)),H.x<=0&&(H.x=1),z&&z<H.x&&(H.x=z),H.x%2==0&&H.x--,U.x=H.x*K,H.y=1+2*Math.ceil((H.x*F-1)/2),U.y=Math.round(U.x*F),(H.y*H.x>J||z&&z<H.y)&&(z&&z<H.y?(H.y=z,H.y%2==0&&H.x--):H.y-=2,U.y=H.y*K,H.x=1+2*Math.ceil((H.y/F-1)/2),U.x=Math.round(U.y/F)),{height:U.y,width:U.x,hideYDots:H.y,hideXDots:H.x}})({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:ee,maxHiddenAxisDots:w-14,dotSize:O})}this.drawBackground(),this.drawDots((W,P)=>{var X,ee,se,Z,J,z;return!(this._options.imageOptions.hideBackgroundDots&&W>=(w-B.hideYDots)/2&&W<(w+B.hideYDots)/2&&P>=(w-B.hideXDots)/2&&P<(w+B.hideXDots)/2||!((X=A[W])===null||X===void 0)&&X[P]||!((ee=A[W-w+7])===null||ee===void 0)&&ee[P]||!((se=A[W])===null||se===void 0)&&se[P-w+7]||!((Z=E[W])===null||Z===void 0)&&Z[P]||!((J=E[W-w+7])===null||J===void 0)&&J[P]||!((z=E[W])===null||z===void 0)&&z[P-w+7])}),this.drawCorners(),this._options.image&&await this.drawImage({width:B.width,height:B.height,count:w,dotSize:O})}drawBackground(){var m,w,N;const C=this._element,O=this._options;if(C){const B=(m=O.backgroundOptions)===null||m===void 0?void 0:m.gradient,W=(w=O.backgroundOptions)===null||w===void 0?void 0:w.color;let P=O.height,X=O.width;if(B||W){const ee=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect");this._backgroundClipPath=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._backgroundClipPath.setAttribute("id",`clip-path-background-color-${this._instanceId}`),this._defs.appendChild(this._backgroundClipPath),!((N=O.backgroundOptions)===null||N===void 0)&&N.round&&(P=X=Math.min(O.width,O.height),ee.setAttribute("rx",String(P/2*O.backgroundOptions.round))),ee.setAttribute("x",String(this._roundSize((O.width-X)/2))),ee.setAttribute("y",String(this._roundSize((O.height-P)/2))),ee.setAttribute("width",String(X)),ee.setAttribute("height",String(P)),this._backgroundClipPath.appendChild(ee),this._createColor({options:B,color:W,additionalRotation:0,x:0,y:0,height:O.height,width:O.width,name:`background-color-${this._instanceId}`})}}}drawDots(m){var w,N;if(!this._qr)throw"QR code is not defined";const C=this._options,O=this._qr.getModuleCount();if(O>C.width||O>C.height)throw"The canvas is too small.";const B=Math.min(C.width,C.height)-2*C.margin,W=C.shape===b?B/Math.sqrt(2):B,P=this._roundSize(W/O),X=this._roundSize((C.width-O*P)/2),ee=this._roundSize((C.height-O*P)/2),se=new l({svg:this._element,type:C.dotsOptions.type,window:this._window});this._dotsClipPath=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id",`clip-path-dot-color-${this._instanceId}`),this._defs.appendChild(this._dotsClipPath),this._createColor({options:(w=C.dotsOptions)===null||w===void 0?void 0:w.gradient,color:C.dotsOptions.color,additionalRotation:0,x:0,y:0,height:C.height,width:C.width,name:`dot-color-${this._instanceId}`});for(let Z=0;Z<O;Z++)for(let J=0;J<O;J++)m&&!m(Z,J)||!((N=this._qr)===null||N===void 0)&&N.isDark(Z,J)&&(se.draw(X+J*P,ee+Z*P,P,(z,K)=>!(J+z<0||Z+K<0||J+z>=O||Z+K>=O)&&!(m&&!m(Z+K,J+z))&&!!this._qr&&this._qr.isDark(Z+K,J+z)),se._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(se._element));if(C.shape===b){const Z=this._roundSize((B/P-O)/2),J=O+2*Z,z=X-Z*P,K=ee-Z*P,H=[],U=this._roundSize(J/2);for(let F=0;F<J;F++){H[F]=[];for(let $=0;$<J;$++)F>=Z-1&&F<=J-Z&&$>=Z-1&&$<=J-Z||Math.sqrt((F-U)*(F-U)+($-U)*($-U))>U?H[F][$]=0:H[F][$]=this._qr.isDark($-2*Z<0?$:$>=O?$-2*Z:$-Z,F-2*Z<0?F:F>=O?F-2*Z:F-Z)?1:0}for(let F=0;F<J;F++)for(let $=0;$<J;$++)H[F][$]&&(se.draw(z+$*P,K+F*P,P,(te,ne)=>{var ie;return!!(!((ie=H[F+ne])===null||ie===void 0)&&ie[$+te])}),se._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(se._element))}}drawCorners(){if(!this._qr)throw"QR code is not defined";const m=this._element,w=this._options;if(!m)throw"Element code is not defined";const N=this._qr.getModuleCount(),C=Math.min(w.width,w.height)-2*w.margin,O=w.shape===b?C/Math.sqrt(2):C,B=this._roundSize(O/N),W=7*B,P=3*B,X=this._roundSize((w.width-N*B)/2),ee=this._roundSize((w.height-N*B)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(([se,Z,J])=>{var z,K,H,U,F,$,te,ne,ie,ce,oe,de,we,me;const pe=X+se*B*(N-7),he=ee+Z*B*(N-7);let fe=this._dotsClipPath,M=this._dotsClipPath;if((!((z=w.cornersSquareOptions)===null||z===void 0)&&z.gradient||!((K=w.cornersSquareOptions)===null||K===void 0)&&K.color)&&(fe=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),fe.setAttribute("id",`clip-path-corners-square-color-${se}-${Z}-${this._instanceId}`),this._defs.appendChild(fe),this._cornersSquareClipPath=this._cornersDotClipPath=M=fe,this._createColor({options:(H=w.cornersSquareOptions)===null||H===void 0?void 0:H.gradient,color:(U=w.cornersSquareOptions)===null||U===void 0?void 0:U.color,additionalRotation:J,x:pe,y:he,height:W,width:W,name:`corners-square-color-${se}-${Z}-${this._instanceId}`})),((F=w.cornersSquareOptions)===null||F===void 0?void 0:F.type)&&f.includes(w.cornersSquareOptions.type)){const k=new h({svg:this._element,type:w.cornersSquareOptions.type,window:this._window});k.draw(pe,he,W,J),k._element&&fe&&fe.appendChild(k._element)}else{const k=new l({svg:this._element,type:(($=w.cornersSquareOptions)===null||$===void 0?void 0:$.type)||w.dotsOptions.type,window:this._window});for(let G=0;G<A.length;G++)for(let re=0;re<A[G].length;re++)!((te=A[G])===null||te===void 0)&&te[re]&&(k.draw(pe+re*B,he+G*B,B,(ae,le)=>{var ge;return!!(!((ge=A[G+le])===null||ge===void 0)&&ge[re+ae])}),k._element&&fe&&fe.appendChild(k._element))}if((!((ne=w.cornersDotOptions)===null||ne===void 0)&&ne.gradient||!((ie=w.cornersDotOptions)===null||ie===void 0)&&ie.color)&&(M=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),M.setAttribute("id",`clip-path-corners-dot-color-${se}-${Z}-${this._instanceId}`),this._defs.appendChild(M),this._cornersDotClipPath=M,this._createColor({options:(ce=w.cornersDotOptions)===null||ce===void 0?void 0:ce.gradient,color:(oe=w.cornersDotOptions)===null||oe===void 0?void 0:oe.color,additionalRotation:J,x:pe+2*B,y:he+2*B,height:P,width:P,name:`corners-dot-color-${se}-${Z}-${this._instanceId}`})),((de=w.cornersDotOptions)===null||de===void 0?void 0:de.type)&&g.includes(w.cornersDotOptions.type)){const k=new y({svg:this._element,type:w.cornersDotOptions.type,window:this._window});k.draw(pe+2*B,he+2*B,P,J),k._element&&M&&M.appendChild(k._element)}else{const k=new l({svg:this._element,type:((we=w.cornersDotOptions)===null||we===void 0?void 0:we.type)||w.dotsOptions.type,window:this._window});for(let G=0;G<E.length;G++)for(let re=0;re<E[G].length;re++)!((me=E[G])===null||me===void 0)&&me[re]&&(k.draw(pe+re*B,he+G*B,B,(ae,le)=>{var ge;return!!(!((ge=E[G+le])===null||ge===void 0)&&ge[re+ae])}),k._element&&M&&M.appendChild(k._element))}})}loadImage(){return new Promise((m,w)=>{var N;const C=this._options;if(!C.image)return w("Image is not defined");if(!((N=C.nodeCanvas)===null||N===void 0)&&N.loadImage)C.nodeCanvas.loadImage(C.image).then(O=>{var B,W;if(this._image=O,this._options.imageOptions.saveAsBlob){const P=(B=C.nodeCanvas)===null||B===void 0?void 0:B.createCanvas(this._image.width,this._image.height);(W=P?.getContext("2d"))===null||W===void 0||W.drawImage(O,0,0),this._imageUri=P?.toDataURL()}m()}).catch(w);else{const O=new this._window.Image;typeof C.imageOptions.crossOrigin=="string"&&(O.crossOrigin=C.imageOptions.crossOrigin),this._image=O,O.onload=async()=>{this._options.imageOptions.saveAsBlob&&(this._imageUri=await(async function(B,W){return new Promise(P=>{const X=new W.XMLHttpRequest;X.onload=function(){const ee=new W.FileReader;ee.onloadend=function(){P(ee.result)},ee.readAsDataURL(X.response)},X.open("GET",B),X.responseType="blob",X.send()})})(C.image||"",this._window)),m()},O.src=C.image}})}async drawImage({width:m,height:w,count:N,dotSize:C}){const O=this._options,B=this._roundSize((O.width-N*C)/2),W=this._roundSize((O.height-N*C)/2),P=B+this._roundSize(O.imageOptions.margin+(N*C-m)/2),X=W+this._roundSize(O.imageOptions.margin+(N*C-w)/2),ee=m-2*O.imageOptions.margin,se=w-2*O.imageOptions.margin,Z=this._window.document.createElementNS("http://www.w3.org/2000/svg","image");Z.setAttribute("href",this._imageUri||""),Z.setAttribute("xlink:href",this._imageUri||""),Z.setAttribute("x",String(P)),Z.setAttribute("y",String(X)),Z.setAttribute("width",`${ee}px`),Z.setAttribute("height",`${se}px`),this._element.appendChild(Z)}_createColor({options:m,color:w,additionalRotation:N,x:C,y:O,height:B,width:W,name:P}){const X=W>B?W:B,ee=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect");if(ee.setAttribute("x",String(C)),ee.setAttribute("y",String(O)),ee.setAttribute("height",String(B)),ee.setAttribute("width",String(W)),ee.setAttribute("clip-path",`url('#clip-path-${P}')`),m){let se;if(m.type==="radial")se=this._window.document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),se.setAttribute("id",P),se.setAttribute("gradientUnits","userSpaceOnUse"),se.setAttribute("fx",String(C+W/2)),se.setAttribute("fy",String(O+B/2)),se.setAttribute("cx",String(C+W/2)),se.setAttribute("cy",String(O+B/2)),se.setAttribute("r",String(X/2));else{const Z=((m.rotation||0)+N)%(2*Math.PI),J=(Z+2*Math.PI)%(2*Math.PI);let z=C+W/2,K=O+B/2,H=C+W/2,U=O+B/2;J>=0&&J<=.25*Math.PI||J>1.75*Math.PI&&J<=2*Math.PI?(z-=W/2,K-=B/2*Math.tan(Z),H+=W/2,U+=B/2*Math.tan(Z)):J>.25*Math.PI&&J<=.75*Math.PI?(K-=B/2,z-=W/2/Math.tan(Z),U+=B/2,H+=W/2/Math.tan(Z)):J>.75*Math.PI&&J<=1.25*Math.PI?(z+=W/2,K+=B/2*Math.tan(Z),H-=W/2,U-=B/2*Math.tan(Z)):J>1.25*Math.PI&&J<=1.75*Math.PI&&(K+=B/2,z+=W/2/Math.tan(Z),U-=B/2,H-=W/2/Math.tan(Z)),se=this._window.document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),se.setAttribute("id",P),se.setAttribute("gradientUnits","userSpaceOnUse"),se.setAttribute("x1",String(Math.round(z))),se.setAttribute("y1",String(Math.round(K))),se.setAttribute("x2",String(Math.round(H))),se.setAttribute("y2",String(Math.round(U)))}m.colorStops.forEach(({offset:Z,color:J})=>{const z=this._window.document.createElementNS("http://www.w3.org/2000/svg","stop");z.setAttribute("offset",100*Z+"%"),z.setAttribute("stop-color",J),se.appendChild(z)}),ee.setAttribute("fill",`url('#${P}')`),this._defs.appendChild(se)}else w&&ee.setAttribute("fill",w);this._element.appendChild(ee)}}_.instanceCount=0;const S=_,I="canvas",D={};for(let T=0;T<=40;T++)D[T]=T;const L={type:I,shape:"square",width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:D[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{saveAsBlob:!0,hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000",roundSize:!0},backgroundOptions:{round:0,color:"#fff"}};function x(T){const m=Object.assign({},T);if(!m.colorStops||!m.colorStops.length)throw"Field 'colorStops' is required in gradient";return m.rotation?m.rotation=Number(m.rotation):m.rotation=0,m.colorStops=m.colorStops.map(w=>Object.assign(Object.assign({},w),{offset:Number(w.offset)})),m}function j(T){const m=Object.assign({},T);return m.width=Number(m.width),m.height=Number(m.height),m.margin=Number(m.margin),m.imageOptions=Object.assign(Object.assign({},m.imageOptions),{hideBackgroundDots:!!m.imageOptions.hideBackgroundDots,imageSize:Number(m.imageOptions.imageSize),margin:Number(m.imageOptions.margin)}),m.margin>Math.min(m.width,m.height)&&(m.margin=Math.min(m.width,m.height)),m.dotsOptions=Object.assign({},m.dotsOptions),m.dotsOptions.gradient&&(m.dotsOptions.gradient=x(m.dotsOptions.gradient)),m.cornersSquareOptions&&(m.cornersSquareOptions=Object.assign({},m.cornersSquareOptions),m.cornersSquareOptions.gradient&&(m.cornersSquareOptions.gradient=x(m.cornersSquareOptions.gradient))),m.cornersDotOptions&&(m.cornersDotOptions=Object.assign({},m.cornersDotOptions),m.cornersDotOptions.gradient&&(m.cornersDotOptions.gradient=x(m.cornersDotOptions.gradient))),m.backgroundOptions&&(m.backgroundOptions=Object.assign({},m.backgroundOptions),m.backgroundOptions.gradient&&(m.backgroundOptions.gradient=x(m.backgroundOptions.gradient))),m}var V=s(873),Y=s.n(V);function q(T){if(!T)throw new Error("Extension must be defined");T[0]==="."&&(T=T.substring(1));const m={bmp:"image/bmp",gif:"image/gif",ico:"image/vnd.microsoft.icon",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",webp:"image/webp",pdf:"application/pdf"}[T.toLowerCase()];if(!m)throw new Error(`Extension "${T}" is not supported`);return m}class R{constructor(m){m!=null&&m.jsdom?this._window=new m.jsdom("",{resources:"usable"}).window:this._window=window,this._options=m?j(a(L,m)):L,this.update()}static _clearContainer(m){m&&(m.innerHTML="")}_setupSvg(){if(!this._qr)return;const m=new S(this._options,this._window);this._svg=m.getElement(),this._svgDrawingPromise=m.drawQR(this._qr).then(()=>{var w;this._svg&&((w=this._extension)===null||w===void 0||w.call(this,m.getElement(),this._options))})}_setupCanvas(){var m,w;this._qr&&(!((m=this._options.nodeCanvas)===null||m===void 0)&&m.createCanvas?(this._nodeCanvas=this._options.nodeCanvas.createCanvas(this._options.width,this._options.height),this._nodeCanvas.width=this._options.width,this._nodeCanvas.height=this._options.height):(this._domCanvas=document.createElement("canvas"),this._domCanvas.width=this._options.width,this._domCanvas.height=this._options.height),this._setupSvg(),this._canvasDrawingPromise=(w=this._svgDrawingPromise)===null||w===void 0?void 0:w.then(()=>{var N;if(!this._svg)return;const C=this._svg,O=new this._window.XMLSerializer().serializeToString(C),B=btoa(O),W=`data:${q("svg")};base64,${B}`;if(!((N=this._options.nodeCanvas)===null||N===void 0)&&N.loadImage)return this._options.nodeCanvas.loadImage(W).then(P=>{var X,ee;P.width=this._options.width,P.height=this._options.height,(ee=(X=this._nodeCanvas)===null||X===void 0?void 0:X.getContext("2d"))===null||ee===void 0||ee.drawImage(P,0,0)});{const P=new this._window.Image;return new Promise(X=>{P.onload=()=>{var ee,se;(se=(ee=this._domCanvas)===null||ee===void 0?void 0:ee.getContext("2d"))===null||se===void 0||se.drawImage(P,0,0),X()},P.src=W})}}))}async _getElement(m="png"){if(!this._qr)throw"QR code is empty";return m.toLowerCase()==="svg"?(this._svg&&this._svgDrawingPromise||this._setupSvg(),await this._svgDrawingPromise,this._svg):((this._domCanvas||this._nodeCanvas)&&this._canvasDrawingPromise||this._setupCanvas(),await this._canvasDrawingPromise,this._domCanvas||this._nodeCanvas)}update(m){R._clearContainer(this._container),this._options=m?j(a(this._options,m)):this._options,this._options.data&&(this._qr=Y()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||(function(w){switch(!0){case/^[0-9]*$/.test(w):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(w):return"Alphanumeric";default:return"Byte"}})(this._options.data)),this._qr.make(),this._options.type===I?this._setupCanvas():this._setupSvg(),this.append(this._container))}append(m){if(m){if(typeof m.appendChild!="function")throw"Container should be a single DOM node";this._options.type===I?this._domCanvas&&m.appendChild(this._domCanvas):this._svg&&m.appendChild(this._svg),this._container=m}}applyExtension(m){if(!m)throw"Extension function should be defined.";this._extension=m,this.update()}deleteExtension(){this._extension=void 0,this.update()}async getRawData(m="png"){if(!this._qr)throw"QR code is empty";const w=await this._getElement(m),N=q(m);if(!w)return null;if(m.toLowerCase()==="svg"){const C=`<?xml version="1.0" standalone="no"?>\r
${new this._window.XMLSerializer().serializeToString(w)}`;return typeof Blob>"u"||this._options.jsdom?De.Buffer.from(C):new Blob([C],{type:N})}return new Promise(C=>{const O=w;if("toBuffer"in O)if(N==="image/png")C(O.toBuffer(N));else if(N==="image/jpeg")C(O.toBuffer(N));else{if(N!=="application/pdf")throw Error("Unsupported extension");C(O.toBuffer(N))}else"toBlob"in O&&O.toBlob(C,N,1)})}async download(m){if(!this._qr)throw"QR code is empty";if(typeof Blob>"u")throw"Cannot download in Node.js, call getRawData instead.";let w="png",N="qr";typeof m=="string"?(w=m,console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")):typeof m=="object"&&m!==null&&(m.name&&(N=m.name),m.extension&&(w=m.extension));const C=await this._getElement(w);if(C)if(w.toLowerCase()==="svg"){let O=new XMLSerializer().serializeToString(C);O=`<?xml version="1.0" standalone="no"?>\r
`+O,u(`data:${q(w)};charset=utf-8,${encodeURIComponent(O)}`,`${N}.svg`)}else u(C.toDataURL(q(w)),`${N}.${w}`)}}const v=R})(),i.default})())})(BS);var PO=BS.exports;const qb=aa(PO),Be={QR_CODE:260,LOADING_LOGO:80,MODAL_WIDTH:343,MODAL_BORDER_RADIUS:20,QR_CARD_PADDING:28,BUTTON_PADDING_VERTICAL:16,BUTTON_PADDING_HORIZONTAL:20,BUTTON_BORDER_RADIUS:12,ICON_SMALL:24,ICON_MEDIUM:28,ICON_LARGE:80,CLOSE_BUTTON_SIZE:34,HEADER_PADDING:18},Vn={QR_RENDER_DELAY:100,COPY_FEEDBACK_DURATION:2e3,ANIMATION_DURATION:200,SAFARI_CONNECT_DELAY:0,NON_SAFARI_CONNECT_DELAY:100},au={OVERLAY:9999,LOADING_BORDER_AFTER:1,LOADING_LOGO:2},Mt={SIZE:260,MARGIN:0,IMAGE_MARGIN:6,IMAGE_SIZE:.25,DOT_COLOR:"#000637",ERROR_CORRECTION_LEVEL:"Q",DOT_TYPE:"rounded",BACKGROUND_COLOR:"transparent"},cu={MAX_COLOR_VALUE:255},e0={SAFARI:/^((?!chrome|android).)*safari/i,MOBILE:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i},uu={USER_REJECTED:4001,POPUP_CLOSED:-32002},jt={LIGHT:300,MEDIUM:500,SEMIBOLD:600};function bp(e,t){const n=e.replace("#",""),r=parseInt(n,16),s=Math.round(cu.MAX_COLOR_VALUE*t);let i=(r>>16)+s,o=(r>>8&255)+s,a=(r&255)+s;return i=Math.max(0,Math.min(cu.MAX_COLOR_VALUE,i)),o=Math.max(0,Math.min(cu.MAX_COLOR_VALUE,o)),a=Math.max(0,Math.min(cu.MAX_COLOR_VALUE,a)),`#${(i<<16|o<<8|a).toString(16).padStart(6,"0")}`}function lu(){return e0.SAFARI.test(navigator.userAgent)}function vp(){return e0.MOBILE.test(navigator.userAgent)}function US(e){return e.includes("xumm.app/sign")&&e.includes(".png")}function zo(e){return new Promise(t=>setTimeout(t,e))}const je=ju("[WalletConnector]");let Ep=null;if(typeof window<"u"&&typeof HTMLElement<"u"){class e extends HTMLElement{constructor(){super(),this.walletManager=null,this.isOpen=!1,this.isFirstOpen=!0,this.primaryWalletId=null,this.viewState="list",this.qrCodeData=null,this.loadingData=null,this.errorData=null,this.accountSelectionData=null,this.previousModalHeight=0,this.preGeneratedQRCode=null,this.preGeneratedURI=null,this.specifiedWalletIds=[],this.availableWallets=[],this.walletAvailabilityChecked=!1,this.accountModalOpen=!1,this.accountBalance=null,this.shadow=this.attachShadow({mode:"open"})}static get observedAttributes(){return["primary-wallet","wallets"]}connectedCallback(){this.render(),requestAnimationFrame(()=>this.updateDerivedColors()),new MutationObserver(()=>{this.updateDerivedColors()}).observe(this,{attributes:!0,attributeFilter:["style"]})}updateDerivedColors(){const n=window.getComputedStyle(this),r=n.getPropertyValue("--xc-primary-color").trim()||"#0EA5E9",s=n.getPropertyValue("--xc-background-color").trim()||"#000637",i=bp(r,.15),o=bp(s,.15);this.style.setProperty("--xc-primary-button-hover-background",i),this.style.setProperty("--xc-connect-button-hover-background",o),this.style.setProperty("--xc-account-address-button-hover-color",i)}attributeChangedCallback(n,r,s){this.shadow.children.length>0&&this.render()}setWalletManager(n){this.walletManager=n,this.walletManager.on("connect",()=>{this.close(),this.render()}),this.walletManager.on("disconnect",()=>{this.render()}),this.walletManager.on("accountChanged",()=>{this.render()}),this.render(),this.checkXamanStateOnInit()}async checkXamanStateOnInit(){var n,r;try{if(this.listAdapters().includes("xaman")){const s=(r=(n=this.walletManager)==null?void 0:n.adapters)==null?void 0:r.get("xaman");if(!s)return;await s.checkXamanState()&&this.walletManager&&!this.walletManager.connected&&await this.walletManager.connect("xaman")}}catch(s){console.error("Failed to check Xaman state:",s)}}parseWalletAttribute(){var n;const r=this.getAttribute("wallets")||"";return r?r.split(",").map(s=>s.trim()).filter(s=>s.length>0):((n=this.walletManager)==null?void 0:n.wallets.map(s=>s.id))||[]}listAdapters(){var n;const r=[];if(!((n=this.walletManager)!=null&&n.wallets))return r;for(const s of Object.values(this.walletManager.wallets))r.push(s.id);return r}async checkWalletAvailability(){if(!this.walletManager||!this.walletManager.wallets.length){je.warn("No wallet manager or wallets registered"),this.availableWallets=[];return}try{this.specifiedWalletIds=this.parseWalletAttribute(),je.debug("Checking availability for wallets:",this.specifiedWalletIds);const n=this.walletManager.wallets.filter(s=>this.specifiedWalletIds.includes(s.id)),r=await Promise.all(n.map(async s=>{try{const i=await s.isAvailable();return je.debug(`Wallet ${s.id} availability: ${i}`),{wallet:s,available:i}}catch(i){return je.warn(`Error checking availability for ${s.id}:`,i),{wallet:s,available:!1}}}));this.availableWallets=this.specifiedWalletIds.map(s=>{var i;return(i=r.find(o=>o.wallet.id===s))==null?void 0:i.wallet}).filter(s=>{var i;return(s!==void 0&&((i=r.find(o=>o.wallet.id===s.id))==null?void 0:i.available))??!1}),je.debug("Available wallets:",this.availableWallets.map(s=>s.id))}catch(n){je.error("Error checking wallet availability:",n),this.availableWallets=[]}}async open(){this.isOpen=!0,this.isFirstOpen=!0,document.body.style.overflow="hidden",this.walletAvailabilityChecked||(await this.checkWalletAvailability(),this.walletAvailabilityChecked=!0),this.render(),this.dispatchEvent(new CustomEvent("open")),this.preInitializeWalletConnect()}close(){this.isOpen=!1,document.body.style.overflow="",this.viewState="list",this.qrCodeData=null,this.loadingData=null,this.errorData=null,this.accountSelectionData=null,this.render(),this.dispatchEvent(new CustomEvent("close"))}toggle(){this.isOpen?this.close():this.open()}openAccountModal(){this.accountModalOpen=!0,this.render()}closeAccountModal(){this.accountModalOpen=!1,this.render()}async disconnectFromAccountModal(){var n;try{await((n=this.walletManager)==null?void 0:n.disconnect()),this.closeAccountModal(),this.render()}catch(r){je.error("Failed to disconnect:",r)}}setAccountBalance(n){this.accountBalance=n,this.render()}getAccountBalance(){return this.accountBalance}async preInitializeWalletConnect(){var n,r;if(!this.walletManager)return;const s=this.walletManager.wallets.find(i=>i.id==="walletconnect");if(s&&typeof s.preInitialize=="function")try{je.debug("Pre-initializing WalletConnect...");const i=(n=s.options)==null?void 0:n.projectId,o=(r=this.walletManager.options)==null?void 0:r.network;s.options||(s.options={}),s.options.onQRCode=a=>{je.debug("Pre-generating QR code..."),this.preGenerateQRCode(a)},await s.preInitialize(i,o)}catch(i){je.warn("Failed to pre-initialize WalletConnect:",i)}}async preGenerateQRCode(n){var r;try{this.preGeneratedURI=n;const s=(r=this.walletManager)==null?void 0:r.wallets.find(o=>o.id==="walletconnect"),i=new qb({width:Mt.SIZE,height:Mt.SIZE,type:"svg",data:n,image:s?.icon,margin:Mt.MARGIN,qrOptions:{errorCorrectionLevel:Mt.ERROR_CORRECTION_LEVEL},dotsOptions:{type:Mt.DOT_TYPE,color:Mt.DOT_COLOR},backgroundOptions:{color:Mt.BACKGROUND_COLOR},imageOptions:{crossOrigin:"anonymous",margin:Mt.IMAGE_MARGIN,imageSize:Mt.IMAGE_SIZE}});this.preGeneratedQRCode=i,je.debug("QR code pre-generated successfully")}catch(s){je.warn("Failed to pre-generate QR code:",s)}}async connectWallet(n,r){var s,i,o;if(!this.walletManager){je.error("WalletManager not set");return}try{const a=this.walletManager.wallets.find(u=>u.id===n);if(!a)throw new Error("Wallet not found");if(je.debug("Connecting to wallet:",n),n==="walletconnect"){const u=a,c=((s=u.options)==null?void 0:s.useModal)??!1,l=((i=u.options)==null?void 0:i.modalMode)??"mobile-only";if(c&&(l==="always"||l==="mobile-only"&&vp()))je.debug("Using WalletConnect modal (mobile deeplink mode)"),this.showLoadingView(n,a.name,a.icon),this.dispatchEvent(new CustomEvent("connecting",{detail:{walletId:n}})),await zo(Vn.NON_SAFARI_CONNECT_DELAY),await this.walletManager.connect(n,r),this.dispatchEvent(new CustomEvent("connected",{detail:{walletId:n}})),this.close();else{je.debug("Using custom QR code (desktop mode)"),this.showQRCodeView(n);const d={...r,onQRCode:f=>{je.debug("QR code callback received:",f.substring(0,50)+"..."),this.setQRCode(n,f)}};this.dispatchEvent(new CustomEvent("connecting",{detail:{walletId:n}})),await this.walletManager.connect(n,d),this.dispatchEvent(new CustomEvent("connected",{detail:{walletId:n}}))}}else if(n==="ledger"){if(!await a.isAvailable())throw new Error(`${a.name} is not supported in this browser. Please use Chrome, Edge, or Opera.`);this.showLoadingView(n,a.name,a.icon),lu()||await zo(Vn.NON_SAFARI_CONNECT_DELAY),je.debug("Fetching Ledger accounts...");const u=await a.getAccounts(5,0);je.debug("Fetched accounts:",u),this.showAccountSelectionView(n,a.name,a.icon,u)}else{if(!await a.isAvailable())throw new Error(`${a.name} is not installed. Please install the extension first.`);this.showLoadingView(n,a.name,a.icon),this.dispatchEvent(new CustomEvent("connecting",{detail:{walletId:n}})),lu()||await zo(Vn.NON_SAFARI_CONNECT_DELAY),await this.walletManager.connect(n,r),this.dispatchEvent(new CustomEvent("connected",{detail:{walletId:n}}))}}catch(a){const u=(o=this.walletManager)==null?void 0:o.wallets.find(d=>d.id===n);let c=a.message||"An unexpected error occurred",l="failed";a.code===uu.USER_REJECTED||c.toLowerCase().includes("user rejected")?(l="rejected",c="Connection request was cancelled"):a.code===uu.POPUP_CLOSED||c.toLowerCase().includes("already pending")?(l="unavailable",c="Wallet popup was closed or did not respond. Please try again."):c.toLowerCase().includes("not installed")&&(l="unavailable"),je.debug("Connection error type:",l,"Code:",a.code),this.showErrorView(n,u?.name||"Wallet",new Error(c)),this.dispatchEvent(new CustomEvent("error",{detail:{error:a,walletId:n,errorType:l}})),je.error("Failed to connect:",a)}}async connectWithLedgerAccount(n){if(!this.walletManager||!this.accountSelectionData)return;const{walletId:r,walletName:s,walletIcon:i}=this.accountSelectionData;try{this.showLoadingView(r,s,i),lu()||await zo(Vn.NON_SAFARI_CONNECT_DELAY),je.debug("Connecting to Ledger with account index:",n),this.dispatchEvent(new CustomEvent("connecting",{detail:{walletId:r,accountIndex:n}})),await this.walletManager.connect(r,{accountIndex:n}),this.dispatchEvent(new CustomEvent("connected",{detail:{walletId:r,accountIndex:n}}))}catch(o){let a=o.message||"An unexpected error occurred",u="failed";(o.code===uu.USER_REJECTED||a.toLowerCase().includes("user rejected"))&&(u="rejected",a="Connection request was cancelled"),je.debug("Connection error type:",u,"Code:",o.code),this.showErrorView(r,s,new Error(a)),this.dispatchEvent(new CustomEvent("error",{detail:{error:o,walletId:r,errorType:u}})),je.error("Failed to connect:",o)}}async connectWithCustomDerivationPath(n){if(!this.walletManager||!this.accountSelectionData)return;const{walletId:r,walletName:s,walletIcon:i}=this.accountSelectionData;try{if(!/^44'\/144'\/\d+'\/\d+\/\d+$/.test(n))throw new Error("Invalid derivation path format. Expected format: 44'/144'/0'/0/0");this.showLoadingView(r,s,i),lu()||await zo(Vn.NON_SAFARI_CONNECT_DELAY),je.debug("Connecting to Ledger with custom derivation path:",n),this.dispatchEvent(new CustomEvent("connecting",{detail:{walletId:r,derivationPath:n}})),await this.walletManager.connect(r,{derivationPath:n}),this.dispatchEvent(new CustomEvent("connected",{detail:{walletId:r,derivationPath:n}}))}catch(o){let a=o.message||"An unexpected error occurred",u="failed";(o.code===uu.USER_REJECTED||a.toLowerCase().includes("user rejected"))&&(u="rejected",a="Connection request was cancelled"),je.debug("Connection error type:",u,"Code:",o.code),this.showErrorView(r,s,new Error(a)),this.dispatchEvent(new CustomEvent("error",{detail:{error:o,walletId:r,errorType:u}})),je.error("Failed to connect:",o)}}showQRCodeView(n,r){this.viewState="qr",this.qrCodeData={walletId:n,uri:r||""},this.loadingData=null,this.errorData=null,this.accountSelectionData=null,this.render()}showLoadingView(n,r,s){this.viewState="loading",this.loadingData={walletId:n,walletName:r,walletIcon:s},this.qrCodeData=null,this.errorData=null,this.accountSelectionData=null,this.render()}showErrorView(n,r,s){this.viewState="error",this.errorData={walletId:n,walletName:r,error:s},this.qrCodeData=null,this.loadingData=null,this.accountSelectionData=null,this.render()}showWalletList(){this.viewState="list",this.qrCodeData=null,this.loadingData=null,this.errorData=null,this.accountSelectionData=null,this.render()}showAccountSelectionView(n,r,s,i){this.viewState="account-selection",this.accountSelectionData={walletId:n,walletName:r,walletIcon:s,accounts:i},this.qrCodeData=null,this.loadingData=null,this.errorData=null,this.render()}setQRCode(n,r){var s,i;je.debug("setQRCode called:",{walletId:n,uri:r.substring(0,60)+"...",viewState:this.viewState,qrCodeData:this.qrCodeData}),this.viewState==="qr"&&((s=this.qrCodeData)==null?void 0:s.walletId)===n?(this.qrCodeData.uri=r,setTimeout(()=>{je.debug("Attempting to render QR code...");const o=this.shadow.querySelector("#qr-container");je.debug("QR container found:",!!o),this.renderQRCode(r)},Vn.QR_RENDER_DELAY)):je.warn("QR code view not active or wallet mismatch",{viewState:this.viewState,expectedWallet:n,currentDataWallet:(i=this.qrCodeData)==null?void 0:i.walletId})}async renderQRCode(n){var r;je.debug("renderQRCode called with URI:",n.substring(0,60)+"...");const s=this.shadow.querySelector("#qr-container");if(!s||!n){je.warn("No container or URI for QR code rendering");return}try{if(US(n)){je.debug("Using direct QR code image from Xaman"),s.innerHTML=`
          <img
            src="${n}"
            alt="QR Code"
            style="width: ${Be.QR_CODE}px; height: ${Be.QR_CODE}px; border-radius: 16px; display: block;"
          />
        `;return}if(this.preGeneratedQRCode&&this.preGeneratedURI===n){je.debug("Using pre-generated QR code - instant render!"),s.innerHTML="",this.preGeneratedQRCode.append(s);return}je.debug("Generating modern QR code from URI");const i=(r=this.walletManager)==null?void 0:r.wallets.find(a=>{var u;return a.id===((u=this.qrCodeData)==null?void 0:u.walletId)}),o=new qb({width:Mt.SIZE,height:Mt.SIZE,type:"svg",data:n,image:i?.icon,margin:Mt.MARGIN,qrOptions:{errorCorrectionLevel:Mt.ERROR_CORRECTION_LEVEL},dotsOptions:{type:Mt.DOT_TYPE,color:Mt.DOT_COLOR},backgroundOptions:{color:Mt.BACKGROUND_COLOR},imageOptions:{crossOrigin:"anonymous",margin:Mt.IMAGE_MARGIN,imageSize:Mt.IMAGE_SIZE}});s.innerHTML="",o.append(s),je.debug("Modern QR code generated successfully")}catch(i){je.error("Failed to generate QR code:",i),s.innerHTML=`
        <div class="qr-loading" style="color: #ef4444;">
          Failed to generate QR code
        </div>
      `}}truncateAddress(n,r=6){return n.length<=r*2?n:`${n.substring(0,r)}...${n.substring(n.length-r)}`}generateGradientFromAddress(n){let r=0;for(let u=0;u<n.length;u++){const c=n.charCodeAt(u);r=(r<<5)-r+c,r=r&r}const s=Math.abs(r%360),i=(s+60)%360,o=`hsl(${s}, 70%, 55%)`,a=`hsl(${i}, 70%, 55%)`;return{color1:o,color2:a}}render(){var n,r,s;const i=this.shadow.querySelector(".modal");i&&(this.previousModalHeight=i.offsetHeight),this.primaryWalletId=this.getAttribute("primary-wallet");const o=((n=this.walletManager)==null?void 0:n.connected)||!1,a=(r=this.walletManager)==null?void 0:r.account,u=o&&a?this.truncateAddress(a.address,4):"Connect Wallet",c=this.walletAvailabilityChecked&&this.availableWallets.length>0?this.availableWallets:((s=this.walletManager)==null?void 0:s.wallets)||[],l=this.primaryWalletId?c.find(g=>g.id===this.primaryWalletId):null,d=c.filter(g=>g.id!==this.primaryWalletId);let f="";this.viewState==="qr"&&this.qrCodeData?f=this.renderQRView():this.viewState==="loading"&&this.loadingData?f=this.renderLoadingView():this.viewState==="error"&&this.errorData?f=this.renderErrorView():this.viewState==="account-selection"&&this.accountSelectionData?f=this.renderAccountSelectionView():f=this.renderWalletListView(l,d);const h=this.isFirstOpen?"overlay fade-in":"overlay",p=this.isFirstOpen?"modal slide-up":"modal";this.isFirstOpen&&(this.isFirstOpen=!1),this.shadow.innerHTML=`
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Karla:wght@300;400;600&display=swap');

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: var(--font-family);
        color: var(--text-color);
      }

      html, body {
        overflow-y: overlay;
      }

      :host {
        /* Defaults for CSS variables - can be overridden via style attribute or CSS */
        /* General */
        --xc-font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        --xc-border-radius: 12px;
        --xc-overlay-background: rgba(0, 0, 0, 0.7);
        --xc-overlay-backdrop-filter: blur(0px);

        /* Colors */
        --xc-primary-color: #0EA5E9;
        --xc-background-color: #000637;
        --xc-text-color: #F5F4E7;
        --xc-text-muted-color: rgba(245, 244, 231, 0.6);
        --xc-background-secondary: #1a1a3e;
        --xc-background-tertiary: #242452;
        --xc-loading-border-color: #0EA5E9;

        /* Connect Button */
        --xc-connect-button-font-size: 16px;
        --xc-connect-button-border-radius: 8px;
        --xc-connect-button-color: var(--xc-text-color);
        --xc-connect-button-background: var(--xc-background-color);
        --xc-connect-button-border: 1px solid rgba(255, 255, 255, 0.1);
        --xc-connect-button-hover-background: var(--xc-background-color);
        --xc-connect-button-font-weight: 600;

        /* Primary Button */
        --xc-primary-button-color: #ffffff;
        --xc-primary-button-background: var(--xc-primary-color);
        --xc-primary-button-border-radius: 8px;
        --xc-primary-button-font-weight: 600;
        --xc-primary-button-hover-background: var(--xc-primary-color);

        /* Secondary Button */
        --xc-secondary-button-color: var(--xc-text-color);
        --xc-secondary-button-background: var(--xc-background-secondary);
        --xc-secondary-button-border-radius: 8px;
        --xc-secondary-button-font-weight: 500;
        --xc-secondary-button-hover-background: var(--xc-background-tertiary);

        /* Account Address Button */
        --xc-account-address-button-hover-color: var(--xc-primary-color);

        /* Modal */
        --xc-modal-background: var(--xc-background-color);
        --xc-modal-border-radius: 12px;
        --xc-modal-box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);

        /* Miscellaneous */
        --xc-focus-color: var(--xc-primary-color);
        --xc-danger-color: #ef4444;
        --xc-success-color: #10b981;
        --xc-warning-color: #f59e0b;

        /* Internal aliases */
        --bg-color: var(--xc-background-color);
        --text-color: var(--xc-text-color);
        --primary-color: var(--xc-primary-color);
        --primary-bn-hover: var(--xc-primary-button-hover-background);
        --font-family: var(--xc-font-family);
        --wallet-btn-bg: var(--xc-background-secondary);
        --wallet-btn-hover: var(--xc-background-tertiary);
      }

      /* WalletConnect Modal Overrides */
      /* These styles ensure the WalletConnect modal appears correctly and matches your theme */
      wcm-modal,
      w3m-modal {
        /* Ensure modal appears on top of everything */
        --wcm-z-index: 2147483647 !important;
        --w3m-z-index: 2147483647 !important;

        /* Match your app's theme (optional) */
        --wcm-accent-color: var(--xc-primary-color) !important;
        --wcm-background-color: var(--xc-background-color) !important;
      }

      @keyframes heightChange {
        from { height: var(--old-height); }
        to { height: var(--new-height); }
      }

      .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: var(--xc-overlay-background);
        backdrop-filter: var(--xc-overlay-backdrop-filter);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: ${au.OVERLAY};
      }

      .overlay.fade-in {
        animation: fadeIn ${Vn.ANIMATION_DURATION}ms ease-out;
      }

      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }

      .modal {
        background: var(--xc-modal-background);
        color: var(--xc-text-color);
        border-radius: var(--xc-modal-border-radius);
        width: ${Be.MODAL_WIDTH}px;
        max-width: calc(100vw - 32px);
        max-height: 85vh;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        box-shadow: var(--xc-modal-box-shadow);
        border: 1px solid rgba(255, 255, 255, 0.08);
        transition: height ${Vn.ANIMATION_DURATION}ms cubic-bezier(0.25, 0.1, 0.25, 1);
      }

      .modal.slide-up {
        animation: slideUp 0.3s ease-out;
      }

      @keyframes slideUp {
        from { transform: translateY(20px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
      }

      .header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: ${Be.HEADER_PADDING}px 20px 16px;
      }

      .header-with-back {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .back-button {
        width: ${Be.CLOSE_BUTTON_SIZE}px;
        height: ${Be.CLOSE_BUTTON_SIZE}px;
        border-radius: 50%;
        border: none;
        background: transparent;
        color: var(--text-color);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        opacity: 0.7;
        transition: all 0.2s;
      }

      .back-button:hover {
        opacity: 1;
        background: var(--wallet-btn-bg);
      }

      .title {
        font-size: 22px;
        font-weight: ${jt.SEMIBOLD};
        letter-spacing: -0.3px;
        flex: 1;
      }

      .close-button {
        width: ${Be.CLOSE_BUTTON_SIZE}px;
        height: ${Be.CLOSE_BUTTON_SIZE}px;
        border-radius: 50%;
        border: none;
        background: transparent;
        color: var(--text-color);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        opacity: 0.7;
        transition: all 0.2s;
      }

      .close-button:hover {
        opacity: 1;
        background: var(--wallet-btn-bg);
      }

      .content {
        flex: 1;
        overflow-y: hidden;
        padding: 0 24px 24px;
        transition: opacity 0.3s ease;
        -ms-overflow-style: none;
        scrollbar-width: none;
      }

      .content::-webkit-scrollbar {
        display: none;
      }

      .connect-button {
        padding: ${Be.BUTTON_PADDING_VERTICAL}px ${Be.BUTTON_PADDING_HORIZONTAL}px;
        border-radius: var(--xc-connect-button-border-radius);
        border: var(--xc-connect-button-border);
        background: var(--xc-connect-button-background);
        color: var(--xc-connect-button-color);
        font-size: var(--xc-connect-button-font-size);
        font-weight: var(--xc-connect-button-font-weight);
        cursor: pointer;
        transition: all 0.2s;
        font-family: var(--xc-font-family);
      }

      .connect-button:hover {
        background: var(--xc-connect-button-hover-background);
      }

      .primary-button {
        width: 100%;
        padding: ${Be.BUTTON_PADDING_VERTICAL}px ${Be.BUTTON_PADDING_HORIZONTAL}px;
        border-radius: var(--xc-primary-button-border-radius);
        border: none;
        margin-bottom: 20px;
        background: var(--xc-primary-button-background);
        color: var(--xc-primary-button-color);
        font-size: 16px;
        font-weight: var(--xc-primary-button-font-weight);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        transition: all 0.2s;
      }

      .primary-button:hover {
          background: var(--xc-primary-button-hover-background);
      }

      .wallet-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .wallet-button {
        width: 100%;
        padding: ${Be.BUTTON_PADDING_VERTICAL}px ${Be.BUTTON_PADDING_HORIZONTAL}px;
        border-radius: var(--xc-secondary-button-border-radius);
        border: none;
        background: var(--xc-secondary-button-background);
        color: var(--xc-secondary-button-color);
        font-size: 16px;
        font-weight: var(--xc-secondary-button-font-weight);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: space-between;
        transition: background 0.2s;
      }

      .wallet-button:hover {
        background: var(--xc-secondary-button-hover-background);
      }

      .wallet-button img {
        border-radius: 6px;
      }

      .qr-view {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 20px;
        padding: 20px 0;
      }

      .qr-card {
        background: #fff;
        border-radius: ${Be.MODAL_BORDER_RADIUS}px;
        padding: ${Be.QR_CARD_PADDING}px;
        width: 100%;
        max-width: 295px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.12), 0 0 0 1px rgba(0,0,0,0.05);
        border: 1px solid rgba(0,0,0,0.06);
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 18px;
      }

      .qr-header {
        font-size: 16px;
        font-weight: ${jt.SEMIBOLD};
        color: #111;
      }

      .qr-container {
        width: ${Be.QR_CODE}px;
        height: ${Be.QR_CODE}px;
        border-radius: 16px;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        background: white;
      }

      .qr-container img {
        width: 100%;
        height: 100%;
        object-fit: contain;
      }

      .qr-loading {
        font-size: 14px;
        color: #555;
      }

      .qr-footer {
        width: 100%;
        display: flex;
        justify-content: center;
      }

      .copy-button {
        padding: 12px 16px;
        border: none;
        border-radius: 10px;
        background: #f3f3f3;
        color: #111;
        font-weight: ${jt.MEDIUM};
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .copy-button:hover {
        background: #e5e5e5;
      }

      .qr-placeholder {
        width: 280px;
        height: 280px;
        background: white;
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      .qr-instructions {
        text-align: center;
        font-size: 14px;
        opacity: 0.8;
        line-height: 1.5;
      }

      .qr-deeplink {
        width: 100%;
        margin-top: 10px;
      }

      .deeplink-button {
        width: 100%;
        padding: 14px ${Be.BUTTON_PADDING_HORIZONTAL}px;
        border-radius: ${Be.BUTTON_BORDER_RADIUS}px;
        border: none;
        background: var(--primary-color);
        color: white;
        font-size: 15px;
        font-weight: ${jt.SEMIBOLD};
        cursor: pointer;
        transition: all 0.2s;
      }

      .deeplink-button:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(14, 165, 233, 0.3);
      }

      /* Loading View */
      .loading-view {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 24px;
        padding: 40px 0;
      }

      .loading-logo-container {
        position: relative;
        width: 120px;
        height: 120px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .loading-logo {
        width: ${Be.LOADING_LOGO}px;
        height: ${Be.LOADING_LOGO}px;
        border-radius: 16px;
        z-index: ${au.LOADING_LOGO};
        position: relative;
      }

      .loading-border {
        position: absolute;
        top: -4px;
        left: -4px;
        right: -4px;
        bottom: -4px;
        border-radius: 20px;
        overflow: hidden;
      }

      .loading-border::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: conic-gradient(
          transparent 0deg 90deg,
          var(--xc-loading-border-color) 90deg 180deg,
          transparent 180deg 270deg,
          var(--xc-loading-border-color) 270deg 360deg
        );
        animation: rotate 2s linear infinite;
      }

      .loading-border::after {
        content: '';
        position: absolute;
        top: 4px;
        left: 4px;
        right: 4px;
        bottom: 4px;
        background: var(--xc-background-color);
        border-radius: 16px;
        z-index: ${au.LOADING_BORDER_AFTER};
      }

      @keyframes rotate {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .loading-text {
        text-align: center;
        font-size: 16px;
        font-weight: ${jt.LIGHT};
        opacity: 0.9;
      }

      /* Error View */
      .error-view {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 20px;
        padding: 30px 0;
      }

      .error-icon {
        width: ${Be.ICON_LARGE}px;
        height: ${Be.ICON_LARGE}px;
        border-radius: 50%;
        background: rgba(239, 68, 68, 0.1);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 48px;
        color: #ef4444;
      }

      .error-text {
        text-align: center;
      }

      .error-title {
        font-size: 18px;
        font-weight: ${jt.SEMIBOLD};
        margin-bottom: 8px;
      }

      .error-message {
        font-size: 14px;
        font-weight: ${jt.LIGHT};
        opacity: 0.8;
        line-height: 1.5;
      }

      .error-buttons {
        width: 100%;
        display: flex;
        gap: 12px;
        margin-top: 10px;
      }

      .error-button {
        flex: 1;
        padding: 14px ${Be.BUTTON_PADDING_HORIZONTAL}px;
        border-radius: ${Be.BUTTON_BORDER_RADIUS}px;
        border: none;
        font-size: 15px;
        font-weight: ${jt.SEMIBOLD};
        cursor: pointer;
        transition: all 0.2s;
      }

      .error-button-primary {
        background: var(--primary-color);
        color: white;
      }

      .error-button-primary:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(14, 165, 233, 0.3);
      }

      .error-button-secondary {
        background: var(--wallet-btn-bg);
        color: var(--text-color);
      }

      .error-button-secondary:hover {
        background: var(--wallet-btn-hover);
      }

      /* Account Selection Styles */
      .account-selection-view {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 20px;
        padding: 20px 0;
      }

      .account-selection-wallet-icon {
        width: ${Be.ICON_LARGE}px;
        height: ${Be.ICON_LARGE}px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .wallet-icon-small {
        width: 100%;
        height: 100%;
        object-fit: contain;
        border-radius: 12px;
      }

      .account-selection-description {
        text-align: center;
        font-size: 14px;
        font-weight: ${jt.LIGHT};
        opacity: 0.8;
        line-height: 1.5;
        margin: 0;
      }

      .account-list {
        width: 100%;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .account-button {
        width: 100%;
        padding: 16px ${Be.BUTTON_PADDING_HORIZONTAL}px;
        border-radius: ${Be.BUTTON_BORDER_RADIUS}px;
        border: 1px solid rgba(0, 0, 0, 0.1);
        background: var(--wallet-btn-bg);
        color: var(--text-color);
        cursor: pointer;
        display: flex;
        align-items: center;
        transition: all 0.2s;
      }

      .account-button:hover {
        background: var(--wallet-btn-hover);
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .account-info {
        display: flex;
        flex-direction: column;
        gap: 6px;
        text-align: left;
        width: 100%;
      }

      .account-address {
        font-size: 15px;
        font-weight: ${jt.SEMIBOLD};
      }

      .account-address-value {
        font-size: 13px;
        font-weight: ${jt.LIGHT};
        opacity: 0.7;
        font-family: monospace;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .custom-path-section {
        margin-top: 24px;
        padding-top: 24px;
        border-top: 1px solid rgba(0, 0, 0, 0.1);
        width: 100%;
      }

      .custom-path-label {
        font-size: 14px;
        font-weight: ${jt.MEDIUM};
        margin-bottom: 12px;
        color: var(--text-color);
      }

      .custom-path-input {
        width: 100%;
        padding: 12px ${Be.BUTTON_PADDING_HORIZONTAL}px;
        border-radius: ${Be.BUTTON_BORDER_RADIUS}px;
        border: 1px solid rgba(0, 0, 0, 0.2);
        background: var(--wallet-btn-bg);
        color: var(--text-color);
        font-size: 14px;
        font-family: monospace;
        margin-bottom: 12px;
        box-sizing: border-box;
      }

      .custom-path-input:focus {
        outline: none;
        border-color: var(--primary-color, #007bff);
        box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.1);
      }

      .custom-path-button {
        width: 100%;
        padding: 14px ${Be.BUTTON_PADDING_HORIZONTAL}px;
        border-radius: ${Be.BUTTON_BORDER_RADIUS}px;
        border: none;
        background: var(--primary-color, #007bff);
        color: white;
        font-size: 15px;
        font-weight: ${jt.SEMIBOLD};
        cursor: pointer;
        transition: all 0.2s;
      }

      .custom-path-button:hover {
        background: var(--primary-color-hover, #0056b3);
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      }

      .custom-path-button:active {
        transform: translateY(0);
      }

      /* Account Modal Styles */
      .account-modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: var(--xc-overlay-background);
        backdrop-filter: var(--xc-overlay-backdrop-filter);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: ${au.OVERLAY};
        animation: fadeIn ${Vn.ANIMATION_DURATION}ms ease-out;
      }

      .account-modal {
        background: var(--xc-modal-background);
        color: var(--xc-text-color);
        border-radius: var(--xc-modal-border-radius);
        width: 100%;
        max-width: 280px;
        padding: 0;
        box-shadow: var(--xc-modal-box-shadow);
        border: 1px solid rgba(255, 255, 255, 0.08);
        animation: slideUp 0.3s ease-out;
        overflow: hidden;
      }

      .account-modal-header {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 16px 20px;
        background: rgba(255, 255, 255, 0.02);
        position: relative;
      }

      .account-modal-title {
        font-size: 16px;
        font-weight: ${jt.SEMIBOLD};
        letter-spacing: -0.3px;
        flex: 1;
        text-align: center;
      }

      .account-modal-close {
        position: absolute;
        right: 8px;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        border: none;
        background: transparent;
        color: var(--text-color);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        opacity: 0.6;
        transition: all 0.2s;
        flex-shrink: 0;
      }

      .account-modal-close:hover {
        opacity: 1;
        background: var(--wallet-btn-bg);
      }

      .account-modal-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 40px 24px 32px;
        gap: 0;
        text-align: center;
      }

      .account-avatar-container {
        width: 100px;
        height: 100px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        margin-bottom: 28px;
        flex-shrink: 0;
      }

      .account-info-section {
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 16px;
        margin-bottom: 24px;
      }

      .account-address-button {
        background: none;
        border: none;
        color: var(--text-color);
        cursor: pointer;
        font-size: 14px;
        font-weight: ${jt.SEMIBOLD};
        font-family: var(--font-family);
        padding: 0;
        transition: opacity 0.2s;
        letter-spacing: 0.3px;
        display: flex;
        align-items: center;
        gap: 8px;
        justify-content: center;
      }

      .account-address-button:hover {
        color: var(--xc-account-address-button-hover-color);
      }

      .copy-icon {
        width: 20px;
        height: 20px;
        opacity: 0.5;
        transition: opacity 0.2s ease;
        flex-shrink: 0;
      }

      .account-address-button:hover .copy-icon {
        opacity: 1;
        color: var(--xc-account-address-button-hover-color);
      }

      .account-balance-display {
        display: flex;
        align-items: baseline;
        justify-content: center;
        gap: 8px;
      }

      .account-balance-value {
        font-size: 28px;
        font-weight: ${jt.SEMIBOLD};
        color: var(--primary-color);
      }

      .account-balance-unit {
        font-size: 14px;
        font-weight: ${jt.MEDIUM};
        opacity: 0.8;
      }

      .account-disconnect-button {
        width: 100%;
        padding: 12px ${Be.BUTTON_PADDING_HORIZONTAL}px;
        border-radius: var(--xc-secondary-button-border-radius);
        border: none;
        background: var(--xc-secondary-button-background);
        color: var(--xc-secondary-button-color);
        font-size: 14px;
        font-weight: var(--xc-secondary-button-font-weight);
        cursor: pointer;
        transition: all 0.2s;
        font-family: var(--xc-font-family);
        margin-top: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }

      .account-disconnect-button:hover {
        background: var(--xc-secondary-button-hover-background);
      }

      .disconnect-icon {
        width: 15px;
        height: 14px;
        transition: opacity 0.2s ease;
        flex-shrink: 0;
      }

      .account-disconnect-button:hover .disconnect-icon {
        opacity: 1;
      }

      .account-disconnect-button:hover .disconnect-icon path {
        fill: #ef4444;
      }
    </style>

    <button class="connect-button" id="connect-wallet-button" part="connect-button">${u}</button>

    ${this.isOpen?`
    <div class="${h}" part="overlay">
      <div class="${p}" part="modal">
        ${f}
      </div>
    </div>
    `:""}

    ${this.accountModalOpen?this.renderAccountModal():""}
  `,this.attachEventListeners(),requestAnimationFrame(()=>{this.updateModalHeight()})}updateModalHeight(){const n=this.shadow.querySelector(".modal");if(!n)return;const r=this.previousModalHeight,s=n.offsetHeight;r>0&&s>0&&r!==s&&(n.style.height=`${r}px`,n.offsetHeight,requestAnimationFrame(()=>{n.style.height=`${s}px`})),this.previousModalHeight=s}renderWalletListView(n,r){return`
      <div class="header">
        <h2 class="title">Connect Wallet</h2>
        <button class="close-button" part="close-button" aria-label="Close"></button>
      </div>

      <div class="content">
        ${n?`
          <button class="primary-button" data-wallet-id="${n.id}">
            ${n.icon?`<img src="${n.icon}" width="24" height="24" alt="${n.name}">`:""}
            <span>Continue with ${n.name}</span>
          </button>
        `:""}
        <div class="wallet-list">
          ${r.map(s=>`
            <button class="wallet-button" data-wallet-id="${s.id}">
              <span>${s.name}</span>
              ${s.icon?`<img src="${s.icon}" width="28" height="28" alt="${s.name}">`:""}
            </button>`).join("")}
        </div>
      </div>
    `}renderQRView(){var n;const r=(n=this.walletManager)==null?void 0:n.wallets.find(s=>{var i;return s.id===((i=this.qrCodeData)==null?void 0:i.walletId)});return`
    <div class="header">
      <div class="header-with-back">
        <button class="back-button" id="back-button" aria-label="Back"></button>
        <h2 class="title">${r?.name||"Wallet"}</h2>
      </div>
      <button class="close-button" part="close-button" aria-label="Close"></button>
    </div>

    <div class="content">
      <div class="qr-view">
        <div class="qr-card">
          <div class="qr-header">Scan with Phone</div>
          <div class="qr-container" id="qr-container">
            <div class="qr-loading">Loading QR...</div>
          </div>
          <div class="qr-footer">
            <button class="copy-button" id="copy-button">Copy to Clipboard</button>
          </div>
        </div>
      </div>
    </div>
  `}renderLoadingView(){if(!this.loadingData)return"";const{walletName:n,walletIcon:r}=this.loadingData;return`
      <div class="header">
        <div class="header-with-back">
          <button class="back-button" id="loading-back-button" aria-label="Back"></button>
          <h2 class="title">Connect Wallet</h2>
        </div>
        <button class="close-button" part="close-button" aria-label="Close"></button>
      </div>

      <div class="content loading-content">
        <div class="loading-view">
          <div class="loading-logo-container">
            ${r?`<img src="${r}" alt="${n}" class="loading-logo">`:""}
            <div class="loading-border"></div>
          </div>
          <div class="loading-text">
            <p>Requesting connection...</p>
            <p style="margin-top: 8px; font-size: 14px; opacity: 0.7;">Check your ${n}</p>
          </div>
        </div>
      </div>
    `}renderErrorView(){if(!this.errorData)return"";const{walletName:n,error:r}=this.errorData;return`
      <div class="header">
        <h2 class="title">Connection Failed</h2>
        <button class="close-button" part="close-button" aria-label="Close"></button>
      </div>

      <div class="content">
        <div class="error-view">
          <div class="error-icon"></div>
          <div class="error-text">
            <div class="error-title">Failed to connect to ${n}</div>
            <div class="error-message">${r.message}</div>
          </div>
          <div class="error-buttons">
            <button class="error-button error-button-secondary" id="error-back-button">
              Back
            </button>
            <button class="error-button error-button-primary" id="error-retry-button">
              Try Again
            </button>
          </div>
        </div>
      </div>
    `}renderAccountSelectionView(){if(!this.accountSelectionData)return"";const{walletName:n,walletIcon:r,accounts:s}=this.accountSelectionData,i=s.map(o=>`
        <button class="account-button" data-account-index="${o.index}">
          <div class="account-info">
            <div class="account-address">Account ${o.index}</div>
            <div class="account-address-value">${o.address}</div>
          </div>
        </button>
      `).join("");return`
      <div class="header">
        <div class="header-with-back">
          <button class="back-button" id="account-selection-back-button" aria-label="Back"></button>
          <h2 class="title">Select Account</h2>
        </div>
        <button class="close-button" part="close-button" aria-label="Close"></button>
      </div>

      <div class="content">
        <div class="account-selection-view">
          ${r?`
          <div class="account-selection-wallet-icon">
            <img src="${r}" alt="${n}" class="wallet-icon-small">
          </div>
          `:""}
          <p class="account-selection-description">Select which account to connect from your ${n}</p>
          <div class="account-list">
            ${i}
          </div>
          <div class="custom-path-section">
            <p class="custom-path-label">Or enter a custom derivation path:</p>
            <input
              type="text"
              id="custom-derivation-path"
              class="custom-path-input"
              placeholder="44'/144'/0'/0/0"
              value=""
            />
            <button class="custom-path-button" id="custom-path-connect-button">
              Connect with Custom Path
            </button>
          </div>
        </div>
      </div>
    `}renderAccountModal(){var n;const r=(n=this.walletManager)==null?void 0:n.account;if(!r)return"";const s=this.truncateAddress(r.address,6),{color1:i,color2:o}=this.generateGradientFromAddress(r.address);return`
      <div id="account-modal-overlay" class="account-modal-overlay">
        <div class="account-modal">
          <div class="account-modal-header">
            <h2 class="account-modal-title">Connected</h2>
            <button class="account-modal-close" id="account-modal-close" aria-label="Close"></button>
          </div>

          <div class="account-modal-content">
            <div class="account-avatar-container" style="background: linear-gradient(135deg, ${i}, ${o});">
            </div>

            <div class="account-info-section">
              <button class="account-address-button" id="copy-account-address" title="Click to copy full address">
                <span>${s}</span>
                <svg
                  aria-hidden="true"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                  class="copy-icon"
                >
                  <path d="M14 9.5V7C14 5.89543 13.1046 5 12 5H7C5.89543 5 5 5.89543 5 7V12C5 13.1046 5.89543 14 7 14H9.5" stroke="currentColor" stroke-width="2"></path>
                  <rect x="10" y="10" width="9" height="9" rx="2" stroke="currentColor" stroke-width="2"></rect>
                </svg>
              </button>

              ${this.accountBalance?`
                <div class="account-balance-display">
                  <span class="account-balance-value">${this.accountBalance}</span>
                  <span class="account-balance-unit">XRP</span>
                </div>
              `:""}
            </div>

            <button class="account-disconnect-button" id="account-modal-disconnect">
              <svg
                aria-hidden="true"
                width="15"
                height="14"
                viewBox="0 0 15 14"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                class="disconnect-icon"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M4 0C1.79086 0 0 1.79086 0 4V10C0 12.2091 1.79086 14 4 14H6C6.55228 14 7 13.5523 7 13C7 12.4477 6.55228 12 6 12H4C2.89543 12 2 11.1046 2 10V4C2 2.89543 2.89543 2 4 2H6C6.55228 2 7 1.55228 7 1C7 0.447715 6.55228 0 6 0H4ZM11.7071 3.29289C11.3166 2.90237 10.6834 2.90237 10.2929 3.29289C9.90237 3.68342 9.90237 4.31658 10.2929 4.70711L11.5858 6H9.5H6C5.44772 6 5 6.44772 5 7C5 7.55228 5.44772 8 6 8H9.5H11.5858L10.2929 9.29289C9.90237 9.68342 9.90237 10.3166 10.2929 10.7071C10.6834 11.0976 11.3166 11.0976 11.7071 10.7071L14.7071 7.70711C15.0976 7.31658 15.0976 6.68342 14.7071 6.29289L11.7071 3.29289Z"
                  fill="currentColor"
                  fill-opacity="0.4"
                ></path>
              </svg>
              <span>Disconnect</span>
            </button>
          </div>
        </div>
      </div>
    `}attachEventListeners(){var n,r,s,i,o,a,u,c,l,d,f,h,p,g,y;(n=this.shadow.querySelector("#connect-wallet-button"))==null||n.addEventListener("click",async()=>{var b;(b=this.walletManager)!=null&&b.connected?this.openAccountModal():this.open()}),(r=this.shadow.querySelector("#account-modal-close"))==null||r.addEventListener("click",()=>{this.closeAccountModal()}),(s=this.shadow.querySelector("#account-modal-disconnect"))==null||s.addEventListener("click",()=>{this.disconnectFromAccountModal()}),(i=this.shadow.querySelector("#account-modal-overlay"))==null||i.addEventListener("click",b=>{b.target===b.currentTarget&&this.closeAccountModal()}),(o=this.shadow.querySelector("#copy-account-address"))==null||o.addEventListener("click",async()=>{var b,A;const E=(A=(b=this.walletManager)==null?void 0:b.account)==null?void 0:A.address;if(E)try{await navigator.clipboard.writeText(E);const _=this.shadow.querySelector("#copy-account-address"),S=_.innerHTML;_.innerHTML="<span>Copied!</span>",setTimeout(()=>{_&&(_.innerHTML=S)},Vn.COPY_FEEDBACK_DURATION)}catch(_){je.error("Failed to copy address:",_)}}),(a=this.shadow.querySelector(".close-button"))==null||a.addEventListener("click",()=>this.close()),(u=this.shadow.querySelector(".overlay"))==null||u.addEventListener("click",b=>{b.target===b.currentTarget&&this.close()}),this.shadow.querySelectorAll("[data-wallet-id]").forEach(b=>{b.addEventListener("click",()=>{const A=b.dataset.walletId;A&&this.connectWallet(A)})}),(c=this.shadow.querySelector("#back-button"))==null||c.addEventListener("click",()=>{this.showWalletList()}),(l=this.shadow.querySelector("#loading-back-button"))==null||l.addEventListener("click",()=>{this.showWalletList()}),(d=this.shadow.querySelector("#copy-button"))==null||d.addEventListener("click",async()=>{var b;if((b=this.qrCodeData)!=null&&b.uri)try{await navigator.clipboard.writeText(this.qrCodeData.uri);const A=this.shadow.querySelector("#copy-button");A&&(A.textContent="Copied!",setTimeout(()=>A.textContent="Copy to Clipboard",Vn.COPY_FEEDBACK_DURATION))}catch(A){je.error("Failed to copy to clipboard:",A)}}),(f=this.shadow.querySelector("#deeplink-button"))==null||f.addEventListener("click",()=>{var b,A,E;if((b=this.qrCodeData)!=null&&b.uri&&(A=this.qrCodeData)!=null&&A.walletId){const _=(E=this.walletManager)==null?void 0:E.wallets.find(I=>{var D;return I.id===((D=this.qrCodeData)==null?void 0:D.walletId)});let S=this.qrCodeData.uri;_&&typeof _.getDeepLinkURI=="function"&&(S=_.getDeepLinkURI(this.qrCodeData.uri)),vp()?window.location.href=S:window.open(S,"_blank")}}),(h=this.shadow.querySelector("#error-retry-button"))==null||h.addEventListener("click",()=>{var b;(b=this.errorData)!=null&&b.walletId&&this.connectWallet(this.errorData.walletId)}),(p=this.shadow.querySelector("#error-back-button"))==null||p.addEventListener("click",()=>{this.showWalletList()}),(g=this.shadow.querySelector("#account-selection-back-button"))==null||g.addEventListener("click",()=>{this.showWalletList()}),this.shadow.querySelectorAll(".account-button").forEach(b=>{b.addEventListener("click",()=>{const A=parseInt(b.dataset.accountIndex||"0",10);je.debug("Account selected:",A),this.connectWithLedgerAccount(A)})}),(y=this.shadow.querySelector("#custom-path-connect-button"))==null||y.addEventListener("click",()=>{const b=this.shadow.querySelector("#custom-derivation-path");if(b&&b.value.trim()){const A=b.value.trim();je.debug("Custom derivation path entered:",A),this.connectWithCustomDerivationPath(A)}})}}Ep=e,customElements.get("xrpl-wallet-connector")||customElements.define("xrpl-wallet-connector",Ep)}var t0={},$o={},n0={exports:{}},Go=typeof Reflect=="object"?Reflect:null,Gb=Go&&typeof Go.apply=="function"?Go.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},Kl;Go&&typeof Go.ownKeys=="function"?Kl=Go.ownKeys:Object.getOwnPropertySymbols?Kl=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Kl=function(e){return Object.getOwnPropertyNames(e)};function kO(e){console&&console.warn&&console.warn(e)}var zS=Number.isNaN||function(e){return e!==e};function Qe(){Qe.init.call(this)}n0.exports=Qe;n0.exports.once=zO;Qe.EventEmitter=Qe;Qe.prototype._events=void 0;Qe.prototype._eventsCount=0;Qe.prototype._maxListeners=void 0;var Kb=10;function Vd(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Qe,"defaultMaxListeners",{enumerable:!0,get:function(){return Kb},set:function(e){if(typeof e!="number"||e<0||zS(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Kb=e}});Qe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Qe.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||zS(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function FS(e){return e._maxListeners===void 0?Qe.defaultMaxListeners:e._maxListeners}Qe.prototype.getMaxListeners=function(){return FS(this)};Qe.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var o=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw o.context=i,o}var a=s[e];if(a===void 0)return!1;if(typeof a=="function")Gb(a,this,t);else for(var u=a.length,c=KS(a,u),n=0;n<u;++n)Gb(c[n],this,t);return!0};function HS(e,t,n,r){var s,i,o;if(Vd(n),i=e._events,i===void 0?(i=e._events=Object.create(null),e._eventsCount=0):(i.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),o=i[t]),o===void 0)o=i[t]=n,++e._eventsCount;else if(typeof o=="function"?o=i[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=FS(e),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,kO(a)}return e}Qe.prototype.addListener=function(e,t){return HS(this,e,t,!1)};Qe.prototype.on=Qe.prototype.addListener;Qe.prototype.prependListener=function(e,t){return HS(this,e,t,!0)};function RO(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function VS(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},s=RO.bind(r);return s.listener=n,r.wrapFn=s,s}Qe.prototype.once=function(e,t){return Vd(t),this.on(e,VS(this,e,t)),this};Qe.prototype.prependOnceListener=function(e,t){return Vd(t),this.prependListener(e,VS(this,e,t)),this};Qe.prototype.removeListener=function(e,t){var n,r,s,i,o;if(Vd(t),r=this._events,r===void 0)return this;if(n=r[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(s=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){o=n[i].listener,s=i;break}if(s<0)return this;s===0?n.shift():BO(n,s),n.length===1&&(r[e]=n[0]),r.removeListener!==void 0&&this.emit("removeListener",e,o||t)}return this};Qe.prototype.off=Qe.prototype.removeListener;Qe.prototype.removeAllListeners=function(e){var t,n,r;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),i;for(r=0;r<s.length;++r)i=s[r],i!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this};function qS(e,t,n){var r=e._events;if(r===void 0)return[];var s=r[t];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?UO(s):KS(s,s.length)}Qe.prototype.listeners=function(e){return qS(this,e,!0)};Qe.prototype.rawListeners=function(e){return qS(this,e,!1)};Qe.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):GS.call(e,t)};Qe.prototype.listenerCount=GS;function GS(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Qe.prototype.eventNames=function(){return this._eventsCount>0?Kl(this._events):[]};function KS(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function BO(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function UO(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function zO(e,t){return new Promise(function(n,r){function s(o){e.removeListener(t,i),r(o)}function i(){typeof e.removeListener=="function"&&e.removeListener("error",s),n([].slice.call(arguments))}YS(e,t,i,{once:!0}),t!=="error"&&FO(e,s,{once:!0})})}function FO(e,t,n){typeof e.on=="function"&&YS(e,"error",t,n)}function YS(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function s(i){r.once&&e.removeEventListener(t,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var In=n0.exports;const r0=aa(In);var js={},hf={exports:{}},ff,Yb;function HO(){if(Yb)return ff;Yb=1;var e=1e3,t=e*60,n=t*60,r=n*24,s=r*7,i=r*365.25;ff=function(l,d){d=d||{};var f=typeof l;if(f==="string"&&l.length>0)return o(l);if(f==="number"&&isFinite(l))return d.long?u(l):a(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))};function o(l){if(l=String(l),!(l.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(d){var f=parseFloat(d[1]),h=(d[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return f*i;case"weeks":case"week":case"w":return f*s;case"days":case"day":case"d":return f*r;case"hours":case"hour":case"hrs":case"hr":case"h":return f*n;case"minutes":case"minute":case"mins":case"min":case"m":return f*t;case"seconds":case"second":case"secs":case"sec":case"s":return f*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function a(l){var d=Math.abs(l);return d>=r?Math.round(l/r)+"d":d>=n?Math.round(l/n)+"h":d>=t?Math.round(l/t)+"m":d>=e?Math.round(l/e)+"s":l+"ms"}function u(l){var d=Math.abs(l);return d>=r?c(l,d,r,"day"):d>=n?c(l,d,n,"hour"):d>=t?c(l,d,t,"minute"):d>=e?c(l,d,e,"second"):l+" ms"}function c(l,d,f,h){var p=d>=f*1.5;return Math.round(l/f)+" "+h+(p?"s":"")}return ff}var pf,Wb;function VO(){if(Wb)return pf;Wb=1;function e(t){r.debug=r,r.default=r,r.coerce=c,r.disable=a,r.enable=i,r.enabled=u,r.humanize=HO(),r.destroy=l,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function n(d){let f=0;for(let h=0;h<d.length;h++)f=(f<<5)-f+d.charCodeAt(h),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=n;function r(d){let f,h=null,p,g;function y(...b){if(!y.enabled)return;const A=y,E=Number(new Date),_=E-(f||E);A.diff=_,A.prev=f,A.curr=E,f=E,b[0]=r.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let S=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(I,D)=>{if(I==="%%")return"%";S++;const L=r.formatters[D];if(typeof L=="function"){const x=b[S];I=L.call(A,x),b.splice(S,1),S--}return I}),r.formatArgs.call(A,b),(A.log||r.log).apply(A,b)}return y.namespace=d,y.useColors=r.useColors(),y.color=r.selectColor(d),y.extend=s,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==r.namespaces&&(p=r.namespaces,g=r.enabled(d)),g),set:b=>{h=b}}),typeof r.init=="function"&&r.init(y),y}function s(d,f){const h=r(this.namespace+(typeof f>"u"?":":f)+d);return h.log=this.log,h}function i(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];const f=(typeof d=="string"?d:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const h of f)h[0]==="-"?r.skips.push(h.slice(1)):r.names.push(h)}function o(d,f){let h=0,p=0,g=-1,y=0;for(;h<d.length;)if(p<f.length&&(f[p]===d[h]||f[p]==="*"))f[p]==="*"?(g=p,y=h,p++):(h++,p++);else if(g!==-1)p=g+1,y++,h=y;else return!1;for(;p<f.length&&f[p]==="*";)p++;return p===f.length}function a(){const d=[...r.names,...r.skips.map(f=>"-"+f)].join(",");return r.enable(""),d}function u(d){for(const f of r.skips)if(o(d,f))return!1;for(const f of r.names)if(o(d,f))return!0;return!1}function c(d){return d instanceof Error?d.stack||d.message:d}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return pf=e,pf}var Xb;function co(){return Xb||(Xb=1,(function(e,t){t.formatArgs=r,t.save=s,t.load=i,t.useColors=n,t.storage=o(),t.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;u.splice(1,0,c,"color: inherit");let l=0,d=0;u[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(l++,f==="%c"&&(d=l))}),u.splice(d,0,c)}t.log=console.debug||console.log||(()=>{});function s(u){try{u?t.storage.setItem("debug",u):t.storage.removeItem("debug")}catch{}}function i(){let u;try{u=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=ci.DEBUG),u}function o(){try{return localStorage}catch{}}e.exports=VO()(t);const{formatters:a}=e.exports;a.j=function(u){try{return JSON.stringify(u)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}})(hf,hf.exports)),hf.exports}var Pc={},gf={exports:{}},Qb;function qO(){return Qb||(Qb=1,(function(e,t){(function(n){function r(s){var i=s&&s.Promise||n.Promise,o=s&&s.XMLHttpRequest||n.XMLHttpRequest;return(function(){var a=Object.create(n,{fetch:{value:void 0,writable:!0}});return(function(u,c){c(t)})(this,function(u){var c=typeof a<"u"&&a||typeof self<"u"&&self||typeof c<"u"&&c,l={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function d(m){return m&&DataView.prototype.isPrototypeOf(m)}if(l.arrayBuffer)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(m){return m&&f.indexOf(Object.prototype.toString.call(m))>-1};function p(m){if(typeof m!="string"&&(m=String(m)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(m)||m==="")throw new TypeError("Invalid character in header field name");return m.toLowerCase()}function g(m){return typeof m!="string"&&(m=String(m)),m}function y(m){var w={next:function(){var N=m.shift();return{done:N===void 0,value:N}}};return l.iterable&&(w[Symbol.iterator]=function(){return w}),w}function b(m){this.map={},m instanceof b?m.forEach(function(w,N){this.append(N,w)},this):Array.isArray(m)?m.forEach(function(w){this.append(w[0],w[1])},this):m&&Object.getOwnPropertyNames(m).forEach(function(w){this.append(w,m[w])},this)}b.prototype.append=function(m,w){m=p(m),w=g(w);var N=this.map[m];this.map[m]=N?N+", "+w:w},b.prototype.delete=function(m){delete this.map[p(m)]},b.prototype.get=function(m){return m=p(m),this.has(m)?this.map[m]:null},b.prototype.has=function(m){return this.map.hasOwnProperty(p(m))},b.prototype.set=function(m,w){this.map[p(m)]=g(w)},b.prototype.forEach=function(m,w){for(var N in this.map)this.map.hasOwnProperty(N)&&m.call(w,this.map[N],N,this)},b.prototype.keys=function(){var m=[];return this.forEach(function(w,N){m.push(N)}),y(m)},b.prototype.values=function(){var m=[];return this.forEach(function(w){m.push(w)}),y(m)},b.prototype.entries=function(){var m=[];return this.forEach(function(w,N){m.push([N,w])}),y(m)},l.iterable&&(b.prototype[Symbol.iterator]=b.prototype.entries);function A(m){if(m.bodyUsed)return i.reject(new TypeError("Already read"));m.bodyUsed=!0}function E(m){return new i(function(w,N){m.onload=function(){w(m.result)},m.onerror=function(){N(m.error)}})}function _(m){var w=new FileReader,N=E(w);return w.readAsArrayBuffer(m),N}function S(m){var w=new FileReader,N=E(w);return w.readAsText(m),N}function I(m){for(var w=new Uint8Array(m),N=new Array(w.length),C=0;C<w.length;C++)N[C]=String.fromCharCode(w[C]);return N.join("")}function D(m){if(m.slice)return m.slice(0);var w=new Uint8Array(m.byteLength);return w.set(new Uint8Array(m)),w.buffer}function L(){return this.bodyUsed=!1,this._initBody=function(m){this.bodyUsed=this.bodyUsed,this._bodyInit=m,m?typeof m=="string"?this._bodyText=m:l.blob&&Blob.prototype.isPrototypeOf(m)?this._bodyBlob=m:l.formData&&FormData.prototype.isPrototypeOf(m)?this._bodyFormData=m:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)?this._bodyText=m.toString():l.arrayBuffer&&l.blob&&d(m)?(this._bodyArrayBuffer=D(m.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(m)||h(m))?this._bodyArrayBuffer=D(m):this._bodyText=m=Object.prototype.toString.call(m):this._bodyText="",this.headers.get("content-type")||(typeof m=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var m=A(this);if(m)return m;if(this._bodyBlob)return i.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return i.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return i.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var m=A(this);return m||(ArrayBuffer.isView(this._bodyArrayBuffer)?i.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):i.resolve(this._bodyArrayBuffer))}else return this.blob().then(_)}),this.text=function(){var m=A(this);if(m)return m;if(this._bodyBlob)return S(this._bodyBlob);if(this._bodyArrayBuffer)return i.resolve(I(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return i.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(Y)}),this.json=function(){return this.text().then(JSON.parse)},this}var x=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function j(m){var w=m.toUpperCase();return x.indexOf(w)>-1?w:m}function V(m,w){if(!(this instanceof V))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');w=w||{};var N=w.body;if(m instanceof V){if(m.bodyUsed)throw new TypeError("Already read");this.url=m.url,this.credentials=m.credentials,w.headers||(this.headers=new b(m.headers)),this.method=m.method,this.mode=m.mode,this.signal=m.signal,!N&&m._bodyInit!=null&&(N=m._bodyInit,m.bodyUsed=!0)}else this.url=String(m);if(this.credentials=w.credentials||this.credentials||"same-origin",(w.headers||!this.headers)&&(this.headers=new b(w.headers)),this.method=j(w.method||this.method||"GET"),this.mode=w.mode||this.mode||null,this.signal=w.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&N)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(N),(this.method==="GET"||this.method==="HEAD")&&(w.cache==="no-store"||w.cache==="no-cache")){var C=/([?&])_=[^&]*/;if(C.test(this.url))this.url=this.url.replace(C,"$1_="+new Date().getTime());else{var O=/\?/;this.url+=(O.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}V.prototype.clone=function(){return new V(this,{body:this._bodyInit})};function Y(m){var w=new FormData;return m.trim().split("&").forEach(function(N){if(N){var C=N.split("="),O=C.shift().replace(/\+/g," "),B=C.join("=").replace(/\+/g," ");w.append(decodeURIComponent(O),decodeURIComponent(B))}}),w}function q(m){var w=new b,N=m.replace(/\r?\n[\t ]+/g," ");return N.split("\r").map(function(C){return C.indexOf(`
`)===0?C.substr(1,C.length):C}).forEach(function(C){var O=C.split(":"),B=O.shift().trim();if(B){var W=O.join(":").trim();w.append(B,W)}}),w}L.call(V.prototype);function R(m,w){if(!(this instanceof R))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');w||(w={}),this.type="default",this.status=w.status===void 0?200:w.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in w?w.statusText:"",this.headers=new b(w.headers),this.url=w.url||"",this._initBody(m)}L.call(R.prototype),R.prototype.clone=function(){return new R(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},R.error=function(){var m=new R(null,{status:0,statusText:""});return m.type="error",m};var v=[301,302,303,307,308];R.redirect=function(m,w){if(v.indexOf(w)===-1)throw new RangeError("Invalid status code");return new R(null,{status:w,headers:{location:m}})},u.DOMException=c.DOMException;try{new u.DOMException}catch{u.DOMException=function(m,w){this.message=m,this.name=w;var N=Error(m);this.stack=N.stack},u.DOMException.prototype=Object.create(Error.prototype),u.DOMException.prototype.constructor=u.DOMException}function T(m,w){return new i(function(N,C){var O=new V(m,w);if(O.signal&&O.signal.aborted)return C(new u.DOMException("Aborted","AbortError"));var B=new o;function W(){B.abort()}B.onload=function(){var X={status:B.status,statusText:B.statusText,headers:q(B.getAllResponseHeaders()||"")};X.url="responseURL"in B?B.responseURL:X.headers.get("X-Request-URL");var ee="response"in B?B.response:B.responseText;setTimeout(function(){N(new R(ee,X))},0)},B.onerror=function(){setTimeout(function(){C(new TypeError("Network request failed"))},0)},B.ontimeout=function(){setTimeout(function(){C(new TypeError("Network request failed"))},0)},B.onabort=function(){setTimeout(function(){C(new u.DOMException("Aborted","AbortError"))},0)};function P(X){try{return X===""&&c.location.href?c.location.href:X}catch{return X}}B.open(O.method,P(O.url),!0),O.credentials==="include"?B.withCredentials=!0:O.credentials==="omit"&&(B.withCredentials=!1),"responseType"in B&&(l.blob?B.responseType="blob":l.arrayBuffer&&O.headers.get("Content-Type")&&O.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(B.responseType="arraybuffer")),w&&typeof w.headers=="object"&&!(w.headers instanceof b)?Object.getOwnPropertyNames(w.headers).forEach(function(X){B.setRequestHeader(X,g(w.headers[X]))}):O.headers.forEach(function(X,ee){B.setRequestHeader(ee,X)}),O.signal&&(O.signal.addEventListener("abort",W),B.onreadystatechange=function(){B.readyState===4&&O.signal.removeEventListener("abort",W)}),B.send(typeof O._bodyInit>"u"?null:O._bodyInit)})}T.polyfill=!0,c.fetch||(c.fetch=T,c.Headers=b,c.Request=V,c.Response=R),u.Headers=b,u.Request=V,u.Response=R,u.fetch=T,Object.defineProperty(u,"__esModule",{value:!0})}),{fetch:a.fetch,Headers:a.Headers,Request:a.Request,Response:a.Response,DOMException:a.DOMException}})()}e.exports=r})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:ue)})(gf,gf.exports)),gf.exports}var Dt={},$b;function GO(){return $b||($b=1,Dt.endianness=function(){return"LE"},Dt.hostname=function(){return typeof location<"u"?location.hostname:""},Dt.loadavg=function(){return[]},Dt.uptime=function(){return 0},Dt.freemem=function(){return Number.MAX_VALUE},Dt.totalmem=function(){return Number.MAX_VALUE},Dt.cpus=function(){return[]},Dt.type=function(){return"Browser"},Dt.release=function(){return typeof navigator<"u"?navigator.appVersion:""},Dt.networkInterfaces=Dt.getNetworkInterfaces=function(){return{}},Dt.arch=function(){return"javascript"},Dt.platform=function(){return"browser"},Dt.tmpdir=Dt.tmpDir=function(){return"/tmp"},Dt.EOL=`
`,Dt.homedir=function(){return"/"}),Dt}var Ps={},Zb;function ca(){if(Zb)return Ps;Zb=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.DeferredPromise=Ps.throwIfError=void 0;function e(n){var r,s,i,o,a,u;if(n.message!==void 0)throw new Error(n.message);if(n.next===void 0&&((s=(r=n)===null||r===void 0?void 0:r.meta)===null||s===void 0?void 0:s.uuid)===void 0&&((o=(i=n)===null||i===void 0?void 0:i.application)===null||o===void 0?void 0:o.uuidv4)===void 0&&((u=(a=n)===null||a===void 0?void 0:a.error)===null||u===void 0?void 0:u.code)!==void 0){const c=n.error;throw new Error(`Error code ${c.code}, see XUMM Dev Console, reference: ${c.reference}`)}}Ps.throwIfError=e;class t{constructor(){this.resolveFn=r=>{},this.rejectFn=r=>{},this.promise=new Promise((r,s)=>{this.resolveFn=r,this.rejectFn=s})}resolve(r){return this.resolveFn(r),this.promise}reject(r){return this.rejectFn(r),this.promise}}return Ps.DeferredPromise=t,Ps}var Jb;function KO(){if(Jb)return Pc;Jb=1;var e=ue&&ue.__awaiter||function(h,p,g,y){function b(A){return A instanceof g?A:new g(function(E){E(A)})}return new(g||(g=Promise))(function(A,E){function _(D){try{I(y.next(D))}catch(L){E(L)}}function S(D){try{I(y.throw(D))}catch(L){E(L)}}function I(D){D.done?A(D.value):b(D.value).then(_,S)}I((y=y.apply(h,p||[])).next())})},t=ue&&ue.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Pc,"__esModule",{value:!0}),Pc.Meta=void 0;const n=co(),r=t(qO()),{fetch:s,Request:i,Response:o,Headers:a}=r.default(),u=GO(),c=ca(),l=id(),d=n.debug("xumm-sdk:meta");let f=class{constructor(h,p){this.isBrowser=!1,this.jwtFlow=!1,this.injected=!1,this.endpoint="https://xumm.app",d("Constructed");const g=new RegExp("^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$"),y={split:p.split(":"),uuidv4:""};if(y.split.length===3&&y.split.slice(0,2).join(":")==="xApp:OneTimeToken"?(y.uuidv4=y.split[2],this.jwtFlow=!0):y.split.length>1&&y.split[0]==="RAWJWT"?(this.jwtFlow=!0,this.jwt=y.split.slice(1).join(":")):y.uuidv4=p,!g.test(h)||!g.test(y.uuidv4))if(this.jwtFlow){if(!this.jwt)throw new Error("Invalid API Key and/or OTT (One Time Token). Provide OTT param (2nd param) or make sure `xAppToken` query param is present (Browser)")}else throw new Error("Invalid API Key and/or API Secret. Use dotenv or constructor params.");return typeof globalThis<"u"&&Object.keys(globalThis).indexOf("window")<0?d("Running in node"):(console.log("XUMM SDK: Running in browser"),this.isBrowser=!0),this.apiKey=h,this.apiSecret=y.uuidv4,this.jwtFlow&&!this.jwt&&(this.authPromise=new Promise(b=>{this.authPromiseResolve=b}),Promise.resolve().then(()=>this.authorize()).catch(b=>{d("Authorize error:",b.message),!(this===null||this===void 0)&&this.invoker&&this.invoker.caught(b),this.authPromiseResolve&&this.authPromiseResolve()})),this}setEndpoint(h){return h.match(/^http/)?(this.endpoint=h.trim(),!0):!1}authorize(){var h,p,g,y;return e(this,void 0,void 0,function*(){d("JWT Authorize",this.apiSecret);let b;!(this===null||this===void 0)&&this.invoker&&this.invoker.constructor===l.XummSdkJwt&&(b=this.invoker._jwtStore(this,E=>this.jwt=E));const A=b?.get(this.apiSecret)||(yield this.call("authorize"));if(!((p=(h=A)===null||h===void 0?void 0:h.error)===null||p===void 0)&&p.code)d("Could not resolve API Key & OTT to JWT (already fetched? Unauthorized?)"),!(this===null||this===void 0)&&this.invoker&&this.invoker.constructor===l.XummSdkJwt&&!((g=this===null||this===void 0?void 0:this.invoker)===null||g===void 0)&&g.fatalHandler?this.invoker.fatalHandler(new Error(A.error.reference)):c.throwIfError(A);else if(!((y=A)===null||y===void 0)&&y.jwt){const E=A;b?.set(this.apiSecret,E)}else throw new Error("Unexpected response for xApp JWT authorize request");this.authPromiseResolve&&this.authPromiseResolve()})}call(h,p="GET",g){var y;return e(this,void 0,void 0,function*(){const b=p.toUpperCase(),A=h.split("/")[0];this.jwtFlow&&!(!(this===null||this===void 0)&&this.jwt)&&this.authPromise&&h!=="authorize"&&(yield this.authPromise);try{let E;typeof g<"u"&&(typeof g=="object"&&g!==null&&(E=JSON.stringify(g)),typeof g=="string"&&(E=g));const _={"Content-Type":"application/json"};this.isBrowser||Object.assign(_,{"User-Agent":`xumm-sdk/node (${u.hostname()}) node-fetch`}),this.jwtFlow?h==="authorize"?Object.assign(_,{"x-api-key":this.apiKey,"x-api-ott":this.apiSecret}):Object.assign(_,{Authorization:"Bearer "+this.jwt}):Object.assign(_,{"x-api-key":this.apiKey,"x-api-secret":this.apiSecret});const S=["authorize","ping","curated-assets","rates","payload","userdata","xrpl-tx","nftoken-detail","rails","hookhash"],I=this.jwtFlow&&S.indexOf(A)>-1?"jwt":"platform";return yield(yield s(this.endpoint+"/api/v1/"+I+"/"+h,{method:b,body:E,headers:_})).json()}catch(E){const _=new Error(`Unexpected response from XUMM API [${b}:${A}]`);throw _.stack=((y=E)===null||y===void 0?void 0:y.stack)||void 0,_}})}ping(){var h,p;return e(this,void 0,void 0,function*(){const g=yield this.call("ping");if(c.throwIfError(g),typeof g.auth<"u")return g.auth;if(typeof((h=g)===null||h===void 0?void 0:h.ott_uuidv4)<"u")return{application:{uuidv4:g.app_uuidv4,name:g.app_name},jwtData:g};if(typeof((p=g)===null||p===void 0?void 0:p.usertoken_uuidv4)<"u")return{application:{uuidv4:g.client_id,name:g.app_name},jwtData:g};throw new Error("Unexpected response for ping request")})}getCuratedAssets(){return e(this,void 0,void 0,function*(){return yield this.call("curated-assets")})}getRates(h){return e(this,void 0,void 0,function*(){return yield this.call("rates/"+h.trim().toUpperCase())})}getKycStatus(h){return e(this,void 0,void 0,function*(){if(h.trim().match(/^r/)){const p=yield this.call("kyc-status/"+h.trim());return p!=null&&p.kycApproved?"SUCCESSFUL":"NONE"}else{const p=yield this.call("kyc-status","POST",{user_token:h});return p?.kycStatus||"NONE"}})}getRails(){return e(this,void 0,void 0,function*(){return yield this.call("rails")})}getHookHash(h){return e(this,void 0,void 0,function*(){if(typeof h=="string"&&h.trim().match(/^[A-Fa-f0-9]{64}$/))return yield this.call("hookhash/"+h.trim());throw Error("Invalid Hook Hash (expecting 64 char hex)")})}getHookHashes(){return e(this,void 0,void 0,function*(){return yield this.call("hookhash")})}getTransaction(h){return e(this,void 0,void 0,function*(){return yield this.call("xrpl-tx/"+h.trim())})}getNftokenDetail(h){return e(this,void 0,void 0,function*(){if(!this.jwtFlow)throw new Error("getNftokenDetail: only available in JWT (XummSdkJwt) mode");return yield this.call("nftoken-detail/"+h.trim())})}verifyUserTokens(h){return e(this,void 0,void 0,function*(){return(yield this.call("user-tokens","POST",{tokens:Array.isArray(h)?h:[h]})).tokens})}_inject(h){if(!this.injected)this.invoker=h;else throw new Error("Cannot `_inject` twice")}};return Pc.Meta=f,Pc}var kc={},ev;function YO(){if(ev)return kc;ev=1;var e=ue&&ue.__awaiter||function(i,o,a,u){function c(l){return l instanceof a?l:new a(function(d){d(l)})}return new(a||(a=Promise))(function(l,d){function f(g){try{p(u.next(g))}catch(y){d(y)}}function h(g){try{p(u.throw(g))}catch(y){d(y)}}function p(g){g.done?l(g.value):c(g.value).then(f,h)}p((u=u.apply(i,o||[])).next())})};Object.defineProperty(kc,"__esModule",{value:!0}),kc.Storage=void 0;const t=co(),n=ca(),r=t.debug("xumm-sdk:storage");let s=class{constructor(i){r("Constructed"),this.Meta=i}get(){return e(this,void 0,void 0,function*(){const i=yield this.Meta.call("app-storage","GET");return n.throwIfError(i),i.data})}set(i){return e(this,void 0,void 0,function*(){const o=yield this.Meta.call("app-storage","POST",i);return n.throwIfError(o),o.stored})}delete(){return e(this,void 0,void 0,function*(){const i=yield this.Meta.call("app-storage","DELETE");return n.throwIfError(i),i.stored})}};return kc.Storage=s,kc}var Rc={},yf,tv;function WO(){if(tv)return yf;tv=1;var e=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return yf=(function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return e()}try{return __global__||e()}finally{delete Object.prototype.__global__}})(),yf}const XO="1.0.35",QO={version:XO};var nv,rv;function $O(){return rv||(rv=1,nv=QO.version),nv}var mf,iv;function ZO(){if(iv)return mf;iv=1;var e;if(typeof globalThis=="object")e=globalThis;else try{e=WO()}catch{}finally{if(!e&&typeof window<"u"&&(e=window),!e)throw new Error("Could not determine global this")}var t=e.WebSocket||e.MozWebSocket,n=$O();function r(s,i){var o;return i?o=new t(s,i):o=new t(s),o}return t&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(s){Object.defineProperty(r,s,{get:function(){return t[s]}})}),mf={w3cwebsocket:t?r:null,version:n},mf}var sv;function JO(){if(sv)return Rc;sv=1;var e=ue&&ue.__awaiter||function(d,f,h,p){function g(y){return y instanceof h?y:new h(function(b){b(y)})}return new(h||(h=Promise))(function(y,b){function A(S){try{_(p.next(S))}catch(I){b(I)}}function E(S){try{_(p.throw(S))}catch(I){b(I)}}function _(S){S.done?y(S.value):g(S.value).then(A,E)}_((p=p.apply(d,f||[])).next())})};Object.defineProperty(Rc,"__esModule",{value:!0}),Rc.Payload=void 0;const t=co(),n=ZO(),r=ca(),s=t.debug("xumm-sdk:payload"),i=t.debug("xumm-sdk:payload:websocket"),o=typeof jest<"u"?0:30,a=2,u=2,c=10;let l=class{constructor(d){s("Constructed"),this.Meta=d}resolvePayload(d){var f,h,p;return e(this,void 0,void 0,function*(){if(typeof d=="string")return yield this.get(d,!0);if(typeof((f=d)===null||f===void 0?void 0:f.uuid)<"u")return yield this.get(d.uuid,!0);if(typeof((p=(h=d)===null||h===void 0?void 0:h.meta)===null||p===void 0?void 0:p.uuid)<"u")return d;throw new Error("Could not resolve payload (not found)")})}create(d,f=!1){var h;return e(this,void 0,void 0,function*(){const p=typeof d.TransactionType<"u"&&typeof d.txjson>"u",g=yield this.Meta.call("payload","POST",p?{txjson:d}:d);return f&&r.throwIfError(g),((h=g)===null||h===void 0?void 0:h.next)!==void 0?g:null})}get(d,f=!1){var h,p;return e(this,void 0,void 0,function*(){const g=typeof d=="string"?d:d?.uuid,y=yield this.Meta.call("payload/"+g,"GET");return f&&r.throwIfError(y),((p=(h=y)===null||h===void 0?void 0:h.meta)===null||p===void 0?void 0:p.uuid)!==void 0?y:null})}subscribe(d,f){return e(this,void 0,void 0,function*(){const h=new r.DeferredPromise,p=yield this.resolvePayload(d);if(p){const g="undefined";let y,b,A,E=0;h.promise.then(()=>{clearTimeout(b),clearTimeout(A),y.close(1e3)});const _=()=>{var S,I;return y=typeof((S=globalThis)===null||S===void 0?void 0:S.MockedWebSocket)!==g&&typeof jest!==g?new((I=globalThis)===null||I===void 0?void 0:I.MockedWebSocket)("ws://xumm.local"):new n.w3cwebsocket(this.Meta.endpoint.replace(/^http/,"ws")+"/sign/"+p.meta.uuid),y.onopen=()=>{console.log(`Payload ${p.meta.uuid}: subscription active (WebSocket opened)`),b=setInterval(()=>{i("Send keepalive"),y.send('{"ping":true}')},u*1e3)},y.onmessage=D=>e(this,void 0,void 0,function*(){E=0;const L=D.data;let x;try{if(x=JSON.parse(L.toString()),x!=null&&x.message&&x.message==="Right back at you!"){i("Keepalive response"),clearTimeout(A),A=setTimeout(()=>{console.log(`WebSocket for ${p.meta.uuid} keepalive response timeout, assume dead... (Reconnect)`),y.close(1002,"Assume dead")},c*1e3);return}if(x!=null&&x.signed||x!=null&&x.expired){const j=yield this.resolvePayload(d);Object.assign(p,Object.assign({},j))}}catch(j){i(`Payload ${p.meta.uuid}: Received message, unable to parse as JSON`,j)}if(x&&f&&typeof x.devapp_fetched>"u")try{const j=yield f({uuid:p.meta.uuid,data:x,resolve(V){return e(this,void 0,void 0,function*(){yield h.resolve(V||void 0)})},payload:p});j!==void 0&&h.resolve(j)}catch(j){i(`Payload ${p.meta.uuid}: Callback exception`,j),console.log(`Payload ${p.meta.uuid}: Callback exception: ${j.message}`)}}),y.onclose=D=>{i("Closed [code]",D.code),i("Closed [reason]",D.reason),i("Closed [wasClean]",D.wasClean),clearInterval(b),clearTimeout(A),(D.code>1e3||D.wasClean===!1)&&(console.log(D),i("Unhealthy disconnect, reconnecting...",D.code),E<o?(E===0&&console.log(`WebSocket for ${p.meta.uuid} lost, reconnecting...`),setTimeout(()=>{E++,i("# Reconnect"),typeof jest>"u"&&(y=_())},a*1e3)):typeof jest>"u"&&console.log(`WebSocket for ${p.meta.uuid} exceeded reconnect timeouts, give up`)),i(`Payload ${p.meta.uuid}: Subscription ended (WebSocket closed)`)},y};return y=_(),{payload:p,resolve(S){h.resolve(S||void 0)},resolved:h.promise,websocket:y}}throw r.throwIfError(p),Error("Couldn't subscribe: couldn't fetch payload")})}cancel(d,f=!1){var h,p,g;return e(this,void 0,void 0,function*(){const y=yield this.resolvePayload(d),b=yield this.Meta.call("payload/"+((h=y?.meta)===null||h===void 0?void 0:h.uuid),"DELETE");return f&&r.throwIfError(b),((g=(p=b)===null||p===void 0?void 0:p.meta)===null||g===void 0?void 0:g.uuid)!==void 0?b:null})}createAndSubscribe(d,f){return e(this,void 0,void 0,function*(){const h=yield this.create(d,!0);if(h){const p=yield this.subscribe(h,f);return Object.assign({created:h},p)}throw new Error("Error creating payload or subscribing to created payload")})}};return Rc.Payload=l,Rc}var Bc={},Uc={},ov;function i0(){if(ov)return Uc;ov=1;var e=ue&&ue.__awaiter||function(o,a,u,c){function l(d){return d instanceof u?d:new u(function(f){f(d)})}return new(u||(u=Promise))(function(d,f){function h(y){try{g(c.next(y))}catch(b){f(b)}}function p(y){try{g(c.throw(y))}catch(b){f(b)}}function g(y){y.done?d(y.value):l(y.value).then(h,p)}g((c=c.apply(o,a||[])).next())})};Object.defineProperty(Uc,"__esModule",{value:!0}),Uc.JwtUserdata=void 0;const t=co(),n=ca(),r=t.debug("xumm-sdk:xapp:userdata"),s=o=>{if(!(typeof o=="string"&&o.match(/^[a-z0-9]{3,}$/)))throw new Error("Invalid key, only a-z0-9 (min three chars) allowed: "+o)};let i=class{constructor(o){r("Constructed"),this.Meta=o}list(){return e(this,void 0,void 0,function*(){const o=yield this.Meta.call("userdata","GET");return n.throwIfError(o),o.keys})}get(o){var a;return e(this,void 0,void 0,function*(){const u=Array.isArray(o)?o.join(","):o;u.split(",").forEach(l=>s(l));const c=yield this.Meta.call("userdata/"+u,"GET");return n.throwIfError(c),u.split(",").length>1?c.data:((a=c.data)===null||a===void 0?void 0:a[u])||{}})}delete(o){return e(this,void 0,void 0,function*(){s(o);const a=yield this.Meta.call("userdata/"+o,"DELETE");return n.throwIfError(a),a.persisted})}set(o,a){return e(this,void 0,void 0,function*(){s(o);const u=yield this.Meta.call("userdata/"+o,"POST",a);return n.throwIfError(u),u.persisted})}};return Uc.JwtUserdata=i,Uc}var av;function eD(){if(av)return Bc;av=1;var e=ue&&ue.__awaiter||function(o,a,u,c){function l(d){return d instanceof u?d:new u(function(f){f(d)})}return new(u||(u=Promise))(function(d,f){function h(y){try{g(c.next(y))}catch(b){f(b)}}function p(y){try{g(c.throw(y))}catch(b){f(b)}}function g(y){y.done?d(y.value):l(y.value).then(h,p)}g((c=c.apply(o,a||[])).next())})};Object.defineProperty(Bc,"__esModule",{value:!0}),Bc.xApp=void 0;const t=co(),n=i0(),r=ca(),s=t.debug("xumm-sdk:xapp");let i=class{constructor(o){s("Constructed"),this.Meta=o,this.userdata=new n.JwtUserdata(o)}get(o){return e(this,void 0,void 0,function*(){const a=yield this.Meta.call("xapp/ott/"+o,"GET");return r.throwIfError(a),a})}};return Bc.xApp=i,Bc}var zc={},cv;function tD(){if(cv)return zc;cv=1;var e=ue&&ue.__awaiter||function(o,a,u,c){function l(d){return d instanceof u?d:new u(function(f){f(d)})}return new(u||(u=Promise))(function(d,f){function h(y){try{g(c.next(y))}catch(b){f(b)}}function p(y){try{g(c.throw(y))}catch(b){f(b)}}function g(y){y.done?d(y.value):l(y.value).then(h,p)}g((c=c.apply(o,a||[])).next())})};Object.defineProperty(zc,"__esModule",{value:!0}),zc.Push=void 0;const t=co(),n=i0(),r=ca(),s=t.debug("xumm-sdk:xapp");let i=class{constructor(o){s("Constructed"),this.Meta=o,this.userdata=new n.JwtUserdata(o)}event(o){return e(this,void 0,void 0,function*(){const a=yield this.Meta.call("xapp/event","POST",o);return r.throwIfError(a),a})}notification(o){return e(this,void 0,void 0,function*(){const a=yield this.Meta.call("xapp/push","POST",o);return r.throwIfError(a),a})}};return zc.Push=i,zc}var uv;function id(){if(uv)return js;uv=1;var e=ue&&ue.__awaiter||function(f,h,p,g){function y(b){return b instanceof p?b:new p(function(A){A(b)})}return new(p||(p=Promise))(function(b,A){function E(I){try{S(g.next(I))}catch(D){A(D)}}function _(I){try{S(g.throw(I))}catch(D){A(D)}}function S(I){I.done?b(I.value):y(I.value).then(E,_)}S((g=g.apply(f,h||[])).next())})};Object.defineProperty(js,"__esModule",{value:!0}),js.XummSdkJwt=js.XummSdk=void 0;const t=co(),n=KO(),r=YO(),s=JO(),i=eD(),o=tD(),a=i0(),u=De,c=t.debug("xumm-sdk");class l{constructor(h,p){return c("Constructed"),this.Meta=new n.Meta(h||this.getEnv("XUMM_APIKEY"),p||this.getEnv("XUMM_APISECRET")),this.storage=new r.Storage(this.Meta),this.payload=new s.Payload(this.Meta),this.jwtUserdata=new a.JwtUserdata(this.Meta),this.Push=new o.Push(this.Meta),this.xApp=new i.xApp(this.Meta),this.Meta._inject(this),this}getEnv(h){let p="";try{p=(process==null?void 0:ci[h])||""}catch{}return p}ping(){return this.Meta.ping()}getCuratedAssets(){return this.Meta.getCuratedAssets()}getRails(){return this.Meta.getRails()}getHookHashes(){return this.Meta.getHookHashes()}getHookHash(h){return this.Meta.getHookHash(h)}getRates(h){return this.Meta.getRates(h)}getKycStatus(h){return this.Meta.getKycStatus(h)}getTransaction(h){return this.Meta.getTransaction(h)}getNftokenDetail(h){return this.Meta.getNftokenDetail(h)}verifyUserTokens(h){return this.Meta.verifyUserTokens(h)}verifyUserToken(h){return e(this,void 0,void 0,function*(){const p=yield this.Meta.verifyUserTokens([h]);return Array.isArray(p)&&p.length===1?p[0]:null})}setEndpoint(h){return this.Meta.setEndpoint(h)}caught(h){throw h}}js.XummSdk=l;class d extends l{constructor(h,p,g){var y,b,A,E,_,S,I,D;let L=String(p||"").trim().toLowerCase();const x=h.length!==36;if(!x&&typeof p>"u"&&typeof window<"u"&&typeof window.URLSearchParams<"u"){const j=new window.URLSearchParams(((y=window?.location)===null||y===void 0?void 0:y.search)||"");for(const V of j.entries())V[0]==="xAppToken"&&(L=V[1].toLowerCase().trim());if(L===""&&!(g!=null&&g.store)&&!(g!=null&&g.noAutoRetrieve)&&typeof((b=window?.localStorage)===null||b===void 0?void 0:b.XummSdkJwt)=="string")try{const V=(E=(A=window?.localStorage)===null||A===void 0?void 0:A.XummSdkJwt)===null||E===void 0?void 0:E.split(":"),Y=JSON.parse((_=V?.slice(1))===null||_===void 0?void 0:_.join(":"));if(Y!=null&&Y.jwt){const q=u.Buffer.from((S=Y.jwt.split("."))===null||S===void 0?void 0:S[1],"base64").toString("utf8"),R=JSON.parse(q);if(R!=null&&R.exp){const v=R?.exp-Math.floor(new Date().getTime()/1e3);console.log("Restoring OTT "+V?.[0]),v>3600?L=V?.[0]:console.log("Skip restore: not valid for one more hour")}}}catch(V){console.log("JWT Restore Error",V)}}super(h,!x&&L!==""?"xApp:OneTimeToken:"+L:"RAWJWT:"+h),this.resolve=j=>{c("OTT data resolved",j)},this.reject=j=>{c("OTT data rejected",j.message)},this.ottResolved=x?Promise.resolve():new Promise((j,V)=>{this.resolve=j,this.reject=V}),g!=null&&g.fatalHandler&&(this.fatalHandler=g.fatalHandler),this.store={get(j){var V;if(c("[JwtStore]  Builtin JWT store GET"),typeof window<"u"&&typeof window.localStorage<"u"&&typeof window.localStorage.XummSdkJwt=="string"){const Y=window.localStorage.XummSdkJwt.split(":");if(Y[0]===j){c("Restoring OTT from localStorage:",j);try{return JSON.parse(Y.slice(1).join(":"))}catch(q){c("Error restoring OTT Data (JWT) from localStorage",(V=q)===null||V===void 0?void 0:V.message)}}}},set(j,V){c("[JwtStore]  Builtin JWT store SET",j),typeof window<"u"&&typeof localStorage<"u"&&(window.localStorage.XummSdkJwt=j+":"+JSON.stringify(V))}},!((I=g?.store)===null||I===void 0)&&I.get&&(this.store.get=g.store.get),!((D=g?.store)===null||D===void 0)&&D.set&&(this.store.set=g.store.set),x?(this.reject(new Error("Not in OTT flow: in raw JWT (OAuth2-like) flow")),c("Using JWT (Raw, OAuth2) flow")):c("Using JWT (xApp) flow")}_jwtStore(h,p){if(h&&h?.constructor===n.Meta)return{get:g=>{var y;return c("[JwtStore] Proxy GET"),(y=this.store)===null||y===void 0?void 0:y.get(g)},set:(g,y)=>{var b;return c("[JwtStore] Proxy SET"),this.resolve(y.ott),p(y.jwt),this.jwt=y.jwt,(b=this.store)===null||b===void 0?void 0:b.set(g,y)}};throw new Error("Invalid _jwtStore invoker")}getOttData(){return e(this,void 0,void 0,function*(){const h=yield this.ottResolved;if(h)return h;throw new Error("Called getOttData on a non OTT-JWT flow")})}getJwt(){return e(this,void 0,void 0,function*(){return yield this.ottResolved,this.jwt})}caught(h){this.reject(h)}}return js.XummSdkJwt=d,js}var s0={},WS={exports:{}};function nD(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var lv={exports:{}};const rD={},iD=Object.freeze(Object.defineProperty({__proto__:null,default:rD},Symbol.toStringTag,{value:"Module"})),sD=xS(iD);var dv;function o0(){return dv||(dv=1,(function(e,t){(function(n,r){e.exports=r()})(ue,function(){var n=n||(function(r,s){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof ue<"u"&&ue.crypto&&(i=ue.crypto),!i&&typeof nD=="function")try{i=sD}catch{}var o=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||(function(){function A(){}return function(E){var _;return A.prototype=E,_=new A,A.prototype=null,_}})(),u={},c=u.lib={},l=c.Base=(function(){return{extend:function(A){var E=a(this);return A&&E.mixIn(A),(!E.hasOwnProperty("init")||this.init===E.init)&&(E.init=function(){E.$super.init.apply(this,arguments)}),E.init.prototype=E,E.$super=this,E},create:function(){var A=this.extend();return A.init.apply(A,arguments),A},init:function(){},mixIn:function(A){for(var E in A)A.hasOwnProperty(E)&&(this[E]=A[E]);A.hasOwnProperty("toString")&&(this.toString=A.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),d=c.WordArray=l.extend({init:function(A,E){A=this.words=A||[],E!=s?this.sigBytes=E:this.sigBytes=A.length*4},toString:function(A){return(A||h).stringify(this)},concat:function(A){var E=this.words,_=A.words,S=this.sigBytes,I=A.sigBytes;if(this.clamp(),S%4)for(var D=0;D<I;D++){var L=_[D>>>2]>>>24-D%4*8&255;E[S+D>>>2]|=L<<24-(S+D)%4*8}else for(var x=0;x<I;x+=4)E[S+x>>>2]=_[x>>>2];return this.sigBytes+=I,this},clamp:function(){var A=this.words,E=this.sigBytes;A[E>>>2]&=4294967295<<32-E%4*8,A.length=r.ceil(E/4)},clone:function(){var A=l.clone.call(this);return A.words=this.words.slice(0),A},random:function(A){for(var E=[],_=0;_<A;_+=4)E.push(o());return new d.init(E,A)}}),f=u.enc={},h=f.Hex={stringify:function(A){for(var E=A.words,_=A.sigBytes,S=[],I=0;I<_;I++){var D=E[I>>>2]>>>24-I%4*8&255;S.push((D>>>4).toString(16)),S.push((D&15).toString(16))}return S.join("")},parse:function(A){for(var E=A.length,_=[],S=0;S<E;S+=2)_[S>>>3]|=parseInt(A.substr(S,2),16)<<24-S%8*4;return new d.init(_,E/2)}},p=f.Latin1={stringify:function(A){for(var E=A.words,_=A.sigBytes,S=[],I=0;I<_;I++){var D=E[I>>>2]>>>24-I%4*8&255;S.push(String.fromCharCode(D))}return S.join("")},parse:function(A){for(var E=A.length,_=[],S=0;S<E;S++)_[S>>>2]|=(A.charCodeAt(S)&255)<<24-S%4*8;return new d.init(_,E)}},g=f.Utf8={stringify:function(A){try{return decodeURIComponent(escape(p.stringify(A)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(A){return p.parse(unescape(encodeURIComponent(A)))}},y=c.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(A){typeof A=="string"&&(A=g.parse(A)),this._data.concat(A),this._nDataBytes+=A.sigBytes},_process:function(A){var E,_=this._data,S=_.words,I=_.sigBytes,D=this.blockSize,L=D*4,x=I/L;A?x=r.ceil(x):x=r.max((x|0)-this._minBufferSize,0);var j=x*D,V=r.min(j*4,I);if(j){for(var Y=0;Y<j;Y+=D)this._doProcessBlock(S,Y);E=S.splice(0,j),_.sigBytes-=V}return new d.init(E,V)},clone:function(){var A=l.clone.call(this);return A._data=this._data.clone(),A},_minBufferSize:0});c.Hasher=y.extend({cfg:l.extend(),init:function(A){this.cfg=this.cfg.extend(A),this.reset()},reset:function(){y.reset.call(this),this._doReset()},update:function(A){return this._append(A),this._process(),this},finalize:function(A){A&&this._append(A);var E=this._doFinalize();return E},blockSize:16,_createHelper:function(A){return function(E,_){return new A.init(_).finalize(E)}},_createHmacHelper:function(A){return function(E,_){return new b.HMAC.init(A,_).finalize(E)}}});var b=u.algo={};return u})(Math);return n})})(lv)),lv.exports}(function(e,t){(function(n,r){e.exports=r(o0())})(ue,function(n){return(function(r){var s=n,i=s.lib,o=i.WordArray,a=i.Hasher,u=s.algo,c=[],l=[];(function(){function h(b){for(var A=r.sqrt(b),E=2;E<=A;E++)if(!(b%E))return!1;return!0}function p(b){return(b-(b|0))*4294967296|0}for(var g=2,y=0;y<64;)h(g)&&(y<8&&(c[y]=p(r.pow(g,1/2))),l[y]=p(r.pow(g,1/3)),y++),g++})();var d=[],f=u.SHA256=a.extend({_doReset:function(){this._hash=new o.init(c.slice(0))},_doProcessBlock:function(h,p){for(var g=this._hash.words,y=g[0],b=g[1],A=g[2],E=g[3],_=g[4],S=g[5],I=g[6],D=g[7],L=0;L<64;L++){if(L<16)d[L]=h[p+L]|0;else{var x=d[L-15],j=(x<<25|x>>>7)^(x<<14|x>>>18)^x>>>3,V=d[L-2],Y=(V<<15|V>>>17)^(V<<13|V>>>19)^V>>>10;d[L]=j+d[L-7]+Y+d[L-16]}var q=_&S^~_&I,R=y&b^y&A^b&A,v=(y<<30|y>>>2)^(y<<19|y>>>13)^(y<<10|y>>>22),T=(_<<26|_>>>6)^(_<<21|_>>>11)^(_<<7|_>>>25),m=D+T+q+l[L]+d[L],w=v+R;D=I,I=S,S=_,_=E+m|0,E=A,A=b,b=y,y=m+w|0}g[0]=g[0]+y|0,g[1]=g[1]+b|0,g[2]=g[2]+A|0,g[3]=g[3]+E|0,g[4]=g[4]+_|0,g[5]=g[5]+S|0,g[6]=g[6]+I|0,g[7]=g[7]+D|0},_doFinalize:function(){var h=this._data,p=h.words,g=this._nDataBytes*8,y=h.sigBytes*8;return p[y>>>5]|=128<<24-y%32,p[(y+64>>>9<<4)+14]=r.floor(g/4294967296),p[(y+64>>>9<<4)+15]=g,h.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});s.SHA256=a._createHelper(f),s.HmacSHA256=a._createHmacHelper(f)})(Math),n.SHA256})})(WS);var oD=WS.exports,XS={exports:{}};(function(e,t){(function(n,r){e.exports=r(o0())})(ue,function(n){return(function(){var r=n,s=r.lib,i=s.WordArray,o=r.enc;o.Base64={stringify:function(u){var c=u.words,l=u.sigBytes,d=this._map;u.clamp();for(var f=[],h=0;h<l;h+=3)for(var p=c[h>>>2]>>>24-h%4*8&255,g=c[h+1>>>2]>>>24-(h+1)%4*8&255,y=c[h+2>>>2]>>>24-(h+2)%4*8&255,b=p<<16|g<<8|y,A=0;A<4&&h+A*.75<l;A++)f.push(d.charAt(b>>>6*(3-A)&63));var E=d.charAt(64);if(E)for(;f.length%4;)f.push(E);return f.join("")},parse:function(u){var c=u.length,l=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var f=0;f<l.length;f++)d[l.charCodeAt(f)]=f}var h=l.charAt(64);if(h){var p=u.indexOf(h);p!==-1&&(c=p)}return a(u,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(u,c,l){for(var d=[],f=0,h=0;h<c;h++)if(h%4){var p=l[u.charCodeAt(h-1)]<<h%4*2,g=l[u.charCodeAt(h)]>>>6-h%4*2,y=p|g;d[f>>>2]|=y<<24-f%4*8,f++}return i.create(d,f)}})(),n.enc.Base64})})(XS);var aD=XS.exports,QS={exports:{}};(function(e,t){(function(n,r){e.exports=r(o0())})(ue,function(n){return(function(){if(typeof ArrayBuffer=="function"){var r=n,s=r.lib,i=s.WordArray,o=i.init,a=i.init=function(u){if(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),(u instanceof Int8Array||typeof Uint8ClampedArray<"u"&&u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array)&&(u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),u instanceof Uint8Array){for(var c=u.byteLength,l=[],d=0;d<c;d++)l[d>>>2]|=u[d]<<24-d%4*8;o.call(this,l,c)}else o.apply(this,arguments)};a.prototype=i}})(),n.lib.WordArray})})(QS);var cD=QS.exports,sd=ue&&ue.__assign||function(){return sd=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},sd.apply(this,arguments)},a0=ue&&ue.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s0,"__esModule",{value:!0});var uD=a0(oD),lD=a0(aD),dD=a0(cD),hD=(function(){function e(t){this.state="",this.codeVerifier="",this.config=t}return e.prototype.authorizeUrl=function(t){var n,r;t===void 0&&(t={});var s=new URLSearchParams(Object.assign(sd({response_type:!((n=this.config)===null||n===void 0)&&n.implicit?"token":"code",client_id:this.config.client_id,state:this.getState(t.state||null),scope:this.config.requested_scopes,redirect_uri:this.config.redirect_uri},!((r=this.config)===null||r===void 0)&&r.implicit?{}:{code_challenge:this.pkceChallengeFromVerifier(),code_challenge_method:"S256"}),t)).toString();return"".concat(this.config.authorization_endpoint,"?").concat(s)},e.prototype.exchangeForAccessToken=function(t,n){var r=this;return n===void 0&&(n={}),this.parseAuthResponseUrl(t).then(function(s){var i,o;if(!((i=r.config)===null||i===void 0)&&i.implicit){var a={access_token:"",expires_in:0,refresh_expires_in:0,refresh_token:"",scope:"",token_type:""},u=new URL(t).searchParams;return u.forEach(function(c,l){Object.keys(a).indexOf(l)>-1&&(a[l]=typeof a[l]=="number"?Number(c):String(c))}),Promise.resolve(Object.assign(a,n))}return fetch(r.config.token_endpoint,{method:"POST",body:new URLSearchParams(Object.assign(sd({grant_type:"authorization_code",code:s.code,client_id:r.config.client_id,redirect_uri:r.config.redirect_uri},!((o=r.config)===null||o===void 0)&&o.implicit?{}:{code_verifier:r.getCodeVerifier()}),n)),headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then(function(c){return c.json()})})},e.prototype.getCodeVerifier=function(){return this.codeVerifier===""&&(this.codeVerifier=this.randomStringFromStorage("pkce_code_verifier")),this.codeVerifier},e.prototype.getState=function(t){t===void 0&&(t=null);var n="pkce_state";return t!==null&&this.getStore().setItem(n,t),this.state===""&&(this.state=this.randomStringFromStorage(n)),this.state},e.prototype.parseAuthResponseUrl=function(t){var n=new URL(t).searchParams;return this.validateAuthResponse({error:n.get("error"),query:n.get("query"),state:n.get("state"),code:n.get("code")})},e.prototype.pkceChallengeFromVerifier=function(){var t=(0,uD.default)(this.getCodeVerifier());return lD.default.stringify(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},e.prototype.randomStringFromStorage=function(t){var n=this.getStore().getItem(t);return n===null&&this.getStore().setItem(t,dD.default.random(64)),this.getStore().getItem(t)||""},e.prototype.validateAuthResponse=function(t){var n=this;return new Promise(function(r,s){var i;return t.error?s({error:t.error}):t.state!==n.getState()&&!(!((i=n.config)===null||i===void 0)&&i.implicit)?s({error:"Invalid State"}):r(t)})},e.prototype.getStore=function(){var t;return((t=this.config)===null||t===void 0?void 0:t.storage)||sessionStorage},e})();s0.default=hD;var hl=ue&&ue.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},fD=ue&&ue.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($o,"__esModule",{value:!0});$o.XummPkce=$o.XummPkceThread=void 0;const pD=In,hv=id(),gD=fD(s0),yt=function(...e){typeof localStorage<"u"&&localStorage!=null&&localStorage.debug&&console.log(...e)};typeof window<"u"&&yt("Xumm OAuth2 PKCE Authorization Code Flow lib.");const Fc=e=>{let t=n=>{};return{promise:new Promise(n=>{t=n}),resolve:n=>t(n)}};class $S extends pD.EventEmitter{constructor(t,n){var r,s;super(),this.popup=null,this.resolved=!1,this.mobileRedirectFlow=!1,this.eventPromises={retrieved:Fc(),error:Fc(),success:Fc(),loggedout:Fc()},this.options={redirectUrl:document.location.href,rememberJwt:!0,storage:localStorage,implicit:!1},typeof n=="string"?this.options.redirectUrl=n:typeof n=="object"&&n&&(typeof n.redirectUrl=="string"&&(this.options.redirectUrl=n.redirectUrl),typeof n.rememberJwt=="boolean"&&(this.options.rememberJwt=n.rememberJwt),typeof n.storage=="object"&&(this.options.storage=n.storage),typeof n.implicit=="boolean"&&(this.options.implicit=n.implicit));const i={client_id:t,redirect_uri:this.options.redirectUrl,authorization_endpoint:"https://oauth2.xumm.app/auth",token_endpoint:"https://oauth2.xumm.app/token",requested_scopes:"XummPkce",storage:this.options.storage,implicit:this.options.implicit};if(this.pkce=new gD.default(i),this.options.rememberJwt){yt("Remember JWT");try{const a=JSON.parse(((r=this.options.storage)===null||r===void 0?void 0:r.getItem("XummPkceJwt"))||"{}");if(a!=null&&a.jwt&&typeof a.jwt=="string"){const u=new hv.XummSdkJwt(a.jwt);this.ping=u.ping(),this.ping.then(c=>hl(this,void 0,void 0,function*(){var l;!((l=c?.jwtData)===null||l===void 0)&&l.sub?(this.autoResolvedFlow=Object.assign(a,{sdk:u}),yield this.authorize(),this.emit("retrieved")):this.logout()})).catch(c=>{this.logout()})}else this.logout()}catch{}}window.addEventListener("message",a=>{var u;if(yt("Received Event from ",a.origin),String(a?.data||"").slice(0,1)==="{"&&String(a?.data||"").slice(-1)==="}"&&(yt("Got PostMessage with JSON"),a.origin==="https://xumm.app"||a.origin==="https://oauth2.xumm.app")){yt("Got PostMessage from https://xumm.app / https://oauth2.xumm.app");try{const c=JSON.parse(a.data);c?.source==="xumm_sign_request"&&c!=null&&c.payload?yt("Payload opened:",c.payload):c?.source==="xumm_sign_request_resolved"&&c!=null&&c.options?(yt("Payload resolved, mostmessage containing options containing redirect URL: ",c),this.resolved=!0,this.pkce.exchangeForAccessToken(c.options.full_redirect_uri).then(l=>{if(this.jwt=l.access_token,l!=null&&l.error_description)throw new Error(l?.error_description);fetch("https://oauth2.xumm.app/userinfo",{headers:{Authorization:"Bearer "+l.access_token}}).then(d=>d.json()).then(d=>{var f;if(this.resolvePromise){if(this.options.rememberJwt){yt("Remembering JWT");try{(f=this.options.storage)===null||f===void 0||f.setItem("XummPkceJwt",JSON.stringify({jwt:l.access_token,me:d}))}catch(h){yt("Could not persist JWT to local storage",h)}}this.resolvePromise({jwt:l.access_token,sdk:new hv.XummSdkJwt(l.access_token),me:d})}})}).catch(l=>{this.rejectPromise&&this.rejectPromise(l!=null&&l.error?new Error(l.error):l),yt(l?.error||l)})):c?.source==="xumm_sign_request_rejected"?(yt("Payload rejected",c?.options),this.rejectPromise&&this.rejectPromise(new Error(((u=c?.options)===null||u===void 0?void 0:u.error_description)||"Payload rejected"))):c?.source==="xumm_sign_request_popup_closed"?(yt("Popup closed, wait 750ms"),setTimeout(()=>{!this.resolved&&this.rejectPromise&&this.rejectPromise(new Error("Sign In window closed"))},750)):yt("Unexpected message, skipping",c?.source)}catch(c){yt("Error parsing message",c?.message||c)}}},!1);const o=new URLSearchParams(((s=document?.location)===null||s===void 0?void 0:s.search)||"");if(o.get("authorization_code")||o.get("access_token")||o.get("error_description")){this.mobileRedirectFlow=!0,this.urlParams=o;let a=!1;const u=c=>hl(this,void 0,void 0,function*(){yt("onDocumentReady",document.readyState),!a&&document.readyState==="complete"&&(a=!0,yt("(readystatechange: [ "+document.readyState+" ])"),this.handleMobileGrant(),yield this.authorize(),this.emit("retrieved"))});u(),document.addEventListener("readystatechange",u)}}emit(t,...n){return this.eventPromises[t].promise.then(()=>super.emit(t,...n)),!0}on(t,n){return this.eventPromises[t].resolve(),super.on(t,n)}off(t,n){return this.eventPromises[t]=Fc(),super.off(t,n)}authorizeUrl(){return this.pkce.authorizeUrl()}handleMobileGrant(){if(this.urlParams&&this.mobileRedirectFlow){const t={data:JSON.stringify(this.urlParams.get("authorization_code")||this.urlParams.get("access_token")?{source:"xumm_sign_request_resolved",options:{full_redirect_uri:document.location.href}}:{source:"xumm_sign_request_rejected",options:{error:this.urlParams.get("error"),error_code:this.urlParams.get("error_code"),error_description:this.urlParams.get("error_description")}}),origin:"https://oauth2.xumm.app"},n=new MessageEvent("message",t);return window.dispatchEvent(n),!0}return!1}authorize(){return hl(this,void 0,void 0,function*(){if(this.resolvedSuccessfully)return this.promise;this.resolved=!1;try{yield this.ping}catch{}if(!this.mobileRedirectFlow&&!this.autoResolvedFlow){const t=this.authorizeUrl(),n=window.open(t,"XummPkceLogin","directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no,width=600,height=790");this.popup=n,yt("Popup opened...",t)}return this.resolved=!1,(()=>{var t;const n=new URLSearchParams(((t=document?.location)===null||t===void 0?void 0:t.search)||"");n.delete("authorization_code"),n.delete("code"),n.delete("scope"),n.delete("state"),n.delete("access_token"),n.delete("refresh_token"),n.delete("token_type"),n.delete("expires_in");const r=n.toString(),s=document.location.href.split("?")[0]+(r!==""?"?":"")+r;window.history.replaceState({path:s},"",s)})(),this.autoResolvedFlow?this.resolved||(this.resolved=!0,this.promise=Promise.resolve(this.autoResolvedFlow),this.rejectPromise=this.resolvePromise=()=>{},yt("Auto resolved"),this.emit("success")):this.promise=new Promise((t,n)=>{this.resolvePromise=r=>{const s=t(r);return this.resolved=!0,this.resolvedSuccessfully=!0,yt("Xumm Sign in RESOLVED"),this.emit("success"),s},this.rejectPromise=r=>{const s=n(r);return this.resolved=!0,this.emit("error",typeof r=="string"?new Error(r):r),yt("Xumm Sign in REJECTED"),s}}),this.promise})}state(){return hl(this,void 0,void 0,function*(){return this.promise})}logout(){var t;setTimeout(()=>this.emit("loggedout"),0);try{this.resolved=!1,this.resolvedSuccessfully=void 0,this.autoResolvedFlow=void 0,(t=this.options.storage)===null||t===void 0||t.removeItem("XummPkceJwt"),this.mobileRedirectFlow=!1}catch{}}getPopup(){return this===null||this===void 0?void 0:this.popup}}$o.XummPkceThread=$S;const ks=e=>{let t=!1;e&&typeof window=="object"&&typeof window._XummPkce>"u"&&(window._XummPkce=e,t=!0);const n=window?._XummPkce;return n&&t&&yt("XummPkce attached to window"),n};class yD{constructor(t,n){typeof window>"u"||typeof document>"u"||ks()||ks(new $S(t,n))}on(t,n){const r=ks();if(r)return r.on(t,n),this}off(t,n){const r=ks();if(r)return r.off(t,n),this}authorize(){const t=ks();if(t)return t.authorize()}state(){const t=ks();if(t)return t.state()}logout(){const t=ks();if(t)return t.logout()}}$o.XummPkce=yD;var fv={},pv={},gv;function yv(){return gv||(gv=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.xAppEvents=void 0,(function(t){t.ready="ready",t.scanQr="scanQr",t.payloadResolved="payloadResolved",t.selectDestination="selectDestination",t.networkSwitch="networkSwitch"})(e.xAppEvents||(e.xAppEvents={}))})(pv)),pv}var mv;function mD(){return mv||(mv=1,(function(e){var t=ue&&ue.__createBinding||(Object.create?function(E,_,S,I){I===void 0&&(I=S);var D=Object.getOwnPropertyDescriptor(_,S);(!D||("get"in D?!_.__esModule:D.writable||D.configurable))&&(D={enumerable:!0,get:function(){return _[S]}}),Object.defineProperty(E,I,D)}:function(E,_,S,I){I===void 0&&(I=S),E[I]=_[S]}),n=ue&&ue.__exportStar||function(E,_){for(var S in E)S!=="default"&&!Object.prototype.hasOwnProperty.call(_,S)&&t(_,E,S)},r=ue&&ue.__awaiter||function(E,_,S,I){function D(L){return L instanceof S?L:new S(function(x){x(L)})}return new(S||(S=Promise))(function(L,x){function j(q){try{Y(I.next(q))}catch(R){x(R)}}function V(q){try{Y(I.throw(q))}catch(R){x(R)}}function Y(q){q.done?L(q.value):D(q.value).then(j,V)}Y((I=I.apply(E,_||[])).next())})},s;Object.defineProperty(e,"__esModule",{value:!0}),e.xApp=void 0;const i=In,o=yv();n(yv(),e);const a=.25,u=250,c=2e3,l=Number(new Date);let d;const f=new Promise(E=>{d=_=>{console.log("Doc Ready...");const S=(Number(new Date)-l)/1e3;S<a?(console.log("Doc not alive >= "+a+" sec, stalling for "+(a-S)),setTimeout(function(){E(_)},(a-S)*1e3)):(console.log("Doc alive "+a+"+ sec, go ahead"),E(_))}});f.then(()=>{console.log("documentReadyPromise resolved")}).catch(E=>{console.log(E)}),typeof document<"u"&&document.addEventListener("readystatechange",E=>{console.log("(readystatechange: [ "+document.readyState+" ])"),document.readyState==="complete"&&d()}),typeof window<"u"&&console.log("Loading xApp SDK");let h=typeof window<"u"?window:{},p=!1;h!=null&&h.parent&&((s=h.parent)===null||s===void 0||s.postMessage("XAPP_PROXY_INIT","*"));const g=(E,_,S=0)=>r(void 0,void 0,void 0,function*(){var I,D;if(yield f,typeof h?.ReactNativeWebView<"u"||p){const L=(Number(new Date)-l)/1e3;["close"].indexOf(E)>-1&&L<4&&(console.log("xApp close, doc alive < minAliveTimeSec, stall: "+(4-L)),yield new Promise(j=>{setTimeout(()=>{j(!0)},(4-L)*1e3)}));const x=JSON.stringify(Object.assign({command:E},_||{}));return p?(I=h.parent)===null||I===void 0||I.postMessage(x,"*"):(D=h.ReactNativeWebView)===null||D===void 0||D.postMessage(x),console.log("xAppActionAttempt Success",E,_),!0}else return S*u<c?(console.log("xAppActionAttempt Attempt "+S+"  Retry",E,_),yield new Promise(L=>{setTimeout(L,u)}),g(E,_,S+1)):(console.log("xAppActionAttempt Failed after attempt "+S,E,_),new Error("xApp."+E.replace(/^xApp/,"")+": could not contact Xumm App Host"))});class y extends i.EventEmitter{constructor(){super(),document.readyState==="complete"&&d();const _=S=>{const I=S;if(typeof I?.data=="string"&&I.data==="XAPP_PROXY_INIT_ACK"){console.log("xApp Proxy ACK received, switching to PROXY (SANDBOX) mode"),p=!0;return}try{const D=JSON.parse(I?.data||"{}");if(console.log("_event (typeof, {_event}) ",typeof D,{_event:D}),typeof D=="object"&&D!==null)if(typeof D.method=="string"&&D.method in o.xAppEvents){console.log("xApp Event received",D.method,D);const L=D.method;switch(delete D.method,L){case String(o.xAppEvents.payloadResolved):this.emit("payload",D);break;case String(o.xAppEvents.scanQr):this.emit("qr",D);break;case String(o.xAppEvents.networkSwitch):this.emit("networkswitch",D);break;case String(o.xAppEvents.selectDestination):this.emit("destination",D);break}}else console.log("xApp Event received, not in xAppEvents:",D.method)}catch(D){const L=D?.message||"";L.match(/XAPP_PROXY_INIT/)||console.log("xApp Event received, cannot parse as JSON",L)}};typeof window.addEventListener=="function"&&window.addEventListener("message",_),typeof document.addEventListener=="function"&&document.addEventListener("message",_)}getEnvironment(){const _=b();return _?_.getEnvironment():{version:"",ott:""}}navigate(_){return typeof _?.xApp!="string"?Promise.reject(new Error("xApp.navigate: Invalid argument: `xApp`")):g("xAppNavigate",_)}openSignRequest(_){return typeof _?.uuid!="string"?Promise.reject(new Error("xApp.openSignRequest: Invalid argument: `uuid`")):_.uuid.match(/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i)?g("openSignRequest",_):Promise.reject(new Error("xApp.openSignRequest: Invalid payload UUID"))}selectDestination(_){return g("selectDestination",_)}openBrowser(_){return typeof _?.url!="string"?Promise.reject(new Error("xApp.openBrowser: Invalid argument: `url`")):g("openBrowser",_)}share(_){return typeof _?.text!="string"?Promise.reject(new Error("xApp.share: Invalid argument: `text`")):g("share",_)}scanQr(){return g("scanQr")}tx(_){return typeof _?.tx!="string"?Promise.reject(new Error("xApp.tx: Invalid argument: `tx`")):typeof _?.account!="string"?Promise.reject(new Error("xApp.tx: Invalid argument: `account`")):g("txDetails",_)}close(_){return g("close",_)}ready(){return g("ready")}customCommand(_,S){return g(_,S)}}const b=E=>{let _=!1;E&&typeof h=="object"&&typeof h._xAppSdk>"u"&&(h._xAppSdk=E,_=!0);const S=h?._xAppSdk;return S&&_&&console.log("xAppSdk attached to window"),S};class A{constructor(){if(this.xummEnvironment={version:"",ott:""},!(typeof window>"u"||typeof document>"u")){if(typeof navigator<"u"&&typeof navigator?.userAgent=="string"){const _=navigator.userAgent.trim().match(/xumm\/xapp:([0-9]{1,}\.[0-9]{1,}\.[0-9]{1,}).*ott:([0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})/);_&&(this.xummEnvironment.version=_[1],this.xummEnvironment.ott=_[2])}this.xummEnvironment.version===""&&console.log("Warning: Xumm Version could not be retrieved from User Agent, possibly not loaded in xApp context?"),b()||b(new y)}}getEnvironment(){return this.xummEnvironment}on(_,S){const I=b();if(I)return I.on(_,S),this}off(_,S){const I=b();if(I)return I.off(_,S),this}navigate(_){const S=b();if(S)return S.navigate(_)}openSignRequest(_){const S=b();if(S&&_!=null&&_.uuid)return S.openSignRequest(_)}selectDestination(_){const S=b();if(S)return S.selectDestination(_)}openBrowser(_){const S=b();if(S)return S.openBrowser(_)}share(_){const S=b();if(S)return S.share(_)}scanQr(){const _=b();if(_)return _.scanQr()}tx(_){const S=b();if(S)return S.tx(_)}close(_){const S=b();if(S)return S.close(_)}ready(){const _=b();if(_)return _.ready()}customCommand(_,S){const I=b();if(I)return I.customCommand(_,S)}}e.xApp=A})(fv)),fv}var Vs=ue&&ue.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t0,"__esModule",{value:!0});var Ap=t0.Xumm=void 0;const wD=$o,bD=De,vD=In,wv=e=>bD.Buffer.from(e,"base64").toString("utf8");var bv;(function(e){e.cli="cli",e.browser="browser",e.xapp="xapp"})(bv||(bv={}));const It={cli:!1,browser:!1,xapp:!1},Hc=new RegExp("^[0-9(a-f|A-F)]{8}-[0-9(a-f|A-F)]{4}-4[0-9(a-f|A-F)]{3}-[89ab][0-9(a-f|A-F)]{3}-[0-9(a-f|A-F)]{12}$"),Ne={},fl=typeof process=="object"&&process?(process==null?void 0:ci)||{}:{};Object.assign(It,{cli:Object.keys(fl).indexOf("NODE")>-1||Object.keys(fl).indexOf("SHELL")>-1||Object.keys(fl).indexOf("TERM")>-1||Object.keys(fl).indexOf("PATH")>-1});Object.assign(It,{browser:typeof process=="object"&&process&&(process==null?void 0:!0)||typeof document=="object"&&document&&document?.location});Object.assign(It,{xapp:It.browser&&(!!navigator.userAgent.match(/xumm\/xapp/i)||!!navigator.userAgent.match(/xAppBuilder/i))});const ED=Object.keys(It).filter(e=>It[e]),Sr=[],Xe=e=>Vs(void 0,void 0,void 0,function*(){return yield Promise.all(Sr),yield e()}),Vc=e=>new Proxy(e,{get(t,n){return["on","off"].indexOf(String(n))<0&&(typeof t[n]=="function"||t.constructor.name==="Promise")?function(){return t.constructor.name==="Promise"?t.then(r=>Xe(()=>r[n](...arguments))):Xe(()=>t[n](...arguments))}:t[n]}}),Oo={XummSdkJwt:!1,XummPkce:!1,xApp:!1};let He,rr="",kt={},Fe={},vv=0;class Ev{constructor(){this.account=Xe(()=>{var t,n,r;return(n=(t=kt?.sub)!==null&&t!==void 0?t:Fe?.sub)!==null&&n!==void 0?n:(r=He?.account_info)===null||r===void 0?void 0:r.account}),this.picture=Xe(()=>{var t,n,r,s,i,o,a;return(t=Fe?.picture)!==null&&t!==void 0?t:((r=(n=kt?.sub)!==null&&n!==void 0?n:Fe?.sub)!==null&&r!==void 0?r:!((s=He?.account_info)===null||s===void 0)&&s.account)?`https://xumm.app/avatar/${(o=(i=kt?.sub)!==null&&i!==void 0?i:Fe?.sub)!==null&&o!==void 0?o:(a=He?.account_info)===null||a===void 0?void 0:a.account}.png`:void 0}),this.name=Xe(()=>{var t,n;return(t=Fe?.name)!==null&&t!==void 0?t:(n=He?.account_info)===null||n===void 0?void 0:n.name}),this.domain=Xe(()=>{var t,n;return(t=Fe?.domain)!==null&&t!==void 0?t:(n=He?.account_info)===null||n===void 0?void 0:n.domain}),this.source=Xe(()=>{var t,n;return(t=Fe?.source)!==null&&t!==void 0?t:(n=He?.account_info)===null||n===void 0?void 0:n.source}),this.networkType=Xe(()=>{var t,n;return(n=(t=Fe?.networkType)!==null&&t!==void 0?t:kt.network_type)!==null&&n!==void 0?n:He?.nodetype}),this.networkEndpoint=Xe(()=>{var t,n;return(n=(t=Fe?.networkEndpoint)!==null&&t!==void 0?t:kt.network_endpoint)!==null&&n!==void 0?n:He?.nodewss}),this.networkId=Xe(()=>{var t,n;return(n=(t=Fe?.networkId)!==null&&t!==void 0?t:kt.network_id)!==null&&n!==void 0?n:He?.networkid}),this.blocked=Xe(()=>{var t,n;return(t=Fe?.blocked)!==null&&t!==void 0?t:(n=He?.account_info)===null||n===void 0?void 0:n.blocked}),this.kycApproved=Xe(()=>{var t,n;return(t=Fe?.kycApproved)!==null&&t!==void 0?t:(n=He?.account_info)===null||n===void 0?void 0:n.kycApproved}),this.proSubscription=Xe(()=>{var t,n;return(t=Fe?.proSubscription)!==null&&t!==void 0?t:(n=He?.account_info)===null||n===void 0?void 0:n.proSubscription}),this.profile=Xe(()=>{var t,n,r;return(t=Fe?.profile)!==null&&t!==void 0?t:!((r=(n=He?.account_info)===null||n===void 0?void 0:n.profile)===null||r===void 0)&&r.slug?He.account_info.profile:void 0}),this.token=Xe(()=>{var t;return(t=kt?.usertoken_uuidv4)!==null&&t!==void 0?t:null})}}class AD extends vD.EventEmitter{constructor(t,n){var r,s,i,o;super(),this.instance="0",this.jwtCredential=!1,this.runtime=It,this.apiKeyOrJwt="",this.apiKeyOrJwt=t,this.apiSecretOrOtt=n,vv++,this.instance=String(vv),typeof console?.log<"u"&&(It.cli||console.log("Constructed Xumm",{runtime:ED}));let a=!1;if(typeof this.apiKeyOrJwt=="string"&&this.apiKeyOrJwt.split(".").length===3){let c;try{c=JSON.parse(wv((r=this.apiKeyOrJwt.split("."))===null||r===void 0?void 0:r[1]))}catch{}if(Date.now()>=c.exp*1e3){a=!0;const l=(o=(i=(s=c?.app_uuidv4)!==null&&s!==void 0?s:c?.client_id)!==null&&i!==void 0?i:c?.aud)!==null&&o!==void 0?o:"";if(this.apiKeyOrJwt=l,It.cli||console.log("JWT expired, falling back to API KEY: "+l),It.cli||It.xapp){const d=new Error("JWT Expired, cannot fall back to API credential: in CLI/xApp environment");throw this.emit("error",d),d}}a||(this.jwtCredential=!0,rr=this.apiKeyOrJwt)}this.initialize(),this.user=new Ev,this.environment={jwt:Xe(()=>kt),ott:Xe(()=>He),openid:Xe(()=>Fe),bearer:Xe(()=>rr),ready:new Promise(c=>this.on("ready",()=>c(void 0))),success:new Promise(c=>this.on("success",()=>c(void 0))),retrieved:new Promise(c=>this.on("retrieved",()=>c(void 0))),retrieving:new Promise(c=>this.on("retrieving",()=>c(void 0)))},this.state={account:"",signedIn:!1},this.helpers=Vc(Xe(()=>Ne.XummSdk||Ne.XummSdkJwt)),this.push=Vc(Xe(()=>(Ne.XummSdk||Ne.XummSdkJwt).Push)),this.payload=Vc(Xe(()=>(Ne.XummSdk||Ne.XummSdkJwt).payload)),this.userstore=Vc(Xe(()=>(Ne.XummSdk||Ne.XummSdkJwt).jwtUserdata)),this.backendstore=Vc(Xe(()=>(Ne.XummSdk||Ne.XummSdkJwt).storage));const u=Ne?.xApp;u&&(this.xapp=u),setTimeout(()=>Promise.all([...Sr.filter(c=>c?.promiseType!=="pkceRetrieverResolver"),It.xapp?Promise.resolve():new Promise(c=>{var l;Ne!=null&&Ne.XummPkce?(this.user.account.then(()=>c()),(l=Ne.XummPkce)===null||l===void 0||l.on("loggedout",()=>c())):c()})]).then(()=>this.emit("ready")),0)}initialize(){He=void 0,typeof this.apiKeyOrJwt=="string"&&this.apiKeyOrJwt.split(".").length===3&&rr===this.apiKeyOrJwt||(rr="",kt={}),Fe={},Oo.XummSdkJwt=!1;const t=()=>Vs(this,void 0,void 0,function*(){Ne!=null&&Ne.xApp&&(Oo.xApp=!0,Ne.xApp.on("qr",s=>{this.emit("qr",s,this.instance)}),Ne.xApp.on("payload",s=>{this.emit("payload",s,this.instance)}),Ne.xApp.on("networkswitch",s=>{this.emit("networkswitch",s,this.instance)}),Ne.xApp.on("destination",s=>{this.emit("destination",s,this.instance)}))});this.handlePkceEvents();const n=()=>Vs(this,void 0,void 0,function*(){var s;if(Ne!=null&&Ne.XummSdkJwt&&!Oo.XummSdkJwt){Oo.XummSdkJwt=!0;const i=this.jwtCredential||rr!=="";i||(Sr.push(Ne.XummSdkJwt.getOttData()),Sr.push(Ne.XummSdkJwt.getJwt()));const o=i?null:yield Ne.XummSdkJwt.getOttData(),a=i?rr:yield Ne.XummSdkJwt.getJwt();if(o&&(He=o,He!=null&&He.account&&(this.state.account=He.account,this.state.signedIn=!0),this.emit("retrieved"),this.emit("success")),a){rr=a;try{kt=JSON.parse(wv((s=rr.split("."))===null||s===void 0?void 0:s[1])),i&&this.jwtCredential&&(setTimeout(()=>this.emit("retrieved"),0),setTimeout(()=>this.emit("success"),0))}catch(u){typeof console?.log<"u"&&(It.cli||console.log("Error decoding JWT",u?.message||""))}}}}),r=()=>{var s,i,o;Ne!=null&&Ne.XummSdkJwt||(Object.assign(Ne,{XummSdkJwt:new(id()).XummSdkJwt(this.apiKeyOrJwt,typeof((s=Ne?.xApp)===null||s===void 0?void 0:s.getEnvironment)<"u"&&((o=(i=Ne?.xApp)===null||i===void 0?void 0:i.getEnvironment())===null||o===void 0?void 0:o.ott)||void 0)}),Sr.push(n()))};if(It.xapp){if(typeof this.apiKeyOrJwt!="string"||!(Hc.test(this.apiKeyOrJwt)||this.jwtCredential))throw new Error("Running in xApp, constructor requires first param. to be Xumm API Key or JWT");Ne!=null&&Ne.xApp||Object.assign(Ne,{xApp:new(mD()).xApp}),Sr.push(t()),r()}else if(It.browser){if(typeof this.apiKeyOrJwt!="string"||!(Hc.test(this.apiKeyOrJwt)||this.jwtCredential))throw new Error("Running in browser, constructor requires first param. to be Xumm API Key or JWT");if(!(Ne!=null&&Ne.XummPkce)&&!It.xapp&&(Object.assign(Ne,{XummPkce:new wD.XummPkce(this.apiKeyOrJwt,{implicit:!0})}),Ne.XummPkce))if(this.jwtCredential)r();else{setTimeout(()=>this.emit("retrieving"),0);const s=o=>{var a,u;(u=(a=Ne.XummPkce)===null||a===void 0?void 0:a.state())===null||u===void 0||u.then(c=>{var l;c!=null&&c.sdk&&!(Ne!=null&&Ne.XummSdkJwt)&&(Object.assign(Ne,{XummSdkJwt:c.sdk}),Object.assign(Fe,Object.assign({},c?.me||{})),!((l=c?.me)===null||l===void 0)&&l.account&&(this.state.account=c.me.account,this.state.signedIn=!0)),c!=null&&c.jwt&&rr===""&&(rr=c.jwt,n()),o(c)})};Sr.push(this.handlePkceEvents());const i=new Promise(o=>{var a,u;(a=Ne.XummPkce)===null||a===void 0||a.on("retrieved",()=>{s(o)}),(u=Ne.XummPkce)===null||u===void 0||u.on("success",()=>{s(o)})});Sr.push(Object.assign(i,{promiseType:"pkceRetrieverResolver"}))}}else if(It.cli){if(typeof this.apiKeyOrJwt!="string")throw new Error("Running CLI, constructor needs first param. to be Xumm API Key / raw JWT");if(Hc.test(this.apiKeyOrJwt)&&(typeof this.apiSecretOrOtt!="string"||!Hc.test(this.apiSecretOrOtt)))throw new Error("Running CLI, constructor first param. is API Key, but second param. isn't a valid API Secret");if(!Hc.test(this.apiKeyOrJwt)&&this.apiKeyOrJwt.split(".").length!==3)throw new Error("Running CLI, constructor first param. not a valid JWT, nor a valid API Key");this.jwtCredential?r():Ne!=null&&Ne.XummSdk||Object.assign(Ne,{XummSdk:new(id()).XummSdk(this.apiKeyOrJwt,this.apiSecretOrOtt)})}}authorize(){var t;return Vs(this,void 0,void 0,function*(){try{return yield(t=Ne?.XummPkce)===null||t===void 0?void 0:t.authorize()}catch(n){return n}})}handlePkceEvents(){return Vs(this,void 0,void 0,function*(){if(Ne!=null&&Ne.XummPkce&&!Oo.XummPkce){Oo.XummPkce=!0;const t=()=>this.emit("retrieved"),n=()=>this.emit("success"),r=s=>this.emit("error",s);Ne.XummPkce.on("retrieved",t),Ne.XummPkce.on("success",n),Ne.XummPkce.on("error",r)}})}logout(){var t;return Vs(this,void 0,void 0,function*(){if(It.xapp)return;let n=!1;this.state.account="",this.state.signedIn=!1,typeof this.apiKeyOrJwt=="string"&&this.apiKeyOrJwt.split(".").length===3&&kt!=null&&kt.app_uuidv4&&this.jwtCredential&&(this.apiKeyOrJwt=kt.app_uuidv4,this.jwtCredential=!1,n=!0,window._XummPkce=void 0),It.browser&&(Fe!=null&&Fe.sub||n)&&((t=Ne?.XummPkce)===null||t===void 0||t.logout(),Object.assign(Ne,{XummSdk:void 0,XummSdkJwt:void 0,XummPkce:void 0}),Sr.length=0,this.jwtCredential=!1,this.initialize(),this.user=new Ev,this.environment={jwt:Xe(()=>kt),ott:Xe(()=>He),openid:Xe(()=>Fe),bearer:Xe(()=>rr),ready:new Promise(r=>this.on("ready",()=>r(void 0))),success:new Promise(r=>this.on("success",()=>r(void 0))),retrieved:new Promise(r=>this.on("retrieved",()=>r(void 0))),retrieving:new Promise(r=>this.on("retrieving",()=>r(void 0)))},this.emit("logout"))})}ping(){var t;return Vs(this,void 0,void 0,function*(){return yield Promise.all(Sr),(t=Ne?.XummSdkJwt||Ne?.XummSdk)===null||t===void 0?void 0:t.ping()})}}Ap=t0.Xumm=AD;const mi=ju("[Xaman]");class SD{constructor(t={}){this.id="xaman",this.name="Xaman",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU2IiBoZWlnaHQ9IjI1NiIgdmlld0JveD0iMCAwIDI1NiAyNTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8zMTE2Xzk1OCkiPgo8cGF0aCBkPSJNMjU2IDBIMFYyNTZIMjU2VjBaIiBmaWxsPSIjMDAzMENGIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTUyLjc4MiAtMjM3LjMzOEMyMDguMyAtMjE3LjMyMyAyNjIuMTgzIC0xNzIuNjk0IDI5My45MTQgLTEzNi4zNTlDMzI1LjczIC05OS45MjM4IDM0OC4yMTMgLTU3LjAyMDEgMzUzLjI2MSAtNy41MjA3NEMzNTguMzEgNDEuOTkwOSAzNDUuODg1IDk3LjgwNTEgMzA4LjQwMyAxNTkuOTkzQzI3MS4wMDMgMjIyLjA0NiAxOTMuNjYyIDMxNS4zMDYgMTE3Ljc2OSAzODQuMDM3Qzc5LjgzNDQgNDE4LjM5IDQyLjA4NzkgNDQ2Ljc3NyA5LjczNjk0IDQ2Mi4wMzZDLTYuNDMyNzggNDY5LjY2MyAtMjEuNDU1MSA0NzQuMTA3IC0zNC41OTU4IDQ3NC4yNDFDLTQ3LjgzOCA0NzQuMzc3IC01OS4yMTg5IDQ3MC4xMjIgLTY3LjcyMDQgNDYwLjM4NkMtNzYuMDY2NiA0NTAuODI5IC04Mi4xODggNDM1LjMzMSAtODYuNTM0MyA0MTUuNzE3Qy05MC44OTg4IDM5Ni4wMjEgLTkzLjU0NTMgMzcxLjgyNyAtOTQuNzA0NiAzNDQuNTU3Qy05Ny4wMjM0IDI5MC4wMDggLTkzLjQwMjIgMjIyLjg2MSAtODUuNDg1OCAxNTQuMTc0Qy03Ny41Njg0IDg1LjQ3NzMgLTY1LjM0NTMgMTUuMTU5NiAtNTAuNDMxNSAtNDUuNzQzMUMtMzUuNTM2MiAtMTA2LjU3IC0xNy44OTc0IC0xNTguMjYgMC45NDc1NDggLTE4OS41MjdDMTkuODk1MyAtMjIwLjk2NCA0My44NjY3IC0yMzguMDgyIDcwLjI2OTYgLTI0NC42OTNDOTYuNTg3MiAtMjUxLjI4MyAxMjQuOTk3IC0yNDcuMzU1IDE1Mi43ODIgLTIzNy4zMzhaTTcxLjYwNTUgLTIzOS4zNThDNDYuNzgwMiAtMjMzLjE0MiAyMy45NDg5IC0yMTcuMDM1IDUuNjU4MDkgLTE4Ni42ODhDLTEyLjczNTUgLTE1Ni4xNyAtMzAuMjE5IC0xMDUuMTYgLTQ1LjA4OTMgLTQ0LjQzNUMtNTkuOTQxMiAxNi4yMTUxIC03Mi4xMjcyIDg2LjMwMzQgLTgwLjAyMiAxNTQuODA0Qy04Ny45MTc5IDIyMy4zMTMgLTkxLjUxMjIgMjkwLjE1NSAtODkuMjA5NSAzNDQuMzIzQy04OC4wNTggMzcxLjQxMSAtODUuNDM0NSAzOTUuMjU4IC04MS4xNjQ2IDQxNC41MjdDLTc2Ljg3NjYgNDMzLjg3OCAtNzAuOTk5NCA0NDguMjcgLTYzLjU3NzcgNDU2Ljc2OUMtNTYuMzExMSA0NjUuMDkgLTQ2LjU3NzkgNDY4Ljg2MyAtMzQuNjUxOSA0NjguNzQyQy0yMi42MjQzIDQ2OC42MTkgLTguNDI0MTkgNDY0LjUyMSA3LjM5MDY3IDQ1Ny4wNjFDMzkuMDA4OSA0NDIuMTQ4IDc2LjI4MDEgNDE0LjE4OSAxMTQuMDc3IDM3OS45NkMxODkuNjQ0IDMxMS41MjQgMjY2LjYxNiAyMTguNjcgMzAzLjY5MiAxNTcuMTU0QzM0MC42ODggOTUuNzczNiAzNTIuNjk1IDQxLjEzODkgMzQ3Ljc4OSAtNi45NjI3NUMzNDIuODgzIC01NS4wNzY3IDMyMS4wMjUgLTk2Ljk1MDUgMjg5Ljc3MSAtMTMyLjc0MUMyNTguNDI5IC0xNjguNjMxIDIwNS4yODEgLTIxMi41NjQgMTUwLjkxNyAtMjMyLjE2NEMxMjMuNzYgLTI0MS45NTQgOTYuNTE2MSAtMjQ1LjU5NiA3MS42MDU1IC0yMzkuMzU4WiIgZmlsbD0idXJsKCNwYWludDBfbGluZWFyXzMxMTZfOTU4KSIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1MC4zOTcgLTIwMS4wNjNDMjAwLjQyMSAtMTgzLjAyOCAyNDguOTUyIC0xNDIuODI4IDI3Ny41MjkgLTExMC4xMDRDMzA2LjE5MyAtNzcuMjggMzI2LjQ1OSAtMzguNjE1MiAzMzEuMDA5IDYuMDAzNDZDMzM1LjU2IDUwLjYzNDQgMzI0LjM1NiAxMDAuOTI2IDI5MC41OTggMTU2LjkzNkMyNTYuOTIyIDIxMi44MSAxODcuMjk3IDI5Ni43NjQgMTE4Ljk3NiAzNTguNjM3Qzg0LjgyODggMzg5LjU2MSA1MC44MzMyIDQxNS4xMzEgMjEuNjgwNyA0MjguODgxQzcuMTEwMjEgNDM1Ljc1NCAtNi40NTA5NiA0MzkuNzcxIC0xOC4zMzMyIDQzOS44OTJDLTMwLjMxNzEgNDQwLjAxNSAtNDAuNjQyMyA0MzYuMTYxIC00OC4zNTUzIDQyNy4zMjlDLTU1LjkxMzIgNDE4LjY3NCAtNjEuNDM0NyA0MDQuNjcxIC02NS4zNDkzIDM4Ny4wMDVDLTY5LjI4MiAzNjkuMjU3IC03MS42NjUxIDM0Ny40NjUgLTcyLjcwODggMzIyLjkxM0MtNzQuNzk2NiAyNzMuOCAtNzEuNTM2MiAyMTMuMzUzIC02NC40MTA0IDE1MS41MjVDLTU3LjI4MzUgODkuNjg4NCAtNDYuMjgwOCAyNi4zOTEgLTMyLjg1NTMgLTI4LjQzNDFDLTE5LjQ0ODMgLTgzLjE4MzkgLTMuNTY1NjQgLTEyOS43MzkgMTMuNDE3NCAtMTU3LjkxNkMzMC41MDMyIC0xODYuMjY0IDUyLjEzNDQgLTIwMS43MjEgNzUuOTc1OSAtMjA3LjY5MUM5OS43MzIxIC0yMTMuNjM5IDEyNS4zNTkgLTIxMC4wODkgMTUwLjM5NyAtMjAxLjA2M1pNNzcuMzExOSAtMjAyLjM1NUM1NS4wNDc5IC0xOTYuNzgxIDM0LjU1NjggLTE4Mi4zMzUgMTguMTI3OSAtMTU1LjA3N0MxLjU5NjI2IC0xMjcuNjQ4IC0xNC4xMzExIC04MS43NzM3IC0yNy41MTMyIC0yNy4xMjZDLTQwLjg3NjggMjcuNDQ2NSAtNTEuODQyMyA5MC41MTQ1IC01OC45NDY1IDE1Mi4xNTVDLTY2LjA1MTggMjEzLjgwNSAtNjkuMjg1NCAyNzMuOTQ3IC02Ny4yMTM3IDMyMi42NzlDLTY2LjE3NzggMzQ3LjA1IC02My44MTc3IDM2OC40OTQgLTU5Ljk3OTYgMzg1LjgxNUMtNTYuMTIzMiA0MDMuMjE4IC01MC44NDYgNDE2LjExNSAtNDQuMjEyNiA0MjMuNzExQy0zNy43MzQ1IDQzMS4xMjkgLTI5LjA1NyA0MzQuNTAyIC0xOC4zODk0IDQzNC4zOTNDLTcuNjIwMjEgNDM0LjI4MyA1LjExODc5IDQzMC42MTIgMTkuMzM0NCA0MjMuOTA3QzQ3Ljc1NDIgNDEwLjUwMiA4MS4yNzQ1IDM4NS4zNiAxMTUuMjg0IDM1NC41NkMxODMuMjc5IDI5Mi45ODIgMjUyLjUzNSAyMDkuNDM0IDI4NS44ODcgMTU0LjA5NkMzMTkuMTU5IDk4Ljg5NDYgMzI5Ljk0NSA0OS43ODI0IDMyNS41MzcgNi41NjE0M0MzMjEuMTI5IC0zNi42NzE4IDMwMS40ODcgLTc0LjMwNjcgMjczLjM4NiAtMTA2LjQ4NkMyNDUuMTk4IC0xMzguNzY0IDE5Ny40MDIgLTE3OC4yNyAxNDguNTMyIC0xOTUuODg5QzEyNC4xMjMgLTIwNC42ODkgOTkuNjYxMSAtMjA3Ljk1MiA3Ny4zMTE5IC0yMDIuMzU1WiIgZmlsbD0idXJsKCNwYWludDFfbGluZWFyXzMxMTZfOTU4KSIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE0OC4wMTIgLTE2NC43ODhDMTkyLjU0MSAtMTQ4LjczNCAyMzUuNzIxIC0xMTIuOTYxIDI2MS4xNDQgLTgzLjg0ODZDMjg2LjY1NCAtNTQuNjM2NCAzMDQuNzAzIC0yMC4yMTA1IDMwOC43NTYgMTkuNTI3NUMzMTIuODEgNTkuMjc3OCAzMDIuODI3IDEwNC4wNDcgMjcyLjc5MyAxNTMuODc4QzI0Mi44NDEgMjAzLjU3NCAxODAuOTMxIDI3OC4yMjMgMTIwLjE4NCAzMzMuMjM3Qzg5LjgyMjkgMzYwLjczMiA1OS41NzgxIDM4My40ODUgMzMuNjI0MSAzOTUuNzI2QzIwLjY1MjkgNDAxLjg0NSA4LjU1MjgxIDQwNS40MzUgLTIuMDcxMDQgNDA1LjU0NEMtMTIuNzk2NSA0MDUuNjUzIC0yMi4wNjYgNDAyLjIwMSAtMjguOTkwNiAzOTQuMjcxQy0zNS43NiAzODYuNTIgLTQwLjY4MTYgMzc0LjAxMSAtNDQuMTY0NSAzNTguMjkzQy00Ny42NjU2IDM0Mi40OTQgLTQ5Ljc4NTEgMzIzLjEwNCAtNTAuNzEzMyAzMDEuMjY5Qy01Mi41NyAyNTcuNTkyIC00OS42NzAzIDIwMy44NDQgLTQzLjMzNTIgMTQ4Ljg3NkMtMzYuOTk4OSA5My44OTk0IC0yNy4yMTY3IDM3LjYyMjMgLTE1LjI3OTUgLTExLjEyNTJDLTMuMzYwNzIgLTU5Ljc5NzQgMTAuNzY1OCAtMTAxLjIxNyAyNS44ODcgLTEyNi4zMDVDNDEuMTEwOCAtMTUxLjU2NCA2MC40MDIgLTE2NS4zNiA4MS42ODIgLTE3MC42ODhDMTAyLjg3NyAtMTc1Ljk5NSAxMjUuNzIxIC0xNzIuODI0IDE0OC4wMTIgLTE2NC43ODhaTTgzLjAxOCAtMTY1LjM1M0M2My4zMTU1IC0xNjAuNDE5IDQ1LjE2NDUgLTE0Ny42MzUgMzAuNTk3NSAtMTIzLjQ2NkMxNS45Mjc3IC05OS4xMjcgMS45NTY0NyAtNTguMzg3MiAtOS45MzczMiAtOS44MTcwNEMtMjEuODEyNyAzOC42Nzc3IC0zMS41NTc3IDk0LjcyNTUgLTM3Ljg3MTMgMTQ5LjUwNkMtNDQuMTg2IDIwNC4yOTYgLTQ3LjA1ODggMjU3LjczOSAtNDUuMjE4MiAzMDEuMDM2Qy00NC4yOTc4IDMyMi42ODggLTQyLjIwMTIgMzQxLjczMSAtMzguNzk0OCAzNTcuMTAzQy0zNS4zNzAyIDM3Mi41NTggLTMwLjY5MjkgMzgzLjk2MSAtMjQuODQ3OSAzOTAuNjU0Qy0xOS4xNTgyIDM5Ny4xNjkgLTExLjUzNjQgNDAwLjE0IC0yLjEyNzIyIDQwMC4wNDRDNy4zODM1NCAzOTkuOTQ3IDE4LjY2MTQgMzk2LjcwMyAzMS4yNzc4IDM5MC43NTJDNTYuNDk5MSAzNzguODU2IDg2LjI2ODYgMzU2LjUzMSAxMTYuNDkyIDMyOS4xNkMxNzYuOTE0IDI3NC40NDEgMjM4LjQ1NCAyMDAuMTk4IDI2OC4wODIgMTUxLjAzOUMyOTcuNjMgMTAyLjAxNiAzMDcuMTk0IDU4LjQyNTggMzAzLjI4NCAyMC4wODU1QzI5OS4zNzMgLTE4LjI2NyAyODEuOTQ5IC01MS42NjMgMjU3LjAwMSAtODAuMjMwOUMyMzEuOTY3IC0xMDguODk4IDE4OS41MjMgLTE0My45NzYgMTQ2LjE0NiAtMTU5LjYxNEMxMjQuNDg0IC0xNjcuNDIzIDEwMi44MDYgLTE3MC4zMDggODMuMDE4IC0xNjUuMzUzWiIgZmlsbD0idXJsKCNwYWludDJfbGluZWFyXzMxMTZfOTU4KSIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE0NS42MjcgLTEyOC41MTNDMTg0LjY2MiAtMTE0LjQ0IDIyMi40OTEgLTgzLjA5NTIgMjQ0Ljc2IC01Ny41OTM2QzI2Ny4xMTcgLTMxLjk5MjcgMjgyLjk0OSAtMS44MDU2MyAyODYuNTA0IDMzLjA1MTdDMjkwLjA2IDY3LjkyMTIgMjgxLjMgMTA3LjE2OCAyNTQuOTkgMTUwLjgyMUMyMjguNzYxIDE5NC4zMzggMTc0LjU2NiAyNTkuNjgxIDEyMS4zOTIgMzA3LjgzN0M5NC44MTc0IDMzMS45MDQgNjguMzIzNCAzNTEuODM5IDQ1LjU2NzkgMzYyLjU3MkMzNC4xOTU4IDM2Ny45MzYgMjMuNTU2OSAzNzEuMDk5IDE0LjE5MTQgMzcxLjE5NUM0LjcyNDQxIDM3MS4yOTEgLTMuNDg5MzggMzY4LjI0MSAtOS42MjU2NCAzNjEuMjE0Qy0xNS42MDY3IDM1NC4zNjUgLTE5LjkyODMgMzQzLjM1IC0yMi45Nzk1IDMyOS41ODFDLTI2LjA0ODggMzE1LjczIC0yNy45MDQ4IDI5OC43NDIgLTI4LjcxNzUgMjc5LjYyNUMtMzAuMzQzMSAyNDEuMzg0IC0yNy44MDQzIDE5NC4zMzYgLTIyLjI1OTcgMTQ2LjIyOEMtMTYuNzE0MSA5OC4xMTA1IC04LjE1MjM2IDQ4Ljg1MzYgMi4yOTY1NyA2LjE4Mzc1QzEyLjcyNyAtMzYuNDEwOCAyNS4wOTc1IC03Mi42OTU3IDM4LjM1NjYgLTk0LjY5NDZDNTEuNzE4NiAtMTE2Ljg2NCA2OC42Njk2IC0xMjguOTk4IDg3LjM4ODIgLTEzMy42ODZDMTA2LjAyMiAtMTM4LjM1MiAxMjYuMDgzIC0xMzUuNTU4IDE0NS42MjcgLTEyOC41MTNaTTg4LjcyNDIgLTEyOC4zNUM3MS41ODMxIC0xMjQuMDU4IDU1Ljc3MjIgLTExMi45MzUgNDMuMDY3MiAtOTEuODU1NEMzMC4yNTk0IC03MC42MDU0IDE4LjA0NDIgLTM1LjAwMDYgNy42Mzg3MyA3LjQ5MTkzQy0yLjc0ODMxIDQ5LjkwOTEgLTExLjI3MjkgOTguOTM2NiAtMTYuNzk1OSAxNDYuODU3Qy0yMi4zMTk5IDE5NC43ODggLTI0LjgzMTkgMjQxLjUzMSAtMjMuMjIyNCAyNzkuMzkyQy0yMi40MTc1IDI5OC4zMjYgLTIwLjU4NDUgMzE0Ljk2NyAtMTcuNjA5OCAzMjguMzkxQy0xNC42MTY5IDM0MS44OTcgLTEwLjUzOTUgMzUxLjgwNiAtNS40ODI5MiAzNTcuNTk2Qy0wLjU4MTU4MSAzNjMuMjA5IDUuOTg0NTIgMzY1Ljc3OCAxNC4xMzUzIDM2NS42OTVDMjIuMzg3NiAzNjUuNjExIDMyLjIwNDQgMzYyLjc5NCA0My4yMjE2IDM1Ny41OTdDNjUuMjQ0NCAzNDcuMjEgOTEuMjYzMSAzMjcuNzAyIDExNy43IDMwMy43NkMxNzAuNTQ5IDI1NS45IDIyNC4zNzQgMTkwLjk2MiAyNTAuMjggMTQ3Ljk4MkMyNzYuMTAyIDEwNS4xMzcgMjg0LjQ0NSA2Ny4wNjkzIDI4MS4wMzIgMzMuNjA5N0MyNzcuNjE5IDAuMTM3Nzg3IDI2Mi40MTIgLTI5LjAxOTMgMjQwLjYxOCAtNTMuOTc1OUMyMTguNzM3IC03OS4wMzE4IDE4MS42NDQgLTEwOS42ODEgMTQzLjc2MiAtMTIzLjMzOUMxMjQuODQ3IC0xMzAuMTU4IDEwNS45NTEgLTEzMi42NjQgODguNzI0MiAtMTI4LjM1WiIgZmlsbD0idXJsKCNwYWludDNfbGluZWFyXzMxMTZfOTU4KSIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE0My4yNDIgLTkyLjIzNzVDMTc2Ljc4MyAtODAuMTQ1MiAyMDkuMjYgLTUzLjIyOSAyMjguMzc2IC0zMS4zMzg3QzI0Ny41NzkgLTkuMzQ4OTIgMjYxLjE5NCAxNi41OTkzIDI2NC4yNTEgNDYuNTc2QzI2Ny4zMDkgNzYuNTY0OSAyNTkuNzcxIDExMC4yODkgMjM3LjE4NCAxNDcuNzY0QzIxNC42NzkgMTg1LjEwMyAxNjguMjAxIDI0MS4xNCAxMjIuNiAyODIuNDM4Qzk5LjgxMTUgMzAzLjA3NSA3Ny4wNjg1IDMyMC4xOTMgNTcuNTExNSAzMjkuNDE3QzQ3LjczODcgMzM0LjAyNyAzOC41NjA5IDMzNi43NjMgMzAuNDUzOSAzMzYuODQ2QzIyLjI0NTIgMzM2LjkyOSAxNS4wODcyIDMzNC4yOCA5LjczOTM0IDMyOC4xNTZDNC41NDY3MiAzMjIuMjEgMC44MjQ5NzYgMzEyLjY5IC0xLjc5NDQ4IDMwMC44NjlDLTQuNDMyMDcgMjg4Ljk2NiAtNi4wMjQ1OSAyNzQuMzggLTYuNzIxNyAyNTcuOTgyQy04LjExNjI1IDIyNS4xNzYgLTUuOTM4MTggMTg0LjgyNyAtMS4xODQyNCAxNDMuNTc5QzMuNTcwNzYgMTAyLjMyMiAxMC45MTIxIDYwLjA4NSAxOS44NzI3IDIzLjQ5MjdDMjguODE0OSAtMTMuMDI0MiAzOS40MjkyIC00NC4xNzQyIDUwLjgyNjUgLTYzLjA4MzlDNjIuMzI2NSAtODIuMTY0IDc2LjkzNzMgLTkyLjYzNzIgOTMuMDk0NiAtOTYuNjgzQzEwOS4xNjcgLTEwMC43MDcgMTI2LjQ0NSAtOTguMjkzIDE0My4yNDIgLTkyLjIzNzVaTTk0LjQzMDUgLTkxLjM0NzhDNzkuODUwOCAtODcuNjk3IDY2LjM4MDEgLTc4LjIzNSA1NS41MzcgLTYwLjI0NDdDNDQuNTkxMSAtNDIuMDgzOSAzNC4xMzIxIC0xMS42MTQxIDI1LjIxNDkgMjQuODAwOUMxNi4zMTYxIDYxLjE0MDQgOS4wMTE5NiAxMDMuMTQ4IDQuMjc5NTkgMTQ0LjIwOUMtMC40NTM4NTIgMTg1LjI3OSAtMi42MDUwNiAyMjUuMzIzIC0xLjIyNjY2IDI1Ny43NDhDLTAuNTM3Mjg2IDI3My45NjUgMS4wMzIyMyAyODguMjAzIDMuNTc1MjYgMjk5LjY3OUM2LjEzNjQzIDMxMS4yMzcgOS42MTM4OSAzMTkuNjUxIDEzLjg4MjEgMzI0LjUzOUMxNy45OTUgMzI5LjI0OCAyMy41MDU0IDMzMS40MTYgMzAuMzk3NyAzMzEuMzQ2QzM3LjM5MTYgMzMxLjI3NCA0NS43NDcyIDMyOC44ODUgNTUuMTY1MiAzMjQuNDQzQzczLjk4OTUgMzE1LjU2NCA5Ni4yNTcyIDI5OC44NzQgMTE4LjkwOCAyNzguMzYxQzE2NC4xODMgMjM3LjM1OCAyMTAuMjkyIDE4MS43MjYgMjMyLjQ3NCAxNDQuOTI0QzI1NC41NzMgMTA4LjI1OCAyNjEuNjk0IDc1LjcxMjkgMjU4Ljc3OSA0Ny4xMzRDMjU1Ljg2NCAxOC41NDI3IDI0Mi44NzQgLTYuMzc1NTggMjI0LjIzNCAtMjcuNzIwOUMyMDUuNTA3IC00OS4xNjU2IDE3My43NjUgLTc1LjM4NyAxNDEuMzc3IC04Ny4wNjM0QzEyNS4yMDkgLTkyLjg5MjMgMTA5LjA5NiAtOTUuMDE5OSA5NC40MzA1IC05MS4zNDc4WiIgZmlsbD0idXJsKCNwYWludDRfbGluZWFyXzMxMTZfOTU4KSIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE0MC44NTcgLTU1Ljk2MjVDMTY4LjkwNCAtNDUuODUxIDE5Ni4wMjkgLTIzLjM2MjkgMjExLjk5MiAtNS4wODM3M0MyMjguMDQxIDEzLjI5NDggMjM5LjQzOSAzNS4wMDQxIDI0MS45OTkgNjAuMTAwMUMyNDQuNTU5IDg1LjIwODQgMjM4LjI0MiAxMTMuNDEgMjE5LjM4IDE0NC43MDZDMjAwLjU5OCAxNzUuODY3IDE2MS44MzUgMjIyLjU5OSAxMjMuODA3IDI1Ny4wMzhDMTA0LjgwNiAyNzQuMjQ2IDg1LjgxMzggMjg4LjU0NyA2OS40NTUxIDI5Ni4yNjNDNjEuMjgxNiAzMDAuMTE4IDUzLjU2NDkgMzAyLjQyNyA0Ni43MTYzIDMwMi40OTdDMzkuNzY2MSAzMDIuNTY4IDMzLjY2MzggMzAwLjMyIDI5LjEwNDQgMjk1LjA5OUMyNC43MDAxIDI5MC4wNTYgMjEuNTc4MyAyODIuMDMgMTkuMzkwNiAyNzIuMTU3QzE3LjE4NDcgMjYyLjIwMiAxNS44NTU3IDI1MC4wMTggMTUuMjc0MSAyMzYuMzM4QzE0LjExMDYgMjA4Ljk2OCAxNS45Mjc5IDE3NS4zMTkgMTkuODkxMiAxNDAuOTNDMjMuODU1NiAxMDYuNTMzIDI5Ljk3NjQgNzEuMzE2MyAzNy40NDg4IDQwLjgwMTZDNDQuOTAyNyAxMC4zNjI0IDUzLjc2MDkgLTE1LjY1MjYgNjMuMjk2MiAtMzEuNDczMUM3Mi45MzQyIC00Ny40NjQxIDg1LjIwNSAtNTYuMjc2MSA5OC44MDA4IC01OS42ODA1QzExMi4zMTEgLTYzLjA2MzYgMTI2LjgwOCAtNjEuMDI3NyAxNDAuODU3IC01NS45NjI1Wk0xMDAuMTM3IC01NC4zNDUzQzg4LjExODUgLTUxLjMzNTggNzYuOTg3OSAtNDMuNTM1MSA2OC4wMDY3IC0yOC42MzM5TDY1LjY1MTUgLTMwLjA1MzVMNjguMDA2NyAtMjguNjMzOUM1OC45MjI4IC0xMy41NjI0IDUwLjIxOTkgMTEuNzcyNSA0Mi43OTA5IDQyLjEwOThDMzUuMzgwNSA3Mi4zNzE4IDI5LjI5NjggMTA3LjM1OSAyNS4zNTUgMTQxLjU2QzIxLjQxMjIgMTc1Ljc3IDE5LjYyMTggMjA5LjExNSAyMC43NjkxIDIzNi4xMDRDMjEuMzQzIDI0OS42MDMgMjIuNjQ5IDI2MS40MzkgMjQuNzYwMyAyNzAuOTY3QzI2Ljg4OTggMjgwLjU3NyAyOS43NjczIDI4Ny40OTYgMzMuMjQ3MSAyOTEuNDgxTDMxLjE3NTcgMjkzLjI5TDMzLjI0NzEgMjkxLjQ4MUMzNi41NzE2IDI5NS4yODggNDEuMDI2MiAyOTcuMDU1IDQ2LjY2MDEgMjk2Ljk5N0M1Mi4zOTU2IDI5Ni45MzggNTkuMjkwMSAyOTQuOTc2IDY3LjEwODggMjkxLjI4OEM4Mi43MzQ3IDI4My45MTggMTAxLjI1MiAyNzAuMDQ1IDEyMC4xMTUgMjUyLjk2MUMxNTcuODE4IDIxOC44MTcgMTk2LjIxMSAxNzIuNDkxIDIxNC42NjkgMTQxLjg2N0MyMzMuMDQ1IDExMS4zNzkgMjM4Ljk0NCA4NC4zNTY0IDIzNi41MjcgNjAuNjU4MUMyMzQuMTA5IDM2Ljk0NzUgMjIzLjMzNiAxNi4yNjgxIDIwNy44NDkgLTEuNDY2MDJDMTkyLjI3NiAtMTkuMjk5NSAxNjUuODg2IC00MS4wOTI4IDEzOC45OTIgLTUwLjc4ODVDMTI1LjU3MSAtNTUuNjI3IDExMi4yNCAtNTcuMzc2IDEwMC4xMzcgLTU0LjM0NTNaIiBmaWxsPSJ1cmwoI3BhaW50NV9saW5lYXJfMzExNl85NTgpIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTM4LjQ3MiAtMTkuNjg3NUMxNjEuMDI1IC0xMS41NTY3IDE4Mi43OTkgNi41MDMzOCAxOTUuNjA4IDIxLjE3MTJDMjA4LjUwNCAzNS45Mzg0IDIxNy42ODQgNTMuNDA4OSAyMTkuNzQ2IDczLjYyNDJDMjIxLjgwOSA5My44NTE4IDIxNi43MTMgMTE2LjUzMSAyMDEuNTc0IDE0MS42NDlDMTg2LjUxNyAxNjYuNjMxIDE1NS40NyAyMDQuMDU2IDEyNS4wMTUgMjMxLjYzN0MxMDkuOCAyNDUuNDE2IDk0LjU1ODggMjU2Ljg5OSA4MS4zOTg2IDI2My4xMDZDNzQuODI0MyAyNjYuMjA3IDY4LjU2ODcgMjY4LjA4OCA2Mi45Nzg1IDI2OC4xNDVDNTcuMjg2NyAyNjguMjAzIDUyLjI0MDEgMjY2LjM1NyA0OC40NjkgMjYyLjAzOUM0NC44NTMyIDI1Ny44OTggNDIuMzMxMyAyNTEuMzY3IDQwLjU3NTMgMjQzLjQ0M0MzOC44MDEyIDIzNS40MzcgMzcuNzM1NiAyMjUuNjU1IDM3LjI2OTYgMjE0LjY5MkMzNi4zMzcyIDE5Mi43NTkgMzcuNzkzNyAxNjUuODA5IDQwLjk2NjQgMTM4LjI4MUM0NC4xNDAyIDExMC43NDMgNDkuMDQwNiA4Mi41NDcyIDU1LjAyNDcgNTguMTEwM0M2MC45OTAzIDMzLjc0ODggNjguMDkyNCAxMi44Njg4IDc1Ljc2NTggMC4xMzc1MzNDODMuNTQyIC0xMi43NjQyIDkzLjQ3MjYgLTE5LjkxNSAxMDQuNTA3IC0yMi42NzhDMTE1LjQ1NiAtMjUuNDE5NyAxMjcuMTcgLTIzLjc2MjIgMTM4LjQ3MiAtMTkuNjg3NVpNMTA1Ljg0MyAtMTcuMzQyOEM5Ni4zODYxIC0xNC45NzQ3IDg3LjU5NTYgLTguODM1MjUgODAuNDc2NCAyLjk3NjY3TDc4LjEyMTEgMS41NTcxTDgwLjQ3NjQgMi45NzY2OEM3My4yNTQzIDE0Ljk1OTEgNjYuMzA3NSAzNS4xNTg5IDYwLjM2NjggNTkuNDE4NUM1NC40NDQ2IDgzLjYwMjcgNDkuNTgxNCAxMTEuNTY5IDQ2LjQzMDMgMTM4LjkxQzQzLjI3ODEgMTY2LjI2MSA0MS44NDg0IDE5Mi45MDUgNDIuNzY0NiAyMTQuNDU5QzQzLjIyMjkgMjI1LjIzOSA0NC4yNjU1IDIzNC42NzQgNDUuOTQ1MSAyNDIuMjUzQzQ3LjY0MjggMjQ5LjkxNSA0OS45MjA0IDI1NS4zMzkgNTIuNjExNyAyNTguNDIxQzU1LjE0NzkgMjYxLjMyNSA1OC41NDY5IDI2Mi42OSA2Mi45MjI0IDI2Mi42NDZDNjcuMzk5NSAyNjIuNiA3Mi44MzI5IDI2MS4wNjUgNzkuMDUyNCAyNTguMTMxQzkxLjQ3OTggMjUyLjI3IDEwNi4yNDYgMjQxLjIxNCAxMjEuMzIzIDIyNy41NkMxNTEuNDUzIDIwMC4yNzUgMTgyLjEzIDE2My4yNTUgMTk2Ljg2NCAxMzguODFDMjExLjUxNiAxMTQuNSAyMTYuMTkzIDkyLjk5OTggMjE0LjI3NCA3NC4xODIyQzIxMi4zNTQgNTUuMzUyMyAyMDMuNzk4IDM4LjkxMTggMTkxLjQ2NSAyNC43ODg5QzE3OS4wNDUgMTAuNTY2NyAxNTguMDA3IC02Ljc5ODQgMTM2LjYwNyAtMTQuNTEzNEMxMjUuOTMzIC0xOC4zNjE2IDExNS4zODUgLTE5LjczMjEgMTA1Ljg0MyAtMTcuMzQyOFoiIGZpbGw9InVybCgjcGFpbnQ2X2xpbmVhcl8zMTE2Xzk1OCkiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMzYuMDg3IDE2LjU4NzZDMTUzLjE0NiAyMi43Mzc3IDE2OS41NjggMzYuMzY5NSAxNzkuMjI0IDQ3LjQyNjFDMTg4Ljk2NiA1OC41ODIgMTk1LjkzIDcxLjgxMzYgMTk3LjQ5NCA4Ny4xNDgzQzE5OS4wNTkgMTAyLjQ5NSAxOTUuMTg1IDExOS42NTIgMTgzLjc3IDEzOC41OTJDMTcyLjQzNiAxNTcuMzk1IDE0OS4xMDUgMTg1LjUxNSAxMjYuMjIzIDIwNi4yMzhDMTE0Ljc5NCAyMTYuNTg3IDEwMy4zMDQgMjI1LjI1MyA5My4zNDIzIDIyOS45NTJDODguMzY3MiAyMzIuMjk4IDgzLjU3MjggMjMzLjc1MyA3OS4yNDEgMjMzLjc5N0M3NC44MDc3IDIzMy44NDIgNzAuODE2NyAyMzIuMzk4IDY3LjgzNDEgMjI4Ljk4Mkw2OS45MDU0IDIyNy4xNzNMNjcuODM0MSAyMjguOTgyQzY1LjAwNjYgMjI1Ljc0NCA2My4wODQ3IDIyMC43MDggNjEuNzYwNCAyMTQuNzMyQzYwLjQxNzkgMjA4LjY3MyA1OS42MTU5IDIwMS4yOTMgNTkuMjY1NCAxOTMuMDQ5QzU4LjU2NDEgMTc2LjU1MSA1OS42NTk4IDE1Ni4zIDYyLjA0MTkgMTM1LjYzMkM2NC40MjUxIDExNC45NTQgNjguMTA1IDkzLjc3ODQgNzIuNjAwOCA3NS40MTkxQzc3LjA3ODIgNTcuMTM1MiA4Mi40MjQyIDQxLjM5MDIgODguMjM1NyAzMS43NDgxQzk0LjE0OTkgMjEuOTM1NiAxMDEuNzQgMTYuNDQ2MiAxMTAuMjEzIDE0LjMyNDVDMTE4LjYwMSAxMi4yMjQyIDEyNy41MzIgMTMuNTAzMiAxMzYuMDg3IDE2LjU4NzZaTTExMS41NDkgMTkuNjU5OEMxMDQuNjU0IDIxLjM4NjQgOTguMjAzNSAyNS44NjQ2IDkyLjk0NjIgMzQuNTg3M0w5MC41OTA5IDMzLjE2NzdMOTIuOTQ2MiAzNC41ODczQzg3LjU4NjEgNDMuNDgwNSA4Mi4zOTU0IDU4LjU0NTMgNzcuOTQzIDc2LjcyNzNDNzMuNTA5IDk0LjgzMzkgNjkuODY2MyAxMTUuNzggNjcuNTA1NyAxMzYuMjYxQzY1LjE0NDEgMTU2Ljc1MiA2NC4wNzUyIDE3Ni42OTggNjQuNzYwNCAxOTIuODE1QzY1LjEwMzIgMjAwLjg3OCA2NS44ODIyIDIwNy45MSA2Ny4xMzAxIDIxMy41NDJDNjguMzk2MSAyMTkuMjU1IDcwLjA3MzggMjIzLjE4NSA3MS45NzY4IDIyNS4zNjRMNjkuOTIyNCAyMjcuMTU4TDcxLjk3NjggMjI1LjM2NEM3My43MjQ1IDIyNy4zNjYgNzYuMDY3OCAyMjguMzI5IDc5LjE4NDkgMjI4LjI5OEM4Mi40MDM2IDIyOC4yNjUgODYuMzc1OCAyMjcuMTU3IDkwLjk5NjEgMjI0Ljk3N0MxMDAuMjI1IDIyMC42MjQgMTExLjI0IDIxMi4zODYgMTIyLjUzMSAyMDIuMTYxQzE0NS4wODcgMTgxLjczMyAxNjguMDQ5IDE1NC4wMTkgMTc5LjA1OSAxMzUuNzUyQzE4OS45ODcgMTE3LjYyMSAxOTMuNDQzIDEwMS42NDMgMTkyLjAyMiA4Ny43MDYzQzE5MC41OTkgNzMuNzU3IDE4NC4yNiA2MS41NTU0IDE3NS4wODEgNTEuMDQzOEMxNjUuODE1IDQwLjQzMjkgMTUwLjEyOCAyNy40OTU5IDEzNC4yMjIgMjEuNzYxN0MxMjYuMjk1IDE4LjkwMzkgMTE4LjUzIDE3LjkxMTggMTExLjU0OSAxOS42NTk4WiIgZmlsbD0idXJsKCNwYWludDdfbGluZWFyXzMxMTZfOTU4KSIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzMy43MDIgNTIuODYyOUMxNDUuMjY3IDU3LjAzMjMgMTU2LjMzOCA2Ni4yMzYgMTYyLjg0IDczLjY4MTRDMTY5LjQyOCA4MS4yMjYgMTc0LjE3NSA5MC4yMTg4IDE3NS4yNDEgMTAwLjY3M0MxNzYuMzA4IDExMS4xMzkgMTczLjY1NiAxMjIuNzc0IDE2NS45NjUgMTM1LjUzNEMxNTguMzU1IDE0OC4xNiAxNDIuNzM5IDE2Ni45NzQgMTI3LjQzIDE4MC44MzhDMTE5Ljc4OCAxODcuNzU5IDExMi4wNDkgMTkzLjYwNyAxMDUuMjg2IDE5Ni43OTdDMTAxLjkxIDE5OC4zODkgOTguNTc2NiAxOTkuNDE3IDk1LjUwMzIgMTk5LjQ0OEM5Mi4zMjgzIDE5OS40ODEgODkuMzkzIDE5OC40MzcgODcuMTk4OCAxOTUuOTI1Qzg1LjE1OTcgMTkzLjU5IDgzLjgzNzcgMTkwLjA0OCA4Mi45NDUxIDE4Ni4wMkM4Mi4wMzQ0IDE4MS45MSA4MS40OTU5IDE3Ni45MzIgODEuMjYwOSAxNzEuNDA1QzgwLjc5MDcgMTYwLjM0MyA4MS41MjU2IDE0Ni43OTIgODMuMTE3MSAxMzIuOTgzQzg0LjcwOTYgMTE5LjE2NSA4Ny4xNjkxIDEwNS4wMSA5MC4xNzY2IDkyLjcyODJDOTMuMTY1NyA4MC41MjIgOTYuNzU1NiA2OS45MTE5IDEwMC43MDUgNjMuMzU5MUMxMDQuNzU3IDU2LjYzNTggMTEwLjAwOCA1Mi44MDc2IDExNS45MTkgNTEuMzI3M0MxMjEuNzQ2IDQ5Ljg2ODQgMTI3Ljg5NCA1MC43Njg5IDEzMy43MDIgNTIuODYyOVpNMTE3LjI1NSA1Ni42NjI2QzExMi45MjEgNTcuNzQ3OCAxMDguODExIDYwLjU2NDggMTA1LjQxNiA2Ni4xOTgzTDEwMy4wNiA2NC43Nzg3TDEwNS40MTYgNjYuMTk4M0MxMDEuOTE3IDcyLjAwMjIgOTguNDgyOSA4MS45MzIxIDk1LjUxODggOTQuMDM2NEM5Mi41NzMyIDEwNi4wNjUgOTAuMTUwOCAxMTkuOTkxIDg4LjU4MDkgMTMzLjYxM0M4Ny4wMSAxNDcuMjQ0IDg2LjMwMTkgMTYwLjQ5IDg2Ljc1NiAxNzEuMTcxQzg2Ljk4MzIgMTc2LjUxNiA4Ny40OTg3IDE4MS4xNDcgODguMzE0OSAxODQuODNDODkuMTQ5MiAxODguNTk1IDkwLjIyNjkgMTkxLjAzMSA5MS4zNDE1IDE5Mi4zMDdDOTIuMzAwOCAxOTMuNDA1IDkzLjU4ODQgMTkzLjk2OCA5NS40NDcxIDE5My45NDlDOTcuNDA3MyAxOTMuOTI5IDk5LjkxODUgMTkzLjI0OCAxMDIuOTM5IDE5MS44MjNDMTA4Ljk3IDE4OC45NzggMTE2LjIzNCAxODMuNTU3IDEyMy43MzggMTc2Ljc2MUMxMzguNzIyIDE2My4xOTIgMTUzLjk2OCAxNDQuNzg0IDE2MS4yNTQgMTMyLjY5NUwxNjMuNjA5IDEzNC4xMTVMMTYxLjI1NCAxMzIuNjk1QzE2OC40NTggMTIwLjc0MiAxNzAuNjkzIDExMC4yODcgMTY5Ljc2OSAxMDEuMjMxQzE2OC44NDQgOTIuMTYyMiAxNjQuNzIzIDg0LjE5OTQgMTU4LjY5NyA3Ny4yOTkxTDE2MC43NjggNzUuNDkwMkwxNTguNjk3IDc3LjI5OTFDMTUyLjU4NCA3MC4yOTk0IDE0Mi4yNDkgNjEuNzkwNSAxMzEuODM3IDU4LjAzNjlDMTI2LjY1NyA1Ni4xNjk1IDEyMS42NzUgNTUuNTU2IDExNy4yNTUgNTYuNjYyNloiIGZpbGw9InVybCgjcGFpbnQ4X2xpbmVhcl8zMTE2Xzk1OCkiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMzEuMzE4IDg5LjEzNzlDMTM3LjM4OCA5MS4zMjY1IDE0My4xMDcgOTYuMTAyMSAxNDYuNDU2IDk5LjkzNjJDMTQ5Ljg5MSAxMDMuODcgMTUyLjQyIDEwOC42MjMgMTUyLjk4OCAxMTQuMTk3QzE1My41NTggMTE5Ljc4MiAxNTIuMTI3IDEyNS44OTUgMTQ4LjE2IDEzMi40NzdMMTQ1LjgwNSAxMzEuMDU3TDE0OC4xNiAxMzIuNDc3QzE0NC4yNzUgMTM4LjkyNCAxMzYuMzc0IDE0OC40MzIgMTI4LjYzOCAxNTUuNDM4QzEyNC43ODMgMTU4LjkzIDEyMC43OTQgMTYxLjk2MSAxMTcuMjMgMTYzLjY0MkMxMTUuNDUzIDE2NC40OCAxMTMuNTgxIDE2NS4wODEgMTExLjc2NiAxNjUuMDk5QzEwOS44NDkgMTY1LjExOSAxMDcuOTcgMTY0LjQ3NyAxMDYuNTY0IDE2Mi44NjdDMTA1LjMxMyAxNjEuNDM1IDEwNC41OTEgMTU5LjM4NyAxMDQuMTMgMTU3LjMwN0MxMDMuNjUxIDE1NS4xNDYgMTAzLjM3NiAxNTIuNTcgMTAzLjI1NyAxNDkuNzYxQzEwMy4wMTggMTQ0LjEzNSAxMDMuMzkyIDEzNy4yODMgMTA0LjE5MyAxMzAuMzM0QzEwNC45OTUgMTIzLjM3NiAxMDYuMjM0IDExNi4yNDEgMTA3Ljc1MyAxMTAuMDM3QzEwOS4yNTQgMTAzLjkwOCAxMTEuMDg3IDk4LjQzMzMgMTEzLjE3NSA5NC45Njk3QzExNS4zNjUgOTEuMzM1NiAxMTguMjc2IDg5LjE2ODcgMTIxLjYyNiA4OC4zMjk4QzEyNC44OTEgODcuNTEyMyAxMjguMjU2IDg4LjAzNDIgMTMxLjMxOCA4OS4xMzc5Wk0xMjIuOTYyIDkzLjY2NTFDMTIxLjE4OSA5NC4xMDkgMTE5LjQxOSA5NS4yNjQ2IDExNy44ODUgOTcuODA4OUMxMTYuMjQ5IDEwMC41MjQgMTE0LjU3MSAxMDUuMzE5IDExMy4wOTUgMTExLjM0NUMxMTEuNjM4IDExNy4yOTYgMTEwLjQzNiAxMjQuMjAyIDEwOS42NTcgMTMwLjk2NEMxMDguODc2IDEzNy43MzUgMTA4LjUyOSAxNDQuMjgxIDEwOC43NTIgMTQ5LjUyN0MxMDguODY0IDE1Mi4xNTQgMTA5LjExNiAxNTQuMzgyIDEwOS41IDE1Ni4xMTdDMTA5LjkwMyAxNTcuOTM0IDExMC4zOCAxNTguODc1IDExMC43MDcgMTU5LjI0OUwxMTAuNzA3IDE1OS4yNDlDMTEwLjg3OCAxNTkuNDQ1IDExMS4xMDkgMTU5LjYwNSAxMTEuNzEgMTU5LjU5OUMxMTIuNDExIDE1OS41OTIgMTEzLjQ2MSAxNTkuMzM4IDExNC44ODMgMTU4LjY2OEMxMTcuNzE1IDE1Ny4zMzIgMTIxLjIyOSAxNTQuNzI4IDEyNC45NDYgMTUxLjM2MUMxMzIuMzU3IDE0NC42NTEgMTM5Ljg4OCAxMzUuNTQ4IDE0My40NSAxMjkuNjM4QzE0Ni45MyAxMjMuODYzIDE0Ny45NDMgMTE4LjkzIDE0Ny41MTcgMTE0Ljc1NUMxNDcuMDkgMTEwLjU2NyAxNDUuMTg1IDEwNi44NDMgMTQyLjMxMyAxMDMuNTU0QzEzOS4zNTQgMTAwLjE2NSAxMzQuMzcgOTYuMDg0OCAxMjkuNDUyIDk0LjMxMkMxMjcuMDIgOTMuNDM0OSAxMjQuODIgOTMuMTk5OSAxMjIuOTYyIDkzLjY2NTFaIiBmaWxsPSJ1cmwoI3BhaW50OV9saW5lYXJfMzExNl85NTgpIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjMwLjg3NCAxMTEuNzY0QzIzNi42MTMgMTA1LjUyOCAyMzYuMTQzIDk1Ljg4IDIyOS44MjggOTAuMjE0M0MyMjMuNTEzIDg0LjU0ODggMjEzLjc0MSA4NS4wMTEgMjA4LjAwNSA5MS4yNDczTDE2Ni44NTQgMTM1Ljk3MUwxNTAuMjE3IDExOC43MjJDMTQ0LjMzMyAxMTIuNjIxIDEzNC41NTMgMTEyLjM4NSAxMjguMzc0IDExOC4xOTZDMTIyLjE5NSAxMjQuMDA3IDEyMS45NTcgMTMzLjY2MyAxMjcuODQxIDEzOS43NjRMMTU1LjkzMyAxNjguODg5QzE1OC44OTIgMTcxLjk1NyAxNjMuMDExIDE3My42NzIgMTY3LjMwMyAxNzMuNjIyQzE3MS41OTMgMTczLjU3MiAxNzUuNjcxIDE3MS43NjMgMTc4LjU1NSAxNjguNjI2TDIzMC44NzQgMTExLjc2NFpNMTE0LjQwMyAxNTAuMDU3TDk2LjQ3OCAxMzIuMTk4TDExNC40MDMgMTE0LjM0QzExOC4yNzggMTEwLjUxMyAxMjAuMjE2IDEwNy4yNzEgMTIwLjIxNiAxMDQuNjEzQzEyMC4yMTYgMTAxLjg0OSAxMTguMjc4IDk4LjU1MzggMTE0LjQwMyA5NC43MjdDMTEwLjUyNyA5MC45MDAzIDEwNy4yNDQgODguOTg2OCAxMDQuNTUyIDg4Ljk4NjhDMTAxLjg2MSA4OC45ODY4IDk4LjU3NzMgOTAuOTAwMyA5NC43MDE4IDk0LjcyN0w3Ni45Mzg4IDExMi41ODZMNTkuMDE0MyA5NC43MjdDNTUuMTM4OCA5MC45MDAzIDUxLjg1NTIgODguOTg2OCA0OS4xNjM3IDg4Ljk4NjhDNDYuNTggODguOTg2OCA0My4yOTY1IDkwLjkwMDMgMzkuMzEzMyA5NC43MjdDMzUuNDM3OCA5OC41NTM4IDMzLjUgMTAxLjg0OSAzMy41IDEwNC42MTNDMzMuNSAxMDcuMjcxIDM1LjQzNzggMTEwLjUxMyAzOS4zMTMzIDExNC4zNEw1Ny4yMzggMTMyLjE5OEwzOS4zMTMzIDE1MC4wNTdDMzUuNDM3OCAxNTMuODg0IDMzLjUgMTU3LjE3OSAzMy41IDE1OS45NDNDMzMuNSAxNjIuNiAzNS40Mzc4IDE2NS44NDMgMzkuMzEzMyAxNjkuNjY5QzQzLjI5NjUgMTczLjM5IDQ2LjU4IDE3NS4yNSA0OS4xNjM3IDE3NS4yNUM1MS44NTUyIDE3NS4yNSA1NS4xMzg4IDE3My4zMzcgNTkuMDE0MyAxNjkuNTFMNzYuOTM4OCAxNTEuODExTDk0LjcwMTggMTY5LjUxQzk4LjU3NzMgMTczLjMzNyAxMDEuODYxIDE3NS4yNSAxMDQuNTUyIDE3NS4yNUMxMDcuMjQ0IDE3NS4yNSAxMTAuNTI3IDE3My4zOSAxMTQuNDAzIDE2OS42NjlDMTE4LjI3OCAxNjUuODQzIDEyMC4yMTYgMTYyLjYgMTIwLjIxNiAxNTkuOTQzQzEyMC4yMTYgMTU3LjE3OSAxMTguMjc4IDE1My44ODQgMTE0LjQwMyAxNTAuMDU3WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyXzMxMTZfOTU4IiB4MT0iMTg1LjE2NyIgeTE9Ii0yMzIuOTM4IiB4Mj0iNzAuODMyOSIgeTI9IjQ4OC45MzciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agb2Zmc2V0PSIwLjQ1IiBzdG9wLWNvbG9yPSIjMjI0N0ZGIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzBEMUM2NSIvPgo8L2xpbmVhckdyYWRpZW50Pgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MV9saW5lYXJfMzExNl85NTgiIHgxPSIxNzkuNDUiIHkxPSItMTk2Ljg0NCIgeDI9Ijc2LjU0OTgiIHkyPSI0NTIuODQ1IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIG9mZnNldD0iMC40NSIgc3RvcC1jb2xvcj0iIzIyNDdGRiIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwRDFDNjUiLz4KPC9saW5lYXJHcmFkaWVudD4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDJfbGluZWFyXzMxMTZfOTU4IiB4MT0iMTczLjczMyIgeTE9Ii0xNjAuNzUiIHgyPSI4Mi4yNjYyIiB5Mj0iNDE2Ljc1IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIG9mZnNldD0iMC40NSIgc3RvcC1jb2xvcj0iIzIyNDdGRiIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwRDFDNjUiLz4KPC9saW5lYXJHcmFkaWVudD4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDNfbGluZWFyXzMxMTZfOTU4IiB4MT0iMTY4LjAxNyIgeTE9Ii0xMjQuNjU3IiB4Mj0iODcuOTgzMSIgeTI9IjM4MC42NTgiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agb2Zmc2V0PSIwLjQ1IiBzdG9wLWNvbG9yPSIjMjI0N0ZGIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzBEMUM2NSIvPgo8L2xpbmVhckdyYWRpZW50Pgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50NF9saW5lYXJfMzExNl85NTgiIHgxPSIxNjIuMyIgeTE9Ii04OC41NjI4IiB4Mj0iOTMuNjk5NyIgeTI9IjM0NC41NjIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agb2Zmc2V0PSIwLjQ1IiBzdG9wLWNvbG9yPSIjMjI0N0ZGIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzBEMUM2NSIvPgo8L2xpbmVhckdyYWRpZW50Pgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50NV9saW5lYXJfMzExNl85NTgiIHgxPSIxNTYuNTgzIiB5MT0iLTUyLjQ2OSIgeDI9Ijk5LjQxNjUiIHkyPSIzMDguNDciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agb2Zmc2V0PSIwLjQ1IiBzdG9wLWNvbG9yPSIjMjI0N0ZGIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzBEMUM2NSIvPgo8L2xpbmVhckdyYWRpZW50Pgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50Nl9saW5lYXJfMzExNl85NTgiIHgxPSIxNTAuODY3IiB5MT0iLTE2LjM3NTMiIHgyPSIxMDUuMTMzIiB5Mj0iMjcyLjM3NSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBvZmZzZXQ9IjAuNDUiIHN0b3AtY29sb3I9IiMyMjQ3RkYiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMEQxQzY1Ii8+CjwvbGluZWFyR3JhZGllbnQ+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQ3X2xpbmVhcl8zMTE2Xzk1OCIgeDE9IjE0NS4xNSIgeTE9IjE5LjcxODUiIHgyPSIxMTAuODUiIHkyPSIyMzYuMjgxIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIG9mZnNldD0iMC40NSIgc3RvcC1jb2xvcj0iIzIyNDdGRiIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwRDFDNjUiLz4KPC9saW5lYXJHcmFkaWVudD4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDhfbGluZWFyXzMxMTZfOTU4IiB4MT0iMTM5LjQzMyIgeTE9IjU1LjgxMjUiIHgyPSIxMTYuNTY2IiB5Mj0iMjAwLjE4OCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBvZmZzZXQ9IjAuNDUiIHN0b3AtY29sb3I9IiMyMjQ3RkYiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMEQxQzY1Ii8+CjwvbGluZWFyR3JhZGllbnQ+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQ5X2xpbmVhcl8zMTE2Xzk1OCIgeDE9IjEzMy43MTciIHkxPSI5MS45MDYzIiB4Mj0iMTIyLjI4MyIgeTI9IjE2NC4wOTQiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agb2Zmc2V0PSIwLjQ1IiBzdG9wLWNvbG9yPSIjMjI0N0ZGIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzBEMUM2NSIvPgo8L2xpbmVhckdyYWRpZW50Pgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzMxMTZfOTU4Ij4KPHJlY3Qgd2lkdGg9IjI1NiIgaGVpZ2h0PSIyNTYiIHJ4PSI2MCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K",this.url="https://xaman.app",this.client=null,this.currentAccount=null,this.options=t}async isAvailable(){return!0}async checkXamanState(t){const n=t?.apiKey||this.options.apiKey;let r=t?.network;if(!n)throw xe.connectionFailed(this.name,new Error("API key is required for Xaman. Please provide it in connect options or adapter constructor."));this.client=new Ap(n);const s=await this.client.user.account;if(!s)return this.client.logout(),null;let i;if(r)i=this.resolveNetwork(r);else{const o=await this.client.user.networkType;if(!o)throw xe.connectionFailed(this.name,new Error("Unable to determine network from Xaman. Make sure the API key and network are correct."));i=this.parseNetwork(o)}return this.currentAccount={address:s,publicKey:void 0,network:i},this.currentAccount}async connect(t){var n;const r=t?.apiKey||this.options.apiKey;if(!r)throw xe.connectionFailed(this.name,new Error("API key is required for Xaman. Please provide it in connect options or adapter constructor."));const s=t?.onQRCode||this.options.onQRCode,i=t?.onDeepLink||this.options.onDeepLink;s&&(this.options.onQRCode=s),i&&(this.options.onDeepLink=i);try{this.client=new Ap(r),mi.debug("Starting authorization flow");const o=await this.client.authorize();if(mi.debug("Authorization result:",{hasResult:!!o,isError:o instanceof Error,hasMe:o&&!(o instanceof Error)?!!o.me:!1}),!o||o instanceof Error)throw o||new Error("Authorization failed");mi.debug("Authorization successful",{account:(n=o.me)==null?void 0:n.account});const a=o.me.account,u=this.parseNetwork(o.me.networkEndpoint||"");return this.currentAccount={address:a,publicKey:void 0,network:u},this.currentAccount}catch(o){throw mi.error("Authorization failed:",o),xe.connectionFailed(this.name,o)}}async disconnect(){if(this.client)try{await this.client.logout(),this.cleanup()}catch{this.cleanup()}}async getAccount(){return this.currentAccount}async getNetwork(){if(!this.currentAccount)throw xe.notConnected();return this.currentAccount.network}async signAndSubmit(t,n){var r;if(!this.client||!this.currentAccount)throw xe.notConnected();try{const s=await((r=this.client.payload)==null?void 0:r.createAndSubscribe(t));if(!s)throw new Error("Failed to create payload");this.openSignWindow(s.created.next.always);const i=await this.waitForSignature(s.websocket.url);if(!i.signed)throw xe.signRejected();return{hash:i.txid||"",tx_blob:i.tx_blob,signature:i.signature}}catch(s){throw s instanceof Error&&s.message.includes("rejected")?xe.signRejected():xe.signFailed(s)}}async signMessage(t){var n;if(!this.client||!this.currentAccount)throw xe.notConnected();try{const r=typeof t=="string"?t:new TextDecoder().decode(t),s=await((n=this.client.payload)==null?void 0:n.create({TransactionType:"SignIn"}));if(!s)throw new Error("Failed to create sign message payload");return this.openSignWindow(s.next.always),{message:r,signature:"",publicKey:this.currentAccount.publicKey||""}}catch(r){throw xe.signFailed(r)}}parseNetwork(t){const n=t.toLowerCase();return n.includes("testnet")||n.includes("altnet")?{id:"testnet",name:"Testnet",wss:t,walletConnectId:"xrpl:1"}:n.includes("devnet")?{id:"devnet",name:"Devnet",wss:t,walletConnectId:"xrpl:2"}:{id:"mainnet",name:"Mainnet",wss:t||"wss://xrplcluster.com",walletConnectId:"xrpl:0"}}openSignWindow(t){if(mi.debug("openSignWindow called with URL:",t.substring(0,50)+"..."),mi.debug("onQRCode callback exists:",!!this.options.onQRCode),this.options.onQRCode){mi.debug("Calling onQRCode callback"),this.options.onQRCode(t);return}mi.debug("Opening popup window");const n=500,r=600,s=window.screen.width/2-n/2,i=window.screen.height/2-r/2;window.open(t,"Xaman Sign",`width=${n},height=${r},left=${s},top=${i},resizable=yes,scrollbars=yes`)}getDeepLinkURI(t){return this.options.onDeepLink?this.options.onDeepLink(t):`xumm://xumm.app/sign/${t.split("/").pop()}`}waitForSignature(t){return new Promise((n,r)=>{const s=new WebSocket(t),i=setTimeout(()=>{s.close(),r(new Error("Signing timeout - user did not respond"))},300*1e3);s.onmessage=o=>{try{const a=JSON.parse(o.data);a.signed===!0?(clearTimeout(i),s.close(),n({signed:!0,txid:a.txid,tx_blob:a.tx_blob,signature:a.signature,account:a.account})):a.signed===!1&&(clearTimeout(i),s.close(),r(new Error("Transaction signing was rejected by user")))}catch(a){clearTimeout(i),s.close(),r(a)}},s.onerror=o=>{clearTimeout(i),r(new Error("WebSocket error: "+o))},s.onclose=()=>{clearTimeout(i)}})}cleanup(){this.client=null,this.currentAccount=null}resolveNetwork(t){if(!t)return li.mainnet;if(typeof t=="string"){const n=li[t];if(!n)throw xe.unknown(`Unknown network: ${t}`);return n}return t}}var ZS={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(ue,()=>(()=>{var n={7531:s=>{var i=typeof Reflect=="object"?Reflect:null,o=i&&typeof i.apply=="function"?i.apply:function(E,_,S){return Function.prototype.apply.call(E,_,S)},a=i&&typeof i.ownKeys=="function"?i.ownKeys:Object.getOwnPropertySymbols?function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))}:function(E){return Object.getOwnPropertyNames(E)},u=Number.isNaN||function(E){return E!=E};function c(){c.init.call(this)}s.exports=c,s.exports.once=function(E,_){return new Promise(function(S,I){function D(Y){E.removeListener(_,L),I(Y)}function L(){typeof E.removeListener=="function"&&E.removeListener("error",D),S([].slice.call(arguments))}var x,j,V;A(E,_,L,{once:!0}),_!=="error"&&(j=D,V={once:!0},typeof(x=E).on=="function")&&A(x,"error",j,V)})},(c.EventEmitter=c).prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var l=10;function d(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}function f(E){return E._maxListeners===void 0?c.defaultMaxListeners:E._maxListeners}function h(E,_,S,I){var D,L;return d(S),(D=E._events)===void 0?(D=E._events=Object.create(null),E._eventsCount=0):(D.newListener!==void 0&&(E.emit("newListener",_,S.listener||S),D=E._events),L=D[_]),L===void 0?(L=D[_]=S,++E._eventsCount):(typeof L=="function"?L=D[_]=I?[S,L]:[L,S]:I?L.unshift(S):L.push(S),0<(D=f(E))&&L.length>D&&!L.warned&&(L.warned=!0,(I=new Error("Possible EventEmitter memory leak detected. "+L.length+" "+String(_)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",I.emitter=E,I.type=_,I.count=L.length,S=I,console)&&console.warn&&console.warn(S)),E}function p(E,_,S){return E={fired:!1,wrapFn:void 0,target:E,type:_,listener:S},_=(function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}).bind(E),_.listener=S,E.wrapFn=_}function g(E,_,S){if(E=E._events,E===void 0)return[];if(E=E[_],E===void 0)return[];if(typeof E=="function")return S?[E.listener||E]:[E];if(S){for(var I=E,D=new Array(I.length),L=0;L<D.length;++L)D[L]=I[L].listener||I[L];return D}return b(E,E.length)}function y(E){var _=this._events;if(_!==void 0){if(_=_[E],typeof _=="function")return 1;if(_!==void 0)return _.length}return 0}function b(E,_){for(var S=new Array(_),I=0;I<_;++I)S[I]=E[I];return S}function A(E,_,S,I){if(typeof E.on=="function")I.once?E.once(_,S):E.on(_,S);else{if(typeof E.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E);E.addEventListener(_,function D(L){I.once&&E.removeEventListener(_,D),S(L)})}}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(E){if(typeof E!="number"||E<0||u(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");l=E}}),c.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(E){if(typeof E!="number"||E<0||u(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this},c.prototype.getMaxListeners=function(){return f(this)},c.prototype.emit=function(E){for(var _=[],S=1;S<arguments.length;S++)_.push(arguments[S]);var I=E==="error",D=this._events;if(D!==void 0)I=I&&D.error===void 0;else if(!I)return!1;if(I)throw(L=0<_.length?_[0]:L)instanceof Error?L:(I=new Error("Unhandled error."+(L?" ("+L.message+")":"")),I.context=L,I);var L=D[E];if(L===void 0)return!1;if(typeof L=="function")o(L,this,_);else for(var x=L.length,j=b(L,x),S=0;S<x;++S)o(j[S],this,_);return!0},c.prototype.on=c.prototype.addListener=function(E,_){return h(this,E,_,!1)},c.prototype.prependListener=function(E,_){return h(this,E,_,!0)},c.prototype.once=function(E,_){return d(_),this.on(E,p(this,E,_)),this},c.prototype.prependOnceListener=function(E,_){return d(_),this.prependListener(E,p(this,E,_)),this},c.prototype.off=c.prototype.removeListener=function(E,_){var S,I,D,L,x;if(d(_),(I=this._events)!==void 0&&(S=I[E])!==void 0){if(S===_||S.listener===_)--this._eventsCount==0?this._events=Object.create(null):(delete I[E],I.removeListener&&this.emit("removeListener",E,S.listener||_));else if(typeof S!="function"){for(D=-1,L=S.length-1;0<=L;L--)if(S[L]===_||S[L].listener===_){x=S[L].listener,D=L;break}if(D<0)return this;if(D===0)S.shift();else{for(var j=S,V=D;V+1<j.length;V++)j[V]=j[V+1];j.pop()}S.length===1&&(I[E]=S[0]),I.removeListener!==void 0&&this.emit("removeListener",E,x||_)}}return this},c.prototype.removeAllListeners=function(E){var _,S=this._events;if(S!==void 0){if(S.removeListener===void 0)arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):S[E]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete S[E]);else if(arguments.length===0){for(var I,D=Object.keys(S),L=0;L<D.length;++L)(I=D[L])!=="removeListener"&&this.removeAllListeners(I);this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0}else if(typeof(_=S[E])=="function")this.removeListener(E,_);else if(_!==void 0)for(L=_.length-1;0<=L;L--)this.removeListener(E,_[L])}return this},c.prototype.listeners=function(E){return g(this,E,!0)},c.prototype.rawListeners=function(E){return g(this,E,!1)},c.listenerCount=function(E,_){return typeof E.listenerCount=="function"?E.listenerCount(_):y.call(E,_)},c.prototype.listenerCount=y,c.prototype.eventNames=function(){return 0<this._eventsCount?a(this._events):[]}},9616:function(s,i,o){var a=this&&this.__createBinding||(Object.create?function(p,g,y,b){b===void 0&&(b=y);var A=Object.getOwnPropertyDescriptor(g,y);A&&("get"in A?g.__esModule:!A.writable&&!A.configurable)||(A={enumerable:!0,get:function(){return g[y]}}),Object.defineProperty(p,b,A)}:function(p,g,y,b){p[b=b===void 0?y:b]=g[y]}),u=this&&this.__setModuleDefault||(Object.create?function(p,g){Object.defineProperty(p,"default",{enumerable:!0,value:g})}:function(p,g){p.default=g}),c=this&&this.__importStar||function(p){if(p&&p.__esModule)return p;var g={};if(p!=null)for(var y in p)y!=="default"&&Object.prototype.hasOwnProperty.call(p,y)&&a(g,p,y);return u(g,p),g};Object.defineProperty(i,"__esModule",{value:!0}),i.Sdk=void 0;const l=c(o(5149)),d=c(o(9386));var f=c(o(9815));class h extends l.CustomEmitter{constructor(g){super(),Q(this,"mount"),Q(this,"api"),Q(this,"session"),Q(this,"env"),Q(this,"async"),Q(this,"sync"),Q(this,"methods"),Q(this,"app",f.Projects.titles.crossmark),g!=null&&g.project&&(this.app=g?.project),this.env=new l.Env,this.api=new l.Api(this),this.session=new l.Session(this),this.mount=new l.Mount(this),this.async=new d.Async(this),this.sync=new d.Sync(this),this.methods=Object.assign({},this.async,this.sync),new l.CustomEvents(this)}}i.Sdk=h},614:function(s,i,o){var a=this&&this.__createBinding||(Object.create?function(d,f,h,p){p===void 0&&(p=h);var g=Object.getOwnPropertyDescriptor(f,h);g&&("get"in g?f.__esModule:!g.writable&&!g.configurable)||(g={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(d,p,g)}:function(d,f,h,p){d[p=p===void 0?h:p]=f[h]}),u=this&&this.__setModuleDefault||(Object.create?function(d,f){Object.defineProperty(d,"default",{enumerable:!0,value:f})}:function(d,f){d.default=f}),c=this&&this.__importStar||function(d){if(d&&d.__esModule)return d;var f={};if(d!=null)for(var h in d)h!=="default"&&Object.prototype.hasOwnProperty.call(d,h)&&a(f,d,h);return u(f,d),f};Object.defineProperty(i,"__esModule",{value:!0}),i.Async=void 0;const l=c(o(9815));i.Async=class{constructor(d){Q(this,"sdk"),Q(this,"api"),Q(this,"session"),Q(this,"mount"),Q(this,"signInAndWait",f=>this.api.awaitRequest({command:l.COMMANDS.SIGN,data:{tx:{TransactionType:"SignIn"},hex:f}})),Q(this,"signAndWait",(f,h)=>this.api.awaitRequest({command:l.COMMANDS.SIGN,data:{tx:f,opts:h}})),Q(this,"submitAndWait",(f,h,p)=>this.api.awaitRequest({command:l.COMMANDS.SUBMIT,data:{address:f,txblob:h,opts:p}})),Q(this,"signAndSubmitAndWait",(f,h)=>this.api.awaitRequest({command:l.COMMANDS.SIGNANDSUBMIT,data:{tx:f,opts:h}})),Q(this,"bulkSignAndWait",(f,h)=>this.api.awaitRequest({command:l.COMMANDS.BULKSIGN,data:{txns:f,opts:h}})),Q(this,"bulkSubmitAndWait",(f,h,p)=>this.api.awaitRequest({command:l.COMMANDS.BULKSUBMIT,data:{address:f,txblobs:h,opts:p}})),Q(this,"bulkSignAndSubmitAndWait",(f,h)=>this.api.awaitRequest({command:l.COMMANDS.BULK,data:{txns:f,opts:h}})),Q(this,"encryptAndWait",{aes:(f,h,p)=>this.api.awaitRequest({command:l.COMMANDS.ENCRYPT,data:{address:f,data:h,opts:p}})}),Q(this,"decryptAndAwait",{aes:(f,h,p)=>this.api.awaitRequest({command:l.COMMANDS.DECRYPT,data:{address:f,hex:h,opts:p}})}),Q(this,"isLockedAndWait",()=>this.api.awaitRequest({command:l.COMMANDS.IS_LOCKED})),Q(this,"versionAndWait",()=>this.api.awaitRequest({command:l.COMMANDS.VERSION})),Q(this,"verifyAndWait",f=>this.api.awaitRequest({command:l.COMMANDS.VERIFY,data:{hex:f}})),Q(this,"connect",f=>this.mount.loop(f)),Q(this,"detect",f=>this.mount.loop(f)),this.sdk=d,this.api=d.api,this.session=d.session,this.mount=d.mount}}},9386:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Sync=i.Async=void 0;var a=o(614),u=(Object.defineProperty(i,"Async",{enumerable:!0,get:function(){return a.Async}}),o(8258));Object.defineProperty(i,"Sync",{enumerable:!0,get:function(){return u.Sync}})},8258:function(s,i,o){var a=this&&this.__createBinding||(Object.create?function(d,f,h,p){p===void 0&&(p=h);var g=Object.getOwnPropertyDescriptor(f,h);g&&("get"in g?f.__esModule:!g.writable&&!g.configurable)||(g={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(d,p,g)}:function(d,f,h,p){d[p=p===void 0?h:p]=f[h]}),u=this&&this.__setModuleDefault||(Object.create?function(d,f){Object.defineProperty(d,"default",{enumerable:!0,value:f})}:function(d,f){d.default=f}),c=this&&this.__importStar||function(d){if(d&&d.__esModule)return d;var f={};if(d!=null)for(var h in d)h!=="default"&&Object.prototype.hasOwnProperty.call(d,h)&&a(f,d,h);return u(f,d),f};Object.defineProperty(i,"__esModule",{value:!0}),i.Sync=void 0;const l=c(o(9815));i.Sync=class{constructor(d){Q(this,"sdk"),Q(this,"api"),Q(this,"session"),Q(this,"mount"),Q(this,"signIn",f=>this.api.request({command:l.COMMANDS.SIGN,data:{tx:{TransactionType:"SignIn"},hex:f}})),Q(this,"sign",(f,h)=>this.api.request({command:l.COMMANDS.SIGN,data:{tx:f,opts:h}})),Q(this,"submit",(f,h,p)=>this.api.request({command:l.COMMANDS.SUBMIT,data:{address:f,txblob:h,opts:p}})),Q(this,"signAndSubmit",(f,h)=>this.api.request({command:l.COMMANDS.SIGNANDSUBMIT,data:{tx:f,opts:h}})),Q(this,"bulkSign",(f,h)=>this.api.request({command:l.COMMANDS.BULKSIGN,data:{txns:f,opts:h}})),Q(this,"bulkSubmit",(f,h,p)=>this.api.request({command:l.COMMANDS.BULKSUBMIT,data:{address:f,txblobs:h,opts:p}})),Q(this,"encrypt",{aes:(f,h,p)=>this.api.request({command:l.COMMANDS.ENCRYPT,data:{address:f,data:h,opts:p}})}),Q(this,"decrypt",{aes:(f,h,p)=>this.api.request({command:l.COMMANDS.DECRYPT,data:{address:f,hex:h,opts:p}})}),Q(this,"bulkSignAndSubmit",(f,h)=>this.api.request({command:l.COMMANDS.BULK,data:{txns:f,opts:h}})),Q(this,"getResponse",f=>this.session.responses.get(f)),Q(this,"isConnected",()=>this.mount.isDetected),Q(this,"isInstalled",()=>this.mount.isDetected),Q(this,"isLocked",()=>this.api.request({command:l.COMMANDS.IS_LOCKED})),Q(this,"isOpen",()=>this.session.isOpen),Q(this,"version",()=>this.api.request({command:l.COMMANDS.VERSION})),Q(this,"verify",f=>this.api.request({command:l.COMMANDS.VERIFY,data:{hex:f}})),Q(this,"getAddress",()=>this.session.address),Q(this,"getNetwork",()=>this.session.network),Q(this,"getUser",()=>this.session.user),this.sdk=d,this.api=d.api,this.session=d.session,this.mount=d.mount}}},6515:function(s,i,o){var a,u,c,l=this&&this.__createBinding||(Object.create?function(b,A,E,_){_===void 0&&(_=E);var S=Object.getOwnPropertyDescriptor(A,E);S&&("get"in S?A.__esModule:!S.writable&&!S.configurable)||(S={enumerable:!0,get:function(){return A[E]}}),Object.defineProperty(b,_,S)}:function(b,A,E,_){b[_=_===void 0?E:_]=A[E]}),d=this&&this.__setModuleDefault||(Object.create?function(b,A){Object.defineProperty(b,"default",{enumerable:!0,value:A})}:function(b,A){b.default=A}),f=this&&this.__importStar||function(b){if(b&&b.__esModule)return b;var A={};if(b!=null)for(var E in b)E!=="default"&&Object.prototype.hasOwnProperty.call(b,E)&&l(A,b,E);return d(A,b),A},h=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}},h=(Object.defineProperty(i,"__esModule",{value:!0}),i.Api=void 0,h(o(7531)));const p=f(o(9815)),g=o(266);class y extends h.default{constructor(A){super(),Q(this,"sdk"),Q(this,"active",new Map),Q(this,"uuid"),Q(this,"connected"),Q(this,"target"),Q(this,"timestamp"),lf(this,a,E=>{var _,S,I,D;try{if(window&&(!window||E.source===window&&E.source&&E.origin===window.location.origin)&&E.data){var L=((_=E.data)==null?void 0:_.type)||void 0,x=((S=E.data)==null?void 0:S.response)||void 0,j=((I=E.data)==null?void 0:I.app)||void 0;if((L!=="request"||j===this.sdk.app)&&L!==p.TYPES.UPDATE)return L===p.TYPES.EVENT&&"type"in E.data?dl(this,u).call(this,E.data):(x&&x.type===p.TYPES.RESPONSE&&this.emit(p.EVENTS.RESPONSE,E.data),x&&x.type===p.EVENTS.RESPONSE&&this.active.get(x.id)?(D=this.active.get(x.id))==null?void 0:D.resolve(E.data):void 0)}}catch{}}),lf(this,u,E=>{E.event===p.EVENTS.PING&&this.emit(p.EVENTS.PING),E.event===p.EVENTS.CLOSE&&this.emit(p.EVENTS.CLOSE),E.event===p.EVENTS.OPEN&&this.emit(p.EVENTS.OPEN),E.event===p.EVENTS.SIGNOUT&&this.emit(p.EVENTS.SIGNOUT),E.event===p.EVENTS.USER_CHANGE&&this.emit(p.EVENTS.USER_CHANGE,E.data),E.event===p.EVENTS.NETWORK_CHANGE&&this.emit(p.EVENTS.NETWORK_CHANGE,E.data)}),lf(this,c,async E=>{var _=await new Promise((S,I)=>{this.active.set(E.id,{resolve:S,reject:I}),window&&window.postMessage(E)});return this.active.delete(E.id),_}),Q(this,"awaitRequest",async E=>{try{return await dl(this,c).call(this,{app:this.sdk.app,type:p.TYPES.REQUEST,id:(0,g.uuid)(),...E})}catch(_){throw _}}),Q(this,"request",E=>{try{var _=(0,g.uuid)();return dl(this,c).call(this,{app:this.sdk.app,type:p.TYPES.REQUEST,id:_,...E}),_}catch(S){throw S}}),this.sdk=A,this.uuid=(0,g.uuid)(),this.connected=!1,this.timestamp=Date.now(),typeof window<"u"&&(this.target=window.origin,window.addEventListener("message",dl(this,a)))}}a=new WeakMap,u=new WeakMap,c=new WeakMap,i.Api=y},2585:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Env=void 0;class o{constructor(){Q(this,"isAndroid",!1),Q(this,"isIos",!1),Q(this,"isOpera",!1),Q(this,"isWindows",!1),Q(this,"isSSR",!1),Q(this,"isXApp",!1),Q(this,"isMobile",!1),Q(this,"isDesktop",!1),typeof window<"u"&&(this.isAndroid=!!(window!=null&&window.navigator.userAgent.match(/Android/i)),this.isIos=!!(window!=null&&window.navigator.userAgent.match(/iPhone|iPad|iPod/i)),this.isOpera=!!(window!=null&&window.navigator.userAgent.match(/Opera Mini/i)),this.isWindows=!!(window!=null&&window.navigator.userAgent.match(/IEMobile/i)),this.isSSR=!!(window!=null&&window.navigator.userAgent.match(/SSR/i)),this.isXApp=!!(window!=null&&window.navigator.userAgent.match(/xumm/i)),this.isMobile=!!(this.isAndroid||this.isIos||this.isOpera||this.isWindows),this.isDesktop=!this.isMobile&&!this.isSSR)}}i.Env=o,i.default=new o},6962:function(s,i,o){var a=this&&this.__createBinding||(Object.create?function(h,p,g,y){y===void 0&&(y=g);var b=Object.getOwnPropertyDescriptor(p,g);b&&("get"in b?p.__esModule:!b.writable&&!b.configurable)||(b={enumerable:!0,get:function(){return p[g]}}),Object.defineProperty(h,y,b)}:function(h,p,g,y){h[y=y===void 0?g:y]=p[g]}),u=this&&this.__setModuleDefault||(Object.create?function(h,p){Object.defineProperty(h,"default",{enumerable:!0,value:p})}:function(h,p){h.default=p}),c=this&&this.__importStar||function(h){if(h&&h.__esModule)return h;var p={};if(h!=null)for(var g in h)g!=="default"&&Object.prototype.hasOwnProperty.call(h,g)&&a(p,h,g);return u(p,h),p},l=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}},l=(Object.defineProperty(i,"__esModule",{value:!0}),i.CustomEvents=i.CustomEmitter=void 0,l(o(7531)));const d=c(o(9815));class f extends l.default{}i.CustomEmitter=f,i.CustomEvents=class extends f{constructor(h){super(),Q(this,"sdk"),Q(this,"api"),this.sdk=h,this.api=this.sdk.api,this.api.on(d.EVENTS.PING,()=>this.sdk.emit(d.EVENTS.PING)),this.api.on(d.EVENTS.RESPONSE,p=>{this.sdk.emit(d.EVENTS.RESPONSE,p),this.sdk.emit(d.EVENTS.ALL,{type:d.EVENTS.RESPONSE,resp:p})}),this.api.on(d.EVENTS.USER_CHANGE,p=>{this.sdk.emit(d.EVENTS.USER_CHANGE,p),this.sdk.emit(d.EVENTS.ALL,{type:d.EVENTS.USER_CHANGE,user:p})}),this.api.on(d.EVENTS.NETWORK_CHANGE,p=>{this.sdk.emit(d.EVENTS.NETWORK_CHANGE,p),this.sdk.emit(d.EVENTS.ALL,{type:d.EVENTS.NETWORK_CHANGE,network:p})}),this.api.on(d.EVENTS.OPEN,()=>{this.sdk.emit(d.EVENTS.OPEN),this.sdk.emit(d.EVENTS.ALL,{type:d.EVENTS.OPEN})}),this.api.on(d.EVENTS.CLOSE,()=>{this.sdk.emit(d.EVENTS.CLOSE),this.sdk.emit(d.EVENTS.ALL,{type:d.EVENTS.CLOSE})}),this.api.on(d.EVENTS.SIGNOUT,()=>{this.sdk.emit(d.EVENTS.SIGNOUT),this.sdk.emit(d.EVENTS.ALL,{type:d.EVENTS.SIGNOUT})})}}},5149:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Session=i.Scheme=i.Mount=i.CustomEvents=i.CustomEmitter=i.Env=i.Api=void 0;var a=o(6515),u=(Object.defineProperty(i,"Api",{enumerable:!0,get:function(){return a.Api}}),o(2585)),c=(Object.defineProperty(i,"Env",{enumerable:!0,get:function(){return u.Env}}),o(6962)),l=(Object.defineProperty(i,"CustomEmitter",{enumerable:!0,get:function(){return c.CustomEmitter}}),Object.defineProperty(i,"CustomEvents",{enumerable:!0,get:function(){return c.CustomEvents}}),o(288)),d=(Object.defineProperty(i,"Mount",{enumerable:!0,get:function(){return l.Mount}}),o(2821)),f=(Object.defineProperty(i,"Scheme",{enumerable:!0,get:function(){return d.Scheme}}),o(2413));Object.defineProperty(i,"Session",{enumerable:!0,get:function(){return f.Session}})},288:function(s,i,o){var a=this&&this.__createBinding||(Object.create?function(p,g,y,b){b===void 0&&(b=y);var A=Object.getOwnPropertyDescriptor(g,y);A&&("get"in A?g.__esModule:!A.writable&&!A.configurable)||(A={enumerable:!0,get:function(){return g[y]}}),Object.defineProperty(p,b,A)}:function(p,g,y,b){p[b=b===void 0?y:b]=g[y]}),u=this&&this.__setModuleDefault||(Object.create?function(p,g){Object.defineProperty(p,"default",{enumerable:!0,value:g})}:function(p,g){p.default=g}),c=this&&this.__importStar||function(p){if(p&&p.__esModule)return p;var g={};if(p!=null)for(var y in p)y!=="default"&&Object.prototype.hasOwnProperty.call(p,y)&&a(g,p,y);return u(g,p),g},l=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}},l=(Object.defineProperty(i,"__esModule",{value:!0}),i.Mount=void 0,l(o(7531)));const d=o(266),f=c(o(9815));class h extends l.default{constructor(g){super(),Q(this,"isDetected"),Q(this,"sdk"),Q(this,"loop",async y=>new Promise(async(b,A)=>{this.isDetected&&b(!0);var E=Date.now();if(this.sdk.app===f.Projects.titles.embark)for(;;){if(typeof window<"u"&&window.xrpl&&window.xrpl.isEmbark){this.isDetected=window.xrpl.isEmbark,window.embark=Object.assign({},window?.embark,this.sdk),this.emit("detected"),this.sdk.emit("detected"),b(!0);break}if(await(0,d.sleep)(500),Date.now()>E+(y??1e4)){b(!1);break}}else for(;;){if(typeof window<"u"&&window.xrpl&&window.xrpl.isCrossmark){this.isDetected=window.xrpl.isCrossmark,window.crossmark=Object.assign({},window?.crossmark,this.sdk),this.emit("detected"),this.sdk.emit("detected"),b(!0);break}if(await(0,d.sleep)(500),Date.now()>E+(y??1e4)){b(!1);break}}})),this.sdk=g,this.loop(1e4)}}i.Mount=h},2821:function(s,i,o){var a=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(i,"__esModule",{value:!0}),i.Scheme=void 0;const u=a(o(2585));i.Scheme={get:(c,l)=>{if(l.startsWith("_"))throw new Error("Access denied");if(u.default.isMobile)throw new Error("Crossmark only available from desktop");return l=c[l],typeof l=="function"?l.bind(c):l},set:(c,l,d)=>{if(l.startsWith("_"))throw new Error("Access denied");return c[l]=d,!0},deleteProperty:(c,l)=>{if(l.startsWith("_"))throw new Error("Access denied");return delete c[l],!0},ownKeys:c=>Object.keys(c).filter(l=>!l.startsWith("_"))}},2413:function(s,i,o){var a=this&&this.__createBinding||(Object.create?function(f,h,p,g){g===void 0&&(g=p);var y=Object.getOwnPropertyDescriptor(h,p);y&&("get"in y?h.__esModule:!y.writable&&!y.configurable)||(y={enumerable:!0,get:function(){return h[p]}}),Object.defineProperty(f,g,y)}:function(f,h,p,g){f[g=g===void 0?p:g]=h[p]}),u=this&&this.__setModuleDefault||(Object.create?function(f,h){Object.defineProperty(f,"default",{enumerable:!0,value:h})}:function(f,h){f.default=h}),c=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var h={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&a(h,f,p);return u(h,f),h};Object.defineProperty(i,"__esModule",{value:!0}),i.Session=void 0;const l=c(o(9815));class d{constructor(h){Q(this,"sdk"),Q(this,"user"),Q(this,"network"),Q(this,"address"),Q(this,"isOpen",!1),Q(this,"lastPing"),Q(this,"state","unactive"),Q(this,"responses",new Map),Q(this,"handleDetect",async()=>{this.network=(await this.sdk.api.awaitRequest({command:l.COMMANDS.NETWORK})).response.data.network,this.user=(await this.sdk.api.awaitRequest({command:l.COMMANDS.USER})).response.data.user,this.address=(await this.sdk.api.awaitRequest({command:l.COMMANDS.ADDRESS})).response.data.address,this.network&&this.user&&this.address&&(this.state="active")}),Q(this,"handlePing",()=>this.lastPing=Date.now()),Q(this,"handleClose",()=>this.isOpen=!1),Q(this,"handleOpen",()=>this.isOpen=!0),Q(this,"handleSignOut",()=>{this.state="unactive",this.address=void 0,this.network=void 0,this.user=void 0}),Q(this,"handleNetworkChange",p=>{this.network=p.network}),Q(this,"handleUserChange",p=>{this.user=p.user,this.address=void 0}),Q(this,"handleResponse",p=>{"address"in p.response.data&&(this.state="active",this.address=p.response.data.address),"network"in p.response.data&&(this.network=p.response.data.network),"user"in p.response.data&&(this.user=p.response.data.user),this.responses.set(p.request.id,p)}),this.sdk=h,this.sdk.on(l.EVENTS.PING,this.handlePing),this.sdk.on(l.EVENTS.RESPONSE,this.handleResponse),this.sdk.on(l.EVENTS.USER_CHANGE,this.handleUserChange),this.sdk.on(l.EVENTS.NETWORK_CHANGE,this.handleNetworkChange),this.sdk.on(l.EVENTS.OPEN,this.handleOpen),this.sdk.on(l.EVENTS.CLOSE,this.handleClose),this.sdk.on(l.EVENTS.SIGNOUT,this.handleSignOut),this.sdk.on("detected",this.handleDetect)}}(i.Session=d).prototype.user=void 0,d.prototype.network=void 0,d.prototype.address=void 0},4240:function(s,i,o){var a=this&&this.__createBinding||(Object.create?function(f,h,p,g){g===void 0&&(g=p);var y=Object.getOwnPropertyDescriptor(h,p);y&&("get"in y?h.__esModule:!y.writable&&!y.configurable)||(y={enumerable:!0,get:function(){return h[p]}}),Object.defineProperty(f,g,y)}:function(f,h,p,g){f[g=g===void 0?p:g]=h[p]}),u=this&&this.__setModuleDefault||(Object.create?function(f,h){Object.defineProperty(f,"default",{enumerable:!0,value:h})}:function(f,h){f.default=h}),d=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var h={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&a(h,f,p);return u(h,f),h};Object.defineProperty(i,"__esModule",{value:!0}),i.typings=i.modules=i.vanilla=void 0;const c=o(9616);Object.defineProperty(i,"vanilla",{enumerable:!0,get:function(){return c.Sdk}});var l=d(o(40)),d=(i.modules=l,d(o(9815)));i.typings=d,i.default=l.xmark},2898:function(s,i,o){var a=this&&this.__createBinding||(Object.create?function(f,h,p,g){g===void 0&&(g=p);var y=Object.getOwnPropertyDescriptor(h,p);y&&("get"in y?h.__esModule:!y.writable&&!y.configurable)||(y={enumerable:!0,get:function(){return h[p]}}),Object.defineProperty(f,g,y)}:function(f,h,p,g){f[g=g===void 0?p:g]=h[p]}),u=this&&this.__setModuleDefault||(Object.create?function(f,h){Object.defineProperty(f,"default",{enumerable:!0,value:h})}:function(f,h){f.default=h}),d=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var h={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&a(h,f,p);return u(h,f),h},c=(Object.defineProperty(i,"__esModule",{value:!0}),o(9616)),l=d(o(5149)),d=d(o(9815));i.default=new Proxy(new c.Sdk({project:d.Projects.titles.crossmark}),l.Scheme)},477:function(s,i,o){var a=this&&this.__createBinding||(Object.create?function(f,h,p,g){g===void 0&&(g=p);var y=Object.getOwnPropertyDescriptor(h,p);y&&("get"in y?h.__esModule:!y.writable&&!y.configurable)||(y={enumerable:!0,get:function(){return h[p]}}),Object.defineProperty(f,g,y)}:function(f,h,p,g){f[g=g===void 0?p:g]=h[p]}),u=this&&this.__setModuleDefault||(Object.create?function(f,h){Object.defineProperty(f,"default",{enumerable:!0,value:h})}:function(f,h){f.default=h}),d=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var h={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&a(h,f,p);return u(h,f),h},c=(Object.defineProperty(i,"__esModule",{value:!0}),o(9616)),l=d(o(5149)),d=d(o(9815));i.default=new Proxy(new c.Sdk({project:d.Projects.titles.embark}),l.Scheme)},40:function(s,i,o){var a=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}},u=(Object.defineProperty(i,"__esModule",{value:!0}),i.embark=i.xmark=void 0,o(2898)),c=(Object.defineProperty(i,"xmark",{enumerable:!0,get:function(){return a(u).default}}),o(477));Object.defineProperty(i,"embark",{enumerable:!0,get:function(){return a(c).default}})},5007:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.uuid=void 0,i.uuid=()=>{let o="",a;for(a=0;a<32;a+=1)switch(a){case 8:case 20:o=(o+="-")+(16*Math.random()|0).toString(16);break;case 12:o=o+"-4";break;case 16:o=(o+="-")+(4*Math.random()|8).toString(16);break;default:o+=(16*Math.random()|0).toString(16)}return o}},266:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.uuid=i.sleep=void 0;var a=o(2200),u=(Object.defineProperty(i,"sleep",{enumerable:!0,get:function(){return a.sleep}}),o(5007));Object.defineProperty(i,"uuid",{enumerable:!0,get:function(){return u.uuid}})},2200:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.sleep=void 0,i.sleep=async o=>{await new Promise(a=>{setTimeout(a,o)})}},2025:(s,i)=>{var o;Object.defineProperty(i,"__esModule",{value:!0}),i.Config=void 0,i.Config=(o=class{},Q(o,"config"),o)},7268:(s,i)=>{var o;Object.defineProperty(i,"__esModule",{value:!0}),i.Events=void 0,i.Events=(o=class{},Q(o,"GenericEvent"),Q(o,"BaseEvent"),Q(o,"EventMessage"),Q(o,"NetworkEvent"),Q(o,"UserEvent"),Q(o,"StateEvent"),Q(o,"SignoutEvent"),o)},9291:(s,i)=>{var o;Object.defineProperty(i,"__esModule",{value:!0}),i.Models=void 0,i.Models=(o=class{},Q(o,"Request"),Q(o,"Response"),Q(o,"FullResponse"),Q(o,"IsConnectedRequest"),Q(o,"IsLockedRequest"),Q(o,"SignInRequest"),Q(o,"IsOpenRequest"),Q(o,"SignRequest"),Q(o,"VersionRequest"),Q(o,"NetworkRequest"),Q(o,"UserRequest"),Q(o,"AddressRequest"),Q(o,"VerifyRequest"),Q(o,"SignAndSubmitRequest"),Q(o,"SubmitRequest"),Q(o,"EncryptRequest"),Q(o,"DecryptRequest"),Q(o,"IsConnectedResponse"),Q(o,"IsLockedResponse"),Q(o,"SignInResponse"),Q(o,"IsOpenResponse"),Q(o,"SignResponse"),Q(o,"VersionResponse"),Q(o,"AddressResponse"),Q(o,"NetworkResponse"),Q(o,"UserResponse"),Q(o,"VerifyResponse"),Q(o,"SignAndSubmitResponse"),Q(o,"SubmitResponse"),Q(o,"IsConnectedFullResponse"),Q(o,"IsLockedFullResponse"),Q(o,"SignInFullResponse"),Q(o,"IsOpenFullResponse"),Q(o,"SignFullResponse"),Q(o,"VersionFullResponse"),Q(o,"AddressFullResponse"),Q(o,"NetworkFullResponse"),Q(o,"UserFullResponse"),Q(o,"VerifyFullResponse"),Q(o,"SignAndSubmitFullResponse"),Q(o,"SubmitFullResponse"),Q(o,"BulkSubmitRequest"),Q(o,"BulkSignRequest"),Q(o,"BulkSignAndSubmitRequest"),Q(o,"BulkSubmitFullResponse"),Q(o,"BulkSignFullResponse"),Q(o,"BulkSignAndSubmitFullResponse"),Q(o,"BulkSubmitResponse"),Q(o,"BulkSignResponse"),Q(o,"BulkSignAndSubmitResponse"),Q(o,"EncryptResponse"),Q(o,"EncryptFullResponse"),Q(o,"DecryptResponse"),Q(o,"DecryptFullResponse"),Q(o,"SenderFullResponse"),Q(o,"SenderRequest"),Q(o,"SenderResponse"),Q(o,"ManagerFullResponse"),Q(o,"ManagerRequest"),Q(o,"ManagerResponse"),Q(o,"AllTransactionRequest"),Q(o,"AllTransactionResponse"),Q(o,"AllTransactionMetadata"),Q(o,"AllTxResponse"),Q(o,"AllSubmitResponse"),Q(o,"AllTransactionStream"),Q(o,"AllTransaction"),Q(o,"AllFullTransaction"),Q(o,"IndexedTransactionRequest"),Q(o,"SignTransaction"),Q(o,"SignOpts"),Q(o,"CryptOpts"),Q(o,"ExtendedSignOpts"),Q(o,"Status"),o)},4151:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CatchAllEvent=i.TYPES=i.EVENTS=i.COMMANDS=i.Extension=void 0;class o{}Q(o,"CatchAllEvent"),Q(o,"BasicUser"),Q(o,"BasicNetwork"),Q(o,"CleanExtMessage"),Q(o,"CommResponse"),Q(o,"CleanResponse"),Q(o,"PostMessage"),Q(o,"PortMessage"),Q(o,"Payload"),Q(o,"AppStatus"),Q(o,"AllExtMessage"),Q(o,"ExtMessage"),Q(o,"RequestMessage"),Q(o,"ResponseMessage"),Q(o,"Targets"),Q(o,"Events"),Q(o,"Commands"),Q(o,"Types");var a,u;i.Extension=o,a=o||(i.Extension=o={}),(u=a.TYPES||(a.TYPES={})).INIT="init",u.REFRESH="refresh",u.DISCONNECT="disconnect",u.PING="ping",u.REQUEST="request",u.RESPONSE="response",u.UPDATE="update",u.EVENT="event",(u=a.COMMANDS||(a.COMMANDS={})).VERSION="version",u.IS_CONNECTED="isConnected",u.IS_LOCKED="isLocked",u.OPEN="open",u.SIGN="sign",u.SIGNANDSUBMIT="sign-and-submit",u.BULKSUBMIT="bulk-submit",u.BULKSIGN="bulk-sign",u.BULK="bulk",u.SUBMIT="submit",u.MANAGER="manager",u.ADDRESS="address",u.NETWORK="network",u.USER="user",u.VERIFY="verify",u.SENDER="sender",u.CHANGENODE="change-node",u.CHANGEUSER="change-user",u.DECRYPT="decrypt",u.ENCRYPT="encrypt",(u=a.EVENTS||(a.EVENTS={})).ACCOUNTS_CHANGED="accountsChanged",u.CHAIN_CHANGED="chainChanged",u.CONNECT="connect",u.DISCONNECT="disconnect",u.MESSAGE="message",u.POPUP_MODE="popup-mode",u.STATE_UPDATE="state-update",u.NETWORK_CHANGE="network-change",u.USER_CHANGE="user-change",u.OPEN="open",u.CLOSE="close",u.PING="ping",u.SIGNIN="signin",u.SIGNOUT="signout",u.RESPONSE="response",u.ALL="all",(u=a.TARGETS||(a.TARGETS={})).CONTENT="content",u.BG="bg",u.POP="pop",i.COMMANDS=o.COMMANDS,i.EVENTS=o.EVENTS,i.TYPES=o.TYPES,i.CatchAllEvent=o.CatchAllEvent},9312:(s,i)=>{var o;Object.defineProperty(i,"__esModule",{value:!0}),i.Types=void 0,i.Types=(o=class{},Q(o,"AgreementsSchema"),Q(o,"GeneralSchema"),Q(o,"NetworkSchema"),Q(o,"CardSchema"),Q(o,"ContactSchema"),Q(o,"ProfileSchema"),Q(o,"SecuritySchema"),Q(o,"StateSchema"),Q(o,"UserSchema"),Q(o,"AppSchema"),Q(o,"PreferenceSchema"),Q(o,"VaultSchema"),Q(o,"MountedUserSchema"),Q(o,"Blank"),o)},7579:function(s,i,o){var a=this&&this.__createBinding||(Object.create?function(d,f,h,p){p===void 0&&(p=h);var g=Object.getOwnPropertyDescriptor(f,h);g&&("get"in g?f.__esModule:!g.writable&&!g.configurable)||(g={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(d,p,g)}:function(d,f,h,p){d[p=p===void 0?h:p]=f[h]}),u=this&&this.__setModuleDefault||(Object.create?function(d,f){Object.defineProperty(d,"default",{enumerable:!0,value:f})}:function(d,f){d.default=f}),c=this&&this.__importStar||function(d){if(d&&d.__esModule)return d;var f={};if(d!=null)for(var h in d)h!=="default"&&Object.prototype.hasOwnProperty.call(d,h)&&a(f,d,h);return u(f,d),f},c=(Object.defineProperty(i,"__esModule",{value:!0}),i.Types=void 0,c(o(9312)));class l{}Q(l,"Api",c),i.Types=l,o=l||(i.Types=l={}),(c=o.TWCardColor||(o.TWCardColor={})).color1="tw-bg-cardGradient1",c.color2="tw-bg-cardGradient2",c.color3="tw-bg-cardGradient3",c.color4="tw-bg-cardGradient4",c.color5="tw-bg-cardGradient5",c.color6="tw-bg-cardGradient6",c.color7="tw-bg-cardGradient7",c.color8="tw-bg-cardGradient8",c.color9="tw-bg-cardGradient9",c.color10="tw-bg-cardGradient10",(c=o.CardColor||(o.CardColor={})).color1="color1",c.color2="color2",c.color3="color3",c.color4="color4",c.color5="color5",c.color6="color6",c.color7="color7",c.color8="color8",c.color9="color9",c.color10="color10",(c=o.NetworkTypes||(o.NetworkTypes={})).main="main",c.live="live",c.test="test",c.dev="dev",c.hooks="hooks",c.experimental="experimental",c.sidechain="sidechain",c.xls30="xls-30d",c.xls38="xls-38d",c.xahautest="xahau-test",(c=o.Protocol||(o.Protocol={})).xrpl="XRPL",c.evm="EVM",c.btc="BTC",c.bsc="BSC",c.ada="ADA",c.sol="SOL",c.usd="USD",(c=o.XRPLExplorers||(o.XRPLExplorers={})).bithomp="bithomp",c.xrplorg="xrpl.org",c.xrplf="xrplf",c.xrpscan="xrpscan",(o.EVMExplorers||(o.EVMExplorers={})).evmSideChain="evm-sidechain",o.networkColorMap={[o.NetworkTypes.main]:"tw-bg-[#38DBFF]",[o.NetworkTypes.live]:"tw-bg-[#38FFDB]",[o.NetworkTypes.test]:"tw-bg-[#DE7EFF]",[o.NetworkTypes.dev]:"tw-bg-[#FFB648]",[o.NetworkTypes.experimental]:"tw-bg-[#FF7B9B]",[o.NetworkTypes.sidechain]:"tw-bg-[#7CFF99]",[o.NetworkTypes.xls30]:"tw-bg-[#FF9C7C]",[o.NetworkTypes.xls38]:"tw-bg-[#C34D27]",[o.NetworkTypes.hooks]:"tw-bg-[#CF4C27]",[o.NetworkTypes.xahautest]:"tw-bg-[#CF4C27]"},o.BithompHost={[o.NetworkTypes.main]:"https://bithomp.com/explorer",[o.NetworkTypes.test]:"https://test.bithomp.com/explorer",[o.NetworkTypes.dev]:"https://dev.bithomp.com/explorer",[o.NetworkTypes.xls30]:"https://amm.bithomp.com/explorer",[o.NetworkTypes.hooks]:"https://beta.bithomp.com/explorer",[o.NetworkTypes.live]:"https://bithomp.com/explorer",[o.NetworkTypes.experimental]:"",[o.NetworkTypes.sidechain]:"",[o.NetworkTypes.xls38]:"",[o.NetworkTypes.xahautest]:"https://test.xahauexplorer.com/explorer"},o.XrplfHost={[o.NetworkTypes.main]:"https://explorer.xrplf.org",[o.NetworkTypes.test]:"https://explorer-testnet.xrplf.org",[o.NetworkTypes.hooks]:"https://hooks-testnet-v3-explorer.xrpl-labs.com",[o.NetworkTypes.dev]:"",[o.NetworkTypes.xls30]:"",[o.NetworkTypes.live]:"",[o.NetworkTypes.experimental]:"",[o.NetworkTypes.sidechain]:"",[o.NetworkTypes.xls38]:"",[o.NetworkTypes.xahautest]:"https://explorer.xahau-test.net"},o.XrplOrgHost={[o.NetworkTypes.main]:"https://livenet.xrpl.org",[o.NetworkTypes.test]:"https://testnet.xrpl.org",[o.NetworkTypes.dev]:"https://devnet.xrpl.org",[o.NetworkTypes.xls30]:"",[o.NetworkTypes.hooks]:"",[o.NetworkTypes.live]:"",[o.NetworkTypes.experimental]:"",[o.NetworkTypes.sidechain]:"",[o.NetworkTypes.xls38]:"",[o.NetworkTypes.xahautest]:""},o.XRPScanHost={[o.NetworkTypes.main]:"https://xrpscan.com",[o.NetworkTypes.test]:"",[o.NetworkTypes.dev]:"",[o.NetworkTypes.xls30]:"",[o.NetworkTypes.hooks]:"",[o.NetworkTypes.live]:"",[o.NetworkTypes.experimental]:"",[o.NetworkTypes.sidechain]:"",[o.NetworkTypes.xls38]:"",[o.NetworkTypes.xahautest]:""},o.EvmSideChainHost={[o.NetworkTypes.dev]:"https://evm-sidechain.xrpl.org",[o.NetworkTypes.main]:"",[o.NetworkTypes.test]:"",[o.NetworkTypes.xls30]:"",[o.NetworkTypes.hooks]:"",[o.NetworkTypes.live]:"",[o.NetworkTypes.experimental]:"",[o.NetworkTypes.sidechain]:"",[o.NetworkTypes.xls38]:"",[o.NetworkTypes.xahautest]:""},o.ExplorerAddressPath={[o.XRPLExplorers.bithomp]:"",[o.XRPLExplorers.xrplorg]:"/address",[o.XRPLExplorers.xrplf]:"",[o.XRPLExplorers.xrpscan]:"/account",[o.EVMExplorers.evmSideChain]:"/address"},o.ExplorerTxPath={[o.XRPLExplorers.bithomp]:"",[o.XRPLExplorers.xrplorg]:"/transactions",[o.XRPLExplorers.xrplf]:"/tx",[o.XRPLExplorers.xrpscan]:"/tx",[o.EVMExplorers.evmSideChain]:"/tx"},o.availableProtocols=[o.Protocol.xrpl,o.Protocol.evm]},2083:(s,i,o)=>{var a;Object.defineProperty(i,"__esModule",{value:!0}),i.Types=void 0,o(7579).Types.Api.Types,i.Types=(a=class{},Q(a,"AgreementsSchema"),Q(a,"GeneralSchema"),Q(a,"NodeSchema"),Q(a,"CardSchema"),Q(a,"ContactSchema"),Q(a,"ProfileSchema"),Q(a,"SecuritySchema"),Q(a,"StateSchema"),Q(a,"UserSchema"),Q(a,"AppSchema"),Q(a,"PreferenceSchema"),Q(a,"VaultSchema"),Q(a,"MountedUserSchema"),Q(a,"SecurityTypes"),Q(a,"SecurityLevel"),Q(a,"Blank"),a)},4855:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Card=void 0;class o{}Q(o,"MappedAddresses"),Q(o,"ThemeArray"),Q(o,"Color");var a,u;i.Card=o,i=o||(i.Card=o={}),(a=i.TWCardColor||(i.TWCardColor={})).color1="tw-bg-cardGradient1",a.color2="tw-bg-cardGradient2",a.color3="tw-bg-cardGradient3",a.color4="tw-bg-cardGradient4",a.color5="tw-bg-cardGradient5",a.color6="tw-bg-cardGradient6",a.color7="tw-bg-cardGradient7",a.color8="tw-bg-cardGradient8",a.color9="tw-bg-cardGradient9",a.color10="tw-bg-cardGradient10",(u=a=i.cardColorTheme||(i.cardColorTheme={})).dark="Dark",u.light="Light",i.cardColorBg={[a.light]:"tw-bg-black",[a.dark]:"tw-bg-white"},i.cardColorStroke={[a.light]:"tw-stroke-black",[a.dark]:"tw-stroke-white"},i.cardColorText={[a.light]:"tw-text-black",[a.dark]:"tw-text-white"},i.cardColorFill={[a.light]:"tw-fill-black",[a.dark]:"tw-fill-white"},(u=i.CardColor||(i.CardColor={})).color1="color1",u.color2="color2",u.color3="color3",u.color4="color4",u.color5="color5",u.color6="color6",u.color7="color7",u.color8="color8",u.color9="color9",u.color10="color10"},4284:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AES_CBC=void 0;var a=o(6914);i.AES_CBC=class{constructor(){Q(this,"algo"),Q(this,"type",a.AlgoTypes.aes_cbc),Q(this,"iv"),Q(this,"derivation"),Q(this,"encrypt"),Q(this,"decrypt")}}},410:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AES_GCM=void 0;var a=o(6914);i.AES_GCM=class{constructor(){Q(this,"algo"),Q(this,"type",a.AlgoTypes.aes_gcm),Q(this,"iv"),Q(this,"tag"),Q(this,"derivation"),Q(this,"encrypt"),Q(this,"decrypt")}}},6914:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AlgoTypes=void 0,i.AlgoTypes={standard:"sha512",pbkdf2:"pbkdf2-sha512",aes_cbc:"aes-512-cbc",aes_gcm:"aes-512-gcm"}},2625:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Standard=i.PBKDF2=i.AES_CBC=i.AES_GCM=void 0;var a=o(410),u=(Object.defineProperty(i,"AES_GCM",{enumerable:!0,get:function(){return a.AES_GCM}}),o(4284)),c=(Object.defineProperty(i,"AES_CBC",{enumerable:!0,get:function(){return u.AES_CBC}}),o(1055)),l=(Object.defineProperty(i,"PBKDF2",{enumerable:!0,get:function(){return c.PBKDF2}}),o(8633));Object.defineProperty(i,"Standard",{enumerable:!0,get:function(){return l.Standard}})},1055:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PBKDF2=void 0;var a=o(6914);i.PBKDF2=class{constructor(){Q(this,"type",a.AlgoTypes.pbkdf2),Q(this,"iterations"),Q(this,"keylet"),Q(this,"iv"),Q(this,"encrypt")}}},8633:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Standard=void 0;var a=o(6914);i.Standard=class{constructor(){Q(this,"type",a.AlgoTypes.standard),Q(this,"encrypt")}}},4575:function(s,i,h){var a=this&&this.__createBinding||(Object.create?function(g,y,b,A){A===void 0&&(A=b);var E=Object.getOwnPropertyDescriptor(y,b);E&&("get"in E?y.__esModule:!E.writable&&!E.configurable)||(E={enumerable:!0,get:function(){return y[b]}}),Object.defineProperty(g,A,E)}:function(g,y,b,A){g[A=A===void 0?b:A]=y[b]}),u=this&&this.__setModuleDefault||(Object.create?function(g,y){Object.defineProperty(g,"default",{enumerable:!0,value:y})}:function(g,y){g.default=y}),f=this&&this.__importStar||function(g){if(g&&g.__esModule)return g;var y={};if(g!=null)for(var b in g)b!=="default"&&Object.prototype.hasOwnProperty.call(g,b)&&a(y,g,b);return u(y,g),y},c=(Object.defineProperty(i,"__esModule",{value:!0}),i.Types=void 0,h(1437)),l=f(h(2083)),d=f(h(4855)),f=f(h(2789)),h=h(2164);class p{}Q(p,"AllNetworks",c.AllNetworks),Q(p,"AllNodeTypes",c.AllNetworks.AllNodeTypes),Q(p,"AllNodeExplorers",c.AllNetworks.AllNodeExplorers),Q(p,"AllProtocols",h.Protocols),Q(p,"Api",l),Q(p,"Card",d.Card),Q(p,"Security",f.Security),Q(p,"BasicNetwork"),Q(p,"BasicUser"),Q(p,"NodeTypes"),Q(p,"NodeExplorers"),Q(p,"Protocols"),Q(p,"Networks"),Q(p,"Icons"),Q(p,"EncryptionTypes"),Q(p,"EncryptTypes"),Q(p,"CardEncryptionTypes"),Q(p,"PasscodeEncryptionTypes"),Q(p,"availableProtocols",[h.Protocols.xrpl,h.Protocols.evm]),Q(p,"NetworkIdentifiers",{[c.AllNetworks.NetworkLabels.xrpl]:c.AllNetworks.XrplLedger,[c.AllNetworks.NetworkLabels.xevm]:c.AllNetworks.Xevm,[c.AllNetworks.NetworkLabels.xahau]:c.AllNetworks.Xahau}),i.Types=p},8950:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.NetworkIcons=void 0,i.NetworkIcons={xrpl:"/assets/chains/xrpl/info/logo.png",xevm:"/assets/chains/xevm/info/logo.jpg",xahau:"/assets/chains/xahau/info/logo.jpg"}},7782:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.NetworkLabels=void 0,i.NetworkLabels={xrpl:"xrp ledger",xevm:"xevm sidechain",xahau:"xahau"}},1437:(s,i,d)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AllNetworks=void 0;var a=d(1396),u=d(1743),c=d(4942),l=d(8950),d=d(7782),f=a.XahauNetwork.NetworkTypes,h=u.XrplLedgerNetwork.NetworkTypes,p=c.XevmNetwork.NetworkTypes,g=a.XahauNetwork.Explorers,y=u.XrplLedgerNetwork.Explorers,b=c.XevmNetwork.Explorers;class A{}Q(A,"Xahau",a.XahauNetwork),Q(A,"XrplLedger",u.XrplLedgerNetwork),Q(A,"Xevm",c.XevmNetwork),Q(A,"AllNodeTypes",{xahau:f,xrpl:h,xevm:p}),Q(A,"AllNodeExplorers",{xahauExpl:g,xrplExpl:y,xevmExpl:b}),Q(A,"NetworkLabels",d.NetworkLabels),Q(A,"NetworkIcons",l.NetworkIcons),i.AllNetworks=A},1396:(s,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XahauNetwork=void 0;var a,u=l(2164),c=l(8950),l=l(7782);class d{}Q(d,"protocol",u.Protocols.xrpl),Q(d,"Types"),Q(d,"label",l.NetworkLabels.xahau),Q(d,"icon",c.NetworkIcons.xahau),Q(d,"asset","XAH"),Q(d,"active",!0),Q(d,"defaultReserves",{base:"1",inc:"0.2"}),i.XahauNetwork=d,a=d||(i.XahauNetwork=d={}),(u=a.NetworkTypes||(a.NetworkTypes={})).mainnet="mainnet",u.testnet="testnet",u.devnet="devnet",(u=a.Explorers||(a.Explorers={})).bithomp="bithomp",u.xrplf="xrplf",u.xrplorg="xrpl.org",a.colors={[a.NetworkTypes.mainnet]:"tw-bg-[#38DBFF]",[a.NetworkTypes.devnet]:"tw-bg-[#38FFDB]",[a.NetworkTypes.testnet]:"tw-bg-[#DE7EFF]"},a.BithompHost={[a.NetworkTypes.mainnet]:"https://xahauexplorer.com",[a.NetworkTypes.testnet]:"https://test.xahauexplorer.com",[a.NetworkTypes.devnet]:""},a.XrplfHost={[a.NetworkTypes.mainnet]:"https://explorer.xahau.network",[a.NetworkTypes.testnet]:"https://explorer.xahau-test.net",[a.NetworkTypes.devnet]:""},a.XrplOrgHost={[a.NetworkTypes.mainnet]:"https://xahau.xrpl.org",[a.NetworkTypes.testnet]:"https://xahau-testnet.xrpl.org",[a.NetworkTypes.devnet]:""},a.Hosts={[a.Explorers.bithomp]:a.BithompHost,[a.Explorers.xrplf]:a.XrplfHost,[a.Explorers.xrplorg]:a.XrplOrgHost},a.ExplorerAddressPath={[a.Explorers.bithomp]:"",[a.Explorers.xrplf]:"/address",[a.Explorers.xrplorg]:"/accounts"},a.ExplorerTxPath={[a.Explorers.bithomp]:"",[a.Explorers.xrplf]:"/tx",[a.Explorers.xrplorg]:"/transactions"},a.getExplorerHost=(f,h)=>f===a.Explorers.bithomp?a.BithompHost[h]:f===a.Explorers.xrplf?a.XrplfHost[h]:f===a.Explorers.xrplorg?a.XrplOrgHost[h]:void 0,a.getExplorerPath=(f,h)=>h==="address"?a.ExplorerAddressPath[f]:h==="tx"?a.ExplorerTxPath[f]:void 0},4942:(s,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XevmNetwork=void 0;var a,u=l(2164),c=l(8950),l=l(7782);class d{}Q(d,"protocol",u.Protocols.evm),Q(d,"Types"),Q(d,"label",l.NetworkLabels.xevm),Q(d,"icon",c.NetworkIcons.xevm),Q(d,"asset","EXRP"),Q(d,"active",!1),Q(d,"defaultReserves",{base:"0",inc:"0"}),i.XevmNetwork=d,a=d||(i.XevmNetwork=d={}),(u=a.NetworkTypes||(a.NetworkTypes={})).mainnet="mainnet",u.testnet="testnet",u.devnet="devnet",(a.Explorers||(a.Explorers={})).peersyst="peersyst",a.colors={[a.NetworkTypes.mainnet]:"tw-bg-[#38DBFF]",[a.NetworkTypes.testnet]:"tw-bg-[#DE7EFF]",[a.NetworkTypes.devnet]:"tw-bg-[#FFB648]"},a.PeersysHost={[a.NetworkTypes.mainnet]:"",[a.NetworkTypes.testnet]:"",[a.NetworkTypes.devnet]:"https://evm-sidechain.xrpl.org"},a.Hosts={[a.Explorers.peersyst]:a.PeersysHost},a.ExplorerAddressPath={[a.Explorers.peersyst]:"/address"},a.ExplorerTxPath={[a.Explorers.peersyst]:"/tx"},a.getExplorerHost=(f,h)=>{if(f===a.Explorers.peersyst)return a.PeersysHost[h]},a.getExplorerPath=(f,h)=>h==="address"?a.ExplorerAddressPath[f]:h==="tx"?a.ExplorerTxPath[f]:void 0},1743:(s,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XrplLedgerNetwork=void 0;var a,u=l(2164),c=l(8950),l=l(7782);class d{}Q(d,"protocol",u.Protocols.xrpl),Q(d,"Types"),Q(d,"label",l.NetworkLabels.xrpl),Q(d,"icon",c.NetworkIcons.xrpl),Q(d,"asset","XRP"),Q(d,"active",!0),Q(d,"defaultReserves",{base:"10",inc:"2"}),i.XrplLedgerNetwork=d,a=d||(i.XrplLedgerNetwork=d={}),(u=a.NetworkTypes||(a.NetworkTypes={})).mainnet="mainnet",u.testnet="testnet",u.devnet="devnet",u.xls30d="xls30d",u.xls38d="xls38d",(u=a.Explorers||(a.Explorers={})).bithomp="bithomp",u.xrplorg="xrpl.org",u.xrplf="xrplf",u.xrpscan="xrpscan",a.colors={[a.NetworkTypes.mainnet]:"tw-bg-[#38DBFF]",[a.NetworkTypes.testnet]:"tw-bg-[#DE7EFF]",[a.NetworkTypes.devnet]:"tw-bg-[#FFB648]",[a.NetworkTypes.xls30d]:"tw-bg-[#FF9C7C]",[a.NetworkTypes.xls38d]:"tw-bg-[#C34D27]"},a.BithompHost={[a.NetworkTypes.mainnet]:"https://bithomp.com/explorer",[a.NetworkTypes.testnet]:"https://test.bithomp.com/explorer",[a.NetworkTypes.devnet]:"https://dev.bithomp.com/explorer",[a.NetworkTypes.xls30d]:"https://amm.bithomp.com/explorer",[a.NetworkTypes.xls38d]:""},a.XrplfHost={[a.NetworkTypes.mainnet]:"https://explorer.xrplf.org",[a.NetworkTypes.testnet]:"https://explorer-testnet.xrplf.org",[a.NetworkTypes.devnet]:"",[a.NetworkTypes.xls30d]:"",[a.NetworkTypes.xls38d]:""},a.XrplOrgHost={[a.NetworkTypes.mainnet]:"https://livenet.xrpl.org",[a.NetworkTypes.testnet]:"https://testnet.xrpl.org",[a.NetworkTypes.devnet]:"https://devnet.xrpl.org",[a.NetworkTypes.xls30d]:"",[a.NetworkTypes.xls38d]:""},a.XRPScanHost={[a.NetworkTypes.mainnet]:"https://xrpscan.com",[a.NetworkTypes.testnet]:"",[a.NetworkTypes.devnet]:"",[a.NetworkTypes.xls30d]:"",[a.NetworkTypes.xls38d]:""},a.Hosts={[a.Explorers.bithomp]:a.BithompHost,[a.Explorers.xrplf]:a.XrplfHost,[a.Explorers.xrplorg]:a.XrplOrgHost,[a.Explorers.xrpscan]:a.XRPScanHost},a.ExplorerAddressPath={[a.Explorers.bithomp]:"",[a.Explorers.xrplorg]:"/address",[a.Explorers.xrplf]:"",[a.Explorers.xrpscan]:"/account"},a.ExplorerTxPath={[a.Explorers.bithomp]:"",[a.Explorers.xrplorg]:"/transactions",[a.Explorers.xrplf]:"/tx",[a.Explorers.xrpscan]:"/tx"},a.getExplorerHost=(f,h)=>f===a.Explorers.bithomp?a.BithompHost[h]:f===a.Explorers.xrplf?a.XrplfHost[h]:f===a.Explorers.xrplorg?a.XrplOrgHost[h]:f===a.Explorers.xrpscan?a.XRPScanHost[h]:void 0,a.getExplorerPath=(f,h)=>h==="address"?a.ExplorerAddressPath[f]:h==="tx"?a.ExplorerTxPath[f]:void 0},2164:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Protocols=void 0,i.Protocols={xrpl:"XRPL",evm:"EVM",btc:"BTC",bsc:"BSC",ada:"ADA",sol:"SOL",usd:"USD"}},2789:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Security=void 0;const a=o(2625);class u{}Q(u,"EncryptTypes"),Q(u,"AlgoTypes",o(6914).AlgoTypes),((i.Security=u)||(i.Security=u={})).AllEncryptionTypes={AES_CBC:a.AES_CBC,AES_GCM:a.AES_GCM,PBKDF2:a.PBKDF2,Standard:a.Standard}},7083:(s,i,o)=>{var a;Object.defineProperty(i,"__esModule",{value:!0}),i.Types=void 0,o(4575).Types.Api.Types,i.Types=(a=class{},Q(a,"AgreementsSchema"),Q(a,"GeneralSchema"),Q(a,"NodeSchema"),Q(a,"CardSchema"),Q(a,"ContactSchema"),Q(a,"ProfileSchema"),Q(a,"SecuritySchema"),Q(a,"StateSchema"),Q(a,"UserSchema"),Q(a,"AppSchema"),Q(a,"PreferenceSchema"),Q(a,"VaultSchema"),Q(a,"MountedUserSchema"),Q(a,"SecurityTypes"),Q(a,"SecurityLevel"),Q(a,"Blank"),a)},191:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Apps=void 0;class o{}Q(o,"AppTitle"),Q(o,"AppTypes"),i.Apps=o,(i=(i=o||(i.Apps=o={})).titles||(i.titles={})).crossmark="crossmark",i.embark="embark"},5659:function(s,i,g){var a=this&&this.__createBinding||(Object.create?function(b,A,E,_){_===void 0&&(_=E);var S=Object.getOwnPropertyDescriptor(A,E);S&&("get"in S?A.__esModule:!S.writable&&!S.configurable)||(S={enumerable:!0,get:function(){return A[E]}}),Object.defineProperty(b,_,S)}:function(b,A,E,_){b[_=_===void 0?E:_]=A[E]}),u=this&&this.__setModuleDefault||(Object.create?function(b,A){Object.defineProperty(b,"default",{enumerable:!0,value:A})}:function(b,A){b.default=A}),p=this&&this.__importStar||function(b){if(b&&b.__esModule)return b;var A={};if(b!=null)for(var E in b)E!=="default"&&Object.prototype.hasOwnProperty.call(b,E)&&a(A,b,E);return u(A,b),A},c=(Object.defineProperty(i,"__esModule",{value:!0}),i.Projects=i.BasicUser=i.BasicNetwork=i.Types=void 0,g(1437)),l=p(g(7083)),d=p(g(4855)),f=p(g(2789)),h=p(g(8084)),p=p(g(191)),g=g(2164);class y{}Q(y,"AllNetworks",c.AllNetworks),Q(y,"AllNodeTypes",c.AllNetworks.AllNodeTypes),Q(y,"AllNodeExplorers",c.AllNetworks.AllNodeExplorers),Q(y,"Themes",h),Q(y,"Apps",p),Q(y,"AllProtocols",g.Protocols),Q(y,"Api",l),Q(y,"Card",d.Card),Q(y,"Security",f.Security),Q(y,"BasicNetwork"),Q(y,"BasicUser"),Q(y,"NodeTypes"),Q(y,"NodeExplorers"),Q(y,"Protocols"),Q(y,"Networks"),Q(y,"Icons"),Q(y,"EncryptionTypes"),Q(y,"EncryptTypes"),Q(y,"CardEncryptionTypes"),Q(y,"PasscodeEncryptionTypes"),Q(y,"availableProtocols",[g.Protocols.xrpl,g.Protocols.evm]),Q(y,"NetworkIdentifiers",{[c.AllNetworks.NetworkLabels.xrpl]:c.AllNetworks.XrplLedger,[c.AllNetworks.NetworkLabels.xevm]:c.AllNetworks.Xevm,[c.AllNetworks.NetworkLabels.xahau]:c.AllNetworks.Xahau}),i.Types=y,i.BasicNetwork=y.BasicNetwork,i.BasicUser=y.BasicUser,i.Projects=p.Apps},8084:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Themes=void 0;const a=o(191);class u{}Q(u,"ThemeTypes");var c;i.Themes=u,o=u||(i.Themes=u={}),(c=i=o.availableThemes||(o.availableThemes={})).theme1="theme1",c.theme2="theme2",c.theme3="theme3",c.theme4="theme4",c.theme5="theme5",c.theme6="theme6",o.DefaultThemes={[a.Apps.titles.crossmark]:i.theme1,[a.Apps.titles.embark]:i.theme6},o.CrossmarkThemeKey={[i.theme1]:"light",[i.theme2]:"dark",[i.theme3]:"moon",[i.theme4]:"sun",[i.theme5]:"blueberry",[i.theme6]:"treeberry"},o.EmbarkThemeKey={[i.theme1]:"",[i.theme2]:"",[i.theme3]:"",[i.theme4]:"",[i.theme5]:"",[i.theme6]:"treeberry"},o.ThemeKey={[a.Apps.titles.crossmark]:o.CrossmarkThemeKey,[a.Apps.titles.embark]:o.EmbarkThemeKey},o.ToastColor={[i.theme1]:"light",[i.theme2]:"dark",[i.theme3]:"light",[i.theme4]:"light",[i.theme5]:"dark",[i.theme6]:"dark"},o.SpinnerColor={[i.theme1]:"black",[i.theme2]:"white",[i.theme3]:"black",[i.theme4]:"black",[i.theme5]:"light",[i.theme6]:"light"}},2876:function(s,i,l){var a=this&&this.__createBinding||(Object.create?function(f,h,p,g){g===void 0&&(g=p);var y=Object.getOwnPropertyDescriptor(h,p);y&&("get"in y?h.__esModule:!y.writable&&!y.configurable)||(y={enumerable:!0,get:function(){return h[p]}}),Object.defineProperty(f,g,y)}:function(f,h,p,g){f[g=g===void 0?p:g]=h[p]}),u=this&&this.__setModuleDefault||(Object.create?function(f,h){Object.defineProperty(f,"default",{enumerable:!0,value:h})}:function(f,h){f.default=h}),c=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var h={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&a(h,f,p);return u(h,f),h},c=(Object.defineProperty(i,"__esModule",{value:!0}),i.Types=void 0,c(l(4080))),l=l(5659).Types.Api.Types;class d{}Q(d,"AgreementsSchema"),Q(d,"GeneralSchema"),Q(d,"NodeSchema"),Q(d,"ContactSchema"),Q(d,"ProfileSchema"),Q(d,"AppSchema"),Q(d,"PreferenceSchema"),Q(d,"VaultSchema"),Q(d,"CardSchema"),Q(d,"StateSchema"),Q(d,"SecuritySchema"),Q(d,"UserSchema"),Q(d,"MountedUserSchema"),Q(d,"SecurityTypes",c),Q(d,"SecurityLevel",l.SecurityLevel),Q(d,"Blank"),i.Types=d},43:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Apps=void 0;class o{}Q(o,"AppTitle"),Q(o,"AppTypes"),i.Apps=o,(i=(i=o||(i.Apps=o={})).titles||(i.titles={})).crossmark="crossmark",i.embark="embark"},9455:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Index=void 0,i.Index=class{constructor(){Q(this,"algo"),Q(this,"type"),Q(this,"opts")}}},3710:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.HashTypes=i.AesTypes=i.Standard=i.Pbkdf2=i.hash=i.aes=void 0;var a=o(9455);Object.defineProperty(i,"aes",{enumerable:!0,get:function(){return a.Index}});const u=o(1261),c=(Object.defineProperty(i,"Standard",{enumerable:!0,get:function(){return u.Index}}),o(4483));Object.defineProperty(i,"Pbkdf2",{enumerable:!0,get:function(){return c.Index}}),i.hash={Pbkdf2:c.Index,Standard:u.Index},i.AesTypes={cbc:"aes-cbc",gcm:"aes-gcm",ctr:"aes-ctr",cfb:"aes-cfb",ecb:"aes-ecb",ofb:"aes-ofb"},i.HashTypes={standard:"hmac256",pbkdf2:"pbkdf2"}},4483:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Index=void 0;var a=o(3710);i.Index=class{constructor(){Q(this,"type",a.HashTypes.pbkdf2),Q(this,"opts"),Q(this,"make")}}},1261:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Index=void 0;var a=o(3710);i.Index=class{constructor(){Q(this,"type",a.HashTypes.standard),Q(this,"make")}}},5541:function(s,i,g){var a=this&&this.__createBinding||(Object.create?function(b,A,E,_){_===void 0&&(_=E);var S=Object.getOwnPropertyDescriptor(A,E);S&&("get"in S?A.__esModule:!S.writable&&!S.configurable)||(S={enumerable:!0,get:function(){return A[E]}}),Object.defineProperty(b,_,S)}:function(b,A,E,_){b[_=_===void 0?E:_]=A[E]}),u=this&&this.__setModuleDefault||(Object.create?function(b,A){Object.defineProperty(b,"default",{enumerable:!0,value:A})}:function(b,A){b.default=A}),p=this&&this.__importStar||function(b){if(b&&b.__esModule)return b;var A={};if(b!=null)for(var E in b)E!=="default"&&Object.prototype.hasOwnProperty.call(b,E)&&a(A,b,E);return u(A,b),A},c=(Object.defineProperty(i,"__esModule",{value:!0}),i.AllHashTypes=i.AllEncryptionTypes=i.Projects=i.BasicUser=i.BasicNetwork=i.Types=void 0,g(1437)),l=p(g(2876)),d=p(g(4855)),f=p(g(4080)),h=p(g(2897)),p=p(g(43)),g=g(2164);class y{}Q(y,"AllNetworks",c.AllNetworks),Q(y,"AllNodeTypes",c.AllNetworks.AllNodeTypes),Q(y,"AllNodeExplorers",c.AllNetworks.AllNodeExplorers),Q(y,"Themes",h),Q(y,"Apps",p),Q(y,"AllProtocols",g.Protocols),Q(y,"Api",l),Q(y,"Card",d.Card),Q(y,"Security",f),Q(y,"BasicNetwork"),Q(y,"BasicUser"),Q(y,"NodeTypes"),Q(y,"NodeExplorers"),Q(y,"Protocols"),Q(y,"Networks"),Q(y,"Icons"),Q(y,"EncryptionTypes"),Q(y,"EncryptTypes"),Q(y,"HashTypes"),Q(y,"CardEncryptionTypes"),Q(y,"PasscodeHashTypes"),Q(y,"availableProtocols",[g.Protocols.xrpl,g.Protocols.evm]),Q(y,"NetworkIdentifiers",{[c.AllNetworks.NetworkLabels.xrpl]:c.AllNetworks.XrplLedger,[c.AllNetworks.NetworkLabels.xevm]:c.AllNetworks.Xevm,[c.AllNetworks.NetworkLabels.xahau]:c.AllNetworks.Xahau}),i.Types=y,i.BasicNetwork=y.BasicNetwork,i.BasicUser=y.BasicUser,i.Projects=p.Apps,i.AllEncryptionTypes=f.AllEncryptionTypes,i.AllHashTypes=f.AllHashTypes},4080:function(s,i,o){var a=this&&this.__createBinding||(Object.create?function(l,d,f,h){h===void 0&&(h=f);var p=Object.getOwnPropertyDescriptor(d,f);p&&("get"in p?d.__esModule:!p.writable&&!p.configurable)||(p={enumerable:!0,get:function(){return d[f]}}),Object.defineProperty(l,h,p)}:function(l,d,f,h){l[h=h===void 0?f:h]=d[f]}),u=this&&this.__setModuleDefault||(Object.create?function(l,d){Object.defineProperty(l,"default",{enumerable:!0,value:d})}:function(l,d){l.default=d}),c=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var d={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&a(d,l,f);return u(d,l),d},c=(Object.defineProperty(i,"__esModule",{value:!0}),i.AllHashTypes=i.AllEncryptionTypes=void 0,c(o(3710)));i.AllEncryptionTypes={AES_CBC:c.AesTypes.cbc,AES_GCM:c.AesTypes.gcm,AES_CTR:c.AesTypes.ctr,AES_ECB:c.AesTypes.ecb,AES_OFB:c.AesTypes.ofb,AES_CFB:c.AesTypes.cfb},i.AllHashTypes={PBKDF2:c.HashTypes.pbkdf2,Standard:c.HashTypes.standard}},2897:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Themes=void 0;const a=o(43);class u{}Q(u,"ThemeTypes");var c;i.Themes=u,o=u||(i.Themes=u={}),(c=i=o.availableThemes||(o.availableThemes={})).theme1="theme1",c.theme2="theme2",c.theme3="theme3",c.theme4="theme4",c.theme5="theme5",c.theme6="theme6",o.DefaultThemes={[a.Apps.titles.crossmark]:i.theme1,[a.Apps.titles.embark]:i.theme6},o.CrossmarkThemeKey={[i.theme1]:"light",[i.theme2]:"dark",[i.theme3]:"moon",[i.theme4]:"sun",[i.theme5]:"blueberry",[i.theme6]:"treeberry"},o.EmbarkThemeKey={[i.theme1]:"",[i.theme2]:"",[i.theme3]:"",[i.theme4]:"",[i.theme5]:"",[i.theme6]:"treeberry"},o.ThemeKey={[a.Apps.titles.crossmark]:o.CrossmarkThemeKey,[a.Apps.titles.embark]:o.EmbarkThemeKey},o.ToastColor={[i.theme1]:"light",[i.theme2]:"dark",[i.theme3]:"light",[i.theme4]:"light",[i.theme5]:"dark",[i.theme6]:"dark"},o.SpinnerColor={[i.theme1]:"black",[i.theme2]:"white",[i.theme3]:"black",[i.theme4]:"black",[i.theme5]:"light",[i.theme6]:"light"}},9815:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.HashTypes=i.EncryptionAlgos=i.Projects=i.BasicUser=i.BasicNetwork=i.CatchAllEvent=i.TYPES=i.COMMANDS=i.EVENTS=i.Events=i.Models=i.Config=void 0;var a=o(2025),u=(Object.defineProperty(i,"Config",{enumerable:!0,get:function(){return a.Config}}),o(9291)),c=(Object.defineProperty(i,"Models",{enumerable:!0,get:function(){return u.Models}}),o(7268)),l=(Object.defineProperty(i,"Events",{enumerable:!0,get:function(){return c.Events}}),o(4151)),d=(Object.defineProperty(i,"EVENTS",{enumerable:!0,get:function(){return l.EVENTS}}),Object.defineProperty(i,"COMMANDS",{enumerable:!0,get:function(){return l.COMMANDS}}),Object.defineProperty(i,"TYPES",{enumerable:!0,get:function(){return l.TYPES}}),Object.defineProperty(i,"CatchAllEvent",{enumerable:!0,get:function(){return l.CatchAllEvent}}),o(5541));Object.defineProperty(i,"BasicNetwork",{enumerable:!0,get:function(){return d.BasicNetwork}}),Object.defineProperty(i,"BasicUser",{enumerable:!0,get:function(){return d.BasicUser}}),Object.defineProperty(i,"Projects",{enumerable:!0,get:function(){return d.Projects}}),Object.defineProperty(i,"EncryptionAlgos",{enumerable:!0,get:function(){return d.AllEncryptionTypes}}),Object.defineProperty(i,"HashTypes",{enumerable:!0,get:function(){return d.AllHashTypes}})}},r={};return(function s(i){var o=r[i];return o===void 0&&(o=r[i]={exports:{}},n[i].call(o.exports,o,o.exports,s)),o.exports})(4240)})())})(ZS);var TD=ZS.exports;const pl=aa(TD);class MD{constructor(t={}){this.id="crossmark",this.name="Crossmark",this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjE1MCIgaGVpZ2h0PSIxNDgiPgo8cGF0aCBkPSJNMCAwIEM0OS41IDAgOTkgMCAxNTAgMCBDMTUwIDQ4Ljg0IDE1MCA5Ny42OCAxNTAgMTQ4IEMxMDAuNSAxNDggNTEgMTQ4IDAgMTQ4IEMwIDk5LjE2IDAgNTAuMzIgMCAwIFogIiBmaWxsPSIjRTE0QzQ3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDApIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuMTU0NTE2NSAxLjM0NDczMTcyIDUuODE3Mjg5NzcgMy4zMDUxNTA3OSA4LjU3NDIxODc1IDUuMzEyNSBDMTkuNzIxNjI5NDEgMTMuMzg2NTU5MTIgMjguNzgyNDI2MTMgMTQuNjU0ODMzNDcgNDIuMTk5MjE4NzUgMTMuOTM3NSBDNTAuNTE1OTg5OTcgMTIuNTE1MjExNTkgNTguMzgzMTU2NzYgNy41OTg0NjY2MyA2NC41NzQyMTg3NSAyIEM2Ny4xOTkyMTg3NSAtMC4wNjI1IDY3LjE5OTIxODc1IC0wLjA2MjUgNjkuMTU2MjUgMC4xMzY3MTg3NSBDNzEuNDIzOTM1NzIgMS4wMjU1ODIxOCA3Mi43NjEwMjIyNyAyLjAwMTk2NTkyIDc0LjUxMTcxODc1IDMuNjg3NSBDNzUuMzEwMjkyOTcgNC40MjIyNjU2MyA3NS4zMTAyOTI5NyA0LjQyMjI2NTYzIDc2LjEyNSA1LjE3MTg3NSBDNzcuMTk5MjE4NzUgNi45Mzc1IDc3LjE5OTIxODc1IDYuOTM3NSA3Ny4xNDA2MjUgOS4yMTQ4NDM3NSBDNzUuNjgzMDU4OCAxMy40MzAyOTQ1NSA3My4xMjc0ODczOSAxNi44NjQ0NjQ1NyA3MC42MTMyODEyNSAyMC41MDE5NTMxMiBDNjUuNjQ0Nzg3OTggMjcuODk3NDg5OTkgNjMuNjQ1Nzk5NDkgMzQuMzg5NDEyNDEgNjMuNzYxNzE4NzUgNDMuMzEyNSBDNjMuNzc2MzQxNTUgNDQuNTcyNDc4MDMgNjMuNzc2MzQxNTUgNDQuNTcyNDc4MDMgNjMuNzkxMjU5NzcgNDUuODU3OTEwMTYgQzY0LjA5MjU1MDcxIDU2LjM4Nzc3MzE5IDY3LjkyODcwODczIDYzLjIzNzYwNTk3IDc0LjI4ODgxODM2IDcxLjM4NjIzMDQ3IEM3Ni4xODQ1NDY3MSA3My45MDk5NDU4IDc3LjIxMTYzNjA1IDc1LjQwNTg4NDQzIDc3LjEzNjcxODc1IDc4LjYxMzI4MTI1IEM3Ni4xNTk2MjEwOCA4MS4wMzU2NjkyMiA3NS4yMjg5ODA2OCA4Mi40NzQ5MDIwMyA3My4zODY3MTg3NSA4NC4zMTI1IEM3Mi44ODUyNzM0NCA4NC44MzU4NTkzNyA3Mi4zODM4MjgxMiA4NS4zNTkyMTg3NSA3MS44NjcxODc1IDg1Ljg5ODQzNzUgQzcwLjE5OTIxODc1IDg2LjkzNzUgNzAuMTk5MjE4NzUgODYuOTM3NSA2OC4yODkwNjI1IDg2LjgwNDY4NzUgQzY1LjczNzc1NjY4IDg1Ljc0NjAxNDgxIDYzLjc4NTM0MDkxIDg0LjM0NDA0MTAzIDYxLjU3NDIxODc1IDgyLjY4NzUgQzQ5LjgzNTgyNzgyIDc0LjI3MzI1NTE3IDM5LjU2MzA4NzIxIDcxLjkzMTg3OTEyIDI1LjE5OTIxODc1IDcyLjkzNzUgQzE3LjcyNDQ2NzQ4IDc0LjQzNjc2NDY4IDExLjg5MzA0NiA3OS4wNDU3OTE2NiA2LjAxOTI4NzExIDgzLjY3MTM4NjcyIEMxLjc0NTc1MTM4IDg2Ljk0NjIwNTgzIDEuNzQ1NzUxMzggODYuOTQ2MjA1ODMgLTEuMDA3ODEyNSA4Ni45MDIzNDM3NSBDLTIuOTg4MDU0NTYgODUuODM2NzIzMyAtNC40OTE1OTEwNSA4NC43NDg4Mjk1MiAtNi4xMTMyODEyNSA4My4xODc1IEMtNi42NDU2NjQwNiA4Mi42OTc2NTYyNSAtNy4xNzgwNDY4NyA4Mi4yMDc4MTI1IC03LjcyNjU2MjUgODEuNzAzMTI1IEMtOC44MDA3ODEyNSA3OS45Mzc1IC04LjgwMDc4MTI1IDc5LjkzNzUgLTguNzA3MDMxMjUgNzcuNTYyNSBDLTcuNjE1MTk1OTcgNzQuMzk5OTQyNjMgLTYuMDU3NDk4MDMgNzIuMzEzMzcwNjUgLTMuOTg4MjgxMjUgNjkuNjg3NSBDMy44MTAzMTMyNSA1OS4zMDMzNDk5OCA2LjA2Nzg2NDI3IDQ5Ljg2ODg0NTUzIDUuMTk5MjE4NzUgMzYuOTM3NSBDMy43MTgyNjUxNSAyNy44NDc5Nzc0MiAtMS4yMTI1NjMxMyAyMC4yNjYxNDQwOCAtNy4wMTU2MjUgMTMuMjY1NjI1IEMtOC44MDA3ODEyNSAxMC45Mzc1IC04LjgwMDc4MTI1IDEwLjkzNzUgLTguOTI1NzgxMjUgOC41IEMtNy4zNDk5MTAxNyA0LjkxMDUxNTg3IC00LjM4MzcwMTUxIC0wLjE1MjE0NTgyIDAgMCBaICIgZmlsbD0iI0UyNEU0NyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDAuODAwNzgxMjUsMzIuMDYyNSkiLz4KPHBhdGggZD0iTTAgMCBDMy4xNTQ1MTY1IDEuMzQ0NzMxNzIgNS44MTcyODk3NyAzLjMwNTE1MDc5IDguNTc0MjE4NzUgNS4zMTI1IEMxOS43MjE2Mjk0MSAxMy4zODY1NTkxMiAyOC43ODI0MjYxMyAxNC42NTQ4MzM0NyA0Mi4xOTkyMTg3NSAxMy45Mzc1IEM1MC41MTU5ODk5NyAxMi41MTUyMTE1OSA1OC4zODMxNTY3NiA3LjU5ODQ2NjYzIDY0LjU3NDIxODc1IDIgQzY3LjE5OTIxODc1IC0wLjA2MjUgNjcuMTk5MjE4NzUgLTAuMDYyNSA2OS4xNTYyNSAwLjEzNjcxODc1IEM3MS40MjM5MzU3MiAxLjAyNTU4MjE4IDcyLjc2MTAyMjI3IDIuMDAxOTY1OTIgNzQuNTExNzE4NzUgMy42ODc1IEM3NS4zMTAyOTI5NyA0LjQyMjI2NTYzIDc1LjMxMDI5Mjk3IDQuNDIyMjY1NjMgNzYuMTI1IDUuMTcxODc1IEM3Ny4xOTkyMTg3NSA2LjkzNzUgNzcuMTk5MjE4NzUgNi45Mzc1IDc3LjE0MDYyNSA5LjIxNDg0Mzc1IEM3NS42ODMwNTg4IDEzLjQzMDI5NDU1IDczLjEyNzQ4NzM5IDE2Ljg2NDQ2NDU3IDcwLjYxMzI4MTI1IDIwLjUwMTk1MzEyIEM2NS42NDQ3ODc5OCAyNy44OTc0ODk5OSA2My42NDU3OTk0OSAzNC4zODk0MTI0MSA2My43NjE3MTg3NSA0My4zMTI1IEM2My43NzYzNDE1NSA0NC41NzI0NzgwMyA2My43NzYzNDE1NSA0NC41NzI0NzgwMyA2My43OTEyNTk3NyA0NS44NTc5MTAxNiBDNjQuMDkyNTUwNzEgNTYuMzg3NzczMTkgNjcuOTI4NzA4NzMgNjMuMjM3NjA1OTcgNzQuMjg4ODE4MzYgNzEuMzg2MjMwNDcgQzc2LjE4NDU0NjcxIDczLjkwOTk0NTggNzcuMjExNjM2MDUgNzUuNDA1ODg0NDMgNzcuMTM2NzE4NzUgNzguNjEzMjgxMjUgQzc2LjE1OTYyMTA4IDgxLjAzNTY2OTIyIDc1LjIyODk4MDY4IDgyLjQ3NDkwMjAzIDczLjM4NjcxODc1IDg0LjMxMjUgQzcyLjg4NTI3MzQ0IDg0LjgzNTg1OTM3IDcyLjM4MzgyODEyIDg1LjM1OTIxODc1IDcxLjg2NzE4NzUgODUuODk4NDM3NSBDNzAuMTk5MjE4NzUgODYuOTM3NSA3MC4xOTkyMTg3NSA4Ni45Mzc1IDY4LjI4OTA2MjUgODYuODA0Njg3NSBDNjUuNzM3NzU2NjggODUuNzQ2MDE0ODEgNjMuNzg1MzQwOTEgODQuMzQ0MDQxMDMgNjEuNTc0MjE4NzUgODIuNjg3NSBDNDkuODM1ODI3ODIgNzQuMjczMjU1MTcgMzkuNTYzMDg3MjEgNzEuOTMxODc5MTIgMjUuMTk5MjE4NzUgNzIuOTM3NSBDMTcuNzI0NDY3NDggNzQuNDM2NzY0NjggMTEuODkzMDQ2IDc5LjA0NTc5MTY2IDYuMDE5Mjg3MTEgODMuNjcxMzg2NzIgQzEuNzQ1NzUxMzggODYuOTQ2MjA1ODMgMS43NDU3NTEzOCA4Ni45NDYyMDU4MyAtMS4wMDc4MTI1IDg2LjkwMjM0Mzc1IEMtMi45ODgwNTQ1NiA4NS44MzY3MjMzIC00LjQ5MTU5MTA1IDg0Ljc0ODgyOTUyIC02LjExMzI4MTI1IDgzLjE4NzUgQy02LjY0NTY2NDA2IDgyLjY5NzY1NjI1IC03LjE3ODA0Njg3IDgyLjIwNzgxMjUgLTcuNzI2NTYyNSA4MS43MDMxMjUgQy04LjgwMDc4MTI1IDc5LjkzNzUgLTguODAwNzgxMjUgNzkuOTM3NSAtOC43MDcwMzEyNSA3Ny41NjI1IEMtNy42MTUxOTU5NyA3NC4zOTk5NDI2MyAtNi4wNTc0OTgwMyA3Mi4zMTMzNzA2NSAtMy45ODgyODEyNSA2OS42ODc1IEMzLjgxMDMxMzI1IDU5LjMwMzM0OTk4IDYuMDY3ODY0MjcgNDkuODY4ODQ1NTMgNS4xOTkyMTg3NSAzNi45Mzc1IEMzLjcxODI2NTE1IDI3Ljg0Nzk3NzQyIC0xLjIxMjU2MzEzIDIwLjI2NjE0NDA4IC03LjAxNTYyNSAxMy4yNjU2MjUgQy04LjgwMDc4MTI1IDEwLjkzNzUgLTguODAwNzgxMjUgMTAuOTM3NSAtOC45MjU3ODEyNSA4LjUgQy03LjM0OTkxMDE3IDQuOTEwNTE1ODcgLTQuMzgzNzAxNTEgLTAuMTUyMTQ1ODIgMCAwIFogTS0wLjgwMDc4MTI1IDUuOTM3NSBDLTEuNDYwNzgxMjUgNi41OTc1IC0yLjEyMDc4MTI1IDcuMjU3NSAtMi44MDA3ODEyNSA3LjkzNzUgQy0yLjQ2MzgxNTI5IDExLjU2NTc2MTM1IC0wLjUxMTgyNzg0IDE0LjA1Nzg0MTI1IDEuNTExNzE4NzUgMTcgQzguMzE5MDQ1NjggMjcuNDI3NjUwNyAxMS42ODQ1MDAzOCAzOC40ODQ1NjM1IDkuNzM4MjgxMjUgNTAuODcxMDkzNzUgQzcuODQ2Nzc0NjggNTkuNDI3Mzc5MzUgNC40NTQ1MTI1NyA2Ny4wOTc5MjI2NyAtMS4yMzgyODEyNSA3My44MTI1IEMtMy4xMTg0ODE1IDc1Ljg3ODc2MTMyIC0zLjExODQ4MTUgNzUuODc4NzYxMzIgLTIuNTUwNzgxMjUgNzguNzUgQy0yLjMwMzI4MTI1IDc5LjQ3MTg3NSAtMi4wNTU3ODEyNSA4MC4xOTM3NSAtMS44MDA3ODEyNSA4MC45Mzc1IEMyLjMwMjQ2NDg1IDgwLjM5Mzc4MzY0IDQuNTgyNjIwNyA3OS4xNTY0ODIwOSA3LjgyNDIxODc1IDc2LjYyNSBDMTIuOTc1NTQxODYgNzIuODYzODM5MDUgMTguMTQyMTgyMDcgNzAuODEyMDU3MTEgMjQuMTk5MjE4NzUgNjguOTM3NSBDMjUuNjg0MjE4NzUgNjguNDQyNSAyNS42ODQyMTg3NSA2OC40NDI1IDI3LjE5OTIxODc1IDY3LjkzNzUgQzQxLjYyMjg4NzM4IDY2Ljk5MzQ4NTE2IDUyLjYwNzczOTY1IDcwLjA1NTgyMzY4IDY0LjEzNjcxODc1IDc4Ljg3NSBDNjYuODgxNTA4MyA4MS4xODkzMDk5NSA2Ni44ODE1MDgzIDgxLjE4OTMwOTk1IDY5LjMyODEyNSA4MC43NTM5MDYyNSBDNjkuOTQ1NTg1OTQgODAuNDg0NDkyMTkgNzAuNTYzMDQ2ODcgODAuMjE1MDc4MTMgNzEuMTk5MjE4NzUgNzkuOTM3NSBDNzEuNjk0MjE4NzUgNzguNDUyNSA3MS42OTQyMTg3NSA3OC40NTI1IDcyLjE5OTIxODc1IDc2LjkzNzUgQzcwLjg3ODUwNTUzIDc0LjY0NDg4NDk2IDY5LjUyMDE2NjgxIDcyLjUzNzQ2NDU0IDY4LjAxMTcxODc1IDcwLjM3NSBDNTkuNzUyMjc2ODkgNTcuODgyODkzNDQgNTcuNTcyNTQ5OTQgNDcuNjU4MjI5NyA1OS42MzY3MTg3NSAzMi43ODUxNTYyNSBDNjEuMDgzNzEzODUgMjYuNDgxNjgzODMgNjQuMDI1NDE3MTQgMjEuNTQ4NDE4NzkgNjcuNjc1NzgxMjUgMTYuMjUgQzY5LjM0MzIxNDk5IDEzLjkzNTIyNjY2IDY5LjM0MzIxNDk5IDEzLjkzNTIyNjY2IDcwLjE5OTIxODc1IDEwLjkzNzUgQzcwLjg1OTIxODc1IDEwLjkzNzUgNzEuNTE5MjE4NzUgMTAuOTM3NSA3Mi4xOTkyMTg3NSAxMC45Mzc1IEM3MS43MDQyMTg3NSA4Ljk1NzUgNzEuNzA0MjE4NzUgOC45NTc1IDcxLjE5OTIxODc1IDYuOTM3NSBDNjkuNDQwMzUwMDQgNi4xMzIxNzA4OCA2OS40NDAzNTAwNCA2LjEzMjE3MDg4IDY3LjE5OTIxODc1IDUuOTM3NSBDNjQuODM0MzUyMjkgNy4yMTc4MDQ2IDY0LjgzNDM1MjI5IDcuMjE3ODA0NiA2Mi41MTE3MTg3NSA5LjEyNSBDNTcuOTQ3MzMxODUgMTIuNDk5NTU0MDggNTMuNTA2NTE0NzYgMTQuOTUxOTY5MDUgNDguMTk5MjE4NzUgMTYuOTM3NSBDNDcuMjg5MTQwNjMgMTcuMjkzMjgxMjUgNDYuMzc5MDYyNSAxNy42NDkwNjI1IDQ1LjQ0MTQwNjI1IDE4LjAxNTYyNSBDMzUuNzQxNTkwMzQgMjAuNzczNjQ0OTQgMjUuMDE5Mzc3NDIgMTkuODU3MjIxMjEgMTUuOTkyMTg3NSAxNS41MTE3MTg3NSBDMTIuMDQ4ODgzNTkgMTMuMjg5MTI5MjggOC4yMjc0ODUxNSAxMC45MjQyODc4OCA0LjQ3NjU2MjUgOC4zOTA2MjUgQzIuMTgyMDUzMzkgNi43OTYzNzg4IDIuMTgyMDUzMzkgNi43OTYzNzg4IC0wLjgwMDc4MTI1IDUuOTM3NSBaICIgZmlsbD0iI0Y5RURFRCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDAuODAwNzgxMjUsMzIuMDYyNSkiLz4KPHBhdGggZD0iTTAgMCBDMC41ODEzNjcxOSAwLjIzMDc0MjE5IDEuMTYyNzM0MzcgMC40NjE0ODQzNyAxLjc2MTcxODc1IDAuNjk5MjE4NzUgQzAuNjc4OTA2MjUgMS41MDM1OTM3NSAwLjY3ODkwNjI1IDEuNTAzNTkzNzUgLTAuNDI1NzgxMjUgMi4zMjQyMTg3NSBDLTMuNDg2MTIzMjUgNC45MDg1MDc1NSAtNS43NTA0ODEzNiA3LjU3MTY5ODg5IC04LjIzODI4MTI1IDEwLjY5OTIxODc1IEMtOC45Mzc1IDguOTM3NSAtOC45Mzc1IDguOTM3NSAtOS4yMzgyODEyNSA2LjY5OTIxODc1IEMtNy45NDUzMTI1IDQuNzQyMTg3NSAtNy45NDUzMTI1IDQuNzQyMTg3NSAtNi4wNTA3ODEyNSAyLjg4NjcxODc1IEMtNS40Mzg0NzY1NiAyLjI2MTUyMzQ0IC00LjgyNjE3MTg4IDEuNjM2MzI4MTIgLTQuMTk1MzEyNSAwLjk5MjE4NzUgQy0yLjIzODI4MTI1IC0wLjMwMDc4MTI1IC0yLjIzODI4MTI1IC0wLjMwMDc4MTI1IDAgMCBaICIgZmlsbD0iI0Y1REFERSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDEuMjM4MjgxMjUsMzIuMzAwNzgxMjUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzIuMzEgMCA0LjYyIDAgNyAwIEM2LjAyNDMzODg4IDEuMTY5NTk5ODcgNS4wNDQzNzUgMi4zMzU2MTE3NyA0LjA2MjUgMy41IEMzLjUxNzIyNjU2IDQuMTQ5Njg3NSAyLjk3MTk1MzEyIDQuNzk5Mzc1IDIuNDEwMTU2MjUgNS40Njg3NSBDMS45NDQ4MDQ2OSA1Ljk3NDA2MjUgMS40Nzk0NTMxMyA2LjQ3OTM3NSAxIDcgQzAuNjcgNyAwLjM0IDcgMCA3IEMwIDQuNjkgMCAyLjM4IDAgMCBaICIgZmlsbD0iIzFDMUIyMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwwKSIvPgo8cGF0aCBkPSJNMCAwIEMyLjMxIDAgNC42MiAwIDcgMCBDNyAxLjk4IDcgMy45NiA3IDYgQzUuODMwNTQyMDggNS4xOTE1MjI3MSA0LjY2NDQ5NTM5IDQuMzc4MTA4ODggMy41IDMuNTYyNSBDMi44NTAzMTI1IDMuMTEwMDM5MDYgMi4yMDA2MjUgMi42NTc1NzgxMiAxLjUzMTI1IDIuMTkxNDA2MjUgQzEuMDI1OTM3NSAxLjc5ODI0MjE5IDAuNTIwNjI1IDEuNDA1MDc4MTIgMCAxIEMwIDAuNjcgMCAwLjM0IDAgMCBaICIgZmlsbD0iIzI2MjEyMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTQzLDApIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuNjYgMC4zMyAxLjMyIDAuNjYgMiAxIEMtMC42NCAzLjY0IC0zLjI4IDYuMjggLTYgOSBDLTYgNiAtNiA2IC0zLjU2MjUgMy4zNzUgQy0yLjcxNjg3NSAyLjU5MTI1IC0xLjg3MTI1IDEuODA3NSAtMSAxIEMtMC42NyAwLjY3IC0wLjM0IDAuMzQgMCAwIFogIiBmaWxsPSIjQkYzNTUzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3LDApIi8+Cjwvc3ZnPgo=",this.url="https://crossmark.io",this.currentAccount=null}async isAvailable(){try{return!!pl.sync.isInstalled()}catch{return!1}}async connect(t){try{if(!await this.isAvailable())throw xe.notInstalled(this.name);const n=this.resolveNetwork(t?.network),r=this.generateRandomHash(),s=await pl.methods.signInAndWait(r);if(!s||!s.response||!s.response.data)throw new Error("Failed to sign in with Crossmark");const{address:i,publicKey:o}=s.response.data;if(!i)throw new Error("No address returned from Crossmark");return this.currentAccount={address:i,publicKey:o,network:n},this.currentAccount}catch(n){throw xe.connectionFailed(this.name,n)}}async disconnect(){this.currentAccount=null}async getAccount(){return this.currentAccount}async getNetwork(){if(!this.currentAccount)throw xe.notConnected();return this.currentAccount.network}async signAndSubmit(t){if(!this.currentAccount)throw xe.notConnected();try{const n={...t,Account:t.Account||this.currentAccount.address},r=await pl.methods.signAndSubmitAndWait(n);if(!r.response.data.resp.result.hash)throw new Error("Failed to sign transaction with Crossmark");return{hash:r.response.data.resp.result.hash}}catch(n){throw n instanceof Error&&n.message.toLowerCase().includes("reject")?xe.signRejected():xe.signFailed(n)}}async signMessage(t){if(!this.currentAccount)throw xe.notConnected();try{const n=typeof t=="string"?t:new TextDecoder().decode(t),r=await pl.methods.signInAndWait(n);if(!r||!r.response||!r.response.data)throw new Error("Failed to sign message with Crossmark");const{signature:s,publicKey:i}=r.response.data;return{message:n,signature:s||"",publicKey:i||this.currentAccount.publicKey||""}}catch(n){throw xe.signFailed(n)}}resolveNetwork(t){if(!t)return li.mainnet;if(typeof t=="string"){const n=li[t];if(!n)throw xe.unknown(`Unknown network: ${t}`);return n}return t}generateRandomHash(){const t=new Uint8Array(32);if(typeof window<"u"&&window.crypto)window.crypto.getRandomValues(t);else for(let n=0;n<t.length;n++)t[n]=Math.floor(Math.random()*256);return Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}}var Fo={},JS={},qd={},lt={},Gd={};Object.defineProperty(Gd,"__esModule",{value:!0});Gd.API_ERROR_BAD_REQUEST=void 0;Gd.API_ERROR_BAD_REQUEST="gem_BAD_REQUEST";var eT={};Object.defineProperty(eT,"__esModule",{value:!0});var Ki={};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.MSG_INTERNAL_RECEIVE_SIGN_OUT=Ki.MSG_INTERNAL_RECEIVE_PASSWORD=Ki.MSG_INTERNAL_REQUEST_PASSWORD=void 0;Ki.MSG_INTERNAL_REQUEST_PASSWORD="INTERNAL_REQUEST_PASSWORD";Ki.MSG_INTERNAL_RECEIVE_PASSWORD="INTERNAL_RECEIVE_PASSWORD";Ki.MSG_INTERNAL_RECEIVE_SIGN_OUT="INTERNAL_RECEIVE_SIGN_OUT";var tT={};Object.defineProperty(tT,"__esModule",{value:!0});var nT={};(function(e){var t=ue&&ue.__spreadArray||function(d,f,h){if(h||arguments.length===2)for(var p=0,g=f.length,y;p<g;p++)(y||!(p in f))&&(y||(y=Array.prototype.slice.call(f,0,p)),y[p]=f[p]);return d.concat(y||Array.prototype.slice.call(f))},n,r,s;Object.defineProperty(e,"__esModule",{value:!0}),e.getNetworkByNetworkID=e.getNetwork=e.getDefaultNetwork=e.NETWORK=e.FAUCET_XAHAU_TESTNET=e.XAHAU_TESTNET_NODES=e.XAHAU_MAINNET_NODES=e.DEVNET_NODES=e.TESTNET_NODES=e.MAINNET_NODES=e.MAINNET_CLIO_NODES=e.XahauNetwork=e.XRPLNetwork=e.Chain=void 0;var i;(function(d){d.XRPL="XRPL",d.XAHAU="XAHAU"})(i||(e.Chain=i={}));var o;(function(d){d.MAINNET="Mainnet",d.TESTNET="Testnet",d.DEVNET="Devnet",d.CUSTOM="Custom"})(o||(e.XRPLNetwork=o={}));var a;(function(d){d.XAHAU_MAINNET="Mainnet",d.XAHAU_TESTNET="Testnet",d.CUSTOM="Custom"})(a||(e.XahauNetwork=a={})),e.MAINNET_CLIO_NODES=["wss://s1.ripple.com","wss://s2.ripple.com"],e.MAINNET_NODES=t(["wss://xrplcluster.com"],e.MAINNET_CLIO_NODES,!0),e.TESTNET_NODES=["wss://s.altnet.rippletest.net:51233","wss://testnet.xrpl-labs.com"],e.DEVNET_NODES=["wss://s.devnet.rippletest.net:51233"],e.XAHAU_MAINNET_NODES=["wss://xahau.network"],e.XAHAU_TESTNET_NODES=["wss://xahau-test.net"],e.FAUCET_XAHAU_TESTNET="https://xahau-test.net/accounts",e.NETWORK=(n={},n[i.XRPL]=(r={},r[o.MAINNET]={chain:i.XRPL,name:o.MAINNET,server:e.MAINNET_NODES[0],nodes:e.MAINNET_NODES,description:"Main network using the production version of the XRP Ledger.",networkID:0},r[o.TESTNET]={chain:i.XRPL,name:o.TESTNET,server:e.TESTNET_NODES[0],nodes:e.TESTNET_NODES,description:"Acts as a testing network, without impacting production users and risking real money.",networkID:1},r[o.DEVNET]={chain:i.XRPL,name:o.DEVNET,server:e.DEVNET_NODES[0],nodes:e.DEVNET_NODES,description:"A preview of upcoming features, where unstable changes are tested out."},r[o.CUSTOM]={chain:i.XRPL,name:o.CUSTOM,server:"",description:"Custom network configuration provided by the user."},r),n[i.XAHAU]=(s={},s[a.XAHAU_MAINNET]={chain:i.XAHAU,name:a.XAHAU_MAINNET,server:e.XAHAU_MAINNET_NODES[0],nodes:e.XAHAU_MAINNET_NODES,description:"Mainnet for the Xahau blockchain.",networkID:21337},s[a.XAHAU_TESTNET]={chain:i.XAHAU,name:a.XAHAU_TESTNET,server:e.XAHAU_TESTNET_NODES[0],nodes:e.XAHAU_TESTNET_NODES,description:"Testnet for the Xahau blockchain.",networkID:21338},s[a.CUSTOM]={chain:i.XAHAU,name:a.CUSTOM,server:"",description:"Custom network configuration provided by the user."},s),n);var u=function(d){return d===i.XAHAU?a.XAHAU_MAINNET:o.MAINNET};e.getDefaultNetwork=u;function c(d,f){if(d===i.XRPL&&Object.values(o).includes(f)||d===i.XAHAU&&Object.values(a).includes(f))return e.NETWORK[d][f];throw new Error("Network ".concat(f," is not valid for chain ").concat(d))}e.getNetwork=c;var l=function(d){switch(d){case 0:return e.NETWORK[i.XRPL][o.MAINNET];case 1:return e.NETWORK[i.XRPL][o.TESTNET];case 21337:return e.NETWORK[i.XAHAU][a.XAHAU_MAINNET];case 21338:return e.NETWORK[i.XAHAU][a.XAHAU_TESTNET];default:throw new Error("Network ID ".concat(d," is not valid"))}};e.getNetworkByNetworkID=l})(nT);var Kd={};Object.defineProperty(Kd,"__esModule",{value:!0});Kd.GEM_WALLET=void 0;Kd.GEM_WALLET="gem-wallet";var Yd={};Object.defineProperty(Yd,"__esModule",{value:!0});Yd.DEFAULT_SUBMIT_TX_BULK_ON_ERROR=void 0;Yd.DEFAULT_SUBMIT_TX_BULK_ON_ERROR="abort";var rT={};Object.defineProperty(rT,"__esModule",{value:!0});var iT={};Object.defineProperty(iT,"__esModule",{value:!0});var sT={};Object.defineProperty(sT,"__esModule",{value:!0});(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ue&&ue.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(Gd,e),n(eT,e),n(Ki,e),n(tT,e),n(nT,e),n(Kd,e),n(Yd,e),n(rT,e),n(iT,e),n(sT,e)})(lt);var dt={};Object.defineProperty(dt,"__esModule",{value:!0});dt.deserializeError=void 0;var ND=function(e){var t=new Error(e.message);return t.stack=e.stack,t.name=e.name,t};dt.deserializeError=ND;var ct={},Sp=ue&&ue.__assign||function(){return Sp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Sp.apply(this,arguments)};Object.defineProperty(ct,"__esModule",{value:!0});ct.sendMessageToContentScript=void 0;var ID=function(e){var t=Date.now()+Math.random();return window.postMessage(Sp({source:"GEM_WALLET_MSG_REQUEST",messageId:t},e),window.location.origin),new Promise(function(n,r){!window.gemWallet&&e.type!=="REQUEST_IS_INSTALLED/V3"&&r(new Error("Please check if GemWallet is installed - GemWallet needs to be installed: https://gemwallet.app"));var s=function(i){var o,a;i.source===window&&((o=i?.data)===null||o===void 0?void 0:o.source)==="GEM_WALLET_MSG_RESPONSE"&&((a=i?.data)===null||a===void 0?void 0:a.messagedId)===t&&(n(i.data),window.removeEventListener("message",s))};window.addEventListener("message",s,!1)})};ct.sendMessageToContentScript=ID;var _D=ue&&ue.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},OD=ue&&ue.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(qd,"__esModule",{value:!0});qd.acceptNFTOffer=void 0;var DD=lt,xD=dt,LD=ct,CD=function(e){return _D(void 0,void 0,void 0,function(){var t,n,r,s,i,o,a;return OD(this,function(u){switch(u.label){case 0:t={type:"reject",result:void 0},u.label=1;case 1:return u.trys.push([1,3,,4]),n={app:DD.GEM_WALLET,type:"REQUEST_ACCEPT_NFT_OFFER/V3",payload:e},[4,(0,LD.sendMessageToContentScript)(n)];case 2:if(r=u.sent(),s=r.result,i=r.error,o=i?(0,xD.deserializeError)(i):void 0,o)throw o;return s&&(t.type="response",t.result=s),[3,4];case 3:throw a=u.sent(),a;case 4:return[2,t]}})})};qd.acceptNFTOffer=CD;(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ue&&ue.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(qd,e)})(JS);var oT={},Wd={},jD=ue&&ue.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},PD=ue&&ue.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Wd,"__esModule",{value:!0});Wd.burnNFT=void 0;var kD=lt,RD=dt,BD=ct,UD=function(e){return jD(void 0,void 0,void 0,function(){var t,n,r,s,i,o,a;return PD(this,function(u){switch(u.label){case 0:t={type:"reject",result:void 0},u.label=1;case 1:return u.trys.push([1,3,,4]),n={app:kD.GEM_WALLET,type:"REQUEST_BURN_NFT/V3",payload:e},[4,(0,BD.sendMessageToContentScript)(n)];case 2:if(r=u.sent(),s=r.result,i=r.error,o=i?(0,RD.deserializeError)(i):void 0,o)throw o;return s&&(t.type="response",t.result=s),[3,4];case 3:throw a=u.sent(),a;case 4:return[2,t]}})})};Wd.burnNFT=UD;(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ue&&ue.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(Wd,e)})(oT);var aT={},Xd={},zD=ue&&ue.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},FD=ue&&ue.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Xd,"__esModule",{value:!0});Xd.cancelNFTOffer=void 0;var HD=lt,VD=dt,qD=ct,GD=function(e){return zD(void 0,void 0,void 0,function(){var t,n,r,s,i,o,a;return FD(this,function(u){switch(u.label){case 0:t={type:"reject",result:void 0},u.label=1;case 1:return u.trys.push([1,3,,4]),n={app:HD.GEM_WALLET,type:"REQUEST_CANCEL_NFT_OFFER/V3",payload:e},[4,(0,qD.sendMessageToContentScript)(n)];case 2:if(r=u.sent(),s=r.result,i=r.error,o=i?(0,VD.deserializeError)(i):void 0,o)throw o;return s&&(t.type="response",t.result=s),[3,4];case 3:throw a=u.sent(),a;case 4:return[2,t]}})})};Xd.cancelNFTOffer=GD;(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ue&&ue.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(Xd,e)})(aT);var cT={},Qd={},KD=ue&&ue.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},YD=ue&&ue.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Qd,"__esModule",{value:!0});Qd.cancelOffer=void 0;var WD=lt,XD=dt,QD=ct,$D=function(e){return KD(void 0,void 0,void 0,function(){var t,n,r,s,i,o,a;return YD(this,function(u){switch(u.label){case 0:t={type:"reject",result:void 0},u.label=1;case 1:return u.trys.push([1,3,,4]),n={app:WD.GEM_WALLET,type:"REQUEST_CANCEL_OFFER/V3",payload:e},[4,(0,QD.sendMessageToContentScript)(n)];case 2:if(r=u.sent(),s=r.result,i=r.error,o=i?(0,XD.deserializeError)(i):void 0,o)throw o;return s&&(t.type="response",t.result=s),[3,4];case 3:throw a=u.sent(),a;case 4:return[2,t]}})})};Qd.cancelOffer=$D;(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ue&&ue.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(Qd,e)})(cT);var uT={},$d={},ZD=ue&&ue.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},JD=ue&&ue.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty($d,"__esModule",{value:!0});$d.createNFTOffer=void 0;var e4=lt,t4=dt,n4=ct,r4=function(e){return ZD(void 0,void 0,void 0,function(){var t,n,r,s,i,o,a;return JD(this,function(u){switch(u.label){case 0:t={type:"reject",result:void 0},u.label=1;case 1:return u.trys.push([1,3,,4]),n={app:e4.GEM_WALLET,type:"REQUEST_CREATE_NFT_OFFER/V3",payload:e},[4,(0,n4.sendMessageToContentScript)(n)];case 2:if(r=u.sent(),s=r.result,i=r.error,o=i?(0,t4.deserializeError)(i):void 0,o)throw o;return s&&(t.type="response",t.result=s),[3,4];case 3:throw a=u.sent(),a;case 4:return[2,t]}})})};$d.createNFTOffer=r4;(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ue&&ue.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n($d,e)})(uT);var lT={},Zd={},i4=ue&&ue.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},s4=ue&&ue.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Zd,"__esModule",{value:!0});Zd.createOffer=void 0;var o4=lt,a4=dt,c4=ct,u4=function(e){return i4(void 0,void 0,void 0,function(){var t,n,r,s,i,o,a;return s4(this,function(u){switch(u.label){case 0:t={type:"reject",result:void 0},u.label=1;case 1:return u.trys.push([1,3,,4]),n={app:o4.GEM_WALLET,type:"REQUEST_CREATE_OFFER/V3",payload:e},[4,(0,c4.sendMessageToContentScript)(n)];case 2:if(r=u.sent(),s=r.result,i=r.error,o=i?(0,a4.deserializeError)(i):void 0,o)throw o;return s&&(t.type="response",t.result=s),[3,4];case 3:throw a=u.sent(),a;case 4:return[2,t]}})})};Zd.createOffer=u4;(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ue&&ue.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(Zd,e)})(lT);var dT={},Jd={};Object.defineProperty(Jd,"__esModule",{value:!0});Jd.on=void 0;var l4=lt,d4=function(e,t){window.addEventListener("message",function(n){n.origin===window.origin&&(n.source!==window&&n.data.app===l4.GEM_WALLET||!n.data.source||n.data.source!=="GEM_WALLET_MSG_REQUEST"||n.data.type&&n.data.type===e&&t(n.data.payload.result))})};Jd.on=d4;(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ue&&ue.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(Jd,e)})(dT);var hT={},eh={},uo={};Object.defineProperty(uo,"__esModule",{value:!0});uo.getFavicon=void 0;var h4=function(){var e,t=(e=document.querySelector("link[rel*='icon']"))===null||e===void 0?void 0:e.getAttribute("href");if(t)try{new URL(t)}catch{t=window.location.origin+t}return t};uo.getFavicon=h4;var f4=ue&&ue.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},p4=ue&&ue.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(eh,"__esModule",{value:!0});eh.getAddress=void 0;var g4=lt,y4=dt,m4=ct,w4=uo,b4=function(){return f4(void 0,void 0,void 0,function(){var e,t,n,r,s,i,o,a;return p4(this,function(u){switch(u.label){case 0:e={type:"reject",result:void 0},u.label=1;case 1:return u.trys.push([1,3,,4]),t=(0,w4.getFavicon)(),n={app:g4.GEM_WALLET,type:"REQUEST_GET_ADDRESS/V3",payload:{url:window.location.origin,title:document.title,favicon:t}},[4,(0,m4.sendMessageToContentScript)(n)];case 2:if(r=u.sent(),s=r.result,i=r.error,o=i?(0,y4.deserializeError)(i):void 0,o)throw o;return s&&(e.type="response",e.result=s),[3,4];case 3:throw a=u.sent(),a;case 4:return[2,e]}})})};eh.getAddress=b4;(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ue&&ue.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(eh,e)})(hT);var fT={},th={},v4=ue&&ue.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},E4=ue&&ue.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(th,"__esModule",{value:!0});th.getNetwork=void 0;var A4=lt,S4=dt,T4=ct,M4=function(){return v4(void 0,void 0,void 0,function(){var e,t,n,r,s,i,o;return E4(this,function(a){switch(a.label){case 0:e={type:"reject",result:void 0},a.label=1;case 1:return a.trys.push([1,3,,4]),t={app:A4.GEM_WALLET,type:"REQUEST_GET_NETWORK/V3"},[4,(0,T4.sendMessageToContentScript)(t)];case 2:if(n=a.sent(),r=n.result,s=n.error,i=s?(0,S4.deserializeError)(s):void 0,i)throw i;return r&&(e.type="response",e.result=r),[3,4];case 3:throw o=a.sent(),o;case 4:return[2,e]}})})};th.getNetwork=M4;(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ue&&ue.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(th,e)})(fT);var pT={},nh={},N4=ue&&ue.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},I4=ue&&ue.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(nh,"__esModule",{value:!0});nh.getNFT=void 0;var _4=lt,O4=dt,D4=ct,x4=uo,L4=function(e){return N4(void 0,void 0,void 0,function(){var t,n,r,s,i,o,a,u,c,l;return I4(this,function(d){switch(d.label){case 0:t={type:"reject",result:void 0},d.label=1;case 1:return d.trys.push([1,3,,4]),n=(0,x4.getFavicon)(),r={app:_4.GEM_WALLET,type:"REQUEST_GET_NFT/V3",payload:{url:window.location.origin,title:document.title,favicon:n,limit:(c=e?.limit)!==null&&c!==void 0?c:void 0,marker:(l=e?.marker)!==null&&l!==void 0?l:void 0}},[4,(0,D4.sendMessageToContentScript)(r)];case 2:if(s=d.sent(),i=s.result,o=s.error,a=o?(0,O4.deserializeError)(o):void 0,a)throw a;return i&&(t.type="response",t.result=i),[3,4];case 3:throw u=d.sent(),u;case 4:return[2,t]}})})};nh.getNFT=L4;(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ue&&ue.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(nh,e)})(pT);var gT={},rh={},C4=ue&&ue.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},j4=ue&&ue.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(rh,"__esModule",{value:!0});rh.getPublicKey=void 0;var P4=lt,k4=dt,R4=ct,B4=uo,U4=function(){return C4(void 0,void 0,void 0,function(){var e,t,n,r,s,i,o,a;return j4(this,function(u){switch(u.label){case 0:e={type:"reject",result:void 0},u.label=1;case 1:return u.trys.push([1,3,,4]),t=(0,B4.getFavicon)(),n={app:P4.GEM_WALLET,type:"REQUEST_GET_PUBLIC_KEY/V3",payload:{url:window.location.origin,title:document.title,favicon:t}},[4,(0,R4.sendMessageToContentScript)(n)];case 2:if(r=u.sent(),s=r.result,i=r.error,o=i?(0,k4.deserializeError)(i):void 0,o)throw o;return s&&(e.type="response",e.result=s),[3,4];case 3:throw a=u.sent(),a;case 4:return[2,e]}})})};rh.getPublicKey=U4;(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ue&&ue.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(rh,e)})(gT);var yT={},ih={},z4=ue&&ue.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},F4=ue&&ue.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(ih,"__esModule",{value:!0});ih.isInstalled=void 0;var H4=lt,V4=ct,q4=function(){if(window.gemWallet)return Promise.resolve({result:{isInstalled:!0}});var e,t=new Promise(function(r){e=setTimeout(function(){r({result:{isInstalled:!1}})},1e3)}),n=new Promise(function(r){return z4(void 0,void 0,void 0,function(){var s,i;return F4(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),s={app:H4.GEM_WALLET,type:"REQUEST_IS_INSTALLED/V3"},[4,(0,V4.sendMessageToContentScript)(s)];case 1:return i=o.sent(),r({result:{isInstalled:i.isInstalled||!1}}),[3,3];case 2:return o.sent(),r({result:{isInstalled:!1}}),[3,3];case 3:return[2]}})})});return Promise.race([t,n]).then(function(r){return clearTimeout(e),r.result.isInstalled===!0&&(window.gemWallet=!0),{result:{isInstalled:r.result.isInstalled}}}).catch(function(){return{result:{isInstalled:!1}}})};ih.isInstalled=q4;(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ue&&ue.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(ih,e)})(yT);var mT={},sh={},G4=ue&&ue.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},K4=ue&&ue.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(sh,"__esModule",{value:!0});sh.mintNFT=void 0;var Y4=lt,W4=dt,X4=ct,Q4=function(e){return G4(void 0,void 0,void 0,function(){var t,n,r,s,i,o,a;return K4(this,function(u){switch(u.label){case 0:t={type:"reject",result:void 0},u.label=1;case 1:return u.trys.push([1,3,,4]),n={app:Y4.GEM_WALLET,type:"REQUEST_MINT_NFT/V3",payload:e},[4,(0,X4.sendMessageToContentScript)(n)];case 2:if(r=u.sent(),s=r.result,i=r.error,o=i?(0,W4.deserializeError)(i):void 0,o)throw o;return s&&(t.type="response",t.result=s),[3,4];case 3:throw a=u.sent(),a;case 4:return[2,t]}})})};sh.mintNFT=Q4;(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ue&&ue.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(sh,e)})(mT);var wT={},oh={},$4=ue&&ue.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},Z4=ue&&ue.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(oh,"__esModule",{value:!0});oh.sendPayment=void 0;var J4=lt,ex=dt,tx=ct,nx=function(e){return $4(void 0,void 0,void 0,function(){var t,n,r,s,i,o,a;return Z4(this,function(u){switch(u.label){case 0:t={type:"reject",result:void 0},u.label=1;case 1:return u.trys.push([1,3,,4]),n={app:J4.GEM_WALLET,type:"REQUEST_SEND_PAYMENT/V3",payload:e},[4,(0,tx.sendMessageToContentScript)(n)];case 2:if(r=u.sent(),s=r.result,i=r.error,o=i?(0,ex.deserializeError)(i):void 0,o)throw o;return s&&(t.type="response",t.result=s),[3,4];case 3:throw a=u.sent(),a;case 4:return[2,t]}})})};oh.sendPayment=nx;(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ue&&ue.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(oh,e)})(wT);var bT={},ah={},rx=ue&&ue.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},ix=ue&&ue.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(ah,"__esModule",{value:!0});ah.setAccount=void 0;var sx=lt,ox=dt,ax=ct,cx=function(e){return rx(void 0,void 0,void 0,function(){var t,n,r,s,i,o,a;return ix(this,function(u){switch(u.label){case 0:t={type:"reject",result:void 0},u.label=1;case 1:return u.trys.push([1,3,,4]),n={app:sx.GEM_WALLET,type:"REQUEST_SET_ACCOUNT/V3",payload:e},[4,(0,ax.sendMessageToContentScript)(n)];case 2:if(r=u.sent(),s=r.result,i=r.error,o=i?(0,ox.deserializeError)(i):void 0,o)throw o;return s&&(t.type="response",t.result=s),[3,4];case 3:throw a=u.sent(),a;case 4:return[2,t]}})})};ah.setAccount=cx;(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ue&&ue.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(ah,e)})(bT);var vT={},ch={},ux=ue&&ue.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},lx=ue&&ue.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(ch,"__esModule",{value:!0});ch.setHook=void 0;var dx=lt,hx=dt,fx=ct,px=function(e){return ux(void 0,void 0,void 0,function(){var t,n,r,s,i,o,a;return lx(this,function(u){switch(u.label){case 0:t={type:"reject",result:void 0},u.label=1;case 1:return u.trys.push([1,3,,4]),n={app:dx.GEM_WALLET,type:"REQUEST_SET_HOOK/V3",payload:e},[4,(0,fx.sendMessageToContentScript)(n)];case 2:if(r=u.sent(),s=r.result,i=r.error,o=i?(0,hx.deserializeError)(i):void 0,o)throw o;return s&&(t.type="response",t.result=s),[3,4];case 3:throw a=u.sent(),a;case 4:return[2,t]}})})};ch.setHook=px;(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ue&&ue.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(ch,e)})(vT);var ET={},uh={},gx=ue&&ue.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},yx=ue&&ue.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(uh,"__esModule",{value:!0});uh.setRegularKey=void 0;var mx=lt,wx=dt,bx=ct,vx=function(e){return gx(void 0,void 0,void 0,function(){var t,n,r,s,i,o,a;return yx(this,function(u){switch(u.label){case 0:t={type:"reject",result:void 0},u.label=1;case 1:return u.trys.push([1,3,,4]),n={app:mx.GEM_WALLET,type:"REQUEST_SET_REGULAR_KEY/V3",payload:e},[4,(0,bx.sendMessageToContentScript)(n)];case 2:if(r=u.sent(),s=r.result,i=r.error,o=i?(0,wx.deserializeError)(i):void 0,o)throw o;return s&&(t.type="response",t.result=s),[3,4];case 3:throw a=u.sent(),a;case 4:return[2,t]}})})};uh.setRegularKey=vx;(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ue&&ue.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(uh,e)})(ET);var AT={},lh={},Ex=ue&&ue.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},Ax=ue&&ue.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(lh,"__esModule",{value:!0});lh.setTrustline=void 0;var Sx=lt,Tx=dt,Mx=ct,Nx=function(e){return Ex(void 0,void 0,void 0,function(){var t,n,r,s,i,o,a;return Ax(this,function(u){switch(u.label){case 0:t={type:"reject",result:void 0},u.label=1;case 1:return u.trys.push([1,3,,4]),n={app:Sx.GEM_WALLET,type:"REQUEST_SET_TRUSTLINE/V3",payload:e},[4,(0,Mx.sendMessageToContentScript)(n)];case 2:if(r=u.sent(),s=r.result,i=r.error,o=i?(0,Tx.deserializeError)(i):void 0,o)throw o;return s&&(t.type="response",t.result=s),[3,4];case 3:throw a=u.sent(),a;case 4:return[2,t]}})})};lh.setTrustline=Nx;(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ue&&ue.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(lh,e)})(AT);var ST={},dh={},Ix=ue&&ue.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},_x=ue&&ue.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(dh,"__esModule",{value:!0});dh.signMessage=void 0;var Ox=lt,Dx=dt,xx=ct,Lx=uo,Cx=function(e,t){return Ix(void 0,void 0,void 0,function(){var n,r,s,i,o,a,u,c;return _x(this,function(l){switch(l.label){case 0:n={type:"reject",result:void 0},l.label=1;case 1:return l.trys.push([1,3,,4]),r=(0,Lx.getFavicon)(),s={app:Ox.GEM_WALLET,type:"REQUEST_SIGN_MESSAGE/V3",payload:{url:window.location.origin,title:document.title,favicon:r,message:e,isHex:t}},[4,(0,xx.sendMessageToContentScript)(s)];case 2:if(i=l.sent(),o=i.result,a=i.error,u=a?(0,Dx.deserializeError)(a):void 0,u)throw u;return o&&(n.type="response",n.result=o),[3,4];case 3:throw c=l.sent(),c;case 4:return[2,n]}})})};dh.signMessage=Cx;(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ue&&ue.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(dh,e)})(ST);var TT={},hh={},jx=ue&&ue.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},Px=ue&&ue.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(hh,"__esModule",{value:!0});hh.signTransaction=void 0;var kx=lt,Rx=dt,Bx=ct,Ux=function(e){return jx(void 0,void 0,void 0,function(){var t,n,r,s,i,o,a;return Px(this,function(u){switch(u.label){case 0:t={type:"reject",result:void 0},u.label=1;case 1:return u.trys.push([1,3,,4]),n={app:kx.GEM_WALLET,type:"REQUEST_SIGN_TRANSACTION/V3",payload:e},[4,(0,Bx.sendMessageToContentScript)(n)];case 2:if(r=u.sent(),s=r.result,i=r.error,o=i?(0,Rx.deserializeError)(i):void 0,o)throw o;return s&&(t.type="response",t.result=s),[3,4];case 3:throw a=u.sent(),a;case 4:return[2,t]}})})};hh.signTransaction=Ux;(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ue&&ue.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(hh,e)})(TT);var MT={},fh={},zx=ue&&ue.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},Fx=ue&&ue.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(fh,"__esModule",{value:!0});fh.submitTransaction=void 0;var Hx=lt,Vx=dt,qx=ct,Gx=function(e){return zx(void 0,void 0,void 0,function(){var t,n,r,s,i,o,a;return Fx(this,function(u){switch(u.label){case 0:t={type:"reject",result:void 0},u.label=1;case 1:return u.trys.push([1,3,,4]),n={app:Hx.GEM_WALLET,type:"REQUEST_SUBMIT_TRANSACTION/V3",payload:e},[4,(0,qx.sendMessageToContentScript)(n)];case 2:if(r=u.sent(),s=r.result,i=r.error,o=i?(0,Vx.deserializeError)(i):void 0,o)throw o;return s&&(t.type="response",t.result=s),[3,4];case 3:throw a=u.sent(),a;case 4:return[2,t]}})})};fh.submitTransaction=Gx;(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ue&&ue.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(fh,e)})(MT);var NT={},ph={},od=ue&&ue.__assign||function(){return od=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},od.apply(this,arguments)},Kx=ue&&ue.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},Yx=ue&&ue.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(ph,"__esModule",{value:!0});ph.submitBulkTransactions=void 0;var Av=lt,Wx=dt,Xx=ct,Sv=50,Qx=function(e){return Kx(void 0,void 0,void 0,function(){var t,n,r,s,i,o,a;return Yx(this,function(u){switch(u.label){case 0:if(t={type:"reject",result:void 0},!e.transactions)throw new Error(Av.API_ERROR_BAD_REQUEST);if(e.transactions.length===0||e.transactions.length>Sv)throw new Error("Invalid number of transactions (must be between 1 and ".concat(Sv,")"));u.label=1;case 1:return u.trys.push([1,3,,4]),n={app:Av.GEM_WALLET,type:"REQUEST_SUBMIT_BULK_TRANSACTIONS/V3",payload:od(od({},e),{transactions:e.transactions.reduce(function(c,l,d){return c[d]=l,c},{})})},[4,(0,Xx.sendMessageToContentScript)(n)];case 2:if(r=u.sent(),s=r.result,i=r.error,o=i?(0,Wx.deserializeError)(i):void 0,o)throw o;return s&&(t.type="response",t.result=s),[3,4];case 3:throw a=u.sent(),a;case 4:return[2,t]}})})};ph.submitBulkTransactions=Qx;(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ue&&ue.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(ph,e)})(NT);(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ue&&ue.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(JS,e),n(oT,e),n(aT,e),n(cT,e),n(uT,e),n(lT,e),n(dT,e),n(hT,e),n(fT,e),n(pT,e),n(gT,e),n(yT,e),n(mT,e),n(wT,e),n(bT,e),n(vT,e),n(ET,e),n(AT,e),n(ST,e),n(TT,e),n(MT,e),n(NT,e)})(Fo);class $x{constructor(t={}){this.id="gemwallet",this.name="GemWallet",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwQThFQSIgZD0iTTIwIDM5LjkxMS41OTMgMTcuNDIyaDM4LjgxNHoiLz48cGF0aCBmaWxsPSIjMzNEM0Y0IiBkPSJNMzMuMTg1IDUuMzMzSDYuODE1TC41OTMgMTcuNDIzaDM4LjgxNHoiLz48cGF0aCBmaWxsPSIjNDBFRUZGIiBkPSJtMjAgMzkuOTExLTcuMDM3LTIyLjQ4OWgxNC4wNzR6TTE0LjIyMiAxNC40IDguNjY3IDUuMzMzSDIwem0xMS4yNTkgMEwyMCA1LjMzM2gxMS4zMzN6Ii8+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTYuMjk2IDYuNDg5IDMuNDA3IDUuMzMzbDIuODktMS4xNTVMNy4yNTguNzFsLjk2MyAzLjQ2NyAyLjg5IDEuMTU1LTIuODkgMS4xNTYtLjk2MyAzLjQ2N3ptMjcuNDA4IDExLjI4OS0xLjg1Mi0uNzExIDEuODUyLS44LjY2Ni0yLjIyMy41OTMgMi4yMjMgMS44NTIuOC0xLjg1Mi43MUwzNC4zNyAyMHoiLz48cGF0aCBkPSJNMjEuODUyIDUuMzMzIDYuMjk2IDI0LjA5bC0xLjMzMy0xLjUxMSAxNC4zNy0xNy4yNDV6bTguNzQxIDBMMTAuNzQgMjkuMTU2IDcuNjMgMjUuNiAyNC40NDQgNS4zMzN6IiBvcGFjaXR5PSIuMiIgZmlsbD0iI0ZGRiIvPjwvZz48L3N2Zz4=",this.url="https://gemwallet.app",this.currentAccount=null}async isAvailable(){var t;try{return((t=(await Fo.isInstalled()).result)==null?void 0:t.isInstalled)||!1}catch{return!1}}async connect(t){try{if(!await this.isAvailable())throw xe.notInstalled(this.name);const n=this.resolveNetwork(t?.network),r=await Fo.getPublicKey();if(!r.result||!r.result.address)throw new Error("Failed to get address from GemWallet");const{address:s,publicKey:i}=r.result;return this.currentAccount={address:s,publicKey:i,network:n},this.currentAccount}catch(n){throw xe.connectionFailed(this.name,n)}}async disconnect(){this.currentAccount=null}async getAccount(){return this.currentAccount}async getNetwork(){if(!this.currentAccount)throw xe.notConnected();return this.currentAccount.network}async signAndSubmit(t,n=!0){if(!this.currentAccount)throw xe.notConnected();try{const r={...t,Account:t.Account||this.currentAccount.address};if(n){const s=await Fo.submitTransaction({transaction:r});if(!s.result||!s.result.hash)throw new Error("Failed to submit transaction with GemWallet");const{hash:i}=s.result;return{hash:i}}else{const s=await Fo.signTransaction({transaction:r});if(!s.result)throw new Error("Failed to sign transaction with GemWallet");const{signature:i}=s.result;return{hash:"",signature:i}}}catch(r){throw r instanceof Error&&r.message.toLowerCase().includes("reject")?xe.signRejected():xe.signFailed(r)}}async signMessage(t){if(!this.currentAccount)throw xe.notConnected();try{const n=typeof t=="string"?t:new TextDecoder().decode(t),r=await Fo.signMessage(n);if(!r.result||!r.result.signedMessage)throw new Error("Failed to sign message with GemWallet");const{signedMessage:s}=r.result;return{message:n,signature:s,publicKey:this.currentAccount.publicKey||""}}catch(n){throw xe.signFailed(n)}}resolveNetwork(t){if(!t)return li.mainnet;if(typeof t=="string"){const n=li[t];if(!n)throw xe.unknown(`Unknown network: ${t}`);return n}return t}}var Ae={};var Tp=function(e,t){return Tp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},Tp(e,t)};function Zx(e,t){Tp(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Mp=function(){return Mp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Mp.apply(this,arguments)};function Jx(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function eL(e,t,n,r){var s=arguments.length,i=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i}function tL(e,t){return function(n,r){t(n,r,e)}}function nL(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function rL(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})}function iL(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function sL(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}function oL(e,t){for(var n in e)n!=="default"&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Np(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function IT(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function aL(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(IT(arguments[t]));return e}function cL(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),s=0,t=0;t<n;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function Au(e){return this instanceof Au?(this.v=e,this):new Au(e)}function uL(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){r[f]&&(s[f]=function(h){return new Promise(function(p,g){i.push([f,h,p,g])>1||a(f,h)})})}function a(f,h){try{u(r[f](h))}catch(p){d(i[0][3],p)}}function u(f){f.value instanceof Au?Promise.resolve(f.value.v).then(c,l):d(i[0][2],f)}function c(f){a("next",f)}function l(f){a("throw",f)}function d(f,h){f(h),i.shift(),i.length&&a(i[0][0],i[0][1])}}function lL(e){var t,n;return t={},r("next"),r("throw",function(s){throw s}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(s,i){t[s]=e[s]?function(o){return(n=!n)?{value:Au(e[s](o)),done:s==="return"}:i?i(o):o}:i}}function dL(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Np=="function"?Np(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(o){return new Promise(function(a,u){o=e[i](o),s(a,u,o.done,o.value)})}}function s(i,o,a,u){Promise.resolve(u).then(function(c){i({value:c,done:a})},o)}}function hL(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function fL(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function pL(e){return e&&e.__esModule?e:{default:e}}function gL(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function yL(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}const mL=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Mp},__asyncDelegator:lL,__asyncGenerator:uL,__asyncValues:dL,__await:Au,__awaiter:rL,__classPrivateFieldGet:gL,__classPrivateFieldSet:yL,__createBinding:sL,__decorate:eL,__exportStar:oL,__extends:Zx,__generator:iL,__importDefault:pL,__importStar:fL,__makeTemplateObject:hL,__metadata:nL,__param:tL,__read:IT,__rest:Jx,__spread:aL,__spreadArrays:cL,__values:Np},Symbol.toStringTag,{value:"Module"})),Pu=xS(mL);var Tv={},qc={},Mv;function wL(){if(Mv)return qc;Mv=1,Object.defineProperty(qc,"__esModule",{value:!0}),qc.delay=void 0;function e(t){return new Promise(n=>{setTimeout(()=>{n(!0)},t)})}return qc.delay=e,qc}var Rs={},Nv={},Do={},Iv;function bL(){return Iv||(Iv=1,Object.defineProperty(Do,"__esModule",{value:!0}),Do.ONE_THOUSAND=Do.ONE_HUNDRED=void 0,Do.ONE_HUNDRED=100,Do.ONE_THOUSAND=1e3),Do}var _v={},Ov;function vL(){return Ov||(Ov=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365})(_v)),_v}var Dv;function _T(){return Dv||(Dv=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Pu;t.__exportStar(bL(),e),t.__exportStar(vL(),e)})(Nv)),Nv}var xv;function EL(){if(xv)return Rs;xv=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.fromMiliseconds=Rs.toMiliseconds=void 0;const e=_T();function t(r){return r*e.ONE_THOUSAND}Rs.toMiliseconds=t;function n(r){return Math.floor(r/e.ONE_THOUSAND)}return Rs.fromMiliseconds=n,Rs}var Lv;function AL(){return Lv||(Lv=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Pu;t.__exportStar(wL(),e),t.__exportStar(EL(),e)})(Tv)),Tv}var xo={},Cv;function SL(){if(Cv)return xo;Cv=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return xo.Watch=e,xo.default=e,xo}var jv={},Gc={},Pv;function TL(){if(Pv)return Gc;Pv=1,Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.IWatch=void 0;class e{}return Gc.IWatch=e,Gc}var kv;function ML(){return kv||(kv=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Pu.__exportStar(TL(),e)})(jv)),jv}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Pu;t.__exportStar(AL(),e),t.__exportStar(SL(),e),t.__exportStar(ML(),e),t.__exportStar(_T(),e)})(Ae);class lo{}let NL=class extends lo{constructor(e){super()}};const Rv=Ae.FIVE_SECONDS,ho={pulse:"heartbeat_pulse"};let IL=class OT extends NL{constructor(t){super(t),this.events=new In.EventEmitter,this.interval=Rv,this.interval=t?.interval||Rv}static async init(t){const n=new OT(t);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Ae.toMiliseconds(this.interval))}pulse(){this.events.emit(ho.pulse)}};const _L=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,OL=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,DL=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function xL(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){LL(e);return}return t}function LL(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function gl(e,t={}){if(typeof e!="string")return e;if(e[0]==='"'&&e[e.length-1]==='"'&&e.indexOf("\\")===-1)return e.slice(1,-1);const n=e.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!DL.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(_L.test(e)||OL.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,xL)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}function CL(e){return!e||typeof e.then!="function"?Promise.resolve(e):e}function Pt(e,...t){try{return CL(e(...t))}catch(n){return Promise.reject(n)}}function jL(e){const t=typeof e;return e===null||t!=="object"&&t!=="function"}function PL(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}function Yl(e){if(jL(e))return String(e);if(PL(e)||Array.isArray(e))return JSON.stringify(e);if(typeof e.toJSON=="function")return Yl(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Ip="base64:";function kL(e){return typeof e=="string"?e:Ip+UL(e)}function RL(e){return typeof e!="string"||!e.startsWith(Ip)?e:BL(e.slice(Ip.length))}function BL(e){return globalThis.Buffer?De.Buffer.from(e,"base64"):Uint8Array.from(globalThis.atob(e),t=>t.codePointAt(0))}function UL(e){return globalThis.Buffer?De.Buffer.from(e).toString("base64"):globalThis.btoa(String.fromCodePoint(...e))}function mn(e){var t;return e&&((t=e.split("?")[0])==null?void 0:t.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function zL(...e){return mn(e.join(":"))}function yl(e){return e=mn(e),e?e+":":""}function FL(e,t){if(t===void 0)return!0;let n=0,r=e.indexOf(":");for(;r>-1;)n++,r=e.indexOf(":",r+1);return n<=t}function HL(e,t){return t?e.startsWith(t)&&e[e.length-1]!=="$":e[e.length-1]!=="$"}const VL="memory",qL=()=>{const e=new Map;return{name:VL,getInstance:()=>e,hasItem(t){return e.has(t)},getItem(t){return e.get(t)??null},getItemRaw(t){return e.get(t)??null},setItem(t,n){e.set(t,n)},setItemRaw(t,n){e.set(t,n)},removeItem(t){e.delete(t)},getKeys(){return[...e.keys()]},clear(){e.clear()},dispose(){e.clear()}}};function GL(e={}){const t={mounts:{"":e.driver||qL()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=c=>{for(const l of t.mountpoints)if(c.startsWith(l))return{base:l,relativeKey:c.slice(l.length),driver:t.mounts[l]};return{base:"",relativeKey:c,driver:t.mounts[""]}},r=(c,l)=>t.mountpoints.filter(d=>d.startsWith(c)||l&&c.startsWith(d)).map(d=>({relativeBase:c.length>d.length?c.slice(d.length):void 0,mountpoint:d,driver:t.mounts[d]})),s=(c,l)=>{if(t.watching){l=mn(l);for(const d of t.watchListeners)d(c,l)}},i=async()=>{if(!t.watching){t.watching=!0;for(const c in t.mounts)t.unwatch[c]=await Bv(t.mounts[c],s,c)}},o=async()=>{if(t.watching){for(const c in t.unwatch)await t.unwatch[c]();t.unwatch={},t.watching=!1}},a=(c,l,d)=>{const f=new Map,h=p=>{let g=f.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},f.set(p.base,g)),g};for(const p of c){const g=typeof p=="string",y=mn(g?p:p.key),b=g?void 0:p.value,A=g||!p.options?l:{...l,...p.options},E=n(y);h(E).items.push({key:y,value:b,relativeKey:E.relativeKey,options:A})}return Promise.all([...f.values()].map(p=>d(p))).then(p=>p.flat())},u={hasItem(c,l={}){c=mn(c);const{relativeKey:d,driver:f}=n(c);return Pt(f.hasItem,d,l)},getItem(c,l={}){c=mn(c);const{relativeKey:d,driver:f}=n(c);return Pt(f.getItem,d,l).then(h=>gl(h))},getItems(c,l={}){return a(c,l,d=>d.driver.getItems?Pt(d.driver.getItems,d.items.map(f=>({key:f.relativeKey,options:f.options})),l).then(f=>f.map(h=>({key:zL(d.base,h.key),value:gl(h.value)}))):Promise.all(d.items.map(f=>Pt(d.driver.getItem,f.relativeKey,f.options).then(h=>({key:f.key,value:gl(h)})))))},getItemRaw(c,l={}){c=mn(c);const{relativeKey:d,driver:f}=n(c);return f.getItemRaw?Pt(f.getItemRaw,d,l):Pt(f.getItem,d,l).then(h=>RL(h))},async setItem(c,l,d={}){if(l===void 0)return u.removeItem(c);c=mn(c);const{relativeKey:f,driver:h}=n(c);h.setItem&&(await Pt(h.setItem,f,Yl(l),d),h.watch||s("update",c))},async setItems(c,l){await a(c,l,async d=>{if(d.driver.setItems)return Pt(d.driver.setItems,d.items.map(f=>({key:f.relativeKey,value:Yl(f.value),options:f.options})),l);d.driver.setItem&&await Promise.all(d.items.map(f=>Pt(d.driver.setItem,f.relativeKey,Yl(f.value),f.options)))})},async setItemRaw(c,l,d={}){if(l===void 0)return u.removeItem(c,d);c=mn(c);const{relativeKey:f,driver:h}=n(c);if(h.setItemRaw)await Pt(h.setItemRaw,f,l,d);else if(h.setItem)await Pt(h.setItem,f,kL(l),d);else return;h.watch||s("update",c)},async removeItem(c,l={}){typeof l=="boolean"&&(l={removeMeta:l}),c=mn(c);const{relativeKey:d,driver:f}=n(c);f.removeItem&&(await Pt(f.removeItem,d,l),(l.removeMeta||l.removeMata)&&await Pt(f.removeItem,d+"$",l),f.watch||s("remove",c))},async getMeta(c,l={}){typeof l=="boolean"&&(l={nativeOnly:l}),c=mn(c);const{relativeKey:d,driver:f}=n(c),h=Object.create(null);if(f.getMeta&&Object.assign(h,await Pt(f.getMeta,d,l)),!l.nativeOnly){const p=await Pt(f.getItem,d+"$",l).then(g=>gl(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(h,p))}return h},setMeta(c,l,d={}){return this.setItem(c+"$",l,d)},removeMeta(c,l={}){return this.removeItem(c+"$",l)},async getKeys(c,l={}){var d;c=yl(c);const f=r(c,!0);let h=[];const p=[];let g=!0;for(const b of f){(d=b.driver.flags)!=null&&d.maxDepth||(g=!1);const A=await Pt(b.driver.getKeys,b.relativeBase,l);for(const E of A){const _=b.mountpoint+mn(E);h.some(S=>_.startsWith(S))||p.push(_)}h=[b.mountpoint,...h.filter(E=>!E.startsWith(b.mountpoint))]}const y=l.maxDepth!==void 0&&!g;return p.filter(b=>(!y||FL(b,l.maxDepth))&&HL(b,c))},async clear(c,l={}){c=yl(c),await Promise.all(r(c,!1).map(async d=>{if(d.driver.clear)return Pt(d.driver.clear,d.relativeBase,l);if(d.driver.removeItem){const f=await d.driver.getKeys(d.relativeBase||"",l);return Promise.all(f.map(h=>d.driver.removeItem(h,l)))}}))},async dispose(){await Promise.all(Object.values(t.mounts).map(c=>Uv(c)))},async watch(c){return await i(),t.watchListeners.push(c),async()=>{t.watchListeners=t.watchListeners.filter(l=>l!==c),t.watchListeners.length===0&&await o()}},async unwatch(){t.watchListeners=[],await o()},mount(c,l){if(c=yl(c),c&&t.mounts[c])throw new Error(`already mounted at ${c}`);return c&&(t.mountpoints.push(c),t.mountpoints.sort((d,f)=>f.length-d.length)),t.mounts[c]=l,t.watching&&Promise.resolve(Bv(l,s,c)).then(d=>{t.unwatch[c]=d}).catch(console.error),u},async unmount(c,l=!0){var d,f;c=yl(c),!(!c||!t.mounts[c])&&(t.watching&&c in t.unwatch&&((f=(d=t.unwatch)[c])==null||f.call(d),delete t.unwatch[c]),l&&await Uv(t.mounts[c]),t.mountpoints=t.mountpoints.filter(h=>h!==c),delete t.mounts[c])},getMount(c=""){c=mn(c)+":";const l=n(c);return{driver:l.driver,base:l.base}},getMounts(c="",l={}){return c=mn(c),r(c,l.parents).map(d=>({driver:d.driver,base:d.mountpoint}))},keys:(c,l={})=>u.getKeys(c,l),get:(c,l={})=>u.getItem(c,l),set:(c,l,d={})=>u.setItem(c,l,d),has:(c,l={})=>u.hasItem(c,l),del:(c,l={})=>u.removeItem(c,l),remove:(c,l={})=>u.removeItem(c,l)};return u}function Bv(e,t,n){return e.watch?e.watch((r,s)=>t(r,n+s)):()=>{}}async function Uv(e){typeof e.dispose=="function"&&await Pt(e.dispose)}function fo(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function DT(e,t){let n;const r=()=>{if(n)return n;const s=indexedDB.open(e);return s.onupgradeneeded=()=>s.result.createObjectStore(t),n=fo(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(t,s).objectStore(t)))}let wf;function ku(){return wf||(wf=DT("keyval-store","keyval")),wf}function zv(e,t=ku()){return t("readonly",n=>fo(n.get(e)))}function KL(e,t,n=ku()){return n("readwrite",r=>(r.put(t,e),fo(r.transaction)))}function YL(e,t=ku()){return t("readwrite",n=>(n.delete(e),fo(n.transaction)))}function WL(e=ku()){return e("readwrite",t=>(t.clear(),fo(t.transaction)))}function XL(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},fo(e.transaction)}function QL(e=ku()){return e("readonly",t=>{if(t.getAllKeys)return fo(t.getAllKeys());const n=[];return XL(t,r=>n.push(r.key)).then(()=>n)})}const $L=e=>JSON.stringify(e,(t,n)=>typeof n=="bigint"?n.toString()+"n":n),ZL=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=e.replace(t,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Zo(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return ZL(e)}catch{return e}}function eo(e){return typeof e=="string"?e:$L(e)||""}const JL="idb-keyval";var eC=(e={})=>{const t=e.base&&e.base.length>0?`${e.base}:`:"",n=s=>t+s;let r;return e.dbName&&e.storeName&&(r=DT(e.dbName,e.storeName)),{name:JL,options:e,async hasItem(s){return!(typeof await zv(n(s),r)>"u")},async getItem(s){return await zv(n(s),r)??null},setItem(s,i){return KL(n(s),i,r)},removeItem(s){return YL(n(s),r)},getKeys(){return QL(r)},clear(){return WL(r)}}};const tC="WALLET_CONNECT_V2_INDEXED_DB",nC="keyvaluestorage";let rC=class{constructor(){this.indexedDb=GL({driver:eC({dbName:tC,storeName:nC})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,eo(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var bf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},Wl={exports:{}};(function(){let e;function t(){}e=t,e.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},e.prototype.setItem=function(n,r){this[n]=String(r)},e.prototype.removeItem=function(n){delete this[n]},e.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},e.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},e.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof bf<"u"&&bf.localStorage?Wl.exports=bf.localStorage:typeof window<"u"&&window.localStorage?Wl.exports=window.localStorage:Wl.exports=new t})();function iC(e){var t;return[e[0],Zo((t=e[1])!=null?t:"")]}let sC=class{constructor(){this.localStorage=Wl.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(iC)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return Zo(t)}async setItem(e,t){this.localStorage.setItem(e,eo(t))}async removeItem(e){this.localStorage.removeItem(e)}};const oC="wc_storage_version",Fv=1,aC=async(e,t,n)=>{const r=oC,s=await t.getItem(r);if(s&&s>=Fv){n(t);return}const i=await e.getKeys();if(!i.length){n(t);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const u=a.toLowerCase();if(u.includes("wc@")||u.includes("walletconnect")||u.includes("wc_")||u.includes("wallet_connect")){const c=await e.getItem(a);await t.setItem(a,c),o.push(a)}}await t.setItem(r,Fv),n(t),cC(e,o)},cC=async(e,t)=>{t.length&&t.forEach(async n=>{await e.removeItem(n)})};let uC=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new sC;this.storage=e;try{const t=new rC;aC(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};var gh={exports:{}};function lC(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}var dC=hC;function hC(e,t,n){var r=n&&n.stringify||lC,s=1;if(typeof e=="object"&&e!==null){var i=t.length+s;if(i===1)return e;var o=new Array(i);o[0]=r(e);for(var a=1;a<i;a++)o[a]=r(t[a]);return o.join(" ")}if(typeof e!="string")return e;var u=t.length;if(u===0)return e;for(var c="",l=1-s,d=-1,f=e&&e.length||0,h=0;h<f;){if(e.charCodeAt(h)===37&&h+1<f){switch(d=d>-1?d:0,e.charCodeAt(h+1)){case 100:case 102:if(l>=u||t[l]==null)break;d<h&&(c+=e.slice(d,h)),c+=Number(t[l]),d=h+2,h++;break;case 105:if(l>=u||t[l]==null)break;d<h&&(c+=e.slice(d,h)),c+=Math.floor(Number(t[l])),d=h+2,h++;break;case 79:case 111:case 106:if(l>=u||t[l]===void 0)break;d<h&&(c+=e.slice(d,h));var p=typeof t[l];if(p==="string"){c+="'"+t[l]+"'",d=h+2,h++;break}if(p==="function"){c+=t[l].name||"<anonymous>",d=h+2,h++;break}c+=r(t[l]),d=h+2,h++;break;case 115:if(l>=u)break;d<h&&(c+=e.slice(d,h)),c+=String(t[l]),d=h+2,h++;break;case 37:d<h&&(c+=e.slice(d,h)),c+="%",d=h+2,h++,l--;break}++l}++h}return d===-1?e:(d<f&&(c+=e.slice(d)),c)}const Hv=dC;gh.exports=di;const Su=IC().console||{},fC={mapHttpRequest:ml,mapHttpResponse:ml,wrapRequestSerializer:vf,wrapResponseSerializer:vf,wrapErrorSerializer:vf,req:ml,res:ml,err:qv,errWithCause:qv};function qi(e,t){return e==="silent"?1/0:t.levels.values[e]}const c0=Symbol("pino.logFuncs"),_p=Symbol("pino.hierarchy"),pC={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function Vv(e,t){const n={logger:t,parent:e[_p]};t[_p]=n}function gC(e,t,n){const r={};t.forEach(s=>{r[s]=n[s]?n[s]:Su[s]||Su[pC[s]||"log"]||Ko}),e[c0]=r}function yC(e,t){return Array.isArray(e)?e.filter(function(n){return n!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function di(e){e=e||{},e.browser=e.browser||{};const t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");const n=e.browser.write||Su;e.browser.write&&(e.browser.asObject=!0);const r=e.serializers||{},s=yC(e.browser.serialize,r);let i=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=Object.keys(e.customLevels||{}),a=["error","fatal","warn","info","debug","trace"].concat(o);typeof n=="function"&&a.forEach(function(g){n[g]=n}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");const u=e.level||"info",c=Object.create(n);c.log||(c.log=Ko),gC(c,a,n),Vv({},c),Object.defineProperty(c,"levelVal",{get:d}),Object.defineProperty(c,"level",{get:f,set:h});const l={transmit:t,serialize:s,asObject:e.browser.asObject,asObjectBindingsOnly:e.browser.asObjectBindingsOnly,formatters:e.browser.formatters,levels:a,timestamp:TC(e),messageKey:e.messageKey||"msg",onChild:e.onChild||Ko};c.levels=mC(e),c.level=u,c.isLevelEnabled=function(g){return this.levels.values[g]?this.levels.values[g]>=this.levels.values[this.level]:!1},c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=Ko,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=function(...g){return p.call(this,l,...g)},t&&(c._logEvent=Op());function d(){return qi(this.level,this)}function f(){return this._level}function h(g){if(g!=="silent"&&!this.levels.values[g])throw Error("unknown level "+g);this._level=g,Bs(this,l,c,"error"),Bs(this,l,c,"fatal"),Bs(this,l,c,"warn"),Bs(this,l,c,"info"),Bs(this,l,c,"debug"),Bs(this,l,c,"trace"),o.forEach(y=>{Bs(this,l,c,y)})}function p(g,y,b){if(!y)throw new Error("missing bindings for child Pino");b=b||{},s&&y.serializers&&(b.serializers=y.serializers);const A=b.serializers;if(s&&A){var E=Object.assign({},r,A),_=e.browser.serialize===!0?Object.keys(E):s;delete y.serializers,u0([y],_,E,this._stdErrSerialize)}function S(D){this._childLevel=(D._childLevel|0)+1,this.bindings=y,E&&(this.serializers=E,this._serialize=_),t&&(this._logEvent=Op([].concat(D._logEvent.bindings,y)))}S.prototype=this;const I=new S(this);return Vv(this,I),I.child=function(...D){return p.call(this,g,...D)},I.level=b.level||this.level,g.onChild(I),I}return c}function mC(e){const t=e.customLevels||{},n=Object.assign({},di.levels.values,t),r=Object.assign({},di.levels.labels,wC(t));return{values:n,labels:r}}function wC(e){const t={};return Object.keys(e).forEach(function(n){t[e[n]]=n}),t}di.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};di.stdSerializers=fC;di.stdTimeFunctions=Object.assign({},{nullTime:xT,epochTime:LT,unixTime:MC,isoTime:NC});function bC(e){const t=[];e.bindings&&t.push(e.bindings);let n=e[_p];for(;n.parent;)n=n.parent,n.logger.bindings&&t.push(n.logger.bindings);return t.reverse()}function Bs(e,t,n,r){if(Object.defineProperty(e,r,{value:qi(e.level,n)>qi(r,n)?Ko:n[c0][r],writable:!0,enumerable:!0,configurable:!0}),e[r]===Ko){if(!t.transmit)return;const i=t.transmit.level||e.level,o=qi(i,n);if(qi(r,n)<o)return}e[r]=EC(e,t,n,r);const s=bC(e);s.length!==0&&(e[r]=vC(s,e[r]))}function vC(e,t){return function(){return t.apply(this,[...e,...arguments])}}function EC(e,t,n,r){return(function(s){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Su?Su:this;for(var u=0;u<o.length;u++)o[u]=arguments[u];var c=!1;if(t.serialize&&(u0(o,this._serialize,this.serializers,this._stdErrSerialize),c=!0),t.asObject||t.formatters?s.call(a,...AC(this,r,o,i,t)):s.apply(a,o),t.transmit){const l=t.transmit.level||e._level,d=qi(l,n),f=qi(r,n);if(f<d)return;SC(this,{ts:i,methodLevel:r,methodValue:f,transmitValue:n.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:qi(e._level,n)},o,c)}}})(e[c0][r])}function AC(e,t,n,r,s){const{level:i,log:o=d=>d}=s.formatters||{},a=n.slice();let u=a[0];const c={};let l=(e._childLevel|0)+1;if(l<1&&(l=1),r&&(c.time=r),i){const d=i(t,e.levels.values[t]);Object.assign(c,d)}else c.level=e.levels.values[t];if(s.asObjectBindingsOnly){if(u!==null&&typeof u=="object")for(;l--&&typeof a[0]=="object";)Object.assign(c,a.shift());return[o(c),...a]}else{if(u!==null&&typeof u=="object"){for(;l--&&typeof a[0]=="object";)Object.assign(c,a.shift());u=a.length?Hv(a.shift(),a):void 0}else typeof u=="string"&&(u=Hv(a.shift(),a));return u!==void 0&&(c[s.messageKey]=u),[o(c)]}}function u0(e,t,n,r){for(const s in e)if(r&&e[s]instanceof Error)e[s]=di.stdSerializers.err(e[s]);else if(typeof e[s]=="object"&&!Array.isArray(e[s])&&t)for(const i in e[s])t.indexOf(i)>-1&&i in n&&(e[s][i]=n[i](e[s][i]))}function SC(e,t,n,r=!1){const s=t.send,i=t.ts,o=t.methodLevel,a=t.methodValue,u=t.val,c=e._logEvent.bindings;r||u0(n,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=i,e._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),e._logEvent.level.label=o,e._logEvent.level.value=a,s(o,e._logEvent,u),e._logEvent=Op(c)}function Op(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function qv(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const n in e)t[n]===void 0&&(t[n]=e[n]);return t}function TC(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?xT:LT}function ml(){return{}}function vf(e){return e}function Ko(){}function xT(){return!1}function LT(){return Date.now()}function MC(){return Math.round(Date.now()/1e3)}function NC(){return new Date(Date.now()).toISOString()}function IC(){function e(t){return typeof t<"u"&&t}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}gh.exports.default=di;gh.exports.pino=di;var Ho=gh.exports;const CT=aa(Ho),_C={level:"info"},yh="custom_context",l0=1e3*1024;var OC=Object.defineProperty,DC=(e,t,n)=>t in e?OC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zi=(e,t,n)=>DC(e,typeof t!="symbol"?t+"":t,n);let xC=class{constructor(e){zi(this,"nodeValue"),zi(this,"sizeInBytes"),zi(this,"next"),this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},Gv=class{constructor(e){zi(this,"lengthInNodes"),zi(this,"sizeInBytes"),zi(this,"head"),zi(this,"tail"),zi(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const t=new xC(e);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let t=this.head;for(;t!==null;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const t=e.value;return e=e.next,{done:!1,value:t}}}}};var LC=Object.defineProperty,CC=(e,t,n)=>t in e?LC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wl=(e,t,n)=>CC(e,typeof t!="symbol"?t+"":t,n);class jT{constructor(t,n=l0){wl(this,"logs"),wl(this,"level"),wl(this,"levelValue"),wl(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=t??"error",this.levelValue=Ho.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new Gv(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(t,n){n===Ho.levels.values.error?console.error(t):n===Ho.levels.values.warn?console.warn(t):n===Ho.levels.values.debug?console.debug(t):n===Ho.levels.values.trace?console.trace(t):console.log(t)}appendToLogs(t){this.logs.append(eo({timestamp:new Date().toISOString(),log:t}));const n=typeof t=="string"?JSON.parse(t).level:t.level;n>=this.levelValue&&this.forwardToConsole(t,n)}getLogs(){return this.logs}clearLogs(){this.logs=new Gv(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(t){const n=this.getLogArray();return n.push(eo({extraMetadata:t})),new Blob(n,{type:"application/json"})}}var jC=Object.defineProperty,PC=(e,t,n)=>t in e?jC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kC=(e,t,n)=>PC(e,t+"",n);class RC{constructor(t,n=l0){kC(this,"baseChunkLogger"),this.baseChunkLogger=new jT(t,n)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}downloadLogsBlobInBrowser(t){const n=URL.createObjectURL(this.logsToBlob(t)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}}var BC=Object.defineProperty,UC=(e,t,n)=>t in e?BC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zC=(e,t,n)=>UC(e,t+"",n);let FC=class{constructor(e,t=l0){zC(this,"baseChunkLogger"),this.baseChunkLogger=new jT(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var HC=Object.defineProperty,VC=Object.defineProperties,qC=Object.getOwnPropertyDescriptors,Kv=Object.getOwnPropertySymbols,GC=Object.prototype.hasOwnProperty,KC=Object.prototype.propertyIsEnumerable,Yv=(e,t,n)=>t in e?HC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ad=(e,t)=>{for(var n in t||(t={}))GC.call(t,n)&&Yv(e,n,t[n]);if(Kv)for(var n of Kv(t))KC.call(t,n)&&Yv(e,n,t[n]);return e},cd=(e,t)=>VC(e,qC(t));function YC(e){return cd(ad({},e),{level:e?.level||_C.level})}function WC(e,t,n=yh){return e[n]=t,e}function _n(e,t=yh){return e[t]||""}function XC(e,t,n=yh){const r=_n(e,n);return r.trim()?`${r}/${t}`:t}function Bn(e,t,n=yh){const r=XC(e,t,n),s=e.child({context:r});return WC(s,r,n)}function QC(e){var t,n;const r=new RC((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:CT(cd(ad({},e.opts),{level:"trace",browser:cd(ad({},(n=e.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function $C(e){var t;const n=new FC((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:CT(cd(ad({},e.opts),{level:"trace"}),n),chunkLoggerController:n}}function PT(e){return typeof e.loggerOverride<"u"&&typeof e.loggerOverride!="string"?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?QC(e):$C(e)}var ZC=Object.defineProperty,JC=(e,t,n)=>t in e?ZC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wv=(e,t,n)=>JC(e,typeof t!="symbol"?t+"":t,n);let e3=class extends lo{constructor(e){super(),this.opts=e,Wv(this,"protocol","wc"),Wv(this,"version",2)}};var t3=Object.defineProperty,n3=(e,t,n)=>t in e?t3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,r3=(e,t,n)=>n3(e,t+"",n);class i3 extends lo{constructor(t,n){super(),this.core=t,this.logger=n,r3(this,"records",new Map)}}let s3=class{constructor(e,t){this.logger=e,this.core=t}},o3=class extends lo{constructor(e,t){super(),this.relayer=e,this.logger=t}},a3=class extends lo{constructor(e){super()}},c3=class{constructor(e,t,n,r){this.core=e,this.logger=t,this.name=n}},u3=class extends lo{constructor(e,t){super(),this.relayer=e,this.logger=t}},l3=class extends lo{constructor(e,t){super(),this.core=e,this.logger=t}},d3=class{constructor(e,t,n){this.core=e,this.logger=t,this.store=n}},h3=class{constructor(e,t){this.projectId=e,this.logger=t}},f3=class{constructor(e,t,n){this.core=e,this.logger=t,this.telemetryEnabled=n}};var p3=Object.defineProperty,g3=(e,t,n)=>t in e?p3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xv=(e,t,n)=>g3(e,typeof t!="symbol"?t+"":t,n);let y3=class{constructor(e){this.opts=e,Xv(this,"protocol","wc"),Xv(this,"version",2)}},m3=class{constructor(e){this.client=e}};function w3(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function kT(e,...t){if(!w3(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Qv(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function b3(e,t){kT(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Lo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;const Ef=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function v3(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function RT(e){return typeof e=="string"&&(e=v3(e)),kT(e),e}let E3=class{clone(){return this._cloneInto()}};function A3(e){const t=r=>e().update(RT(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function BT(e=32){if(Lo&&typeof Lo.getRandomValues=="function")return Lo.getRandomValues(new Uint8Array(e));if(Lo&&typeof Lo.randomBytes=="function")return Lo.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function S3(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),u=r?4:0,c=r?0:4;e.setUint32(t+u,o,r),e.setUint32(t+c,a,r)}let T3=class extends E3{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ef(this.buffer)}update(e){Qv(this);const{view:t,buffer:n,blockLen:r}=this;e=RT(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){const a=Ef(e);for(;r<=s-i;i+=r)this.process(a,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Qv(this),b3(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:s}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let l=i;l<r;l++)t[l]=0;S3(n,r-8,BigInt(this.length*8),s),this.process(n,0);const o=Ef(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)o.setUint32(4*l,c[l],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:s,destroyed:i,pos:o}=this;return e.length=r,e.pos=o,e.finished=s,e.destroyed=i,r%t&&e.buffer.set(n),e}};const bl=BigInt(2**32-1),Dp=BigInt(32);function UT(e,t=!1){return t?{h:Number(e&bl),l:Number(e>>Dp&bl)}:{h:Number(e>>Dp&bl)|0,l:Number(e&bl)|0}}function M3(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:i,l:o}=UT(e[s],t);[n[s],r[s]]=[i,o]}return[n,r]}const N3=(e,t)=>BigInt(e>>>0)<<Dp|BigInt(t>>>0),I3=(e,t,n)=>e>>>n,_3=(e,t,n)=>e<<32-n|t>>>n,O3=(e,t,n)=>e>>>n|t<<32-n,D3=(e,t,n)=>e<<32-n|t>>>n,x3=(e,t,n)=>e<<64-n|t>>>n-32,L3=(e,t,n)=>e>>>n-32|t<<64-n,C3=(e,t)=>t,j3=(e,t)=>e,P3=(e,t,n)=>e<<n|t>>>32-n,k3=(e,t,n)=>t<<n|e>>>32-n,R3=(e,t,n)=>t<<n-32|e>>>64-n,B3=(e,t,n)=>e<<n-32|t>>>64-n;function U3(e,t,n,r){const s=(t>>>0)+(r>>>0);return{h:e+n+(s/2**32|0)|0,l:s|0}}const z3=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),F3=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,H3=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),V3=(e,t,n,r,s)=>t+n+r+s+(e/2**32|0)|0,q3=(e,t,n,r,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(s>>>0),G3=(e,t,n,r,s,i)=>t+n+r+s+i+(e/2**32|0)|0,Re={fromBig:UT,split:M3,toBig:N3,shrSH:I3,shrSL:_3,rotrSH:O3,rotrSL:D3,rotrBH:x3,rotrBL:L3,rotr32H:C3,rotr32L:j3,rotlSH:P3,rotlSL:k3,rotlBH:R3,rotlBL:B3,add:U3,add3L:z3,add3H:F3,add4L:H3,add4H:V3,add5H:G3,add5L:q3},[K3,Y3]=Re.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),wi=new Uint32Array(80),bi=new Uint32Array(80);let W3=class extends T3{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:s,Cl:i,Dh:o,Dl:a,Eh:u,El:c,Fh:l,Fl:d,Gh:f,Gl:h,Hh:p,Hl:g}=this;return[e,t,n,r,s,i,o,a,u,c,l,d,f,h,p,g]}set(e,t,n,r,s,i,o,a,u,c,l,d,f,h,p,g){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=r|0,this.Ch=s|0,this.Cl=i|0,this.Dh=o|0,this.Dl=a|0,this.Eh=u|0,this.El=c|0,this.Fh=l|0,this.Fl=d|0,this.Gh=f|0,this.Gl=h|0,this.Hh=p|0,this.Hl=g|0}process(e,t){for(let A=0;A<16;A++,t+=4)wi[A]=e.getUint32(t),bi[A]=e.getUint32(t+=4);for(let A=16;A<80;A++){const E=wi[A-15]|0,_=bi[A-15]|0,S=Re.rotrSH(E,_,1)^Re.rotrSH(E,_,8)^Re.shrSH(E,_,7),I=Re.rotrSL(E,_,1)^Re.rotrSL(E,_,8)^Re.shrSL(E,_,7),D=wi[A-2]|0,L=bi[A-2]|0,x=Re.rotrSH(D,L,19)^Re.rotrBH(D,L,61)^Re.shrSH(D,L,6),j=Re.rotrSL(D,L,19)^Re.rotrBL(D,L,61)^Re.shrSL(D,L,6),V=Re.add4L(I,j,bi[A-7],bi[A-16]),Y=Re.add4H(V,S,x,wi[A-7],wi[A-16]);wi[A]=Y|0,bi[A]=V|0}let{Ah:n,Al:r,Bh:s,Bl:i,Ch:o,Cl:a,Dh:u,Dl:c,Eh:l,El:d,Fh:f,Fl:h,Gh:p,Gl:g,Hh:y,Hl:b}=this;for(let A=0;A<80;A++){const E=Re.rotrSH(l,d,14)^Re.rotrSH(l,d,18)^Re.rotrBH(l,d,41),_=Re.rotrSL(l,d,14)^Re.rotrSL(l,d,18)^Re.rotrBL(l,d,41),S=l&f^~l&p,I=d&h^~d&g,D=Re.add5L(b,_,I,Y3[A],bi[A]),L=Re.add5H(D,y,E,S,K3[A],wi[A]),x=D|0,j=Re.rotrSH(n,r,28)^Re.rotrBH(n,r,34)^Re.rotrBH(n,r,39),V=Re.rotrSL(n,r,28)^Re.rotrBL(n,r,34)^Re.rotrBL(n,r,39),Y=n&s^n&o^s&o,q=r&i^r&a^i&a;y=p|0,b=g|0,p=f|0,g=h|0,f=l|0,h=d|0,{h:l,l:d}=Re.add(u|0,c|0,L|0,x|0),u=o|0,c=a|0,o=s|0,a=i|0,s=n|0,i=r|0;const R=Re.add3L(x,V,q);n=Re.add3H(R,L,j,Y),r=R|0}({h:n,l:r}=Re.add(this.Ah|0,this.Al|0,n|0,r|0)),{h:s,l:i}=Re.add(this.Bh|0,this.Bl|0,s|0,i|0),{h:o,l:a}=Re.add(this.Ch|0,this.Cl|0,o|0,a|0),{h:u,l:c}=Re.add(this.Dh|0,this.Dl|0,u|0,c|0),{h:l,l:d}=Re.add(this.Eh|0,this.El|0,l|0,d|0),{h:f,l:h}=Re.add(this.Fh|0,this.Fl|0,f|0,h|0),{h:p,l:g}=Re.add(this.Gh|0,this.Gl|0,p|0,g|0),{h:y,l:b}=Re.add(this.Hh|0,this.Hl|0,y|0,b|0),this.set(n,r,s,i,o,a,u,c,l,d,f,h,p,g,y,b)}roundClean(){wi.fill(0),bi.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const X3=A3(()=>new W3);const d0=BigInt(0),zT=BigInt(1),Q3=BigInt(2);function h0(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function f0(e){if(!h0(e))throw new Error("Uint8Array expected")}function Af(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const $3=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function p0(e){f0(e);let t="";for(let n=0;n<e.length;n++)t+=$3[e[n]];return t}function FT(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?d0:BigInt("0x"+e)}const Yr={_0:48,_9:57,A:65,F:70,a:97,f:102};function $v(e){if(e>=Yr._0&&e<=Yr._9)return e-Yr._0;if(e>=Yr.A&&e<=Yr.F)return e-(Yr.A-10);if(e>=Yr.a&&e<=Yr.f)return e-(Yr.a-10)}function HT(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=$v(e.charCodeAt(i)),a=$v(e.charCodeAt(i+1));if(o===void 0||a===void 0){const u=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+i)}r[s]=o*16+a}return r}function Z3(e){return FT(p0(e))}function Xl(e){return f0(e),FT(p0(Uint8Array.from(e).reverse()))}function VT(e,t){return HT(e.toString(16).padStart(t*2,"0"))}function xp(e,t){return VT(e,t).reverse()}function Wr(e,t,n){let r;if(typeof t=="string")try{r=HT(t)}catch(i){throw new Error(e+" must be hex string or Uint8Array, cause: "+i)}else if(h0(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(e+" of length "+n+" expected, got "+s);return r}function Zv(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];f0(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const i=e[r];n.set(i,s),s+=i.length}return n}const Sf=e=>typeof e=="bigint"&&d0<=e;function J3(e,t,n){return Sf(e)&&Sf(t)&&Sf(n)&&t<=e&&e<n}function Kc(e,t,n,r){if(!J3(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function e5(e){let t;for(t=0;e>d0;e>>=zT,t+=1);return t}const t5=e=>(Q3<<BigInt(e-1))-zT,n5={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||h0(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function g0(e,t,n={}){const r=(s,i,o)=>{const a=n5[i];if(typeof a!="function")throw new Error("invalid validator function");const u=e[s];if(!(o&&u===void 0)&&!a(u,e))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+u)};for(const[s,i]of Object.entries(t))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return e}function Jv(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(s!==void 0)return s;const i=e(n,...r);return t.set(n,i),i}}const Bt=BigInt(0),wt=BigInt(1),Gs=BigInt(2),r5=BigInt(3),Lp=BigInt(4),eE=BigInt(5),tE=BigInt(8);function _t(e,t){const n=e%t;return n>=Bt?n:t+n}function i5(e,t,n){if(t<Bt)throw new Error("invalid exponent, negatives unsupported");if(n<=Bt)throw new Error("invalid modulus");if(n===wt)return Bt;let r=wt;for(;t>Bt;)t&wt&&(r=r*e%n),e=e*e%n,t>>=wt;return r}function yr(e,t,n){let r=e;for(;t-- >Bt;)r*=r,r%=n;return r}function nE(e,t){if(e===Bt)throw new Error("invert: expected non-zero number");if(t<=Bt)throw new Error("invert: expected positive modulus, got "+t);let n=_t(e,t),r=t,s=Bt,i=wt;for(;n!==Bt;){const o=r/n,a=r%n,u=s-i*o;r=n,n=a,s=i,i=u}if(r!==wt)throw new Error("invert: does not exist");return _t(s,t)}function s5(e){const t=(e-wt)/Gs;let n,r,s;for(n=e-wt,r=0;n%Gs===Bt;n/=Gs,r++);for(s=Gs;s<e&&i5(s,t,e)!==e-wt;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(e+wt)/Lp;return function(a,u){const c=a.pow(u,o);if(!a.eql(a.sqr(c),u))throw new Error("Cannot find square root");return c}}const i=(n+wt)/Gs;return function(o,a){if(o.pow(a,t)===o.neg(o.ONE))throw new Error("Cannot find square root");let u=r,c=o.pow(o.mul(o.ONE,s),n),l=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let f=1;for(let p=o.sqr(d);f<u&&!o.eql(p,o.ONE);f++)p=o.sqr(p);const h=o.pow(c,wt<<BigInt(u-f-1));c=o.sqr(h),l=o.mul(l,h),d=o.mul(d,c),u=f}return l}}function o5(e){if(e%Lp===r5){const t=(e+wt)/Lp;return function(n,r){const s=n.pow(r,t);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(e%tE===eE){const t=(e-eE)/tE;return function(n,r){const s=n.mul(r,Gs),i=n.pow(s,t),o=n.mul(r,i),a=n.mul(n.mul(o,Gs),i),u=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(u),r))throw new Error("Cannot find square root");return u}}return s5(e)}const a5=(e,t)=>(_t(e,t)&wt)===wt,c5=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function u5(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=c5.reduce((r,s)=>(r[s]="function",r),t);return g0(e,n)}function l5(e,t,n){if(n<Bt)throw new Error("invalid exponent, negatives unsupported");if(n===Bt)return e.ONE;if(n===wt)return t;let r=e.ONE,s=t;for(;n>Bt;)n&wt&&(r=e.mul(r,s)),s=e.sqr(s),n>>=wt;return r}function d5(e,t){const n=new Array(t.length),r=t.reduce((i,o,a)=>e.is0(o)?i:(n[a]=i,e.mul(i,o)),e.ONE),s=e.inv(r);return t.reduceRight((i,o,a)=>e.is0(o)?i:(n[a]=e.mul(i,n[a]),e.mul(i,o)),s),n}function qT(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function GT(e,t,n=!1,r={}){if(e<=Bt)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:s,nByteLength:i}=qT(e,t);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:n,BITS:s,BYTES:i,MASK:t5(s),ZERO:Bt,ONE:wt,create:u=>_t(u,e),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Bt<=u&&u<e},is0:u=>u===Bt,isOdd:u=>(u&wt)===wt,neg:u=>_t(-u,e),eql:(u,c)=>u===c,sqr:u=>_t(u*u,e),add:(u,c)=>_t(u+c,e),sub:(u,c)=>_t(u-c,e),mul:(u,c)=>_t(u*c,e),pow:(u,c)=>l5(a,u,c),div:(u,c)=>_t(u*nE(c,e),e),sqrN:u=>u*u,addN:(u,c)=>u+c,subN:(u,c)=>u-c,mulN:(u,c)=>u*c,inv:u=>nE(u,e),sqrt:r.sqrt||(u=>(o||(o=o5(e)),o(a,u))),invertBatch:u=>d5(a,u),cmov:(u,c,l)=>l?c:u,toBytes:u=>n?xp(u,i):VT(u,i),fromBytes:u=>{if(u.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+u.length);return n?Xl(u):Z3(u)}});return Object.freeze(a)}const rE=BigInt(0),vl=BigInt(1);function Tf(e,t){const n=t.negate();return e?n:t}function KT(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Mf(e,t){KT(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1);return{windows:n,windowSize:r}}function h5(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function f5(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Nf=new WeakMap,YT=new WeakMap;function If(e){return YT.get(e)||1}function p5(e,t){return{constTimeNegate:Tf,hasPrecomputes(n){return If(n)!==1},unsafeLadder(n,r,s=e.ZERO){let i=n;for(;r>rE;)r&vl&&(s=s.add(i)),i=i.double(),r>>=vl;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Mf(r,t),o=[];let a=n,u=a;for(let c=0;c<s;c++){u=a,o.push(u);for(let l=1;l<i;l++)u=u.add(a),o.push(u);a=u.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=Mf(n,t);let a=e.ZERO,u=e.BASE;const c=BigInt(2**n-1),l=2**n,d=BigInt(n);for(let f=0;f<i;f++){const h=f*o;let p=Number(s&c);s>>=d,p>o&&(p-=l,s+=vl);const g=h,y=h+Math.abs(p)-1,b=f%2!==0,A=p<0;p===0?u=u.add(Tf(b,r[g])):a=a.add(Tf(A,r[y]))}return{p:a,f:u}},wNAFUnsafe(n,r,s,i=e.ZERO){const{windows:o,windowSize:a}=Mf(n,t),u=BigInt(2**n-1),c=2**n,l=BigInt(n);for(let d=0;d<o;d++){const f=d*a;if(s===rE)break;let h=Number(s&u);if(s>>=l,h>a&&(h-=c,s+=vl),h===0)continue;let p=r[f+Math.abs(h)-1];h<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=Nf.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&Nf.set(r,s(i))),i},wNAFCached(n,r,s){const i=If(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=If(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){KT(r,t),YT.set(n,r),Nf.delete(n)}}}function g5(e,t,n,r){if(h5(n,e),f5(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=e.ZERO,i=e5(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,u=new Array(a+1).fill(s),c=Math.floor((t.BITS-1)/o)*o;let l=s;for(let d=c;d>=0;d-=o){u.fill(s);for(let h=0;h<r.length;h++){const p=r[h],g=Number(p>>BigInt(d)&BigInt(a));u[g]=u[g].add(n[h])}let f=s;for(let h=u.length-1,p=s;h>0;h--)p=p.add(u[h]),f=f.add(p);if(l=l.add(f),d!==0)for(let h=0;h<o;h++)l=l.double()}return l}function y5(e){return u5(e.Fp),g0(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...qT(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const ir=BigInt(0),gn=BigInt(1),El=BigInt(2),m5=BigInt(8),w5={zip215:!0};function b5(e){const t=y5(e);return g0(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function v5(e){const t=b5(e),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:u}=t,c=El<<BigInt(a*8)-gn,l=n.create,d=GT(t.n,t.nBitLength),f=t.uvRatio||((v,T)=>{try{return{isValid:!0,value:n.sqrt(v*n.inv(T))}}catch{return{isValid:!1,value:ir}}}),h=t.adjustScalarBytes||(v=>v),p=t.domain||((v,T,m)=>{if(Af("phflag",m),T.length||m)throw new Error("Contexts/pre-hash are not supported");return v});function g(v,T){Kc("coordinate "+v,T,ir,c)}function y(v){if(!(v instanceof E))throw new Error("ExtendedPoint expected")}const b=Jv((v,T)=>{const{ex:m,ey:w,ez:N}=v,C=v.is0();T==null&&(T=C?m5:n.inv(N));const O=l(m*T),B=l(w*T),W=l(N*T);if(C)return{x:ir,y:gn};if(W!==gn)throw new Error("invZ was invalid");return{x:O,y:B}}),A=Jv(v=>{const{a:T,d:m}=t;if(v.is0())throw new Error("bad point: ZERO");const{ex:w,ey:N,ez:C,et:O}=v,B=l(w*w),W=l(N*N),P=l(C*C),X=l(P*P),ee=l(B*T),se=l(P*l(ee+W)),Z=l(X+l(m*l(B*W)));if(se!==Z)throw new Error("bad point: equation left != right (1)");const J=l(w*N),z=l(C*O);if(J!==z)throw new Error("bad point: equation left != right (2)");return!0});class E{constructor(T,m,w,N){this.ex=T,this.ey=m,this.ez=w,this.et=N,g("x",T),g("y",m),g("z",w),g("t",N),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(T){if(T instanceof E)throw new Error("extended point not allowed");const{x:m,y:w}=T||{};return g("x",m),g("y",w),new E(m,w,gn,l(m*w))}static normalizeZ(T){const m=n.invertBatch(T.map(w=>w.ez));return T.map((w,N)=>w.toAffine(m[N])).map(E.fromAffine)}static msm(T,m){return g5(E,d,T,m)}_setWindowSize(T){I.setWindowSize(this,T)}assertValidity(){A(this)}equals(T){y(T);const{ex:m,ey:w,ez:N}=this,{ex:C,ey:O,ez:B}=T,W=l(m*B),P=l(C*N),X=l(w*B),ee=l(O*N);return W===P&&X===ee}is0(){return this.equals(E.ZERO)}negate(){return new E(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:T}=t,{ex:m,ey:w,ez:N}=this,C=l(m*m),O=l(w*w),B=l(El*l(N*N)),W=l(T*C),P=m+w,X=l(l(P*P)-C-O),ee=W+O,se=ee-B,Z=W-O,J=l(X*se),z=l(ee*Z),K=l(X*Z),H=l(se*ee);return new E(J,z,H,K)}add(T){y(T);const{a:m,d:w}=t,{ex:N,ey:C,ez:O,et:B}=this,{ex:W,ey:P,ez:X,et:ee}=T;if(m===BigInt(-1)){const ce=l((C-N)*(P+W)),oe=l((C+N)*(P-W)),de=l(oe-ce);if(de===ir)return this.double();const we=l(O*El*ee),me=l(B*El*X),pe=me+we,he=oe+ce,fe=me-we,M=l(pe*de),k=l(he*fe),G=l(pe*fe),re=l(de*he);return new E(M,k,re,G)}const se=l(N*W),Z=l(C*P),J=l(B*w*ee),z=l(O*X),K=l((N+C)*(W+P)-se-Z),H=z-J,U=z+J,F=l(Z-m*se),$=l(K*H),te=l(U*F),ne=l(K*F),ie=l(H*U);return new E($,te,ie,ne)}subtract(T){return this.add(T.negate())}wNAF(T){return I.wNAFCached(this,T,E.normalizeZ)}multiply(T){const m=T;Kc("scalar",m,gn,r);const{p:w,f:N}=this.wNAF(m);return E.normalizeZ([w,N])[0]}multiplyUnsafe(T,m=E.ZERO){const w=T;return Kc("scalar",w,ir,r),w===ir?S:this.is0()||w===gn?this:I.wNAFCachedUnsafe(this,w,E.normalizeZ,m)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return I.unsafeLadder(this,r).is0()}toAffine(T){return b(this,T)}clearCofactor(){const{h:T}=t;return T===gn?this:this.multiplyUnsafe(T)}static fromHex(T,m=!1){const{d:w,a:N}=t,C=n.BYTES;T=Wr("pointHex",T,C),Af("zip215",m);const O=T.slice(),B=T[C-1];O[C-1]=B&-129;const W=Xl(O),P=m?c:n.ORDER;Kc("pointHex.y",W,ir,P);const X=l(W*W),ee=l(X-gn),se=l(w*X-N);let{isValid:Z,value:J}=f(ee,se);if(!Z)throw new Error("Point.fromHex: invalid y coordinate");const z=(J&gn)===gn,K=(B&128)!==0;if(!m&&J===ir&&K)throw new Error("Point.fromHex: x=0 and x_0=1");return K!==z&&(J=l(-J)),E.fromAffine({x:J,y:W})}static fromPrivateKey(T){return x(T).point}toRawBytes(){const{x:T,y:m}=this.toAffine(),w=xp(m,n.BYTES);return w[w.length-1]|=T&gn?128:0,w}toHex(){return p0(this.toRawBytes())}}E.BASE=new E(t.Gx,t.Gy,gn,l(t.Gx*t.Gy)),E.ZERO=new E(ir,gn,gn,ir);const{BASE:_,ZERO:S}=E,I=p5(E,a*8);function D(v){return _t(v,r)}function L(v){return D(Xl(v))}function x(v){const T=n.BYTES;v=Wr("private key",v,T);const m=Wr("hashed private key",i(v),2*T),w=h(m.slice(0,T)),N=m.slice(T,2*T),C=L(w),O=_.multiply(C),B=O.toRawBytes();return{head:w,prefix:N,scalar:C,point:O,pointBytes:B}}function j(v){return x(v).pointBytes}function V(v=new Uint8Array,...T){const m=Zv(...T);return L(i(p(m,Wr("context",v),!!s)))}function Y(v,T,m={}){v=Wr("message",v),s&&(v=s(v));const{prefix:w,scalar:N,pointBytes:C}=x(T),O=V(m.context,w,v),B=_.multiply(O).toRawBytes(),W=V(m.context,B,C,v),P=D(O+W*N);Kc("signature.s",P,ir,r);const X=Zv(B,xp(P,n.BYTES));return Wr("result",X,n.BYTES*2)}const q=w5;function R(v,T,m,w=q){const{context:N,zip215:C}=w,O=n.BYTES;v=Wr("signature",v,2*O),T=Wr("message",T),m=Wr("publicKey",m,O),C!==void 0&&Af("zip215",C),s&&(T=s(T));const B=Xl(v.slice(O,2*O));let W,P,X;try{W=E.fromHex(m,C),P=E.fromHex(v.slice(0,O),C),X=_.multiplyUnsafe(B)}catch{return!1}if(!C&&W.isSmallOrder())return!1;const ee=V(N,P.toRawBytes(),W.toRawBytes(),T);return P.add(W.multiplyUnsafe(ee)).subtract(X).clearCofactor().equals(E.ZERO)}return _._setWindowSize(8),{CURVE:t,getPublicKey:j,sign:Y,verify:R,ExtendedPoint:E,utils:{getExtendedPublicKey:x,randomPrivateKey:()=>o(n.BYTES),precompute(v=8,T=E.BASE){return T._setWindowSize(v),T.multiply(BigInt(3)),T}}}}BigInt(0),BigInt(1);const y0=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),iE=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const E5=BigInt(1),sE=BigInt(2);BigInt(3);const A5=BigInt(5),S5=BigInt(8);function T5(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=y0,o=e*e%i*e%i,a=yr(o,sE,i)*o%i,u=yr(a,E5,i)*e%i,c=yr(u,A5,i)*u%i,l=yr(c,t,i)*c%i,d=yr(l,n,i)*l%i,f=yr(d,r,i)*d%i,h=yr(f,s,i)*f%i,p=yr(h,s,i)*f%i,g=yr(p,t,i)*c%i;return{pow_p_5_8:yr(g,sE,i)*e%i,b2:o}}function M5(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function N5(e,t){const n=y0,r=_t(t*t*t,n),s=_t(r*r*t,n),i=T5(e*s).pow_p_5_8;let o=_t(e*r*i,n);const a=_t(t*o*o,n),u=o,c=_t(o*iE,n),l=a===e,d=a===_t(-e,n),f=a===_t(-e*iE,n);return l&&(o=u),(d||f)&&(o=c),a5(o,n)&&(o=_t(-o,n)),{isValid:l||d,value:o}}const I5=GT(y0,void 0,!0),_5={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:I5,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:S5,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:X3,randomBytes:BT,adjustScalarBytes:M5,uvRatio:N5},WT=v5(_5),O5="EdDSA",D5="JWT",ud=".",mh="base64url",XT="utf8",QT="utf8",x5=":",L5="did",C5="key",oE="base58btc",j5="z",P5="K36",k5=32;function m0(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function $T(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?m0(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function ZT(e,t){t||(t=e.reduce((s,i)=>s+i.length,0));const n=$T(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return m0(n)}function R5(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<e.length;s++){var i=e.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=e.length,u=e.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,b=0,A=p.length;b!==A&&p[b]===0;)b++,g++;for(var E=(A-b)*l+1>>>0,_=new Uint8Array(E);b!==A;){for(var S=p[b],I=0,D=E-1;(S!==0||I<y)&&D!==-1;D--,I++)S+=256*_[D]>>>0,_[D]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");y=I,b++}for(var L=E-y;L!==E&&_[L]===0;)L++;for(var x=u.repeat(g);L<E;++L)x+=e.charAt(_[L]);return x}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,b=0;p[g]===u;)y++,g++;for(var A=(p.length-g)*c+1>>>0,E=new Uint8Array(A);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var S=0,I=A-1;(_!==0||S<b)&&I!==-1;I--,S++)_+=a*E[I]>>>0,E[I]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");b=S,g++}if(p[g]!==" "){for(var D=A-b;D!==A&&E[D]===0;)D++;for(var L=new Uint8Array(y+(A-D)),x=y;D!==A;)L[x++]=E[D++];return L}}}function h(p){var g=f(p);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var B5=R5,U5=B5;const JT=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},z5=e=>new TextEncoder().encode(e),F5=e=>new TextDecoder().decode(e);let H5=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},V5=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return e2(this,e)}},q5=class{constructor(e){this.decoders=e}or(e){return e2(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const e2=(e,t)=>new q5({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});let G5=class{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new H5(e,t,n),this.decoder=new V5(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const wh=({name:e,prefix:t,encode:n,decode:r})=>new G5(e,t,n,r),Ru=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:s}=U5(n,t);return wh({prefix:e,name:t,encode:r,decode:i=>JT(s(i))})},K5=(e,t,n,r)=>{const s={};for(let l=0;l<t.length;++l)s[t[l]]=l;let i=e.length;for(;e[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,u=0,c=0;for(let l=0;l<i;++l){const d=s[e[l]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);u=u<<n|d,a+=n,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=n||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},Y5=(e,t,n)=>{const r=t[t.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let u=0;u<e.length;++u)for(a=a<<8|e[u],o+=8;o>n;)o-=n,i+=t[s&a>>o];if(o&&(i+=t[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Gt=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>wh({prefix:t,name:e,encode(s){return Y5(s,r,n)},decode(s){return K5(s,r,n,e)}}),W5=wh({prefix:"\0",name:"identity",encode:e=>F5(e),decode:e=>z5(e)});var X5=Object.freeze({__proto__:null,identity:W5});const Q5=Gt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var $5=Object.freeze({__proto__:null,base2:Q5});const Z5=Gt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var J5=Object.freeze({__proto__:null,base8:Z5});const ej=Ru({prefix:"9",name:"base10",alphabet:"0123456789"});var tj=Object.freeze({__proto__:null,base10:ej});const nj=Gt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),rj=Gt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ij=Object.freeze({__proto__:null,base16:nj,base16upper:rj});const sj=Gt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),oj=Gt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),aj=Gt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),cj=Gt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),uj=Gt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),lj=Gt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),dj=Gt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hj=Gt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),fj=Gt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var pj=Object.freeze({__proto__:null,base32:sj,base32upper:oj,base32pad:aj,base32padupper:cj,base32hex:uj,base32hexupper:lj,base32hexpad:dj,base32hexpadupper:hj,base32z:fj});const gj=Ru({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),yj=Ru({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var mj=Object.freeze({__proto__:null,base36:gj,base36upper:yj});const wj=Ru({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),bj=Ru({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var vj=Object.freeze({__proto__:null,base58btc:wj,base58flickr:bj});const Ej=Gt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Aj=Gt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Sj=Gt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Tj=Gt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Mj=Object.freeze({__proto__:null,base64:Ej,base64pad:Aj,base64url:Sj,base64urlpad:Tj});const t2=Array.from(""),Nj=t2.reduce((e,t,n)=>(e[n]=t,e),[]),Ij=t2.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function _j(e){return e.reduce((t,n)=>(t+=Nj[n],t),"")}function Oj(e){const t=[];for(const n of e){const r=Ij[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const Dj=wh({prefix:"",name:"base256emoji",encode:_j,decode:Oj});var xj=Object.freeze({__proto__:null,base256emoji:Dj}),Lj=n2,aE=128,Cj=-128,jj=Math.pow(2,31);function n2(e,t,n){t=t||[],n=n||0;for(var r=n;e>=jj;)t[n++]=e&255|aE,e/=128;for(;e&Cj;)t[n++]=e&255|aE,e>>>=7;return t[n]=e|0,n2.bytes=n-r+1,t}var Pj=Cp,kj=128,cE=127;function Cp(e,r){var n=0,r=r||0,s=0,i=r,o,a=e.length;do{if(i>=a)throw Cp.bytes=0,new RangeError("Could not decode varint");o=e[i++],n+=s<28?(o&cE)<<s:(o&cE)*Math.pow(2,s),s+=7}while(o>=kj);return Cp.bytes=i-r,n}var Rj=Math.pow(2,7),Bj=Math.pow(2,14),Uj=Math.pow(2,21),zj=Math.pow(2,28),Fj=Math.pow(2,35),Hj=Math.pow(2,42),Vj=Math.pow(2,49),qj=Math.pow(2,56),Gj=Math.pow(2,63),Kj=function(e){return e<Rj?1:e<Bj?2:e<Uj?3:e<zj?4:e<Fj?5:e<Hj?6:e<Vj?7:e<qj?8:e<Gj?9:10},Yj={encode:Lj,decode:Pj,encodingLength:Kj},r2=Yj;const uE=(e,t,n=0)=>(r2.encode(e,t,n),t),lE=e=>r2.encodingLength(e),jp=(e,t)=>{const n=t.byteLength,r=lE(e),s=r+lE(n),i=new Uint8Array(s+n);return uE(e,i,0),uE(n,i,r),i.set(t,s),new Wj(e,n,t,i)};let Wj=class{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}};const i2=({name:e,code:t,encode:n})=>new Xj(e,t,n);let Xj=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?jp(this.code,t):t.then(n=>jp(this.code,n))}else throw Error("Unknown type, must be binary type")}};const s2=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Qj=i2({name:"sha2-256",code:18,encode:s2("SHA-256")}),$j=i2({name:"sha2-512",code:19,encode:s2("SHA-512")});var Zj=Object.freeze({__proto__:null,sha256:Qj,sha512:$j});const o2=0,Jj="identity",a2=JT,eP=e=>jp(o2,a2(e)),tP={code:o2,name:Jj,encode:a2,digest:eP};var nP=Object.freeze({__proto__:null,identity:tP});new TextEncoder,new TextDecoder;const dE={...X5,...$5,...J5,...tj,...ij,...pj,...mj,...vj,...Mj,...xj};({...Zj,...nP});function c2(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const hE=c2("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),_f=c2("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=$T(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),u2={utf8:hE,"utf-8":hE,hex:dE.base16,latin1:_f,ascii:_f,binary:_f,...dE};function bh(e,t="utf8"){const n=u2[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}function ua(e,t="utf8"){const n=u2[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?m0(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}function fE(e){return Zo(bh(ua(e,mh),XT))}function ld(e){return bh(ua(eo(e),XT),mh)}function l2(e){const t=ua(P5,oE),n=j5+bh(ZT([t,e]),oE);return[L5,C5,n].join(x5)}function rP(e){return bh(e,mh)}function iP(e){return ua(e,mh)}function sP(e){return ua([ld(e.header),ld(e.payload)].join(ud),QT)}function oP(e){return[ld(e.header),ld(e.payload),rP(e.signature)].join(ud)}function Pp(e){const t=e.split(ud),n=fE(t[0]),r=fE(t[1]),s=iP(t[2]),i=ua(t.slice(0,2).join(ud),QT);return{header:n,payload:r,signature:s,data:i}}function pE(e=BT(k5)){const t=WT.getPublicKey(e);return{secretKey:ZT([e,t]),publicKey:t}}async function aP(e,t,n,r,s=Ae.fromMiliseconds(Date.now())){const i={alg:O5,typ:D5},o=l2(r.publicKey),a=s+n,u={iss:o,sub:e,aud:t,iat:s,exp:a},c=sP({header:i,payload:u}),l=WT.sign(c,r.secretKey.slice(0,32));return oP({header:i,payload:u,signature:l})}var gE=function(e,t,n){for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},cP=(function(){function e(t,n,r){this.name=t,this.version=n,this.os=r,this.type="browser"}return e})(),uP=(function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e})(),lP=(function(){function e(t,n,r,s){this.name=t,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return e})(),dP=(function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e})(),hP=(function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e})(),fP=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,pP=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,yE=3,gP=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",fP]],mE=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function yP(e){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new hP:typeof navigator<"u"?wP(navigator.userAgent):vP()}function mP(e){return e!==""&&gP.reduce(function(t,n){var r=n[0],s=n[1];if(t)return t;var i=s.exec(e);return!!i&&[r,i]},!1)}function wP(e){var t=mP(e);if(!t)return null;var n=t[0],r=t[1];if(n==="searchbot")return new dP;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<yE&&(s=gE(gE([],s,!0),EP(yE-s.length))):s=[];var i=s.join("."),o=bP(e),a=pP.exec(e);return a&&a[1]?new lP(n,i,o,a[1]):new cP(n,i,o)}function bP(e){for(var t=0,n=mE.length;t<n;t++){var r=mE[t],s=r[0],i=r[1],o=i.exec(e);if(o)return s}return null}function vP(){var e=typeof process<"u"&&process.version;return e?new uP(process.version.slice(1)):null}function EP(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}var nt={};Object.defineProperty(nt,"__esModule",{value:!0});nt.getLocalStorage=nt.getLocalStorageOrThrow=nt.getCrypto=nt.getCryptoOrThrow=d2=nt.getLocation=nt.getLocationOrThrow=w0=nt.getNavigator=nt.getNavigatorOrThrow=to=nt.getDocument=nt.getDocumentOrThrow=nt.getFromWindowOrThrow=nt.getFromWindow=void 0;function po(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}nt.getFromWindow=po;function la(e){const t=po(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}nt.getFromWindowOrThrow=la;function AP(){return la("document")}nt.getDocumentOrThrow=AP;function SP(){return po("document")}var to=nt.getDocument=SP;function TP(){return la("navigator")}nt.getNavigatorOrThrow=TP;function MP(){return po("navigator")}var w0=nt.getNavigator=MP;function NP(){return la("location")}nt.getLocationOrThrow=NP;function IP(){return po("location")}var d2=nt.getLocation=IP;function _P(){return la("crypto")}nt.getCryptoOrThrow=_P;function OP(){return po("crypto")}nt.getCrypto=OP;function DP(){return la("localStorage")}nt.getLocalStorageOrThrow=DP;function xP(){return po("localStorage")}nt.getLocalStorage=xP;var b0={};Object.defineProperty(b0,"__esModule",{value:!0});var h2=b0.getWindowMetadata=void 0;const wE=nt;function LP(){let e,t;try{e=wE.getDocumentOrThrow(),t=wE.getLocationOrThrow()}catch{return null}function n(){const l=e.getElementsByTagName("link"),d=[];for(let f=0;f<l.length;f++){const h=l[f],p=h.getAttribute("rel");if(p&&p.toLowerCase().indexOf("icon")>-1){const g=h.getAttribute("href");if(g)if(g.toLowerCase().indexOf("https:")===-1&&g.toLowerCase().indexOf("http:")===-1&&g.indexOf("//")!==0){let y=t.protocol+"//"+t.host;if(g.indexOf("/")===0)y+=g;else{const b=t.pathname.split("/");b.pop();const A=b.join("/");y+=A+"/"+g}d.push(y)}else if(g.indexOf("//")===0){const y=t.protocol+g;d.push(y)}else d.push(g)}}return d}function r(...l){const d=e.getElementsByTagName("meta");for(let f=0;f<d.length;f++){const h=d[f],p=["itemprop","property","name"].map(g=>h.getAttribute(g)).filter(g=>g?l.includes(g):!1);if(p.length&&p){const g=h.getAttribute("content");if(g)return g}}return""}function s(){let l=r("name","og:site_name","og:title","twitter:title");return l||(l=e.title),l}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),u=t.origin,c=n();return{description:a,url:u,icons:c,name:o}}h2=b0.getWindowMetadata=LP;const CP="0.1.1";function jP(){return CP}class at extends Error{constructor(t,n={}){const r=(()=>{var a;if(n.cause instanceof at){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(a=n.cause)!=null&&a.message?n.cause.message:n.details})(),s=n.cause instanceof at&&n.cause.docsPath||n.docsPath,i=`https://oxlib.sh${s??""}`,o=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${i}`:void 0]:[]].filter(a=>typeof a=="string").join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${jP()}`}),this.cause=n.cause,this.details=r,this.docs=i,this.docsPath=s,this.shortMessage=t}walk(t){return f2(this,t)}}function f2(e,t){return t!=null&&t(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?f2(e.cause,t):t?null:e}const Co=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function PP(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Tu(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function no(e,...t){if(!PP(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function kP(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Tu(e.outputLen),Tu(e.blockLen)}function Jo(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function p2(e,t){no(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function RP(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function ea(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Of(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function mr(e,t){return e<<32-t|e>>>t}const BP=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function UP(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function zP(e){for(let t=0;t<e.length;t++)e[t]=UP(e[t]);return e}const bE=BP?e=>e:zP;function FP(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function vh(e){return typeof e=="string"&&(e=FP(e)),no(e),e}function HP(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];no(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const i=e[r];n.set(i,s),s+=i.length}return n}class v0{}function g2(e){const t=r=>e().update(vh(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function VP(e=32){if(Co&&typeof Co.getRandomValues=="function")return Co.getRandomValues(new Uint8Array(e));if(Co&&typeof Co.randomBytes=="function")return Uint8Array.from(Co.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}function qP(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),u=r?4:0,c=r?0:4;e.setUint32(t+u,o,r),e.setUint32(t+c,a,r)}function GP(e,t,n){return e&t^~e&n}function KP(e,t,n){return e&t^e&n^t&n}class YP extends v0{constructor(t,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=Of(this.buffer)}update(t){Jo(this),t=vh(t),no(t);const{view:n,buffer:r,blockLen:s}=this,i=t.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const u=Of(t);for(;s<=i-o;o+=s)this.process(u,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Jo(this),p2(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,ea(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;qP(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Of(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=u/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<c;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return t.destroyed=o,t.finished=i,t.length=s,t.pos=a,s%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const vi=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Al=BigInt(2**32-1),vE=BigInt(32);function WP(e,t=!1){return t?{h:Number(e&Al),l:Number(e>>vE&Al)}:{h:Number(e>>vE&Al)|0,l:Number(e&Al)|0}}function XP(e,t=!1){const n=e.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=WP(e[i],t);[r[i],s[i]]=[o,a]}return[r,s]}const QP=(e,t,n)=>e<<n|t>>>32-n,$P=(e,t,n)=>t<<n|e>>>32-n,ZP=(e,t,n)=>t<<n-32|e>>>64-n,JP=(e,t,n)=>e<<n-32|t>>>64-n,ek=BigInt(0),Yc=BigInt(1),tk=BigInt(2),nk=BigInt(7),rk=BigInt(256),ik=BigInt(113),y2=[],m2=[],w2=[];for(let e=0,t=Yc,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],y2.push(2*(5*r+n)),m2.push((e+1)*(e+2)/2%64);let s=ek;for(let i=0;i<7;i++)t=(t<<Yc^(t>>nk)*ik)%rk,t&tk&&(s^=Yc<<(Yc<<BigInt(i))-Yc);w2.push(s)}const b2=XP(w2,!0),sk=b2[0],ok=b2[1],EE=(e,t,n)=>n>32?ZP(e,t,n):QP(e,t,n),AE=(e,t,n)=>n>32?JP(e,t,n):$P(e,t,n);function ak(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,u=(o+2)%10,c=n[u],l=n[u+1],d=EE(c,l,1)^n[a],f=AE(c,l,1)^n[a+1];for(let h=0;h<50;h+=10)e[o+h]^=d,e[o+h+1]^=f}let s=e[2],i=e[3];for(let o=0;o<24;o++){const a=m2[o],u=EE(s,i,a),c=AE(s,i,a),l=y2[o];s=e[l],i=e[l+1],e[l]=u,e[l+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=sk[r],e[1]^=ok[r]}ea(n)}class E0 extends v0{constructor(t,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Tu(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=RP(this.state)}clone(){return this._cloneInto()}keccak(){bE(this.state32),ak(this.state32,this.rounds),bE(this.state32),this.posOut=0,this.pos=0}update(t){Jo(this),t=vh(t),no(t);const{blockLen:n,state:r}=this,s=t.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=t[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:s}=this;t[r]^=n,n&128&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Jo(this,!1),no(t),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=t.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);t.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Tu(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(p2(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,ea(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return t||(t=new E0(n,r,s,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}}const ck=(e,t,n)=>g2(()=>new E0(t,e,n)),uk=ck(1,136,256/8),lk=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ei=new Uint32Array(64);class dk extends YP{constructor(t=32){super(64,t,8,!1),this.A=vi[0]|0,this.B=vi[1]|0,this.C=vi[2]|0,this.D=vi[3]|0,this.E=vi[4]|0,this.F=vi[5]|0,this.G=vi[6]|0,this.H=vi[7]|0}get(){const{A:t,B:n,C:r,D:s,E:i,F:o,G:a,H:u}=this;return[t,n,r,s,i,o,a,u]}set(t,n,r,s,i,o,a,u){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=u|0}process(t,n){for(let d=0;d<16;d++,n+=4)Ei[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const f=Ei[d-15],h=Ei[d-2],p=mr(f,7)^mr(f,18)^f>>>3,g=mr(h,17)^mr(h,19)^h>>>10;Ei[d]=g+Ei[d-7]+p+Ei[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:u,G:c,H:l}=this;for(let d=0;d<64;d++){const f=mr(a,6)^mr(a,11)^mr(a,25),h=l+f+GP(a,u,c)+lk[d]+Ei[d]|0,p=(mr(r,2)^mr(r,13)^mr(r,22))+KP(r,s,i)|0;l=c,c=u,u=a,a=o+h|0,o=i,i=s,s=r,r=h+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,u,c,l)}roundClean(){ea(Ei)}destroy(){this.set(0,0,0,0,0,0,0,0),ea(this.buffer)}}const hk=g2(()=>new dk);const A0=BigInt(0),kp=BigInt(1);function Bu(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function S0(e){if(!Bu(e))throw new Error("Uint8Array expected")}function Mu(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function Sl(e){const t=e.toString(16);return t.length&1?"0"+t:t}function v2(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?A0:BigInt("0x"+e)}const E2=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",fk=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Nu(e){if(S0(e),E2)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=fk[e[n]];return t}const Xr={_0:48,_9:57,A:65,F:70,a:97,f:102};function SE(e){if(e>=Xr._0&&e<=Xr._9)return e-Xr._0;if(e>=Xr.A&&e<=Xr.F)return e-(Xr.A-10);if(e>=Xr.a&&e<=Xr.f)return e-(Xr.a-10)}function dd(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(E2)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=SE(e.charCodeAt(i)),a=SE(e.charCodeAt(i+1));if(o===void 0||a===void 0){const u=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+i)}r[s]=o*16+a}return r}function Zs(e){return v2(Nu(e))}function A2(e){return S0(e),v2(Nu(Uint8Array.from(e).reverse()))}function Uu(e,t){return dd(e.toString(16).padStart(t*2,"0"))}function S2(e,t){return Uu(e,t).reverse()}function Kn(e,t,n){let r;if(typeof t=="string")try{r=dd(t)}catch(i){throw new Error(e+" must be hex string or Uint8Array, cause: "+i)}else if(Bu(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(e+" of length "+n+" expected, got "+s);return r}function hd(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];S0(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const i=e[r];n.set(i,s),s+=i.length}return n}const Df=e=>typeof e=="bigint"&&A0<=e;function T0(e,t,n){return Df(e)&&Df(t)&&Df(n)&&t<=e&&e<n}function Yo(e,t,n,r){if(!T0(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function pk(e){let t;for(t=0;e>A0;e>>=kp,t+=1);return t}const Eh=e=>(kp<<BigInt(e))-kp,xf=e=>new Uint8Array(e),TE=e=>Uint8Array.from(e);function gk(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=xf(e),s=xf(e),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...l)=>n(s,r,...l),u=(l=xf(0))=>{s=a(TE([0]),l),r=a(),l.length!==0&&(s=a(TE([1]),l),r=a())},c=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const d=[];for(;l<t;){r=a();const f=r.slice();d.push(f),l+=r.length}return hd(...d)};return(l,d)=>{o(),u(l);let f;for(;!(f=d(c()));)u();return o(),f}}const yk={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Bu(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Ah(e,t,n={}){const r=(s,i,o)=>{const a=yk[i];if(typeof a!="function")throw new Error("invalid validator function");const u=e[s];if(!(o&&u===void 0)&&!a(u,e))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+u)};for(const[s,i]of Object.entries(t))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return e}function ME(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(s!==void 0)return s;const i=e(n,...r);return t.set(n,i),i}}function mk(e,t){if(OE(e)>t)throw new Bk({givenSize:OE(e),maxSize:t})}const Qr={zero:48,nine:57,A:65,F:70,a:97,f:102};function NE(e){if(e>=Qr.zero&&e<=Qr.nine)return e-Qr.zero;if(e>=Qr.A&&e<=Qr.F)return e-(Qr.A-10);if(e>=Qr.a&&e<=Qr.f)return e-(Qr.a-10)}function wk(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new Uk({size:e.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=e[o?i:e.length-i-1]}return s}function T2(e,t){if(Wi(e)>t)throw new _k({givenSize:Wi(e),maxSize:t})}function bk(e,t){if(typeof t=="number"&&t>0&&t>Wi(e)-1)throw new I2({offset:t,position:"start",size:Wi(e)})}function vk(e,t,n){if(typeof t=="number"&&typeof n=="number"&&Wi(e)!==n-t)throw new I2({offset:n,position:"end",size:Wi(e)})}function M2(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const s=e.replace("0x","");if(s.length>r*2)throw new Ok({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const Ek="#__bigint";function M0(e,t,n){return JSON.stringify(e,(r,s)=>typeof s=="bigint"?s.toString()+Ek:s,n)}const Ak=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Sk(e,t={}){const{strict:n=!1}=t;if(!e)throw new IE(e);if(typeof e!="string")throw new IE(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new _E(e);if(!e.startsWith("0x"))throw new _E(e)}function Tk(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function N0(e){return e instanceof Uint8Array?fd(e):Array.isArray(e)?fd(new Uint8Array(e)):e}function fd(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=Ak[e[s]];const r=`0x${n}`;return typeof t.size=="number"?(T2(r,t.size),N2(r,t.size)):r}function Lf(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const u=typeof e=="bigint"?"n":"";throw new Ik({max:i?`${i}${u}`:void 0,min:`${o}${u}`,signed:n,size:r,value:`${e}${u}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Mk(a,r):a}function Mk(e,t){return M2(e,{dir:"left",size:t})}function N2(e,t){return M2(e,{dir:"right",size:t})}function ni(e,t,n,r={}){const{strict:s}=r;bk(e,t);const i=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return s&&vk(i,t,n),i}function Wi(e){return Math.ceil((e.length-2)/2)}function Nk(e,t={}){const{strict:n=!1}=t;try{return Sk(e,{strict:n}),!0}catch{return!1}}class Ik extends at{constructor({max:t,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class IE extends at{constructor(t){super(`Value \`${typeof t=="object"?M0(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class _E extends at{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let _k=class extends at{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class I2 extends at{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let Ok=class extends at{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};const Dk=new TextEncoder;function xk(e){if(!(e instanceof Uint8Array)){if(!e)throw new Tl(e);if(typeof e!="object")throw new Tl(e);if(!("BYTES_PER_ELEMENT"in e))throw new Tl(e);if(e.BYTES_PER_ELEMENT!==1||e.constructor.name!=="Uint8Array")throw new Tl(e)}}function Lk(e){return e instanceof Uint8Array?e:typeof e=="string"?jk(e):Ck(e)}function Ck(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function jk(e,t={}){const{size:n}=t;let r=e;n&&(T2(e,n),r=N2(e,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,u=0;a<i;a++){const c=NE(s.charCodeAt(u++)),l=NE(s.charCodeAt(u++));if(c===void 0||l===void 0)throw new at(`Invalid byte sequence ("${s[u-2]}${s[u-1]}" in "${s}").`);o[a]=c*16+l}return o}function Pk(e,t={}){const{size:n}=t,r=Dk.encode(e);return typeof n=="number"?(mk(r,n),kk(r,n)):r}function kk(e,t){return wk(e,{dir:"right",size:t})}function OE(e){return e.length}function Rk(e){try{return xk(e),!0}catch{return!1}}class Tl extends at{constructor(t){super(`Value \`${typeof t=="object"?M0(t):t}\` of type \`${typeof t}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class Bk extends at{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class Uk extends at{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}function _2(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=uk(Lk(e));return n==="Bytes"?r:fd(r)}class zk extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Fk={checksum:new zk(8192)},Cf=Fk.checksum;function O2(e,t={}){const{compressed:n}=t,{prefix:r,x:s,y:i}=e;if(n===!1||typeof s=="bigint"&&typeof i=="bigint"){if(r!==4)throw new DE({prefix:r,cause:new Yk});return}if(n===!0||typeof s=="bigint"&&typeof i>"u"){if(r!==3&&r!==2)throw new DE({prefix:r,cause:new Kk});return}throw new Gk({publicKey:e})}function Hk(e){const t=(()=>{if(Nk(e))return D2(e);if(Rk(e))return Vk(e);const{prefix:n,x:r,y:s}=e;return typeof r=="bigint"&&typeof s=="bigint"?{prefix:n??4,x:r,y:s}:{prefix:n,x:r}})();return O2(t),t}function Vk(e){return D2(fd(e))}function D2(e){if(e.length!==132&&e.length!==130&&e.length!==68)throw new Wk({publicKey:e});if(e.length===130){const r=BigInt(ni(e,0,32)),s=BigInt(ni(e,32,64));return{prefix:4,x:r,y:s}}if(e.length===132){const r=Number(ni(e,0,1)),s=BigInt(ni(e,1,33)),i=BigInt(ni(e,33,65));return{prefix:r,x:s,y:i}}const t=Number(ni(e,0,1)),n=BigInt(ni(e,1,33));return{prefix:t,x:n}}function qk(e,t={}){O2(e);const{prefix:n,x:r,y:s}=e,{includePrefix:i=!0}=t;return Tk(i?Lf(n,{size:1}):"0x",Lf(r,{size:32}),typeof s=="bigint"?Lf(s,{size:32}):"0x")}class Gk extends at{constructor({publicKey:t}){super(`Value \`${M0(t)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class DE extends at{constructor({prefix:t,cause:n}){super(`Prefix "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class Kk extends at{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class Yk extends at{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}let Wk=class extends at{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${Wi(N0(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};const Xk=/^0x[a-fA-F0-9]{40}$/;function x2(e,t={}){const{strict:n=!0}=t;if(!Xk.test(e))throw new xE({address:e,cause:new Zk});if(n){if(e.toLowerCase()===e)return;if(L2(e)!==e)throw new xE({address:e,cause:new Jk})}}function L2(e){if(Cf.has(e))return Cf.get(e);x2(e,{strict:!1});const t=e.substring(2).toLowerCase(),n=_2(Pk(t),{as:"Bytes"}),r=t.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return Cf.set(e,s),s}function Qk(e,t={}){const{checksum:n=!1}=t;return x2(e),n?L2(e):e}function $k(e,t={}){const n=_2(`0x${qk(e).slice(4)}`).substring(26);return Qk(`0x${n}`,t)}class xE extends at{constructor({address:t,cause:n}){super(`Address "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class Zk extends at{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class Jk extends at{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}class C2 extends v0{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,kP(t);const r=vh(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?t.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),ea(i)}update(t){return Jo(this),this.iHash.update(t),this}digestInto(t){Jo(this),no(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const j2=(e,t,n)=>new C2(e,t).update(n).digest();j2.create=(e,t)=>new C2(e,t);const An=BigInt(0),ln=BigInt(1),Ys=BigInt(2),eR=BigInt(3),P2=BigInt(4),k2=BigInt(5),R2=BigInt(8);function bn(e,t){const n=e%t;return n>=An?n:t+n}function zn(e,t,n){let r=e;for(;t-- >An;)r*=r,r%=n;return r}function Rp(e,t){if(e===An)throw new Error("invert: expected non-zero number");if(t<=An)throw new Error("invert: expected positive modulus, got "+t);let n=bn(e,t),r=t,s=An,i=ln;for(;n!==An;){const o=r/n,a=r%n,u=s-i*o;r=n,n=a,s=i,i=u}if(r!==ln)throw new Error("invert: does not exist");return bn(s,t)}function B2(e,t){const n=(e.ORDER+ln)/P2,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function tR(e,t){const n=(e.ORDER-k2)/R2,r=e.mul(t,Ys),s=e.pow(r,n),i=e.mul(t,s),o=e.mul(e.mul(i,Ys),s),a=e.mul(i,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),t))throw new Error("Cannot find square root");return a}function nR(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-ln,n=0;for(;t%Ys===An;)t/=Ys,n++;let r=Ys;const s=I0(e);for(;LE(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return B2;let i=s.pow(r,t);const o=(t+ln)/Ys;return function(a,u){if(a.is0(u))return u;if(LE(a,u)!==1)throw new Error("Cannot find square root");let c=n,l=a.mul(a.ONE,i),d=a.pow(u,t),f=a.pow(u,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let h=1,p=a.sqr(d);for(;!a.eql(p,a.ONE);)if(h++,p=a.sqr(p),h===c)throw new Error("Cannot find square root");const g=ln<<BigInt(c-h-1),y=a.pow(l,g);c=h,l=a.sqr(y),d=a.mul(d,l),f=a.mul(f,y)}return f}}function rR(e){return e%P2===eR?B2:e%R2===k2?tR:nR(e)}const iR=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function sR(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=iR.reduce((r,s)=>(r[s]="function",r),t);return Ah(e,n)}function oR(e,t,n){if(n<An)throw new Error("invalid exponent, negatives unsupported");if(n===An)return e.ONE;if(n===ln)return t;let r=e.ONE,s=t;for(;n>An;)n&ln&&(r=e.mul(r,s)),s=e.sqr(s),n>>=ln;return r}function U2(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),s=t.reduce((o,a,u)=>e.is0(a)?o:(r[u]=o,e.mul(o,a)),e.ONE),i=e.inv(s);return t.reduceRight((o,a,u)=>e.is0(a)?o:(r[u]=e.mul(o,r[u]),e.mul(o,a)),i),r}function LE(e,t){const n=(e.ORDER-ln)/Ys,r=e.pow(t,n),s=e.eql(r,e.ONE),i=e.eql(r,e.ZERO),o=e.eql(r,e.neg(e.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function z2(e,t){t!==void 0&&Tu(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function I0(e,t,n=!1,r={}){if(e<=An)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:s,nByteLength:i}=z2(e,t);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:n,BITS:s,BYTES:i,MASK:Eh(s),ZERO:An,ONE:ln,create:u=>bn(u,e),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return An<=u&&u<e},is0:u=>u===An,isOdd:u=>(u&ln)===ln,neg:u=>bn(-u,e),eql:(u,c)=>u===c,sqr:u=>bn(u*u,e),add:(u,c)=>bn(u+c,e),sub:(u,c)=>bn(u-c,e),mul:(u,c)=>bn(u*c,e),pow:(u,c)=>oR(a,u,c),div:(u,c)=>bn(u*Rp(c,e),e),sqrN:u=>u*u,addN:(u,c)=>u+c,subN:(u,c)=>u-c,mulN:(u,c)=>u*c,inv:u=>Rp(u,e),sqrt:r.sqrt||(u=>(o||(o=rR(e)),o(a,u))),toBytes:u=>n?S2(u,i):Uu(u,i),fromBytes:u=>{if(u.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+u.length);return n?A2(u):Zs(u)},invertBatch:u=>U2(a,u),cmov:(u,c,l)=>l?c:u});return Object.freeze(a)}function F2(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function H2(e){const t=F2(e);return t+Math.ceil(t/2)}function aR(e,t,n=!1){const r=e.length,s=F2(t),i=H2(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?A2(e):Zs(e),a=bn(o,t-ln)+ln;return n?S2(a,s):Uu(a,s)}const CE=BigInt(0),Bp=BigInt(1);function jf(e,t){const n=t.negate();return e?n:t}function V2(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Pf(e,t){V2(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),s=2**e,i=Eh(e),o=BigInt(e);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function jE(e,t,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(e&s),u=e>>o;a>r&&(a-=i,u+=Bp);const c=t*r,l=c+Math.abs(a)-1,d=a===0,f=a<0,h=t%2!==0;return{nextN:u,offset:l,isZero:d,isNeg:f,isNegF:h,offsetF:c}}function cR(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function uR(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const kf=new WeakMap,q2=new WeakMap;function Rf(e){return q2.get(e)||1}function lR(e,t){return{constTimeNegate:jf,hasPrecomputes(n){return Rf(n)!==1},unsafeLadder(n,r,s=e.ZERO){let i=n;for(;r>CE;)r&Bp&&(s=s.add(i)),i=i.double(),r>>=Bp;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Pf(r,t),o=[];let a=n,u=a;for(let c=0;c<s;c++){u=a,o.push(u);for(let l=1;l<i;l++)u=u.add(a),o.push(u);a=u.double()}return o},wNAF(n,r,s){let i=e.ZERO,o=e.BASE;const a=Pf(n,t);for(let u=0;u<a.windows;u++){const{nextN:c,offset:l,isZero:d,isNeg:f,isNegF:h,offsetF:p}=jE(s,u,a);s=c,d?o=o.add(jf(h,r[p])):i=i.add(jf(f,r[l]))}return{p:i,f:o}},wNAFUnsafe(n,r,s,i=e.ZERO){const o=Pf(n,t);for(let a=0;a<o.windows&&s!==CE;a++){const{nextN:u,offset:c,isZero:l,isNeg:d}=jE(s,a,o);if(s=u,!l){const f=r[c];i=i.add(d?f.negate():f)}}return i},getPrecomputes(n,r,s){let i=kf.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&kf.set(r,s(i))),i},wNAFCached(n,r,s){const i=Rf(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=Rf(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){V2(r,t),q2.set(n,r),kf.delete(n)}}}function dR(e,t,n,r){cR(n,e),uR(r,t);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=e.ZERO,a=pk(BigInt(s));let u=1;a>12?u=a-3:a>4?u=a-2:a>0&&(u=2);const c=Eh(u),l=new Array(Number(c)+1).fill(o),d=Math.floor((t.BITS-1)/u)*u;let f=o;for(let h=d;h>=0;h-=u){l.fill(o);for(let g=0;g<i;g++){const y=r[g],b=Number(y>>BigInt(h)&c);l[b]=l[b].add(n[g])}let p=o;for(let g=l.length-1,y=o;g>0;g--)y=y.add(l[g]),p=p.add(y);if(f=f.add(p),h!==0)for(let g=0;g<u;g++)f=f.double()}return f}function G2(e){return sR(e.Fp),Ah(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...z2(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function PE(e){e.lowS!==void 0&&Mu("lowS",e.lowS),e.prehash!==void 0&&Mu("prehash",e.prehash)}function hR(e){const t=G2(e);Ah(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:s}=t;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}class fR extends Error{constructor(t=""){super(t)}}const ri={Err:fR,_tlv:{encode:(e,t)=>{const{Err:n}=ri;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=Sl(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Sl(s.length/2|128):"";return Sl(e)+i+s+t},decode(e,t){const{Err:n}=ri;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const u=s&127;if(!u)throw new n("tlv.decode(long): indefinite length not supported");if(u>4)throw new n("tlv.decode(long): byte length is too big");const c=t.subarray(r,r+u);if(c.length!==u)throw new n("tlv.decode: length bytes not complete");if(c[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of c)o=o<<8|l;if(r+=u,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=t.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:t.subarray(r+o)}}},_int:{encode(e){const{Err:t}=ri;if(e<oi)throw new t("integer: negative integers are not allowed");let n=Sl(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=ri;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Zs(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=ri,s=Kn("signature",e),{v:i,l:o}=r.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:u}=r.decode(2,i),{v:c,l}=r.decode(2,u);if(l.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(c)}},hexFromSig(e){const{_tlv:t,_int:n}=ri,r=t.encode(2,n.encode(e.r)),s=t.encode(2,n.encode(e.s)),i=r+s;return t.encode(48,i)}};function Bf(e,t){return Nu(Uu(e,t))}const oi=BigInt(0),Rt=BigInt(1);BigInt(2);const Uf=BigInt(3),pR=BigInt(4);function gR(e){const t=hR(e),{Fp:n}=t,r=I0(t.n,t.nBitLength),s=t.toBytes||((E,_,S)=>{const I=_.toAffine();return hd(Uint8Array.from([4]),n.toBytes(I.x),n.toBytes(I.y))}),i=t.fromBytes||(E=>{const _=E.subarray(1),S=n.fromBytes(_.subarray(0,n.BYTES)),I=n.fromBytes(_.subarray(n.BYTES,2*n.BYTES));return{x:S,y:I}});function o(E){const{a:_,b:S}=t,I=n.sqr(E),D=n.mul(I,E);return n.add(n.add(D,n.mul(E,_)),S)}function a(E,_){const S=n.sqr(_),I=o(E);return n.eql(S,I)}if(!a(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const u=n.mul(n.pow(t.a,Uf),pR),c=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(u,c)))throw new Error("bad curve params: a or b");function l(E){return T0(E,Rt,t.n)}function d(E){const{allowedPrivateKeyLengths:_,nByteLength:S,wrapPrivateKey:I,n:D}=t;if(_&&typeof E!="bigint"){if(Bu(E)&&(E=Nu(E)),typeof E!="string"||!_.includes(E.length))throw new Error("invalid private key");E=E.padStart(S*2,"0")}let L;try{L=typeof E=="bigint"?E:Zs(Kn("private key",E,S))}catch{throw new Error("invalid private key, expected hex or "+S+" bytes, got "+typeof E)}return I&&(L=bn(L,D)),Yo("private key",L,Rt,D),L}function f(E){if(!(E instanceof g))throw new Error("ProjectivePoint expected")}const h=ME((E,_)=>{const{px:S,py:I,pz:D}=E;if(n.eql(D,n.ONE))return{x:S,y:I};const L=E.is0();_==null&&(_=L?n.ONE:n.inv(D));const x=n.mul(S,_),j=n.mul(I,_),V=n.mul(D,_);if(L)return{x:n.ZERO,y:n.ZERO};if(!n.eql(V,n.ONE))throw new Error("invZ was invalid");return{x,y:j}}),p=ME(E=>{if(E.is0()){if(t.allowInfinityPoint&&!n.is0(E.py))return;throw new Error("bad point: ZERO")}const{x:_,y:S}=E.toAffine();if(!n.isValid(_)||!n.isValid(S))throw new Error("bad point: x or y not FE");if(!a(_,S))throw new Error("bad point: equation left != right");if(!E.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class g{constructor(_,S,I){if(_==null||!n.isValid(_))throw new Error("x required");if(S==null||!n.isValid(S)||n.is0(S))throw new Error("y required");if(I==null||!n.isValid(I))throw new Error("z required");this.px=_,this.py=S,this.pz=I,Object.freeze(this)}static fromAffine(_){const{x:S,y:I}=_||{};if(!_||!n.isValid(S)||!n.isValid(I))throw new Error("invalid affine point");if(_ instanceof g)throw new Error("projective point not allowed");const D=L=>n.eql(L,n.ZERO);return D(S)&&D(I)?g.ZERO:new g(S,I,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(_){const S=U2(n,_.map(I=>I.pz));return _.map((I,D)=>I.toAffine(S[D])).map(g.fromAffine)}static fromHex(_){const S=g.fromAffine(i(Kn("pointHex",_)));return S.assertValidity(),S}static fromPrivateKey(_){return g.BASE.multiply(d(_))}static msm(_,S){return dR(g,r,_,S)}_setWindowSize(_){A.setWindowSize(this,_)}assertValidity(){p(this)}hasEvenY(){const{y:_}=this.toAffine();if(n.isOdd)return!n.isOdd(_);throw new Error("Field doesn't support isOdd")}equals(_){f(_);const{px:S,py:I,pz:D}=this,{px:L,py:x,pz:j}=_,V=n.eql(n.mul(S,j),n.mul(L,D)),Y=n.eql(n.mul(I,j),n.mul(x,D));return V&&Y}negate(){return new g(this.px,n.neg(this.py),this.pz)}double(){const{a:_,b:S}=t,I=n.mul(S,Uf),{px:D,py:L,pz:x}=this;let j=n.ZERO,V=n.ZERO,Y=n.ZERO,q=n.mul(D,D),R=n.mul(L,L),v=n.mul(x,x),T=n.mul(D,L);return T=n.add(T,T),Y=n.mul(D,x),Y=n.add(Y,Y),j=n.mul(_,Y),V=n.mul(I,v),V=n.add(j,V),j=n.sub(R,V),V=n.add(R,V),V=n.mul(j,V),j=n.mul(T,j),Y=n.mul(I,Y),v=n.mul(_,v),T=n.sub(q,v),T=n.mul(_,T),T=n.add(T,Y),Y=n.add(q,q),q=n.add(Y,q),q=n.add(q,v),q=n.mul(q,T),V=n.add(V,q),v=n.mul(L,x),v=n.add(v,v),q=n.mul(v,T),j=n.sub(j,q),Y=n.mul(v,R),Y=n.add(Y,Y),Y=n.add(Y,Y),new g(j,V,Y)}add(_){f(_);const{px:S,py:I,pz:D}=this,{px:L,py:x,pz:j}=_;let V=n.ZERO,Y=n.ZERO,q=n.ZERO;const R=t.a,v=n.mul(t.b,Uf);let T=n.mul(S,L),m=n.mul(I,x),w=n.mul(D,j),N=n.add(S,I),C=n.add(L,x);N=n.mul(N,C),C=n.add(T,m),N=n.sub(N,C),C=n.add(S,D);let O=n.add(L,j);return C=n.mul(C,O),O=n.add(T,w),C=n.sub(C,O),O=n.add(I,D),V=n.add(x,j),O=n.mul(O,V),V=n.add(m,w),O=n.sub(O,V),q=n.mul(R,C),V=n.mul(v,w),q=n.add(V,q),V=n.sub(m,q),q=n.add(m,q),Y=n.mul(V,q),m=n.add(T,T),m=n.add(m,T),w=n.mul(R,w),C=n.mul(v,C),m=n.add(m,w),w=n.sub(T,w),w=n.mul(R,w),C=n.add(C,w),T=n.mul(m,C),Y=n.add(Y,T),T=n.mul(O,C),V=n.mul(N,V),V=n.sub(V,T),T=n.mul(N,m),q=n.mul(O,q),q=n.add(q,T),new g(V,Y,q)}subtract(_){return this.add(_.negate())}is0(){return this.equals(g.ZERO)}wNAF(_){return A.wNAFCached(this,_,g.normalizeZ)}multiplyUnsafe(_){const{endo:S,n:I}=t;Yo("scalar",_,oi,I);const D=g.ZERO;if(_===oi)return D;if(this.is0()||_===Rt)return this;if(!S||A.hasPrecomputes(this))return A.wNAFCachedUnsafe(this,_,g.normalizeZ);let{k1neg:L,k1:x,k2neg:j,k2:V}=S.splitScalar(_),Y=D,q=D,R=this;for(;x>oi||V>oi;)x&Rt&&(Y=Y.add(R)),V&Rt&&(q=q.add(R)),R=R.double(),x>>=Rt,V>>=Rt;return L&&(Y=Y.negate()),j&&(q=q.negate()),q=new g(n.mul(q.px,S.beta),q.py,q.pz),Y.add(q)}multiply(_){const{endo:S,n:I}=t;Yo("scalar",_,Rt,I);let D,L;if(S){const{k1neg:x,k1:j,k2neg:V,k2:Y}=S.splitScalar(_);let{p:q,f:R}=this.wNAF(j),{p:v,f:T}=this.wNAF(Y);q=A.constTimeNegate(x,q),v=A.constTimeNegate(V,v),v=new g(n.mul(v.px,S.beta),v.py,v.pz),D=q.add(v),L=R.add(T)}else{const{p:x,f:j}=this.wNAF(_);D=x,L=j}return g.normalizeZ([D,L])[0]}multiplyAndAddUnsafe(_,S,I){const D=g.BASE,L=(j,V)=>V===oi||V===Rt||!j.equals(D)?j.multiplyUnsafe(V):j.multiply(V),x=L(this,S).add(L(_,I));return x.is0()?void 0:x}toAffine(_){return h(this,_)}isTorsionFree(){const{h:_,isTorsionFree:S}=t;if(_===Rt)return!0;if(S)return S(g,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:_,clearCofactor:S}=t;return _===Rt?this:S?S(g,this):this.multiplyUnsafe(t.h)}toRawBytes(_=!0){return Mu("isCompressed",_),this.assertValidity(),s(g,this,_)}toHex(_=!0){return Mu("isCompressed",_),Nu(this.toRawBytes(_))}}g.BASE=new g(t.Gx,t.Gy,n.ONE),g.ZERO=new g(n.ZERO,n.ONE,n.ZERO);const{endo:y,nBitLength:b}=t,A=lR(g,y?Math.ceil(b/2):b);return{CURVE:t,ProjectivePoint:g,normPrivateKeyToScalar:d,weierstrassEquation:o,isWithinCurveOrder:l}}function yR(e){const t=G2(e);return Ah(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function mR(e){const t=yR(e),{Fp:n,n:r,nByteLength:s,nBitLength:i}=t,o=n.BYTES+1,a=2*n.BYTES+1;function u(v){return bn(v,r)}function c(v){return Rp(v,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:d,weierstrassEquation:f,isWithinCurveOrder:h}=gR({...t,toBytes(v,T,m){const w=T.toAffine(),N=n.toBytes(w.x),C=hd;return Mu("isCompressed",m),m?C(Uint8Array.from([T.hasEvenY()?2:3]),N):C(Uint8Array.from([4]),N,n.toBytes(w.y))},fromBytes(v){const T=v.length,m=v[0],w=v.subarray(1);if(T===o&&(m===2||m===3)){const N=Zs(w);if(!T0(N,Rt,n.ORDER))throw new Error("Point is not on curve");const C=f(N);let O;try{O=n.sqrt(C)}catch(W){const P=W instanceof Error?": "+W.message:"";throw new Error("Point is not on curve"+P)}const B=(O&Rt)===Rt;return(m&1)===1!==B&&(O=n.neg(O)),{x:N,y:O}}else if(T===a&&m===4){const N=n.fromBytes(w.subarray(0,n.BYTES)),C=n.fromBytes(w.subarray(n.BYTES,2*n.BYTES));return{x:N,y:C}}else{const N=o,C=a;throw new Error("invalid Point, expected length of "+N+", or uncompressed "+C+", got "+T)}}});function p(v){const T=r>>Rt;return v>T}function g(v){return p(v)?u(-v):v}const y=(v,T,m)=>Zs(v.slice(T,m));class b{constructor(T,m,w){Yo("r",T,Rt,r),Yo("s",m,Rt,r),this.r=T,this.s=m,w!=null&&(this.recovery=w),Object.freeze(this)}static fromCompact(T){const m=s;return T=Kn("compactSignature",T,m*2),new b(y(T,0,m),y(T,m,2*m))}static fromDER(T){const{r:m,s:w}=ri.toSig(Kn("DER",T));return new b(m,w)}assertValidity(){}addRecoveryBit(T){return new b(this.r,this.s,T)}recoverPublicKey(T){const{r:m,s:w,recovery:N}=this,C=D(Kn("msgHash",T));if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");const O=N===2||N===3?m+t.n:m;if(O>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const B=N&1?"03":"02",W=l.fromHex(B+Bf(O,n.BYTES)),P=c(O),X=u(-C*P),ee=u(w*P),se=l.BASE.multiplyAndAddUnsafe(W,X,ee);if(!se)throw new Error("point at infinify");return se.assertValidity(),se}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,u(-this.s),this.recovery):this}toDERRawBytes(){return dd(this.toDERHex())}toDERHex(){return ri.hexFromSig(this)}toCompactRawBytes(){return dd(this.toCompactHex())}toCompactHex(){const T=s;return Bf(this.r,T)+Bf(this.s,T)}}const A={isValidPrivateKey(v){try{return d(v),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const v=H2(t.n);return aR(t.randomBytes(v),t.n)},precompute(v=8,T=l.BASE){return T._setWindowSize(v),T.multiply(BigInt(3)),T}};function E(v,T=!0){return l.fromPrivateKey(v).toRawBytes(T)}function _(v){if(typeof v=="bigint")return!1;if(v instanceof l)return!0;const T=Kn("key",v).length,m=n.BYTES,w=m+1,N=2*m+1;if(!(t.allowedPrivateKeyLengths||s===w))return T===w||T===N}function S(v,T,m=!0){if(_(v)===!0)throw new Error("first arg must be private key");if(_(T)===!1)throw new Error("second arg must be public key");return l.fromHex(T).multiply(d(v)).toRawBytes(m)}const I=t.bits2int||function(v){if(v.length>8192)throw new Error("input is too large");const T=Zs(v),m=v.length*8-i;return m>0?T>>BigInt(m):T},D=t.bits2int_modN||function(v){return u(I(v))},L=Eh(i);function x(v){return Yo("num < 2^"+i,v,oi,L),Uu(v,s)}function j(v,T,m=V){if(["recovered","canonical"].some(J=>J in m))throw new Error("sign() legacy options not supported");const{hash:w,randomBytes:N}=t;let{lowS:C,prehash:O,extraEntropy:B}=m;C==null&&(C=!0),v=Kn("msgHash",v),PE(m),O&&(v=Kn("prehashed msgHash",w(v)));const W=D(v),P=d(T),X=[x(P),x(W)];if(B!=null&&B!==!1){const J=B===!0?N(n.BYTES):B;X.push(Kn("extraEntropy",J))}const ee=hd(...X),se=W;function Z(J){const z=I(J);if(!h(z))return;const K=c(z),H=l.BASE.multiply(z).toAffine(),U=u(H.x);if(U===oi)return;const F=u(K*u(se+U*P));if(F===oi)return;let $=(H.x===U?0:2)|Number(H.y&Rt),te=F;return C&&p(F)&&(te=g(F),$^=1),new b(U,te,$)}return{seed:ee,k2sig:Z}}const V={lowS:t.lowS,prehash:!1},Y={lowS:t.lowS,prehash:!1};function q(v,T,m=V){const{seed:w,k2sig:N}=j(v,T,m),C=t;return gk(C.hash.outputLen,C.nByteLength,C.hmac)(w,N)}l.BASE._setWindowSize(8);function R(v,T,m,w=Y){var N;const C=v;T=Kn("msgHash",T),m=Kn("publicKey",m);const{lowS:O,prehash:B,format:W}=w;if(PE(w),"strict"in w)throw new Error("options.strict was renamed to lowS");if(W!==void 0&&W!=="compact"&&W!=="der")throw new Error("format must be compact or der");const P=typeof C=="string"||Bu(C),X=!P&&!W&&typeof C=="object"&&C!==null&&typeof C.r=="bigint"&&typeof C.s=="bigint";if(!P&&!X)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let ee,se;try{if(X&&(ee=new b(C.r,C.s)),P){try{W!=="compact"&&(ee=b.fromDER(C))}catch($){if(!($ instanceof ri.Err))throw $}!ee&&W!=="der"&&(ee=b.fromCompact(C))}se=l.fromHex(m)}catch{return!1}if(!ee||O&&ee.hasHighS())return!1;B&&(T=t.hash(T));const{r:Z,s:J}=ee,z=D(T),K=c(J),H=u(z*K),U=u(Z*K),F=(N=l.BASE.multiplyAndAddUnsafe(se,H,U))==null?void 0:N.toAffine();return F?u(F.x)===Z:!1}return{CURVE:t,getPublicKey:E,getSharedSecret:S,sign:q,verify:R,ProjectivePoint:l,Signature:b,utils:A}}function wR(e){return{hash:e,hmac:(t,...n)=>j2(e,t,HP(...n)),randomBytes:VP}}function bR(e,t){const n=r=>mR({...e,...wR(r)});return{...n(t),create:n}}const K2=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),kE=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),vR=BigInt(0),ER=BigInt(1),Up=BigInt(2),RE=(e,t)=>(e+t/Up)/t;function AR(e){const t=K2,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),c=e*e*e%t,l=c*c*e%t,d=zn(l,n,t)*l%t,f=zn(d,n,t)*l%t,h=zn(f,Up,t)*c%t,p=zn(h,s,t)*h%t,g=zn(p,i,t)*p%t,y=zn(g,a,t)*g%t,b=zn(y,u,t)*y%t,A=zn(b,a,t)*g%t,E=zn(A,n,t)*l%t,_=zn(E,o,t)*p%t,S=zn(_,r,t)*c%t,I=zn(S,Up,t);if(!zp.eql(zp.sqr(I),e))throw new Error("Cannot find square root");return I}const zp=I0(K2,void 0,void 0,{sqrt:AR}),SR=bR({a:vR,b:BigInt(7),Fp:zp,n:kE,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=kE,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-ER*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=RE(i*e,t),u=RE(-r*e,t);let c=bn(e-a*n-u*s,t),l=bn(-a*r-u*i,t);const d=c>o,f=l>o;if(d&&(c=t-c),f&&(l=t-l),c>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:c,k2neg:f,k2:l}}}},hk);function TR(e){if(e.length!==130&&e.length!==132)throw new NR({signature:e});const t=BigInt(ni(e,0,32)),n=BigInt(ni(e,32,64)),r=(()=>{const s=+`0x${e.slice(130)}`;if(!Number.isNaN(s))try{return MR(s)}catch{throw new IR({value:s})}})();return typeof r>"u"?{r:t,s:n}:{r:t,s:n,yParity:r}}function MR(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new _R({value:e})}class NR extends at{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${Wi(N0(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class IR extends at{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class _R extends at{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}function OR(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Y2(e,t){return Array.isArray(t)?t.length===0?!0:e?t.every(n=>typeof n=="string"):t.every(n=>Number.isSafeInteger(n)):!1}function pd(e,t){if(typeof t!="string")throw new Error(`${e}: string expected`);return!0}function _0(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function Fp(e){if(!Array.isArray(e))throw new Error("array expected")}function gd(e,t){if(!Y2(!0,t))throw new Error(`${e}: array of strings expected`)}function DR(e,t){if(!Y2(!1,t))throw new Error(`${e}: array of numbers expected`)}function xR(...e){const t=i=>i,n=(i,o)=>a=>i(o(a)),r=e.map(i=>i.encode).reduceRight(n,t),s=e.map(i=>i.decode).reduce(n,t);return{encode:r,decode:s}}function LR(e){const t=e.split(""),n=t.length;gd("alphabet",t);const r=new Map(t.map((s,i)=>[s,i]));return{encode:s=>(Fp(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${e}`);return t[i]})),decode:s=>(Fp(s),s.map(i=>{pd("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${e}`);return o}))}}function CR(e=""){return pd("join",e),{encode:t=>(gd("join.decode",t),t.join(e)),decode:t=>(pd("join.decode",t),t.split(e))}}function jR(e,t="="){return _0(e),pd("padding",t),{encode(n){for(gd("padding.encode",n);n.length*e%8;)n.push(t);return n},decode(n){gd("padding.decode",n);let r=n.length;if(r*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if((r-1)*e%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const W2=(e,t)=>t===0?e:W2(t,e%t),yd=(e,t)=>e+(t-W2(e,t)),zf=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function BE(e,t,n,r){if(Fp(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(yd(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${yd(t,n)}`);let s=0,i=0;const o=zf[t],a=zf[n]-1,u=[];for(const c of e){if(_0(c),c>=o)throw new Error(`convertRadix2: invalid data word=${c} from=${t}`);if(s=s<<t|c,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=n;i-=n)u.push((s>>i-n&a)>>>0);const l=zf[i];if(l===void 0)throw new Error("invalid carry");s&=l-1}if(s=s<<n-i&a,!r&&i>=t)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&u.push(s>>>0),u}function PR(e,t=!1){if(_0(e),e>32,yd(8,e)>32||yd(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!OR(n))throw new Error("radix2.encode input should be Uint8Array");return BE(Array.from(n),8,e,!t)},decode:n=>(DR("radix2.decode",n),Uint8Array.from(BE(n,e,8,t)))}}const kR=xR(PR(5),LR("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),jR(5),CR(""));function RR(e){return $k(BR(e))}function BR(e){const{payload:t,signature:n}=e,{r,s,yParity:i}=n,o=new SR.Signature(BigInt(r),BigInt(s)).addRecoveryBit(i).recoverPublicKey(N0(t).substring(2));return Hk(o)}function UR(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let c=0;c<t.length;c++)t[c]=255;for(let c=0;c<e.length;c++){const l=e.charAt(c),d=l.charCodeAt(0);if(t[d]!==255)throw new TypeError(l+" is ambiguous");t[d]=c}const n=e.length,r=e.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(c){if(c instanceof Uint8Array||(ArrayBuffer.isView(c)?c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength):Array.isArray(c)&&(c=Uint8Array.from(c))),!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length===0)return"";let l=0,d=0,f=0;const h=c.length;for(;f!==h&&c[f]===0;)f++,l++;const p=(h-f)*i+1>>>0,g=new Uint8Array(p);for(;f!==h;){let A=c[f],E=0;for(let _=p-1;(A!==0||E<d)&&_!==-1;_--,E++)A+=256*g[_]>>>0,g[_]=A%n>>>0,A=A/n>>>0;if(A!==0)throw new Error("Non-zero carry");d=E,f++}let y=p-d;for(;y!==p&&g[y]===0;)y++;let b=r.repeat(l);for(;y<p;++y)b+=e.charAt(g[y]);return b}function a(c){if(typeof c!="string")throw new TypeError("Expected String");if(c.length===0)return new Uint8Array;let l=0,d=0,f=0;for(;c[l]===r;)d++,l++;const h=(c.length-l)*s+1>>>0,p=new Uint8Array(h);for(;l<c.length;){const A=c.charCodeAt(l);if(A>255)return;let E=t[A];if(E===255)return;let _=0;for(let S=h-1;(E!==0||_<f)&&S!==-1;S--,_++)E+=n*p[S]>>>0,p[S]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");f=_,l++}let g=h-f;for(;g!==h&&p[g]===0;)g++;const y=new Uint8Array(d+(h-g));let b=d;for(;g!==h;)y[b++]=p[g++];return y}function u(c){const l=a(c);if(l)return l;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:u}}var zR="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const zu=UR(zR);function FR(e){const t=e.length;let n=0,r=0;for(;r<t;){let s=e.charCodeAt(r++);if(s&4294967168)if(!(s&4294965248))n+=2;else{if(s>=55296&&s<=56319&&r<t){const i=e.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}s&4294901760?n+=4:n+=3}else{n++;continue}}return n}function HR(e,t,n){const r=e.length;let s=n,i=0;for(;i<r;){let o=e.charCodeAt(i++);if(o&4294967168)if(!(o&4294965248))t[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const a=e.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(t[s++]=o>>18&7|240,t[s++]=o>>12&63|128,t[s++]=o>>6&63|128):(t[s++]=o>>12&15|224,t[s++]=o>>6&63|128)}else{t[s++]=o;continue}t[s++]=o&63|128}}const VR=new TextEncoder,qR=50;function GR(e,t,n){VR.encodeInto(e,t.subarray(n))}function KR(e,t,n){e.length>qR?GR(e,t,n):HR(e,t,n)}const YR=4096;function X2(e,t,n){let r=t;const s=r+n,i=[];let o="";for(;r<s;){const a=e[r++];if(!(a&128))i.push(a);else if((a&224)===192){const u=e[r++]&63;i.push((a&31)<<6|u)}else if((a&240)===224){const u=e[r++]&63,c=e[r++]&63;i.push((a&31)<<12|u<<6|c)}else if((a&248)===240){const u=e[r++]&63,c=e[r++]&63,l=e[r++]&63;let d=(a&7)<<18|u<<12|c<<6|l;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=YR&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const WR=new TextDecoder,XR=200;function QR(e,t,n){const r=e.subarray(t,t+n);return WR.decode(r)}function $R(e,t,n){return n>XR?QR(e,t,n):X2(e,t,n)}class Ml{constructor(t,n){this.type=t,this.data=n}}class jn extends Error{constructor(t){super(t);const n=Object.create(jn.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:jn.name})}}const Wc=4294967295;function ZR(e,t,n){const r=n/4294967296,s=n;e.setUint32(t,r),e.setUint32(t+4,s)}function Q2(e,t,n){const r=Math.floor(n/4294967296),s=n;e.setUint32(t,r),e.setUint32(t+4,s)}function $2(e,t){const n=e.getInt32(t),r=e.getUint32(t+4);return n*4294967296+r}function JR(e,t){const n=e.getUint32(t),r=e.getUint32(t+4);return n*4294967296+r}const eB=-1,tB=4294967296-1,nB=17179869184-1;function rB({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=nB)if(t===0&&e<=tB){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e),n}else{const n=e/4294967296,r=e&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,t<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,t),Q2(r,4,e),n}}function iB(e){const t=e.getTime(),n=Math.floor(t/1e3),r=(t-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function sB(e){if(e instanceof Date){const t=iB(e);return rB(t)}else return null}function oB(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:{const n=t.getUint32(0),r=t.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=$2(t,4),r=t.getUint32(0);return{sec:n,nsec:r}}default:throw new jn(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}function aB(e){const t=oB(e);return new Date(t.sec*1e3+t.nsec/1e6)}const cB={type:eB,encode:sB,decode:aB};class md{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(cB)}register({type:t,encode:n,decode:r}){if(t>=0)this.encoders[t]=n,this.decoders[t]=r;else{const s=-1-t;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(t,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(t,n);if(i!=null){const o=-1-r;return new Ml(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(t,n);if(i!=null){const o=r;return new Ml(o,i)}}}return t instanceof Ml?t:null}decode(t,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(t,n,r):new Ml(n,t)}}md.defaultCodec=new md;function uB(e){return e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer}function Hp(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):uB(e)?new Uint8Array(e):Uint8Array.from(e)}const lB=100,dB=2048;let hB=class Z2{constructor(t){this.entered=!1,this.extensionCodec=t?.extensionCodec??md.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.maxDepth=t?.maxDepth??lB,this.initialBufferSize=t?.initialBufferSize??dB,this.sortKeys=t?.sortKeys??!1,this.forceFloat32=t?.forceFloat32??!1,this.ignoreUndefined=t?.ignoreUndefined??!1,this.forceIntegerToFloat=t?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new Z2({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(t){if(this.entered)return this.clone().encodeSharedRef(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(t){if(this.entered)return this.clone().encode(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(t,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);t==null?this.encodeNil():typeof t=="boolean"?this.encodeBoolean(t):typeof t=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(t):this.encodeNumber(t):typeof t=="string"?this.encodeString(t):this.useBigInt64&&typeof t=="bigint"?this.encodeBigInt64(t):this.encodeObject(t,n)}ensureBufferSizeToWrite(t){const n=this.pos+t;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(t){const n=new ArrayBuffer(t),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(t){t===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(t){!this.forceIntegerToFloat&&Number.isSafeInteger(t)?t>=0?t<128?this.writeU8(t):t<256?(this.writeU8(204),this.writeU8(t)):t<65536?(this.writeU8(205),this.writeU16(t)):t<4294967296?(this.writeU8(206),this.writeU32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(207),this.writeU64(t)):t>=-32?this.writeU8(224|t+32):t>=-128?(this.writeU8(208),this.writeI8(t)):t>=-32768?(this.writeU8(209),this.writeI16(t)):t>=-2147483648?(this.writeU8(210),this.writeI32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(211),this.writeI64(t)):this.encodeNumberAsFloat(t)}encodeNumberAsFloat(t){this.forceFloat32?(this.writeU8(202),this.writeF32(t)):(this.writeU8(203),this.writeF64(t))}encodeBigInt64(t){t>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(t)):(this.writeU8(211),this.writeBigInt64(t))}writeStringHeader(t){if(t<32)this.writeU8(160+t);else if(t<256)this.writeU8(217),this.writeU8(t);else if(t<65536)this.writeU8(218),this.writeU16(t);else if(t<4294967296)this.writeU8(219),this.writeU32(t);else throw new Error(`Too long string: ${t} bytes in UTF-8`)}encodeString(t){const n=FR(t);this.ensureBufferSizeToWrite(5+n),this.writeStringHeader(n),KR(t,this.bytes,this.pos),this.pos+=n}encodeObject(t,n){const r=this.extensionCodec.tryToEncode(t,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(t))this.encodeArray(t,n);else if(ArrayBuffer.isView(t))this.encodeBinary(t);else if(typeof t=="object")this.encodeMap(t,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(t)}`)}encodeBinary(t){const n=t.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=Hp(t);this.writeU8a(r)}encodeArray(t,n){const r=t.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of t)this.doEncode(s,n+1)}countWithoutUndefined(t,n){let r=0;for(const s of n)t[s]!==void 0&&r++;return r}encodeMap(t,n){const r=Object.keys(t);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(t,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=t[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,n+1))}}encodeExtension(t){if(typeof t.data=="function"){const r=t.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(t.type),this.writeU8a(r);return}const n=t.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(t.type),this.writeU8a(t.data)}writeU8(t){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,t),this.pos++}writeU8a(t){const n=t.length;this.ensureBufferSizeToWrite(n),this.bytes.set(t,this.pos),this.pos+=n}writeI8(t){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,t),this.pos++}writeU16(t){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,t),this.pos+=2}writeI16(t){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,t),this.pos+=2}writeU32(t){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,t),this.pos+=4}writeI32(t){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,t),this.pos+=4}writeF32(t){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,t),this.pos+=4}writeF64(t){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,t),this.pos+=8}writeU64(t){this.ensureBufferSizeToWrite(8),ZR(this.view,this.pos,t),this.pos+=8}writeI64(t){this.ensureBufferSizeToWrite(8),Q2(this.view,this.pos,t),this.pos+=8}writeBigUint64(t){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,t),this.pos+=8}writeBigInt64(t){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,t),this.pos+=8}};function fB(e,t){return new hB(t).encodeSharedRef(e)}function Ff(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}const pB=16,gB=16;class yB{constructor(t=pB,n=gB){this.hit=0,this.miss=0,this.maxKeyLength=t,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(t){return t>0&&t<=this.maxKeyLength}find(t,n,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<r;a++)if(o[a]!==t[n+a])continue e;return i.str}return null}store(t,n){const r=this.caches[t.length-1],s={bytes:t,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(t,n,r){const s=this.find(t,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=X2(t,n,r),o=Uint8Array.prototype.slice.call(t,n,n+r);return this.store(o,i),i}}const Vp="array",gu="map_key",J2="map_value",mB=e=>{if(typeof e=="string"||typeof e=="number")return e;throw new jn("The type of key must be string or number but "+typeof e)};class wB{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(t){const n=this.getUninitializedStateFromPool();n.type=Vp,n.position=0,n.size=t,n.array=new Array(t)}pushMapState(t){const n=this.getUninitializedStateFromPool();n.type=gu,n.readCount=0,n.size=t,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const t={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(t)}return this.stack[this.stackHeadPosition]}release(t){if(this.stack[this.stackHeadPosition]!==t)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(t.type===Vp){const n=t;n.size=0,n.array=void 0,n.position=0,n.type=void 0}if(t.type===gu||t.type===J2){const n=t;n.size=0,n.map=void 0,n.readCount=0,n.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Xc=-1,O0=new DataView(new ArrayBuffer(0)),bB=new Uint8Array(O0.buffer);try{O0.getInt8(0)}catch(e){if(!(e instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const UE=new RangeError("Insufficient data"),vB=new yB;let EB=class eM{constructor(t){this.totalPos=0,this.pos=0,this.view=O0,this.bytes=bB,this.headByte=Xc,this.stack=new wB,this.entered=!1,this.extensionCodec=t?.extensionCodec??md.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.rawStrings=t?.rawStrings??!1,this.maxStrLength=t?.maxStrLength??Wc,this.maxBinLength=t?.maxBinLength??Wc,this.maxArrayLength=t?.maxArrayLength??Wc,this.maxMapLength=t?.maxMapLength??Wc,this.maxExtLength=t?.maxExtLength??Wc,this.keyDecoder=t?.keyDecoder!==void 0?t.keyDecoder:vB,this.mapKeyConverter=t?.mapKeyConverter??mB}clone(){return new eM({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Xc,this.stack.reset()}setBuffer(t){const n=Hp(t);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(t){if(this.headByte===Xc&&!this.hasRemaining(1))this.setBuffer(t);else{const n=this.bytes.subarray(this.pos),r=Hp(t),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(t){return this.view.byteLength-this.pos>=t}createExtraByteError(t){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${t}]`)}decode(t){if(this.entered)return this.clone().decode(t);try{this.entered=!0,this.reinitializeState(),this.setBuffer(t);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(t){if(this.entered){yield*this.clone().decodeMulti(t);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(t);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(t){if(this.entered)return this.clone().decodeAsync(t);try{this.entered=!0;let n=!1,r;for await(const a of t){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(u){if(!(u instanceof RangeError))throw u}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${Ff(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(t){return this.decodeMultiAsync(t,!0)}decodeStream(t){return this.decodeMultiAsync(t,!1)}async*decodeMultiAsync(t,n){if(this.entered){yield*this.clone().decodeMultiAsync(t,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of t){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const t=this.readHeadByte();let n;if(t>=224)n=t-256;else if(t<192)if(t<128)n=t;else if(t<144){const s=t-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(t<160){const s=t-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=t-160;n=this.decodeString(s,0)}else if(t===192)n=null;else if(t===194)n=!1;else if(t===195)n=!0;else if(t===202)n=this.readF32();else if(t===203)n=this.readF64();else if(t===204)n=this.readU8();else if(t===205)n=this.readU16();else if(t===206)n=this.readU32();else if(t===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(t===208)n=this.readI8();else if(t===209)n=this.readI16();else if(t===210)n=this.readI32();else if(t===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(t===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(t===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(t===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(t===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(t===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(t===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(t===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(t===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(t===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(t===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(t===212)n=this.decodeExtension(1,0);else if(t===213)n=this.decodeExtension(2,0);else if(t===214)n=this.decodeExtension(4,0);else if(t===215)n=this.decodeExtension(8,0);else if(t===216)n=this.decodeExtension(16,0);else if(t===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(t===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(t===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new jn(`Unrecognized type byte: ${Ff(t)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===Vp)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===gu){if(n==="__proto__")throw new jn("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=J2;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=gu;continue e}}return n}}readHeadByte(){return this.headByte===Xc&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Xc}readArraySize(){const t=this.readHeadByte();switch(t){case 220:return this.readU16();case 221:return this.readU32();default:{if(t<160)return t-144;throw new jn(`Unrecognized array type byte: ${Ff(t)}`)}}}pushMapState(t){if(t>this.maxMapLength)throw new jn(`Max length exceeded: map length (${t}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(t)}pushArrayState(t){if(t>this.maxArrayLength)throw new jn(`Max length exceeded: array length (${t}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(t)}decodeString(t,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(t,n):this.decodeBinary(t,n)}decodeUtf8String(t,n){var r;if(t>this.maxStrLength)throw new jn(`Max length exceeded: UTF-8 byte length (${t}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+t)throw UE;const s=this.pos+n;let i;return this.stateIsMapKey()&&(r=this.keyDecoder)!=null&&r.canBeCached(t)?i=this.keyDecoder.decode(this.bytes,s,t):i=$R(this.bytes,s,t),this.pos+=n+t,i}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===gu:!1}decodeBinary(t,n){if(t>this.maxBinLength)throw new jn(`Max length exceeded: bin length (${t}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(t+n))throw UE;const r=this.pos+n,s=this.bytes.subarray(r,r+t);return this.pos+=n+t,s}decodeExtension(t,n){if(t>this.maxExtLength)throw new jn(`Max length exceeded: ext length (${t}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(t,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const t=this.view.getUint8(this.pos);return this.pos++,t}readI8(){const t=this.view.getInt8(this.pos);return this.pos++,t}readU16(){const t=this.view.getUint16(this.pos);return this.pos+=2,t}readI16(){const t=this.view.getInt16(this.pos);return this.pos+=2,t}readU32(){const t=this.view.getUint32(this.pos);return this.pos+=4,t}readI32(){const t=this.view.getInt32(this.pos);return this.pos+=4,t}readU64(){const t=JR(this.view,this.pos);return this.pos+=8,t}readI64(){const t=$2(this.view,this.pos);return this.pos+=8,t}readU64AsBigInt(){const t=this.view.getBigUint64(this.pos);return this.pos+=8,t}readI64AsBigInt(){const t=this.view.getBigInt64(this.pos);return this.pos+=8,t}readF32(){const t=this.view.getFloat32(this.pos);return this.pos+=4,t}readF64(){const t=this.view.getFloat64(this.pos);return this.pos+=8,t}};function AB(e,t){return new EB(t).decode(e)}function D0(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function tM(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?D0(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function yu(e,t){t||(t=e.reduce((s,i)=>s+i.length,0));const n=tM(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return D0(n)}function SB(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<e.length;s++){var i=e.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=e.length,u=e.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,b=0,A=p.length;b!==A&&p[b]===0;)b++,g++;for(var E=(A-b)*l+1>>>0,_=new Uint8Array(E);b!==A;){for(var S=p[b],I=0,D=E-1;(S!==0||I<y)&&D!==-1;D--,I++)S+=256*_[D]>>>0,_[D]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");y=I,b++}for(var L=E-y;L!==E&&_[L]===0;)L++;for(var x=u.repeat(g);L<E;++L)x+=e.charAt(_[L]);return x}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,b=0;p[g]===u;)y++,g++;for(var A=(p.length-g)*c+1>>>0,E=new Uint8Array(A);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var S=0,I=A-1;(_!==0||S<b)&&I!==-1;I--,S++)_+=a*E[I]>>>0,E[I]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");b=S,g++}if(p[g]!==" "){for(var D=A-b;D!==A&&E[D]===0;)D++;for(var L=new Uint8Array(y+(A-D)),x=y;D!==A;)L[x++]=E[D++];return L}}}function h(p){var g=f(p);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var TB=SB,MB=TB;const NB=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},IB=e=>new TextEncoder().encode(e),_B=e=>new TextDecoder().decode(e);class OB{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class DB{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return nM(this,t)}}class xB{constructor(t){this.decoders=t}or(t){return nM(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const nM=(e,t)=>new xB({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class LB{constructor(t,n,r,s){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new OB(t,n,r),this.decoder=new DB(t,n,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Sh=({name:e,prefix:t,encode:n,decode:r})=>new LB(e,t,n,r),Fu=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:s}=MB(n,t);return Sh({prefix:e,name:t,encode:r,decode:i=>NB(s(i))})},CB=(e,t,n,r)=>{const s={};for(let l=0;l<t.length;++l)s[t[l]]=l;let i=e.length;for(;e[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,u=0,c=0;for(let l=0;l<i;++l){const d=s[e[l]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);u=u<<n|d,a+=n,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=n||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},jB=(e,t,n)=>{const r=t[t.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let u=0;u<e.length;++u)for(a=a<<8|e[u],o+=8;o>n;)o-=n,i+=t[s&a>>o];if(o&&(i+=t[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Kt=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Sh({prefix:t,name:e,encode(s){return jB(s,r,n)},decode(s){return CB(s,r,n,e)}}),PB=Sh({prefix:"\0",name:"identity",encode:e=>_B(e),decode:e=>IB(e)}),kB=Object.freeze(Object.defineProperty({__proto__:null,identity:PB},Symbol.toStringTag,{value:"Module"})),RB=Kt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),BB=Object.freeze(Object.defineProperty({__proto__:null,base2:RB},Symbol.toStringTag,{value:"Module"})),UB=Kt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),zB=Object.freeze(Object.defineProperty({__proto__:null,base8:UB},Symbol.toStringTag,{value:"Module"})),FB=Fu({prefix:"9",name:"base10",alphabet:"0123456789"}),HB=Object.freeze(Object.defineProperty({__proto__:null,base10:FB},Symbol.toStringTag,{value:"Module"})),VB=Kt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),qB=Kt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),GB=Object.freeze(Object.defineProperty({__proto__:null,base16:VB,base16upper:qB},Symbol.toStringTag,{value:"Module"})),KB=Kt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),YB=Kt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),WB=Kt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),XB=Kt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),QB=Kt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),$B=Kt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ZB=Kt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),JB=Kt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),eU=Kt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),tU=Object.freeze(Object.defineProperty({__proto__:null,base32:KB,base32hex:QB,base32hexpad:ZB,base32hexpadupper:JB,base32hexupper:$B,base32pad:WB,base32padupper:XB,base32upper:YB,base32z:eU},Symbol.toStringTag,{value:"Module"})),nU=Fu({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),rU=Fu({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),iU=Object.freeze(Object.defineProperty({__proto__:null,base36:nU,base36upper:rU},Symbol.toStringTag,{value:"Module"})),sU=Fu({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),oU=Fu({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),aU=Object.freeze(Object.defineProperty({__proto__:null,base58btc:sU,base58flickr:oU},Symbol.toStringTag,{value:"Module"})),cU=Kt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),uU=Kt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),lU=Kt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),dU=Kt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),hU=Object.freeze(Object.defineProperty({__proto__:null,base64:cU,base64pad:uU,base64url:lU,base64urlpad:dU},Symbol.toStringTag,{value:"Module"})),rM=Array.from(""),fU=rM.reduce((e,t,n)=>(e[n]=t,e),[]),pU=rM.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function gU(e){return e.reduce((t,n)=>(t+=fU[n],t),"")}function yU(e){const t=[];for(const n of e){const r=pU[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const mU=Sh({prefix:"",name:"base256emoji",encode:gU,decode:yU}),wU=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:mU},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const zE={...kB,...BB,...zB,...HB,...GB,...tU,...iU,...aU,...hU,...wU};function iM(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const FE=iM("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Hf=iM("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=tM(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),sM={utf8:FE,"utf-8":FE,hex:zE.base16,latin1:Hf,ascii:Hf,binary:Hf,...zE};function Xn(e,t="utf8"){const n=sM[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?D0(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}function Tn(e,t="utf8"){const n=sM[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}const bU={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},vU="Input must be an string, Buffer or Uint8Array";function EU(e){let t;if(e instanceof Uint8Array)t=e;else if(typeof e=="string")t=new TextEncoder().encode(e);else throw new Error(vU);return t}function AU(e){return Array.prototype.map.call(e,function(t){return(t<16?"0":"")+t.toString(16)}).join("")}function Nl(e){return(4294967296+e).toString(16).substring(1)}function SU(e,t,n){let r=`
`+e+" = ";for(let s=0;s<t.length;s+=2){if(n===32)r+=Nl(t[s]).toUpperCase(),r+=" ",r+=Nl(t[s+1]).toUpperCase();else if(n===64)r+=Nl(t[s+1]).toUpperCase(),r+=Nl(t[s]).toUpperCase();else throw new Error("Invalid size "+n);s%6===4?r+=`
`+new Array(e.length+4).join(" "):s<t.length-2&&(r+=" ")}console.log(r)}function TU(e,t,n){let r=new Date().getTime();const s=new Uint8Array(t);for(let o=0;o<t;o++)s[o]=o%256;const i=new Date().getTime();console.log("Generated random input in "+(i-r)+"ms"),r=i;for(let o=0;o<n;o++){const a=e(s),u=new Date().getTime(),c=u-r;r=u,console.log("Hashed in "+c+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(t/(1<<20)/(c/1e3)*100)/100+" MB PER SECOND")}}var oM={normalizeInput:EU,toHex:AU,debugPrint:SU,testSpeed:TU};const Ql=oM;function Il(e,t,n){const r=e[t]+e[n];let s=e[t+1]+e[n+1];r>=4294967296&&s++,e[t]=r,e[t+1]=s}function HE(e,t,n,r){let s=e[t]+n;n<0&&(s+=4294967296);let i=e[t+1]+r;s>=4294967296&&i++,e[t]=s,e[t+1]=i}function aM(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function Ai(e,t,n,r,s,i){const o=du[s],a=du[s+1],u=du[i],c=du[i+1];Il(Pe,e,t),HE(Pe,e,o,a);let l=Pe[r]^Pe[e],d=Pe[r+1]^Pe[e+1];Pe[r]=d,Pe[r+1]=l,Il(Pe,n,r),l=Pe[t]^Pe[n],d=Pe[t+1]^Pe[n+1],Pe[t]=l>>>24^d<<8,Pe[t+1]=d>>>24^l<<8,Il(Pe,e,t),HE(Pe,e,u,c),l=Pe[r]^Pe[e],d=Pe[r+1]^Pe[e+1],Pe[r]=l>>>16^d<<16,Pe[r+1]=d>>>16^l<<16,Il(Pe,n,r),l=Pe[t]^Pe[n],d=Pe[t+1]^Pe[n+1],Pe[t]=d>>>31^l<<1,Pe[t+1]=l>>>31^d<<1}const cM=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),MU=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],Qt=new Uint8Array(MU.map(function(e){return e*2})),Pe=new Uint32Array(32),du=new Uint32Array(32);function uM(e,t){let n=0;for(n=0;n<16;n++)Pe[n]=e.h[n],Pe[n+16]=cM[n];for(Pe[24]=Pe[24]^e.t,Pe[25]=Pe[25]^e.t/4294967296,t&&(Pe[28]=~Pe[28],Pe[29]=~Pe[29]),n=0;n<32;n++)du[n]=aM(e.b,4*n);for(n=0;n<12;n++)Ai(0,8,16,24,Qt[n*16+0],Qt[n*16+1]),Ai(2,10,18,26,Qt[n*16+2],Qt[n*16+3]),Ai(4,12,20,28,Qt[n*16+4],Qt[n*16+5]),Ai(6,14,22,30,Qt[n*16+6],Qt[n*16+7]),Ai(0,10,20,30,Qt[n*16+8],Qt[n*16+9]),Ai(2,12,22,24,Qt[n*16+10],Qt[n*16+11]),Ai(4,14,16,26,Qt[n*16+12],Qt[n*16+13]),Ai(6,8,18,28,Qt[n*16+14],Qt[n*16+15]);for(n=0;n<16;n++)e.h[n]=e.h[n]^Pe[n]^Pe[n+16]}const Si=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function lM(e,t,n,r){if(e===0||e>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const s={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e};Si.fill(0),Si[0]=e,t&&(Si[1]=t.length),Si[2]=1,Si[3]=1,n&&Si.set(n,32),r&&Si.set(r,48);for(let i=0;i<16;i++)s.h[i]=cM[i]^aM(Si,i*4);return t&&(x0(s,t),s.c=128),s}function x0(e,t){for(let n=0;n<t.length;n++)e.c===128&&(e.t+=e.c,uM(e,!1),e.c=0),e.b[e.c++]=t[n]}function dM(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;uM(e,!0);const t=new Uint8Array(e.outlen);for(let n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(n&3);return t}function hM(e,t,n,r,s){n=n||64,e=Ql.normalizeInput(e),r&&(r=Ql.normalizeInput(r)),s&&(s=Ql.normalizeInput(s));const i=lM(n,t,r,s);return x0(i,e),dM(i)}function NU(e,t,n,r,s){const i=hM(e,t,n,r,s);return Ql.toHex(i)}var IU={blake2b:hM,blake2bHex:NU,blake2bInit:lM,blake2bUpdate:x0,blake2bFinal:dM};const fM=oM;function _U(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function Ti(e,t,n,r,s,i){Ke[e]=Ke[e]+Ke[t]+s,Ke[r]=_l(Ke[r]^Ke[e],16),Ke[n]=Ke[n]+Ke[r],Ke[t]=_l(Ke[t]^Ke[n],12),Ke[e]=Ke[e]+Ke[t]+i,Ke[r]=_l(Ke[r]^Ke[e],8),Ke[n]=Ke[n]+Ke[r],Ke[t]=_l(Ke[t]^Ke[n],7)}function _l(e,t){return e>>>t^e<<32-t}const pM=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),$t=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),Ke=new Uint32Array(16),Ft=new Uint32Array(16);function gM(e,t){let n=0;for(n=0;n<8;n++)Ke[n]=e.h[n],Ke[n+8]=pM[n];for(Ke[12]^=e.t,Ke[13]^=e.t/4294967296,t&&(Ke[14]=~Ke[14]),n=0;n<16;n++)Ft[n]=_U(e.b,4*n);for(n=0;n<10;n++)Ti(0,4,8,12,Ft[$t[n*16+0]],Ft[$t[n*16+1]]),Ti(1,5,9,13,Ft[$t[n*16+2]],Ft[$t[n*16+3]]),Ti(2,6,10,14,Ft[$t[n*16+4]],Ft[$t[n*16+5]]),Ti(3,7,11,15,Ft[$t[n*16+6]],Ft[$t[n*16+7]]),Ti(0,5,10,15,Ft[$t[n*16+8]],Ft[$t[n*16+9]]),Ti(1,6,11,12,Ft[$t[n*16+10]],Ft[$t[n*16+11]]),Ti(2,7,8,13,Ft[$t[n*16+12]],Ft[$t[n*16+13]]),Ti(3,4,9,14,Ft[$t[n*16+14]],Ft[$t[n*16+15]]);for(n=0;n<8;n++)e.h[n]^=Ke[n]^Ke[n+8]}function yM(e,t){if(!(e>0&&e<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=t?t.length:0;if(t&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(pM),b:new Uint8Array(64),c:0,t:0,outlen:e};return r.h[0]^=16842752^n<<8^e,n>0&&(L0(r,t),r.c=64),r}function L0(e,t){for(let n=0;n<t.length;n++)e.c===64&&(e.t+=e.c,gM(e,!1),e.c=0),e.b[e.c++]=t[n]}function mM(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;gM(e,!0);const t=new Uint8Array(e.outlen);for(let n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(n&3)&255;return t}function wM(e,t,n){n=n||32,e=fM.normalizeInput(e);const r=yM(n,t);return L0(r,e),mM(r)}function OU(e,t,n){const r=wM(e,t,n);return fM.toHex(r)}var DU={blake2s:wM,blake2sHex:OU,blake2sInit:yM,blake2sUpdate:L0,blake2sFinal:mM};const Qc=IU,$c=DU;var xU={blake2b:Qc.blake2b,blake2bHex:Qc.blake2bHex,blake2bInit:Qc.blake2bInit,blake2bUpdate:Qc.blake2bUpdate,blake2bFinal:Qc.blake2bFinal,blake2s:$c.blake2s,blake2sHex:$c.blake2sHex,blake2sInit:$c.blake2sInit,blake2sUpdate:$c.blake2sUpdate,blake2sFinal:$c.blake2sFinal};const LU=":";function $l(e){const[t,n]=e.split(LU);return{namespace:t,reference:n}}function bM(e,t){return e.includes(":")?[e]:t.chains||[]}var CU=Object.defineProperty,jU=Object.defineProperties,PU=Object.getOwnPropertyDescriptors,VE=Object.getOwnPropertySymbols,kU=Object.prototype.hasOwnProperty,RU=Object.prototype.propertyIsEnumerable,qp=(e,t,n)=>t in e?CU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qE=(e,t)=>{for(var n in t||(t={}))kU.call(t,n)&&qp(e,n,t[n]);if(VE)for(var n of VE(t))RU.call(t,n)&&qp(e,n,t[n]);return e},BU=(e,t)=>jU(e,PU(t)),GE=(e,t,n)=>qp(e,typeof t!="symbol"?t+"":t,n);const UU="ReactNative",kn={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},zU="js";function wd(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Ji(){return!to()&&!!w0()&&navigator.product===UU}function FU(){return Ji()&&typeof globalThis<"u"&&typeof globalThis?.Platform<"u"&&globalThis?.Platform.OS==="android"}function HU(){return Ji()&&typeof globalThis<"u"&&typeof globalThis?.Platform<"u"&&globalThis?.Platform.OS==="ios"}function da(){return!wd()&&!!w0()&&!!to()}function Hu(){return Ji()?kn.reactNative:wd()?kn.node:da()?kn.browser:kn.unknown}function KE(){var e;try{return Ji()&&typeof globalThis<"u"&&typeof globalThis?.Application<"u"?(e=globalThis.Application)==null?void 0:e.applicationId:void 0}catch{return}}function VU(e,t){const n=new URLSearchParams(e);return Object.entries(t).sort(([r],[s])=>r.localeCompare(s)).forEach(([r,s])=>{s!=null&&n.set(r,String(s))}),n.toString()}function qU(e){var t,n;const r=vM();try{return e!=null&&e.url&&r.url&&new URL(e.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),e.url=r.url),(t=e?.icons)!=null&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter(s=>s!=="")),BU(qE(qE({},r),e),{url:e?.url||r.url,name:e?.name||r.name,description:e?.description||r.description,icons:(n=e?.icons)!=null&&n.length&&e.icons.length>0?e.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),e||r}}function vM(){return h2()||{name:"",description:"",url:"",icons:[""]}}function GU(){if(Hu()===kn.reactNative&&typeof globalThis<"u"&&typeof globalThis?.Platform<"u"){const{OS:n,Version:r}=globalThis.Platform;return[n,r].join("-")}const e=yP();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function KU(){var e;const t=Hu();return t===kn.browser?[t,((e=d2())==null?void 0:e.host)||"unknown"].join(":"):t}function EM(e,t,n){const r=GU(),s=KU();return[[e,t].join("-"),[zU,n].join("-"),r,s].join("/")}function YU({protocol:e,version:t,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:u}){const c=n.split("?"),l=EM(e,t,r),d={auth:s,ua:l,projectId:i,useOnCloseEvent:o,packageName:u||void 0,bundleId:a||void 0},f=VU(c[1]||"",d);return c[0]+"?"+f}function Ws(e,t){return e.filter(n=>t.includes(n)).length===e.length}function Gp(e){return Object.fromEntries(e.entries())}function Kp(e){return new Map(Object.entries(e))}function qs(e=Ae.FIVE_MINUTES,t){const n=Ae.toMiliseconds(e||Ae.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,u)=>{if(o)return a(o);i=setTimeout(()=>{const c=new Error(t);o=Promise.reject(c),u(c)},n),r=a,s=u})}}function Or(e,t,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),t);try{const o=await e;r(o)}catch(o){s(o)}clearTimeout(i)})}function AM(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function WU(e){return AM("topic",e)}function XU(e){return AM("id",e)}function SM(e){const[t,n]=e.split(":"),r={id:void 0,topic:void 0};if(t==="topic"&&typeof n=="string")r.topic=n;else if(t==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);return r}function Nt(e,t){return Ae.fromMiliseconds(Date.now()+Ae.toMiliseconds(e))}function Ci(e){return Date.now()>=Ae.toMiliseconds(e)}function Ye(e,t){return`${e}${t?`:${t}`:""}`}function Js(e=[],t=[]){return[...new Set([...e,...t])]}async function QU({id:e,topic:t,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s?.href;if(typeof i!="string")return;const o=$U(i,e,t),a=Hu();if(a===kn.browser){if(!((r=to())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}ZU(o)}else a===kn.reactNative&&typeof globalThis?.Linking<"u"&&await globalThis.Linking.openURL(o)}catch(s){console.error(s)}}function $U(e,t,n){const r=`requestId=${t}&sessionTopic=${n}`;e.endsWith("/")&&(e=e.slice(0,-1));let s=`${e}`;if(e.startsWith("https://t.me")){const i=e.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${n6(r,!0)}`}else s=`${s}/wc?${r}`;return s}function ZU(e){let t="_self";t6()?t="_top":(e6()||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"),window.open(e,t,"noreferrer noopener")}async function JU(e,t){let n="";try{if(da()&&(n=localStorage.getItem(t),n))return n;n=await e.getItem(t)}catch(r){console.error(r)}return n}function YE(e,t){if(!e.includes(t))return null;const n=e.split(/([&,?,=])/),r=n.indexOf(t);return n[r+2]}function WE(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function C0(){return typeof process<"u"&&ci.IS_VITEST==="true"}function e6(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function t6(){try{return window.self!==window.top}catch{return!1}}function n6(e,t=!1){const n=De.Buffer.from(e).toString("base64");return t?n.replace(/[=]/g,""):n}function TM(e){return De.Buffer.from(e,"base64").toString("utf-8")}function r6(e){return new Promise(t=>setTimeout(t,e))}let i6=class{constructor({limit:e}){GE(this,"limit"),GE(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const t=this.set.values().next().value;t&&this.set.delete(t)}this.set.add(e)}}has(e){return this.set.has(e)}};const Ol=BigInt(2**32-1),XE=BigInt(32);function MM(e,t=!1){return t?{h:Number(e&Ol),l:Number(e>>XE&Ol)}:{h:Number(e>>XE&Ol)|0,l:Number(e&Ol)|0}}function NM(e,t=!1){const n=e.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=MM(e[i],t);[r[i],s[i]]=[o,a]}return[r,s]}const QE=(e,t,n)=>e>>>n,$E=(e,t,n)=>e<<32-n|t>>>n,ji=(e,t,n)=>e>>>n|t<<32-n,Pi=(e,t,n)=>e<<32-n|t>>>n,hu=(e,t,n)=>e<<64-n|t>>>n-32,fu=(e,t,n)=>e>>>n-32|t<<64-n,s6=(e,t)=>t,o6=(e,t)=>e,a6=(e,t,n)=>e<<n|t>>>32-n,c6=(e,t,n)=>t<<n|e>>>32-n,u6=(e,t,n)=>t<<n-32|e>>>64-n,l6=(e,t,n)=>e<<n-32|t>>>64-n;function cr(e,t,n,r){const s=(t>>>0)+(r>>>0);return{h:e+n+(s/2**32|0)|0,l:s|0}}const j0=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),P0=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,d6=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),h6=(e,t,n,r,s)=>t+n+r+s+(e/2**32|0)|0,f6=(e,t,n,r,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(s>>>0),p6=(e,t,n,r,s,i)=>t+n+r+s+i+(e/2**32|0)|0,jo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Th(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function hi(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function dr(e,...t){if(!Th(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Mh(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");hi(e.outputLen),hi(e.blockLen)}function Xi(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function k0(e,t){dr(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Iu(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Qn(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Vf(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function wr(e,t){return e<<32-t|e>>>t}const IM=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function _M(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}const ei=IM?e=>e:e=>_M(e);function g6(e){for(let t=0;t<e.length;t++)e[t]=_M(e[t]);return e}const ki=IM?e=>e:g6,OM=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",y6=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Wo(e){if(dr(e),OM)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=y6[e[n]];return t}const $r={_0:48,_9:57,A:65,F:70,a:97,f:102};function ZE(e){if(e>=$r._0&&e<=$r._9)return e-$r._0;if(e>=$r.A&&e<=$r.F)return e-($r.A-10);if(e>=$r.a&&e<=$r.f)return e-($r.a-10)}function bd(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(OM)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=ZE(e.charCodeAt(i)),a=ZE(e.charCodeAt(i+1));if(o===void 0||a===void 0){const u=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+i)}r[s]=o*16+a}return r}function DM(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function lr(e){return typeof e=="string"&&(e=DM(e)),dr(e),e}function Fi(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];dr(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const i=e[r];n.set(i,s),s+=i.length}return n}class Nh{}function Vu(e){const t=r=>e().update(lr(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function m6(e){const t=(r,s)=>e(s).update(lr(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function go(e=32){if(jo&&typeof jo.getRandomValues=="function")return jo.getRandomValues(new Uint8Array(e));if(jo&&typeof jo.randomBytes=="function")return Uint8Array.from(jo.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const w6=BigInt(0),Zc=BigInt(1),b6=BigInt(2),v6=BigInt(7),E6=BigInt(256),A6=BigInt(113),xM=[],LM=[],CM=[];for(let e=0,t=Zc,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],xM.push(2*(5*r+n)),LM.push((e+1)*(e+2)/2%64);let s=w6;for(let i=0;i<7;i++)t=(t<<Zc^(t>>v6)*A6)%E6,t&b6&&(s^=Zc<<(Zc<<BigInt(i))-Zc);CM.push(s)}const jM=NM(CM,!0),S6=jM[0],T6=jM[1],JE=(e,t,n)=>n>32?u6(e,t,n):a6(e,t,n),e1=(e,t,n)=>n>32?l6(e,t,n):c6(e,t,n);function M6(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,u=(o+2)%10,c=n[u],l=n[u+1],d=JE(c,l,1)^n[a],f=e1(c,l,1)^n[a+1];for(let h=0;h<50;h+=10)e[o+h]^=d,e[o+h+1]^=f}let s=e[2],i=e[3];for(let o=0;o<24;o++){const a=LM[o],u=JE(s,i,a),c=e1(s,i,a),l=xM[o];s=e[l],i=e[l+1],e[l]=u,e[l+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=S6[r],e[1]^=T6[r]}Qn(n)}let N6=class PM extends Nh{constructor(t,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,hi(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Iu(this.state)}clone(){return this._cloneInto()}keccak(){ki(this.state32),M6(this.state32,this.rounds),ki(this.state32),this.posOut=0,this.pos=0}update(t){Xi(this),t=lr(t),dr(t);const{blockLen:n,state:r}=this,s=t.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=t[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:s}=this;t[r]^=n,n&128&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Xi(this,!1),dr(t),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=t.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);t.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return hi(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(k0(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Qn(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return t||(t=new PM(n,r,s,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}};const I6=(e,t,n)=>Vu(()=>new N6(t,e,n)),_6=I6(1,136,256/8);function O6(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),u=r?4:0,c=r?0:4;e.setUint32(t+u,o,r),e.setUint32(t+c,a,r)}function D6(e,t,n){return e&t^~e&n}function x6(e,t,n){return e&t^e&n^t&n}let kM=class extends Nh{constructor(e,t,n,r){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.buffer=new Uint8Array(e),this.view=Vf(this.buffer)}update(e){Xi(this),e=lr(e),dr(e);const{view:t,buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){const a=Vf(e);for(;r<=s-i;i+=r)this.process(a,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Xi(this),k0(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:s}=this;let{pos:i}=this;t[i++]=128,Qn(this.buffer.subarray(i)),this.padOffset>r-i&&(this.process(n,0),i=0);for(let l=i;l<r;l++)t[l]=0;O6(n,r-8,BigInt(this.length*8),s),this.process(n,0);const o=Vf(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)o.setUint32(4*l,c[l],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:s,destroyed:i,pos:o}=this;return e.destroyed=i,e.finished=s,e.length=r,e.pos=o,r%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}};const Mi=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Zt=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Jt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),L6=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ni=new Uint32Array(64);class C6 extends kM{constructor(t=32){super(64,t,8,!1),this.A=Mi[0]|0,this.B=Mi[1]|0,this.C=Mi[2]|0,this.D=Mi[3]|0,this.E=Mi[4]|0,this.F=Mi[5]|0,this.G=Mi[6]|0,this.H=Mi[7]|0}get(){const{A:t,B:n,C:r,D:s,E:i,F:o,G:a,H:u}=this;return[t,n,r,s,i,o,a,u]}set(t,n,r,s,i,o,a,u){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=u|0}process(t,n){for(let d=0;d<16;d++,n+=4)Ni[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const f=Ni[d-15],h=Ni[d-2],p=wr(f,7)^wr(f,18)^f>>>3,g=wr(h,17)^wr(h,19)^h>>>10;Ni[d]=g+Ni[d-7]+p+Ni[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:u,G:c,H:l}=this;for(let d=0;d<64;d++){const f=wr(a,6)^wr(a,11)^wr(a,25),h=l+f+D6(a,u,c)+L6[d]+Ni[d]|0,p=(wr(r,2)^wr(r,13)^wr(r,22))+x6(r,s,i)|0;l=c,c=u,u=a,a=o+h|0,o=i,i=s,s=r,r=h+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,u,c,l)}roundClean(){Qn(Ni)}destroy(){this.set(0,0,0,0,0,0,0,0),Qn(this.buffer)}}const RM=NM(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),j6=RM[0],P6=RM[1],Ii=new Uint32Array(80),_i=new Uint32Array(80);let R0=class extends kM{constructor(e=64){super(128,e,16,!1),this.Ah=Jt[0]|0,this.Al=Jt[1]|0,this.Bh=Jt[2]|0,this.Bl=Jt[3]|0,this.Ch=Jt[4]|0,this.Cl=Jt[5]|0,this.Dh=Jt[6]|0,this.Dl=Jt[7]|0,this.Eh=Jt[8]|0,this.El=Jt[9]|0,this.Fh=Jt[10]|0,this.Fl=Jt[11]|0,this.Gh=Jt[12]|0,this.Gl=Jt[13]|0,this.Hh=Jt[14]|0,this.Hl=Jt[15]|0}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:s,Cl:i,Dh:o,Dl:a,Eh:u,El:c,Fh:l,Fl:d,Gh:f,Gl:h,Hh:p,Hl:g}=this;return[e,t,n,r,s,i,o,a,u,c,l,d,f,h,p,g]}set(e,t,n,r,s,i,o,a,u,c,l,d,f,h,p,g){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=r|0,this.Ch=s|0,this.Cl=i|0,this.Dh=o|0,this.Dl=a|0,this.Eh=u|0,this.El=c|0,this.Fh=l|0,this.Fl=d|0,this.Gh=f|0,this.Gl=h|0,this.Hh=p|0,this.Hl=g|0}process(e,t){for(let A=0;A<16;A++,t+=4)Ii[A]=e.getUint32(t),_i[A]=e.getUint32(t+=4);for(let A=16;A<80;A++){const E=Ii[A-15]|0,_=_i[A-15]|0,S=ji(E,_,1)^ji(E,_,8)^QE(E,_,7),I=Pi(E,_,1)^Pi(E,_,8)^$E(E,_,7),D=Ii[A-2]|0,L=_i[A-2]|0,x=ji(D,L,19)^hu(D,L,61)^QE(D,L,6),j=Pi(D,L,19)^fu(D,L,61)^$E(D,L,6),V=d6(I,j,_i[A-7],_i[A-16]),Y=h6(V,S,x,Ii[A-7],Ii[A-16]);Ii[A]=Y|0,_i[A]=V|0}let{Ah:n,Al:r,Bh:s,Bl:i,Ch:o,Cl:a,Dh:u,Dl:c,Eh:l,El:d,Fh:f,Fl:h,Gh:p,Gl:g,Hh:y,Hl:b}=this;for(let A=0;A<80;A++){const E=ji(l,d,14)^ji(l,d,18)^hu(l,d,41),_=Pi(l,d,14)^Pi(l,d,18)^fu(l,d,41),S=l&f^~l&p,I=d&h^~d&g,D=f6(b,_,I,P6[A],_i[A]),L=p6(D,y,E,S,j6[A],Ii[A]),x=D|0,j=ji(n,r,28)^hu(n,r,34)^hu(n,r,39),V=Pi(n,r,28)^fu(n,r,34)^fu(n,r,39),Y=n&s^n&o^s&o,q=r&i^r&a^i&a;y=p|0,b=g|0,p=f|0,g=h|0,f=l|0,h=d|0,{h:l,l:d}=cr(u|0,c|0,L|0,x|0),u=o|0,c=a|0,o=s|0,a=i|0,s=n|0,i=r|0;const R=j0(x,V,q);n=P0(R,L,j,Y),r=R|0}({h:n,l:r}=cr(this.Ah|0,this.Al|0,n|0,r|0)),{h:s,l:i}=cr(this.Bh|0,this.Bl|0,s|0,i|0),{h:o,l:a}=cr(this.Ch|0,this.Cl|0,o|0,a|0),{h:u,l:c}=cr(this.Dh|0,this.Dl|0,u|0,c|0),{h:l,l:d}=cr(this.Eh|0,this.El|0,l|0,d|0),{h:f,l:h}=cr(this.Fh|0,this.Fl|0,f|0,h|0),{h:p,l:g}=cr(this.Gh|0,this.Gl|0,p|0,g|0),{h:y,l:b}=cr(this.Hh|0,this.Hl|0,y|0,b|0),this.set(n,r,s,i,o,a,u,c,l,d,f,h,p,g,y,b)}roundClean(){Qn(Ii,_i)}destroy(){Qn(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};class k6 extends R0{constructor(){super(48),this.Ah=Zt[0]|0,this.Al=Zt[1]|0,this.Bh=Zt[2]|0,this.Bl=Zt[3]|0,this.Ch=Zt[4]|0,this.Cl=Zt[5]|0,this.Dh=Zt[6]|0,this.Dl=Zt[7]|0,this.Eh=Zt[8]|0,this.El=Zt[9]|0,this.Fh=Zt[10]|0,this.Fl=Zt[11]|0,this.Gh=Zt[12]|0,this.Gl=Zt[13]|0,this.Hh=Zt[14]|0,this.Hl=Zt[15]|0}}const en=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class R6 extends R0{constructor(){super(32),this.Ah=en[0]|0,this.Al=en[1]|0,this.Bh=en[2]|0,this.Bl=en[3]|0,this.Ch=en[4]|0,this.Cl=en[5]|0,this.Dh=en[6]|0,this.Dl=en[7]|0,this.Eh=en[8]|0,this.El=en[9]|0,this.Fh=en[10]|0,this.Fl=en[11]|0,this.Gh=en[12]|0,this.Gl=en[13]|0,this.Hh=en[14]|0,this.Hl=en[15]|0}}const Ih=Vu(()=>new C6),B6=Vu(()=>new R0),U6=Vu(()=>new k6),z6=Vu(()=>new R6),F6=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Tt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Se=new Uint32Array(32);function Oi(e,t,n,r,s,i){const o=s[i],a=s[i+1];let u=Se[2*e],c=Se[2*e+1],l=Se[2*t],d=Se[2*t+1],f=Se[2*n],h=Se[2*n+1],p=Se[2*r],g=Se[2*r+1],y=j0(u,l,o);c=P0(y,c,d,a),u=y|0,{Dh:g,Dl:p}={Dh:g^c,Dl:p^u},{Dh:g,Dl:p}={Dh:s6(g,p),Dl:o6(g)},{h,l:f}=cr(h,f,g,p),{Bh:d,Bl:l}={Bh:d^h,Bl:l^f},{Bh:d,Bl:l}={Bh:ji(d,l,24),Bl:Pi(d,l,24)},Se[2*e]=u,Se[2*e+1]=c,Se[2*t]=l,Se[2*t+1]=d,Se[2*n]=f,Se[2*n+1]=h,Se[2*r]=p,Se[2*r+1]=g}function Di(e,t,n,r,s,i){const o=s[i],a=s[i+1];let u=Se[2*e],c=Se[2*e+1],l=Se[2*t],d=Se[2*t+1],f=Se[2*n],h=Se[2*n+1],p=Se[2*r],g=Se[2*r+1],y=j0(u,l,o);c=P0(y,c,d,a),u=y|0,{Dh:g,Dl:p}={Dh:g^c,Dl:p^u},{Dh:g,Dl:p}={Dh:ji(g,p,16),Dl:Pi(g,p,16)},{h,l:f}=cr(h,f,g,p),{Bh:d,Bl:l}={Bh:d^h,Bl:l^f},{Bh:d,Bl:l}={Bh:hu(d,l,63),Bl:fu(d,l,63)},Se[2*e]=u,Se[2*e+1]=c,Se[2*t]=l,Se[2*t+1]=d,Se[2*n]=f,Se[2*n+1]=h,Se[2*r]=p,Se[2*r+1]=g}function H6(e,t={},n,r,s){if(hi(n),e<0||e>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=t;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class V6 extends Nh{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,hi(t),hi(n),this.blockLen=t,this.outputLen=n,this.buffer=new Uint8Array(t),this.buffer32=Iu(this.buffer)}update(t){Xi(this),t=lr(t),dr(t);const{blockLen:n,buffer:r,buffer32:s}=this,i=t.length,o=t.byteOffset,a=t.buffer;for(let u=0;u<i;){this.pos===n&&(ki(s),this.compress(s,0,!1),ki(s),this.pos=0);const c=Math.min(n-this.pos,i-u),l=o+u;if(c===n&&!(l%4)&&u+c<i){const d=new Uint32Array(a,l,Math.floor((i-u)/4));ki(d);for(let f=0;u+n<i;f+=s.length,u+=n)this.length+=n,this.compress(d,f,!1);ki(d);continue}r.set(t.subarray(u,u+c),this.pos),this.pos+=c,this.length+=c,u+=c}return this}digestInto(t){Xi(this),k0(t,this);const{pos:n,buffer32:r}=this;this.finished=!0,Qn(this.buffer.subarray(n)),ki(r),this.compress(r,0,!0),ki(r);const s=Iu(t);this.get().forEach((i,o)=>s[o]=ei(i))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return t||(t=new this.constructor({dkLen:o})),t.set(...this.get()),t.buffer.set(n),t.destroyed=i,t.finished=s,t.length=r,t.pos=a,t.outputLen=o,t}clone(){return this._cloneInto()}}class q6 extends V6{constructor(t={}){const n=t.dkLen===void 0?64:t.dkLen;super(128,n),this.v0l=Tt[0]|0,this.v0h=Tt[1]|0,this.v1l=Tt[2]|0,this.v1h=Tt[3]|0,this.v2l=Tt[4]|0,this.v2h=Tt[5]|0,this.v3l=Tt[6]|0,this.v3h=Tt[7]|0,this.v4l=Tt[8]|0,this.v4h=Tt[9]|0,this.v5l=Tt[10]|0,this.v5h=Tt[11]|0,this.v6l=Tt[12]|0,this.v6h=Tt[13]|0,this.v7l=Tt[14]|0,this.v7h=Tt[15]|0,H6(n,t,64,16,16);let{key:r,personalization:s,salt:i}=t,o=0;if(r!==void 0&&(r=lr(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=lr(i);const a=Iu(i);this.v4l^=ei(a[0]),this.v4h^=ei(a[1]),this.v5l^=ei(a[2]),this.v5h^=ei(a[3])}if(s!==void 0){s=lr(s);const a=Iu(s);this.v6l^=ei(a[0]),this.v6h^=ei(a[1]),this.v7l^=ei(a[2]),this.v7h^=ei(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:t,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:u,v4l:c,v4h:l,v5l:d,v5h:f,v6l:h,v6h:p,v7l:g,v7h:y}=this;return[t,n,r,s,i,o,a,u,c,l,d,f,h,p,g,y]}set(t,n,r,s,i,o,a,u,c,l,d,f,h,p,g,y){this.v0l=t|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=u|0,this.v4l=c|0,this.v4h=l|0,this.v5l=d|0,this.v5h=f|0,this.v6l=h|0,this.v6h=p|0,this.v7l=g|0,this.v7h=y|0}compress(t,n,r){this.get().forEach((u,c)=>Se[c]=u),Se.set(Tt,16);let{h:s,l:i}=MM(BigInt(this.length));Se[24]=Tt[8]^i,Se[25]=Tt[9]^s,r&&(Se[28]=~Se[28],Se[29]=~Se[29]);let o=0;const a=F6;for(let u=0;u<12;u++)Oi(0,4,8,12,t,n+2*a[o++]),Di(0,4,8,12,t,n+2*a[o++]),Oi(1,5,9,13,t,n+2*a[o++]),Di(1,5,9,13,t,n+2*a[o++]),Oi(2,6,10,14,t,n+2*a[o++]),Di(2,6,10,14,t,n+2*a[o++]),Oi(3,7,11,15,t,n+2*a[o++]),Di(3,7,11,15,t,n+2*a[o++]),Oi(0,5,10,15,t,n+2*a[o++]),Di(0,5,10,15,t,n+2*a[o++]),Oi(1,6,11,12,t,n+2*a[o++]),Di(1,6,11,12,t,n+2*a[o++]),Oi(2,7,8,13,t,n+2*a[o++]),Di(2,7,8,13,t,n+2*a[o++]),Oi(3,4,9,14,t,n+2*a[o++]),Di(3,4,9,14,t,n+2*a[o++]);this.v0l^=Se[0]^Se[16],this.v0h^=Se[1]^Se[17],this.v1l^=Se[2]^Se[18],this.v1h^=Se[3]^Se[19],this.v2l^=Se[4]^Se[20],this.v2h^=Se[5]^Se[21],this.v3l^=Se[6]^Se[22],this.v3h^=Se[7]^Se[23],this.v4l^=Se[8]^Se[24],this.v4h^=Se[9]^Se[25],this.v5l^=Se[10]^Se[26],this.v5h^=Se[11]^Se[27],this.v6l^=Se[12]^Se[28],this.v6h^=Se[13]^Se[29],this.v7l^=Se[14]^Se[30],this.v7h^=Se[15]^Se[31],Qn(Se)}destroy(){this.destroyed=!0,Qn(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const G6=m6(e=>new q6(e)),K6="https://rpc.walletconnect.org/v1";function BM(e){const t=`Ethereum Signed Message:
${e.length}`,n=new TextEncoder().encode(t+e);return"0x"+De.Buffer.from(_6(n)).toString("hex")}async function Y6(e,t,n,r,s,i){switch(n.t){case"eip191":return await W6(e,t,n.s);case"eip1271":return await X6(e,t,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}function W6(e,t,n){const r=TR(n);return RR({payload:BM(t),signature:r}).toLowerCase()===e.toLowerCase()}async function X6(e,t,n,r,s,i){const o=$l(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",u="0000000000000000000000000000000000000000000000000000000000000040",c=n.substring(2),l=(c.length/2).toString(16).padStart(64,"0"),d=(t.startsWith("0x")?t:BM(t)).substring(2),f=a+d+u+l+c,h=await fetch(`${i||K6}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:Q6(),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:f},"latest"]})}),{result:p}=await h.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function Q6(){return Date.now()+Math.floor(Math.random()*1e3)}function $6(e){const t=atob(e),n=new Uint8Array(t.length);for(let o=0;o<t.length;o++)n[o]=t.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=De.Buffer.from(e,"base64").slice(1,65);return zu.encode(i)}function Z6(e){const t=new Uint8Array(De.Buffer.from(e,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+t.length);r.set(n),r.set(t,n.length);const s=G6(r,{dkLen:32});return zu.encode(s)}function t1(e){const t=new Uint8Array(Ih(J6(e)));return zu.encode(t)}function J6(e){if(e instanceof Uint8Array)return e;if(Array.isArray(e))return new Uint8Array(e);if(typeof e=="object"&&e!=null&&e.data)return new Uint8Array(Object.values(e.data));if(typeof e=="object"&&e)return new Uint8Array(Object.values(e));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function n1(e){const t=De.Buffer.from(e,"base64"),n=AB(t).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=fB(n),s=De.Buffer.from("TX"),i=De.Buffer.concat([s,De.Buffer.from(r)]),o=z6(i);return kR.encode(o).replace(/=+$/,"")}function qf(e){const t=[];let n=BigInt(e);for(;n>=BigInt(128);)t.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return t.push(Number(n)),De.Buffer.from(t)}function e8(e){const t=De.Buffer.from(e.signed.bodyBytes,"base64"),n=De.Buffer.from(e.signed.authInfoBytes,"base64"),r=De.Buffer.from(e.signature.signature,"base64"),s=[];s.push(De.Buffer.from([10])),s.push(qf(t.length)),s.push(t),s.push(De.Buffer.from([18])),s.push(qf(n.length)),s.push(n),s.push(De.Buffer.from([26])),s.push(qf(r.length)),s.push(r);const i=De.Buffer.concat(s),o=Ih(i);return De.Buffer.from(o).toString("hex").toUpperCase()}function t8(e){var t,n;const r=[];try{if(typeof e=="string")return r.push(e),r;if(typeof e!="object")return r;e!=null&&e.id&&r.push(e.id);const s=(n=(t=e?.capabilities)==null?void 0:t.caip345)==null?void 0:n.transactionHashes;s&&r.push(...s)}catch(s){console.warn("getWalletSendCallsHashes failed: ",s)}return r}var n8=Object.defineProperty,r8=Object.defineProperties,i8=Object.getOwnPropertyDescriptors,r1=Object.getOwnPropertySymbols,s8=Object.prototype.hasOwnProperty,o8=Object.prototype.propertyIsEnumerable,i1=(e,t,n)=>t in e?n8(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,a8=(e,t)=>{for(var n in t||(t={}))s8.call(t,n)&&i1(e,n,t[n]);if(r1)for(var n of r1(t))o8.call(t,n)&&i1(e,n,t[n]);return e},c8=(e,t)=>r8(e,i8(t));const u8="did:pkh:",B0=e=>e?.split(":"),l8=e=>{const t=e&&B0(e);if(t)return e.includes(u8)?t[3]:t[1]},Yp=e=>{const t=e&&B0(e);if(t)return t[2]+":"+t[3]},vd=e=>{const t=e&&B0(e);if(t)return t.pop()};async function s1(e){const{cacao:t,projectId:n}=e,{s:r,p:s}=t,i=UM(s,s.iss),o=vd(s.iss);return await Y6(o,i,r,Yp(s.iss),n)}const UM=(e,t)=>{const n=`${e.domain} wants you to sign in with your Ethereum account:`,r=vd(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=e.statement||void 0;const i=`URI: ${e.aud||e.uri}`,o=`Version: ${e.version}`,a=`Chain ID: ${l8(t)}`,u=`Nonce: ${e.nonce}`,c=`Issued At: ${e.iat}`,l=e.exp?`Expiration Time: ${e.exp}`:void 0,d=e.nbf?`Not Before: ${e.nbf}`:void 0,f=e.requestId?`Request ID: ${e.requestId}`:void 0,h=e.resources?`Resources:${e.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=Zl(e.resources);if(p){const g=_u(p);s=b8(s,g)}return[n,r,"",s,"",i,o,a,u,c,l,d,f,h].filter(g=>g!=null).join(`
`)};function d8(e){return De.Buffer.from(JSON.stringify(e)).toString("base64")}function h8(e){return JSON.parse(De.Buffer.from(e,"base64").toString("utf-8"))}function ro(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(!(t!=null&&t.length))throw new Error("No resources found in `att` property");t.forEach(n=>{const r=e.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function f8(e,t,n,r={}){return n?.sort((s,i)=>s.localeCompare(i)),{att:{[e]:p8(t,n,r)}}}function p8(e,t,n={}){t=t?.sort((s,i)=>s.localeCompare(i));const r=t.map(s=>({[`${e}/${s}`]:[n]}));return Object.assign({},...r)}function zM(e){return ro(e),`urn:recap:${d8(e).replace(/=/g,"")}`}function _u(e){const t=h8(e.replace("urn:recap:",""));return ro(t),t}function g8(e,t,n){const r=f8(e,t,n);return zM(r)}function y8(e){return e&&e.includes("urn:recap:")}function m8(e,t){const n=_u(e),r=_u(t),s=w8(n,r);return zM(s)}function w8(e,t){ro(e),ro(t);const n=Object.keys(e.att).concat(Object.keys(t.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=e.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=t.att)==null?void 0:o[s])||{})).sort((a,u)=>a.localeCompare(u)).forEach(a=>{var u,c;r.att[s]=c8(a8({},r.att[s]),{[a]:((u=e.att[s])==null?void 0:u[a])||((c=t.att[s])==null?void 0:c[a])})})}),r}function b8(e="",t){ro(t);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(n))return e;const r=[];let s=0;Object.keys(t.att).forEach(a=>{const u=Object.keys(t.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));u.sort((d,f)=>d.action.localeCompare(f.action));const c={};u.forEach(d=>{c[d.ability]||(c[d.ability]=[]),c[d.ability].push(d.action)});const l=Object.keys(c).map(d=>(s++,`(${s}) '${d}': '${c[d].join("', '")}' for '${a}'.`));r.push(l.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${e?e+" ":""}${o}`}function o1(e){var t;const n=_u(e);ro(n);const r=(t=n.att)==null?void 0:t.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function a1(e){const t=_u(e);ro(t);const n=[];return Object.values(t.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s?.[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function Zl(e){if(!e)return;const t=e?.[e.length-1];return y8(t)?t:void 0}function FM(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Wp(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function Gf(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function vn(e,...t){if(!FM(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function c1(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function v8(e,t){vn(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Yi(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function ta(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function E8(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}const A8=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function S8(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Xp(e){if(typeof e=="string")e=S8(e);else if(FM(e))e=Qp(e);else throw new Error("Uint8Array expected, got "+typeof e);return e}function T8(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function M8(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}const N8=(e,t)=>{function n(r,...s){if(vn(r),!A8)throw new Error("Non little-endian hardware is not yet supported");if(e.nonceLength!==void 0){const c=s[0];if(!c)throw new Error("nonce / iv required");e.varSizeNonce?vn(c):vn(c,e.nonceLength)}const i=e.tagLength;i&&s[1]!==void 0&&vn(s[1]);const o=t(r,...s),a=(c,l)=>{if(l!==void 0){if(c!==2)throw new Error("cipher output not supported");vn(l)}};let u=!1;return{encrypt(c,l){if(u)throw new Error("cannot encrypt() twice with same key + nonce");return u=!0,vn(c),a(o.encrypt.length,l),o.encrypt(c,l)},decrypt(c,l){if(vn(c),i&&c.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,l),o.decrypt(c,l)}}}return Object.assign(n,e),n};function u1(e,t,n=!0){if(t===void 0)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(n&&!_8(t))throw new Error("invalid output, must be aligned");return t}function l1(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);e.setUint32(t+4,o,r),e.setUint32(t+0,a,r)}function I8(e,t,n){Wp(n);const r=new Uint8Array(16),s=E8(r);return l1(s,0,BigInt(t),n),l1(s,8,BigInt(e),n),r}function _8(e){return e.byteOffset%4===0}function Qp(e){return Uint8Array.from(e)}const HM=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),O8=HM("expand 16-byte k"),D8=HM("expand 32-byte k"),x8=Yi(O8),L8=Yi(D8);function qe(e,t){return e<<t|e>>>32-t}function $p(e){return e.byteOffset%4===0}const Dl=64,C8=16,VM=2**32-1,d1=new Uint32Array;function j8(e,t,n,r,s,i,o,a){const u=s.length,c=new Uint8Array(Dl),l=Yi(c),d=$p(s)&&$p(i),f=d?Yi(s):d1,h=d?Yi(i):d1;for(let p=0;p<u;o++){if(e(t,n,r,l,o,a),o>=VM)throw new Error("arx: counter overflow");const g=Math.min(Dl,u-p);if(d&&g===Dl){const y=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let b=0,A;b<C8;b++)A=y+b,h[A]=f[A]^l[b];p+=Dl;continue}for(let y=0,b;y<g;y++)b=p+y,i[b]=s[b]^c[y];p+=g}}function P8(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=T8({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return Gf(s),Gf(o),Wp(i),Wp(n),(a,u,c,l,d=0)=>{vn(a),vn(u),vn(c);const f=c.length;if(l===void 0&&(l=new Uint8Array(f)),vn(l),Gf(d),d<0||d>=VM)throw new Error("arx: counter overflow");if(l.length<f)throw new Error(`arx: output (${l.length}) is shorter than data (${f})`);const h=[];let p=a.length,g,y;if(p===32)h.push(g=Qp(a)),y=L8;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),y=x8,h.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);$p(u)||h.push(u=Qp(u));const b=Yi(g);if(r){if(u.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(y,b,Yi(u.subarray(0,16)),b),u=u.subarray(16)}const A=16-s;if(A!==u.length)throw new Error(`arx: nonce must be ${A} or 16 bytes`);if(A!==12){const _=new Uint8Array(12);_.set(u,i?0:12-u.length),u=_,h.push(u)}const E=Yi(u);return j8(e,y,b,E,c,l,d,o),ta(...h),l}}const Ht=(e,t)=>e[t++]&255|(e[t++]&255)<<8;class k8{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=Xp(t),vn(t,32);const n=Ht(t,0),r=Ht(t,2),s=Ht(t,4),i=Ht(t,6),o=Ht(t,8),a=Ht(t,10),u=Ht(t,12),c=Ht(t,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|u<<5)&8065,this.r[8]=(u>>>8|c<<8)&8191,this.r[9]=c>>>5&127;for(let l=0;l<8;l++)this.pad[l]=Ht(t,16+2*l)}process(t,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],u=o[1],c=o[2],l=o[3],d=o[4],f=o[5],h=o[6],p=o[7],g=o[8],y=o[9],b=Ht(t,n+0),A=Ht(t,n+2),E=Ht(t,n+4),_=Ht(t,n+6),S=Ht(t,n+8),I=Ht(t,n+10),D=Ht(t,n+12),L=Ht(t,n+14);let x=i[0]+(b&8191),j=i[1]+((b>>>13|A<<3)&8191),V=i[2]+((A>>>10|E<<6)&8191),Y=i[3]+((E>>>7|_<<9)&8191),q=i[4]+((_>>>4|S<<12)&8191),R=i[5]+(S>>>1&8191),v=i[6]+((S>>>14|I<<2)&8191),T=i[7]+((I>>>11|D<<5)&8191),m=i[8]+((D>>>8|L<<8)&8191),w=i[9]+(L>>>5|s),N=0,C=N+x*a+j*(5*y)+V*(5*g)+Y*(5*p)+q*(5*h);N=C>>>13,C&=8191,C+=R*(5*f)+v*(5*d)+T*(5*l)+m*(5*c)+w*(5*u),N+=C>>>13,C&=8191;let O=N+x*u+j*a+V*(5*y)+Y*(5*g)+q*(5*p);N=O>>>13,O&=8191,O+=R*(5*h)+v*(5*f)+T*(5*d)+m*(5*l)+w*(5*c),N+=O>>>13,O&=8191;let B=N+x*c+j*u+V*a+Y*(5*y)+q*(5*g);N=B>>>13,B&=8191,B+=R*(5*p)+v*(5*h)+T*(5*f)+m*(5*d)+w*(5*l),N+=B>>>13,B&=8191;let W=N+x*l+j*c+V*u+Y*a+q*(5*y);N=W>>>13,W&=8191,W+=R*(5*g)+v*(5*p)+T*(5*h)+m*(5*f)+w*(5*d),N+=W>>>13,W&=8191;let P=N+x*d+j*l+V*c+Y*u+q*a;N=P>>>13,P&=8191,P+=R*(5*y)+v*(5*g)+T*(5*p)+m*(5*h)+w*(5*f),N+=P>>>13,P&=8191;let X=N+x*f+j*d+V*l+Y*c+q*u;N=X>>>13,X&=8191,X+=R*a+v*(5*y)+T*(5*g)+m*(5*p)+w*(5*h),N+=X>>>13,X&=8191;let ee=N+x*h+j*f+V*d+Y*l+q*c;N=ee>>>13,ee&=8191,ee+=R*u+v*a+T*(5*y)+m*(5*g)+w*(5*p),N+=ee>>>13,ee&=8191;let se=N+x*p+j*h+V*f+Y*d+q*l;N=se>>>13,se&=8191,se+=R*c+v*u+T*a+m*(5*y)+w*(5*g),N+=se>>>13,se&=8191;let Z=N+x*g+j*p+V*h+Y*f+q*d;N=Z>>>13,Z&=8191,Z+=R*l+v*c+T*u+m*a+w*(5*y),N+=Z>>>13,Z&=8191;let J=N+x*y+j*g+V*p+Y*h+q*f;N=J>>>13,J&=8191,J+=R*d+v*l+T*c+m*u+w*a,N+=J>>>13,J&=8191,N=(N<<2)+N|0,N=N+C|0,C=N&8191,N=N>>>13,O+=N,i[0]=C,i[1]=O,i[2]=B,i[3]=W,i[4]=P,i[5]=X,i[6]=ee,i[7]=se,i[8]=Z,i[9]=J}finalize(){const{h:t,pad:n}=this,r=new Uint16Array(10);let s=t[1]>>>13;t[1]&=8191;for(let a=2;a<10;a++)t[a]+=s,s=t[a]>>>13,t[a]&=8191;t[0]+=s*5,s=t[0]>>>13,t[0]&=8191,t[1]+=s,s=t[1]>>>13,t[1]&=8191,t[2]+=s,r[0]=t[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=t[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)t[a]=t[a]&i|r[a];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let o=t[0]+n[0];t[0]=o&65535;for(let a=1;a<8;a++)o=(t[a]+n[a]|0)+(o>>>16)|0,t[a]=o&65535;ta(r)}update(t){c1(this),t=Xp(t),vn(t);const{buffer:n,blockLen:r}=this,s=t.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(t,i);continue}n.set(t.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){ta(this.h,this.r,this.buffer,this.pad)}digestInto(t){c1(this),v8(t,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)t[i++]=r[o]>>>0,t[i++]=r[o]>>>8;return t}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}}function R8(e){const t=(r,s)=>e(s).update(Xp(r)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}const B8=R8(e=>new k8(e));function U8(e,t,n,r,s,i=20){let o=e[0],a=e[1],u=e[2],c=e[3],l=t[0],d=t[1],f=t[2],h=t[3],p=t[4],g=t[5],y=t[6],b=t[7],A=s,E=n[0],_=n[1],S=n[2],I=o,D=a,L=u,x=c,j=l,V=d,Y=f,q=h,R=p,v=g,T=y,m=b,w=A,N=E,C=_,O=S;for(let W=0;W<i;W+=2)I=I+j|0,w=qe(w^I,16),R=R+w|0,j=qe(j^R,12),I=I+j|0,w=qe(w^I,8),R=R+w|0,j=qe(j^R,7),D=D+V|0,N=qe(N^D,16),v=v+N|0,V=qe(V^v,12),D=D+V|0,N=qe(N^D,8),v=v+N|0,V=qe(V^v,7),L=L+Y|0,C=qe(C^L,16),T=T+C|0,Y=qe(Y^T,12),L=L+Y|0,C=qe(C^L,8),T=T+C|0,Y=qe(Y^T,7),x=x+q|0,O=qe(O^x,16),m=m+O|0,q=qe(q^m,12),x=x+q|0,O=qe(O^x,8),m=m+O|0,q=qe(q^m,7),I=I+V|0,O=qe(O^I,16),T=T+O|0,V=qe(V^T,12),I=I+V|0,O=qe(O^I,8),T=T+O|0,V=qe(V^T,7),D=D+Y|0,w=qe(w^D,16),m=m+w|0,Y=qe(Y^m,12),D=D+Y|0,w=qe(w^D,8),m=m+w|0,Y=qe(Y^m,7),L=L+q|0,N=qe(N^L,16),R=R+N|0,q=qe(q^R,12),L=L+q|0,N=qe(N^L,8),R=R+N|0,q=qe(q^R,7),x=x+j|0,C=qe(C^x,16),v=v+C|0,j=qe(j^v,12),x=x+j|0,C=qe(C^x,8),v=v+C|0,j=qe(j^v,7);let B=0;r[B++]=o+I|0,r[B++]=a+D|0,r[B++]=u+L|0,r[B++]=c+x|0,r[B++]=l+j|0,r[B++]=d+V|0,r[B++]=f+Y|0,r[B++]=h+q|0,r[B++]=p+R|0,r[B++]=g+v|0,r[B++]=y+T|0,r[B++]=b+m|0,r[B++]=A+w|0,r[B++]=E+N|0,r[B++]=_+C|0,r[B++]=S+O|0}const z8=P8(U8,{counterRight:!1,counterLength:4,allowShortKeys:!1}),F8=new Uint8Array(16),h1=(e,t)=>{e.update(t);const n=t.length%16;n&&e.update(F8.subarray(n))},H8=new Uint8Array(32);function f1(e,t,n,r,s){const i=e(t,n,H8),o=B8.create(i);s&&h1(o,s),h1(o,r);const a=I8(r.length,s?s.length:0,!0);o.update(a);const u=o.digest();return ta(i,a),u}const V8=e=>(t,n,r)=>({encrypt(s,i){const o=s.length;i=u1(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);e(t,n,a,a,1);const u=f1(e,t,n,a,r);return i.set(u,o),ta(u),i},decrypt(s,i){i=u1(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),u=f1(e,t,n,o,r);if(!M8(a,u))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),e(t,n,i,i,1),ta(u),i}}),qM=N8({blockSize:64,nonceLength:12,tagLength:16},V8(z8));let GM=class extends Nh{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Mh(e);const n=lr(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,s=new Uint8Array(r);s.set(n.length>r?e.create().update(n).digest():n);for(let i=0;i<s.length;i++)s[i]^=54;this.iHash.update(s),this.oHash=e.create();for(let i=0;i<s.length;i++)s[i]^=106;this.oHash.update(s),Qn(s)}update(e){return Xi(this),this.iHash.update(e),this}digestInto(e){Xi(this),dr(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:s,blockLen:i,outputLen:o}=this;return e=e,e.finished=r,e.destroyed=s,e.blockLen=i,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const _h=(e,t,n)=>new GM(e,t).update(n).digest();_h.create=(e,t)=>new GM(e,t);function q8(e,t,n){return Mh(e),n===void 0&&(n=new Uint8Array(e.outputLen)),_h(e,lr(n),lr(t))}const Kf=Uint8Array.from([0]),p1=Uint8Array.of();function G8(e,t,n,r=32){Mh(e),hi(r);const s=e.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=p1);const o=new Uint8Array(i*s),a=_h.create(e,t),u=a._cloneInto(),c=new Uint8Array(a.outputLen);for(let l=0;l<i;l++)Kf[0]=l+1,u.update(l===0?p1:c).update(n).update(Kf).digestInto(c),o.set(c,s*l),a._cloneInto(u);return a.destroy(),u.destroy(),Qn(c,Kf),o.slice(0,r)}const K8=(e,t,n,r,s)=>G8(e,q8(e,t,n),r,s),Oh=Ih,U0=BigInt(0),Zp=BigInt(1);function Ed(e,t=""){if(typeof e!="boolean"){const n=t&&`"${t}"`;throw new Error(n+"expected boolean, got type="+typeof e)}return e}function Xs(e,t,n=""){const r=Th(e),s=e?.length,i=t!==void 0;if(!r||i&&s!==t){const o=n&&`"${n}" `,a=i?` of length ${t}`:"",u=r?`length=${s}`:`type=${typeof e}`;throw new Error(o+"expected Uint8Array"+a+", got "+u)}return e}function xl(e){const t=e.toString(16);return t.length&1?"0"+t:t}function KM(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?U0:BigInt("0x"+e)}function Dh(e){return KM(Wo(e))}function Ad(e){return dr(e),KM(Wo(Uint8Array.from(e).reverse()))}function z0(e,t){return bd(e.toString(16).padStart(t*2,"0"))}function F0(e,t){return z0(e,t).reverse()}function on(e,t,n){let r;if(typeof t=="string")try{r=bd(t)}catch(i){throw new Error(e+" must be hex string or Uint8Array, cause: "+i)}else if(Th(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(e+" of length "+n+" expected, got "+s);return r}const Yf=e=>typeof e=="bigint"&&U0<=e;function Y8(e,t,n){return Yf(e)&&Yf(t)&&Yf(n)&&t<=e&&e<n}function Jp(e,t,n,r){if(!Y8(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function YM(e){let t;for(t=0;e>U0;e>>=Zp,t+=1);return t}const qu=e=>(Zp<<BigInt(e))-Zp;function W8(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(e),o=r(e),a=0;const u=()=>{i.fill(1),o.fill(0),a=0},c=(...f)=>n(o,i,...f),l=(f=r(0))=>{o=c(s(0),f),i=c(),f.length!==0&&(o=c(s(1),f),i=c())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const h=[];for(;f<t;){i=c();const p=i.slice();h.push(p),f+=i.length}return Fi(...h)};return(f,h)=>{u(),l(f);let p;for(;!(p=h(d()));)l();return u(),p}}function xh(e,t,n={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function r(s,i,o){const a=e[s];if(o&&a===void 0)return;const u=typeof a;if(u!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${u}`)}Object.entries(t).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function g1(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(s!==void 0)return s;const i=e(n,...r);return t.set(n,i),i}}const Sn=BigInt(0),dn=BigInt(1),Qs=BigInt(2),WM=BigInt(3),XM=BigInt(4),QM=BigInt(5),X8=BigInt(7),$M=BigInt(8),Q8=BigInt(9),ZM=BigInt(16);function Pn(e,t){const n=e%t;return n>=Sn?n:t+n}function ar(e,t,n){let r=e;for(;t-- >Sn;)r*=r,r%=n;return r}function y1(e,t){if(e===Sn)throw new Error("invert: expected non-zero number");if(t<=Sn)throw new Error("invert: expected positive modulus, got "+t);let n=Pn(e,t),r=t,s=Sn,i=dn;for(;n!==Sn;){const o=r/n,a=r%n,u=s-i*o;r=n,n=a,s=i,i=u}if(r!==dn)throw new Error("invert: does not exist");return Pn(s,t)}function H0(e,t,n){if(!e.eql(e.sqr(t),n))throw new Error("Cannot find square root")}function JM(e,t){const n=(e.ORDER+dn)/XM,r=e.pow(t,n);return H0(e,r,t),r}function $8(e,t){const n=(e.ORDER-QM)/$M,r=e.mul(t,Qs),s=e.pow(r,n),i=e.mul(t,s),o=e.mul(e.mul(i,Qs),s),a=e.mul(i,e.sub(o,e.ONE));return H0(e,a,t),a}function Z8(e){const t=es(e),n=eN(e),r=n(t,t.neg(t.ONE)),s=n(t,r),i=n(t,t.neg(r)),o=(e+X8)/ZM;return(a,u)=>{let c=a.pow(u,o),l=a.mul(c,r);const d=a.mul(c,s),f=a.mul(c,i),h=a.eql(a.sqr(l),u),p=a.eql(a.sqr(d),u);c=a.cmov(c,l,h),l=a.cmov(f,d,p);const g=a.eql(a.sqr(l),u),y=a.cmov(c,l,g);return H0(a,y,u),y}}function eN(e){if(e<WM)throw new Error("sqrt is not defined for small field");let t=e-dn,n=0;for(;t%Qs===Sn;)t/=Qs,n++;let r=Qs;const s=es(e);for(;m1(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return JM;let i=s.pow(r,t);const o=(t+dn)/Qs;return function(a,u){if(a.is0(u))return u;if(m1(a,u)!==1)throw new Error("Cannot find square root");let c=n,l=a.mul(a.ONE,i),d=a.pow(u,t),f=a.pow(u,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let h=1,p=a.sqr(d);for(;!a.eql(p,a.ONE);)if(h++,p=a.sqr(p),h===c)throw new Error("Cannot find square root");const g=dn<<BigInt(c-h-1),y=a.pow(l,g);c=h,l=a.sqr(y),d=a.mul(d,l),f=a.mul(f,y)}return f}}function J8(e){return e%XM===WM?JM:e%$M===QM?$8:e%ZM===Q8?Z8(e):eN(e)}const ez=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function tz(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=ez.reduce((r,s)=>(r[s]="function",r),t);return xh(e,n),e}function nz(e,t,n){if(n<Sn)throw new Error("invalid exponent, negatives unsupported");if(n===Sn)return e.ONE;if(n===dn)return t;let r=e.ONE,s=t;for(;n>Sn;)n&dn&&(r=e.mul(r,s)),s=e.sqr(s),n>>=dn;return r}function tN(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),s=t.reduce((o,a,u)=>e.is0(a)?o:(r[u]=o,e.mul(o,a)),e.ONE),i=e.inv(s);return t.reduceRight((o,a,u)=>e.is0(a)?o:(r[u]=e.mul(o,r[u]),e.mul(o,a)),i),r}function m1(e,t){const n=(e.ORDER-dn)/Qs,r=e.pow(t,n),s=e.eql(r,e.ONE),i=e.eql(r,e.ZERO),o=e.eql(r,e.neg(e.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function nN(e,t){t!==void 0&&hi(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function es(e,t,n=!1,r={}){if(e<=Sn)throw new Error("invalid field: expected ORDER > 0, got "+e);let s,i,o=!1,a;if(typeof t=="object"&&t!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const f=t;f.BITS&&(s=f.BITS),f.sqrt&&(i=f.sqrt),typeof f.isLE=="boolean"&&(n=f.isLE),typeof f.modFromBytes=="boolean"&&(o=f.modFromBytes),a=f.allowedLengths}else typeof t=="number"&&(s=t),r.sqrt&&(i=r.sqrt);const{nBitLength:u,nByteLength:c}=nN(e,s);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const d=Object.freeze({ORDER:e,isLE:n,BITS:u,BYTES:c,MASK:qu(u),ZERO:Sn,ONE:dn,allowedLengths:a,create:f=>Pn(f,e),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return Sn<=f&&f<e},is0:f=>f===Sn,isValidNot0:f=>!d.is0(f)&&d.isValid(f),isOdd:f=>(f&dn)===dn,neg:f=>Pn(-f,e),eql:(f,h)=>f===h,sqr:f=>Pn(f*f,e),add:(f,h)=>Pn(f+h,e),sub:(f,h)=>Pn(f-h,e),mul:(f,h)=>Pn(f*h,e),pow:(f,h)=>nz(d,f,h),div:(f,h)=>Pn(f*y1(h,e),e),sqrN:f=>f*f,addN:(f,h)=>f+h,subN:(f,h)=>f-h,mulN:(f,h)=>f*h,inv:f=>y1(f,e),sqrt:i||(f=>(l||(l=J8(e)),l(d,f))),toBytes:f=>n?F0(f,c):z0(f,c),fromBytes:(f,h=!0)=>{if(a){if(!a.includes(f.length)||f.length>c)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+f.length);const g=new Uint8Array(c);g.set(f,n?0:g.length-f.length),f=g}if(f.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+f.length);let p=n?Ad(f):Dh(f);if(o&&(p=Pn(p,e)),!h&&!d.isValid(p))throw new Error("invalid field element: outside of range 0..ORDER");return p},invertBatch:f=>tN(d,f),cmov:(f,h,p)=>p?h:f});return Object.freeze(d)}function rN(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function iN(e){const t=rN(e);return t+Math.ceil(t/2)}function rz(e,t,n=!1){const r=e.length,s=rN(t),i=iN(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?Ad(e):Dh(e),a=Pn(o,t-dn)+dn;return n?F0(a,s):z0(a,s)}const na=BigInt(0),$s=BigInt(1);function Sd(e,t){const n=t.negate();return e?n:t}function Wf(e,t){const n=tN(e.Fp,t.map(r=>r.Z));return t.map((r,s)=>e.fromAffine(r.toAffine(n[s])))}function sN(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Xf(e,t){sN(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),s=2**e,i=qu(e),o=BigInt(e);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function w1(e,t,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(e&s),u=e>>o;a>r&&(a-=i,u+=$s);const c=t*r,l=c+Math.abs(a)-1,d=a===0,f=a<0,h=t%2!==0;return{nextN:u,offset:l,isZero:d,isNeg:f,isNegF:h,offsetF:c}}function iz(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function sz(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Qf=new WeakMap,oN=new WeakMap;function $f(e){return oN.get(e)||1}function b1(e){if(e!==na)throw new Error("invalid wNAF")}class oz{constructor(t,n){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=n}_unsafeLadder(t,n,r=this.ZERO){let s=t;for(;n>na;)n&$s&&(r=r.add(s)),s=s.double(),n>>=$s;return r}precomputeWindow(t,n){const{windows:r,windowSize:s}=Xf(n,this.bits),i=[];let o=t,a=o;for(let u=0;u<r;u++){a=o,i.push(a);for(let c=1;c<s;c++)a=a.add(o),i.push(a);o=a.double()}return i}wNAF(t,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=Xf(t,this.bits);for(let a=0;a<o.windows;a++){const{nextN:u,offset:c,isZero:l,isNeg:d,isNegF:f,offsetF:h}=w1(r,a,o);r=u,l?i=i.add(Sd(f,n[h])):s=s.add(Sd(d,n[c]))}return b1(r),{p:s,f:i}}wNAFUnsafe(t,n,r,s=this.ZERO){const i=Xf(t,this.bits);for(let o=0;o<i.windows&&r!==na;o++){const{nextN:a,offset:u,isZero:c,isNeg:l}=w1(r,o,i);if(r=a,!c){const d=n[u];s=s.add(l?d.negate():d)}}return b1(r),s}getPrecomputes(t,n,r){let s=Qf.get(n);return s||(s=this.precomputeWindow(n,t),t!==1&&(typeof r=="function"&&(s=r(s)),Qf.set(n,s))),s}cached(t,n,r){const s=$f(t);return this.wNAF(s,this.getPrecomputes(s,t,r),n)}unsafe(t,n,r,s){const i=$f(t);return i===1?this._unsafeLadder(t,n,s):this.wNAFUnsafe(i,this.getPrecomputes(i,t,r),n,s)}createCache(t,n){sN(n,this.bits),oN.set(t,n),Qf.delete(t)}hasCache(t){return $f(t)!==1}}function az(e,t,n,r){let s=t,i=e.ZERO,o=e.ZERO;for(;n>na||r>na;)n&$s&&(i=i.add(s)),r&$s&&(o=o.add(s)),s=s.double(),n>>=$s,r>>=$s;return{p1:i,p2:o}}function cz(e,t,n,r){iz(n,e),sz(r,t);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=e.ZERO,a=YM(BigInt(s));let u=1;a>12?u=a-3:a>4?u=a-2:a>0&&(u=2);const c=qu(u),l=new Array(Number(c)+1).fill(o),d=Math.floor((t.BITS-1)/u)*u;let f=o;for(let h=d;h>=0;h-=u){l.fill(o);for(let g=0;g<i;g++){const y=r[g],b=Number(y>>BigInt(h)&c);l[b]=l[b].add(n[g])}let p=o;for(let g=l.length-1,y=o;g>0;g--)y=y.add(l[g]),p=p.add(y);if(f=f.add(p),h!==0)for(let g=0;g<u;g++)f=f.double()}return f}function v1(e,t,n){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return tz(t),t}else return es(e,{isLE:n})}function uz(e,t,n={},r){if(r===void 0&&(r=e==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const a of["p","n","h"]){const u=t[a];if(!(typeof u=="bigint"&&u>na))throw new Error(`CURVE.${a} must be positive bigint`)}const s=v1(t.p,n.Fp,r),i=v1(t.n,n.Fn,r),o=["Gx","Gy","a","b"];for(const a of o)if(!s.isValid(t[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:s,Fn:i}}BigInt(0),BigInt(1),BigInt(2),BigInt(8),DM("HashToScalar-");const Jc=BigInt(0),Po=BigInt(1),Ll=BigInt(2);function lz(e){return xh(e,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...e})}function dz(e){const t=lz(e),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=t,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const u=o||go,c=a?255:448,l=a?32:56,d=BigInt(a?9:5),f=BigInt(a?121665:39081),h=a?Ll**BigInt(254):Ll**BigInt(447),p=a?BigInt(8)*Ll**BigInt(251)-Po:BigInt(4)*Ll**BigInt(445)-Po,g=h+p+Po,y=Y=>Pn(Y,n),b=A(d);function A(Y){return F0(y(Y),l)}function E(Y){const q=on("u coordinate",Y,l);return a&&(q[31]&=127),y(Ad(q))}function _(Y){return Ad(s(on("scalar",Y,l)))}function S(Y,q){const R=L(E(q),_(Y));if(R===Jc)throw new Error("invalid private or public key received");return A(R)}function I(Y){return S(Y,b)}function D(Y,q,R){const v=y(Y*(q-R));return q=y(q-v),R=y(R+v),{x_2:q,x_3:R}}function L(Y,q){Jp("u",Y,Jc,n),Jp("scalar",q,h,g);const R=q,v=Y;let T=Po,m=Jc,w=Y,N=Po,C=Jc;for(let B=BigInt(c-1);B>=Jc;B--){const W=R>>B&Po;C^=W,{x_2:T,x_3:w}=D(C,T,w),{x_2:m,x_3:N}=D(C,m,N),C=W;const P=T+m,X=y(P*P),ee=T-m,se=y(ee*ee),Z=X-se,J=w+N,z=w-N,K=y(z*P),H=y(J*ee),U=K+H,F=K-H;w=y(U*U),N=y(v*y(F*F)),T=y(X*se),m=y(Z*(X+y(f*Z)))}({x_2:T,x_3:w}=D(C,T,w)),{x_2:m,x_3:N}=D(C,m,N);const O=i(m);return y(T*O)}const x={secretKey:l,publicKey:l,seed:l},j=(Y=u(l))=>(dr(Y,x.seed),Y);function V(Y){const q=j(Y);return{secretKey:q,publicKey:I(q)}}return{keygen:V,getSharedSecret:(Y,q)=>S(Y,q),getPublicKey:Y=>I(Y),scalarMult:S,scalarMultBase:I,utils:{randomSecretKey:j,randomPrivateKey:j},GuBytes:b.slice(),lengths:x}}const hz=BigInt(1),E1=BigInt(2),fz=BigInt(3),pz=BigInt(5);BigInt(8);const aN=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),gz={p:aN,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function yz(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=aN,o=e*e%i*e%i,a=ar(o,E1,i)*o%i,u=ar(a,hz,i)*e%i,c=ar(u,pz,i)*u%i,l=ar(c,t,i)*c%i,d=ar(l,n,i)*l%i,f=ar(d,r,i)*d%i,h=ar(f,s,i)*f%i,p=ar(h,s,i)*f%i,g=ar(p,t,i)*c%i;return{pow_p_5_8:ar(g,E1,i)*e%i,b2:o}}function mz(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const wz=es(gz.p,{isLE:!0}),eg=(()=>{const e=wz.ORDER;return dz({P:e,type:"x25519",powPminus2:t=>{const{pow_p_5_8:n,b2:r}=yz(t);return Pn(ar(n,fz,e)*r,e)},adjustScalarBytes:mz})})(),A1=(e,t)=>(e+(e>=0?t:-t)/cN)/t;function bz(e,t,n){const[[r,s],[i,o]]=t,a=A1(o*e,n),u=A1(-s*e,n);let c=e-a*r-u*i,l=-a*s-u*o;const d=c<ai,f=l<ai;d&&(c=-c),f&&(l=-l);const h=qu(Math.ceil(YM(n)/2))+Xo;if(c<ai||c>=h||l<ai||l>=h)throw new Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:d,k1:c,k2neg:f,k2:l}}function tg(e){if(!["compact","recovered","der"].includes(e))throw new Error('Signature format must be "compact", "recovered", or "der"');return e}function Zf(e,t){const n={};for(let r of Object.keys(t))n[r]=e[r]===void 0?t[r]:e[r];return Ed(n.lowS,"lowS"),Ed(n.prehash,"prehash"),n.format!==void 0&&tg(n.format),n}class vz extends Error{constructor(t=""){super(t)}}const ii={Err:vz,_tlv:{encode:(e,t)=>{const{Err:n}=ii;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=xl(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?xl(s.length/2|128):"";return xl(e)+i+s+t},decode(e,t){const{Err:n}=ii;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const u=s&127;if(!u)throw new n("tlv.decode(long): indefinite length not supported");if(u>4)throw new n("tlv.decode(long): byte length is too big");const c=t.subarray(r,r+u);if(c.length!==u)throw new n("tlv.decode: length bytes not complete");if(c[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of c)o=o<<8|l;if(r+=u,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=t.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:t.subarray(r+o)}}},_int:{encode(e){const{Err:t}=ii;if(e<ai)throw new t("integer: negative integers are not allowed");let n=xl(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=ii;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Dh(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=ii,s=on("signature",e),{v:i,l:o}=r.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:u}=r.decode(2,i),{v:c,l}=r.decode(2,u);if(l.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(c)}},hexFromSig(e){const{_tlv:t,_int:n}=ii,r=t.encode(2,n.encode(e.r)),s=t.encode(2,n.encode(e.s)),i=r+s;return t.encode(48,i)}},ai=BigInt(0),Xo=BigInt(1),cN=BigInt(2),Cl=BigInt(3),Ez=BigInt(4);function Vo(e,t){const{BYTES:n}=e;let r;if(typeof t=="bigint")r=t;else{let s=on("private key",t);try{r=e.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof t}`)}}if(!e.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function Az(e,t={}){const n=uz("weierstrass",e,t),{Fp:r,Fn:s}=n;let i=n.CURVE;const{h:o,n:a}=i;xh(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:u}=t;if(u&&(!r.is0(i.a)||typeof u.beta!="bigint"||!Array.isArray(u.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const c=lN(r,s);function l(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(Y,q,R){const{x:v,y:T}=q.toAffine(),m=r.toBytes(v);if(Ed(R,"isCompressed"),R){l();const w=!r.isOdd(T);return Fi(uN(w),m)}else return Fi(Uint8Array.of(4),m,r.toBytes(T))}function f(Y){Xs(Y,void 0,"Point");const{publicKey:q,publicKeyUncompressed:R}=c,v=Y.length,T=Y[0],m=Y.subarray(1);if(v===q&&(T===2||T===3)){const w=r.fromBytes(m);if(!r.isValid(w))throw new Error("bad point: is not on curve, wrong x");const N=g(w);let C;try{C=r.sqrt(N)}catch(B){const W=B instanceof Error?": "+B.message:"";throw new Error("bad point: is not on curve, sqrt error"+W)}l();const O=r.isOdd(C);return(T&1)===1!==O&&(C=r.neg(C)),{x:w,y:C}}else if(v===R&&T===4){const w=r.BYTES,N=r.fromBytes(m.subarray(0,w)),C=r.fromBytes(m.subarray(w,w*2));if(!y(N,C))throw new Error("bad point: is not on curve");return{x:N,y:C}}else throw new Error(`bad point: got length ${v}, expected compressed=${q} or uncompressed=${R}`)}const h=t.toBytes||d,p=t.fromBytes||f;function g(Y){const q=r.sqr(Y),R=r.mul(q,Y);return r.add(r.add(R,r.mul(Y,i.a)),i.b)}function y(Y,q){const R=r.sqr(q),v=g(Y);return r.eql(R,v)}if(!y(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const b=r.mul(r.pow(i.a,Cl),Ez),A=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(b,A)))throw new Error("bad curve params: a or b");function E(Y,q,R=!1){if(!r.isValid(q)||R&&r.is0(q))throw new Error(`bad point coordinate ${Y}`);return q}function _(Y){if(!(Y instanceof x))throw new Error("ProjectivePoint expected")}function S(Y){if(!u||!u.basises)throw new Error("no endo");return bz(Y,u.basises,s.ORDER)}const I=g1((Y,q)=>{const{X:R,Y:v,Z:T}=Y;if(r.eql(T,r.ONE))return{x:R,y:v};const m=Y.is0();q==null&&(q=m?r.ONE:r.inv(T));const w=r.mul(R,q),N=r.mul(v,q),C=r.mul(T,q);if(m)return{x:r.ZERO,y:r.ZERO};if(!r.eql(C,r.ONE))throw new Error("invZ was invalid");return{x:w,y:N}}),D=g1(Y=>{if(Y.is0()){if(t.allowInfinityPoint&&!r.is0(Y.Y))return;throw new Error("bad point: ZERO")}const{x:q,y:R}=Y.toAffine();if(!r.isValid(q)||!r.isValid(R))throw new Error("bad point: x or y not field elements");if(!y(q,R))throw new Error("bad point: equation left != right");if(!Y.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function L(Y,q,R,v,T){return R=new x(r.mul(R.X,Y),R.Y,R.Z),q=Sd(v,q),R=Sd(T,R),q.add(R)}class x{constructor(q,R,v){this.X=E("x",q),this.Y=E("y",R,!0),this.Z=E("z",v),Object.freeze(this)}static CURVE(){return i}static fromAffine(q){const{x:R,y:v}=q||{};if(!q||!r.isValid(R)||!r.isValid(v))throw new Error("invalid affine point");if(q instanceof x)throw new Error("projective point not allowed");return r.is0(R)&&r.is0(v)?x.ZERO:new x(R,v,r.ONE)}static fromBytes(q){const R=x.fromAffine(p(Xs(q,void 0,"point")));return R.assertValidity(),R}static fromHex(q){return x.fromBytes(on("pointHex",q))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(q=8,R=!0){return V.createCache(this,q),R||this.multiply(Cl),this}assertValidity(){D(this)}hasEvenY(){const{y:q}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(q)}equals(q){_(q);const{X:R,Y:v,Z:T}=this,{X:m,Y:w,Z:N}=q,C=r.eql(r.mul(R,N),r.mul(m,T)),O=r.eql(r.mul(v,N),r.mul(w,T));return C&&O}negate(){return new x(this.X,r.neg(this.Y),this.Z)}double(){const{a:q,b:R}=i,v=r.mul(R,Cl),{X:T,Y:m,Z:w}=this;let N=r.ZERO,C=r.ZERO,O=r.ZERO,B=r.mul(T,T),W=r.mul(m,m),P=r.mul(w,w),X=r.mul(T,m);return X=r.add(X,X),O=r.mul(T,w),O=r.add(O,O),N=r.mul(q,O),C=r.mul(v,P),C=r.add(N,C),N=r.sub(W,C),C=r.add(W,C),C=r.mul(N,C),N=r.mul(X,N),O=r.mul(v,O),P=r.mul(q,P),X=r.sub(B,P),X=r.mul(q,X),X=r.add(X,O),O=r.add(B,B),B=r.add(O,B),B=r.add(B,P),B=r.mul(B,X),C=r.add(C,B),P=r.mul(m,w),P=r.add(P,P),B=r.mul(P,X),N=r.sub(N,B),O=r.mul(P,W),O=r.add(O,O),O=r.add(O,O),new x(N,C,O)}add(q){_(q);const{X:R,Y:v,Z:T}=this,{X:m,Y:w,Z:N}=q;let C=r.ZERO,O=r.ZERO,B=r.ZERO;const W=i.a,P=r.mul(i.b,Cl);let X=r.mul(R,m),ee=r.mul(v,w),se=r.mul(T,N),Z=r.add(R,v),J=r.add(m,w);Z=r.mul(Z,J),J=r.add(X,ee),Z=r.sub(Z,J),J=r.add(R,T);let z=r.add(m,N);return J=r.mul(J,z),z=r.add(X,se),J=r.sub(J,z),z=r.add(v,T),C=r.add(w,N),z=r.mul(z,C),C=r.add(ee,se),z=r.sub(z,C),B=r.mul(W,J),C=r.mul(P,se),B=r.add(C,B),C=r.sub(ee,B),B=r.add(ee,B),O=r.mul(C,B),ee=r.add(X,X),ee=r.add(ee,X),se=r.mul(W,se),J=r.mul(P,J),ee=r.add(ee,se),se=r.sub(X,se),se=r.mul(W,se),J=r.add(J,se),X=r.mul(ee,J),O=r.add(O,X),X=r.mul(z,J),C=r.mul(Z,C),C=r.sub(C,X),X=r.mul(Z,ee),B=r.mul(z,B),B=r.add(B,X),new x(C,O,B)}subtract(q){return this.add(q.negate())}is0(){return this.equals(x.ZERO)}multiply(q){const{endo:R}=t;if(!s.isValidNot0(q))throw new Error("invalid scalar: out of range");let v,T;const m=w=>V.cached(this,w,N=>Wf(x,N));if(R){const{k1neg:w,k1:N,k2neg:C,k2:O}=S(q),{p:B,f:W}=m(N),{p:P,f:X}=m(O);T=W.add(X),v=L(R.beta,B,P,w,C)}else{const{p:w,f:N}=m(q);v=w,T=N}return Wf(x,[v,T])[0]}multiplyUnsafe(q){const{endo:R}=t,v=this;if(!s.isValid(q))throw new Error("invalid scalar: out of range");if(q===ai||v.is0())return x.ZERO;if(q===Xo)return v;if(V.hasCache(this))return this.multiply(q);if(R){const{k1neg:T,k1:m,k2neg:w,k2:N}=S(q),{p1:C,p2:O}=az(x,v,m,N);return L(R.beta,C,O,T,w)}else return V.unsafe(v,q)}multiplyAndAddUnsafe(q,R,v){const T=this.multiplyUnsafe(R).add(q.multiplyUnsafe(v));return T.is0()?void 0:T}toAffine(q){return I(this,q)}isTorsionFree(){const{isTorsionFree:q}=t;return o===Xo?!0:q?q(x,this):V.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:q}=t;return o===Xo?this:q?q(x,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(q=!0){return Ed(q,"isCompressed"),this.assertValidity(),h(x,this,q)}toHex(q=!0){return Wo(this.toBytes(q))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(q=!0){return this.toBytes(q)}_setWindowSize(q){this.precompute(q)}static normalizeZ(q){return Wf(x,q)}static msm(q,R){return cz(x,s,q,R)}static fromPrivateKey(q){return x.BASE.multiply(Vo(s,q))}}x.BASE=new x(i.Gx,i.Gy,r.ONE),x.ZERO=new x(r.ZERO,r.ONE,r.ZERO),x.Fp=r,x.Fn=s;const j=s.BITS,V=new oz(x,t.endo?Math.ceil(j/2):j);return x.BASE.precompute(8),x}function uN(e){return Uint8Array.of(e?2:3)}function lN(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function Sz(e,t={}){const{Fn:n}=e,r=t.randomBytes||go,s=Object.assign(lN(e.Fp,n),{seed:iN(n.ORDER)});function i(f){try{return!!Vo(n,f)}catch{return!1}}function o(f,h){const{publicKey:p,publicKeyUncompressed:g}=s;try{const y=f.length;return h===!0&&y!==p||h===!1&&y!==g?!1:!!e.fromBytes(f)}catch{return!1}}function a(f=r(s.seed)){return rz(Xs(f,s.seed,"seed"),n.ORDER)}function u(f,h=!0){return e.BASE.multiply(Vo(n,f)).toBytes(h)}function c(f){const h=a(f);return{secretKey:h,publicKey:u(h)}}function l(f){if(typeof f=="bigint")return!1;if(f instanceof e)return!0;const{secretKey:h,publicKey:p,publicKeyUncompressed:g}=s;if(n.allowedLengths||h===p)return;const y=on("key",f).length;return y===p||y===g}function d(f,h,p=!0){if(l(f)===!0)throw new Error("first arg must be private key");if(l(h)===!1)throw new Error("second arg must be public key");const g=Vo(n,f);return e.fromHex(h).multiply(g).toBytes(p)}return Object.freeze({getPublicKey:u,getSharedSecret:d,keygen:c,Point:e,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:i,randomPrivateKey:a,normPrivateKeyToScalar:f=>Vo(n,f),precompute(f=8,h=e.BASE){return h.precompute(f,!1)}},lengths:s})}function Tz(e,t,n={}){Mh(t),xh(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||go,s=n.hmac||((R,...v)=>_h(t,R,Fi(...v))),{Fp:i,Fn:o}=e,{ORDER:a,BITS:u}=o,{keygen:c,getPublicKey:l,getSharedSecret:d,utils:f,lengths:h}=Sz(e,n),p={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},g="compact";function y(R){const v=a>>Xo;return R>v}function b(R,v){if(!o.isValidNot0(v))throw new Error(`invalid signature ${R}: out of range 1..Point.Fn.ORDER`);return v}function A(R,v){tg(v);const T=h.signature,m=v==="compact"?T:v==="recovered"?T+1:void 0;return Xs(R,m,`${v} signature`)}class E{constructor(v,T,m){this.r=b("r",v),this.s=b("s",T),m!=null&&(this.recovery=m),Object.freeze(this)}static fromBytes(v,T=g){A(v,T);let m;if(T==="der"){const{r:O,s:B}=ii.toSig(Xs(v));return new E(O,B)}T==="recovered"&&(m=v[0],T="compact",v=v.subarray(1));const w=o.BYTES,N=v.subarray(0,w),C=v.subarray(w,w*2);return new E(o.fromBytes(N),o.fromBytes(C),m)}static fromHex(v,T){return this.fromBytes(bd(v),T)}addRecoveryBit(v){return new E(this.r,this.s,v)}recoverPublicKey(v){const T=i.ORDER,{r:m,s:w,recovery:N}=this;if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");if(a*cN<T&&N>1)throw new Error("recovery id is ambiguous for h>1 curve");const C=N===2||N===3?m+a:m;if(!i.isValid(C))throw new Error("recovery id 2 or 3 invalid");const O=i.toBytes(C),B=e.fromBytes(Fi(uN((N&1)===0),O)),W=o.inv(C),P=S(on("msgHash",v)),X=o.create(-P*W),ee=o.create(w*W),se=e.BASE.multiplyUnsafe(X).add(B.multiplyUnsafe(ee));if(se.is0())throw new Error("point at infinify");return se.assertValidity(),se}hasHighS(){return y(this.s)}toBytes(v=g){if(tg(v),v==="der")return bd(ii.hexFromSig(this));const T=o.toBytes(this.r),m=o.toBytes(this.s);if(v==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Fi(Uint8Array.of(this.recovery),T,m)}return Fi(T,m)}toHex(v){return Wo(this.toBytes(v))}assertValidity(){}static fromCompact(v){return E.fromBytes(on("sig",v),"compact")}static fromDER(v){return E.fromBytes(on("sig",v),"der")}normalizeS(){return this.hasHighS()?new E(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Wo(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Wo(this.toBytes("compact"))}}const _=n.bits2int||function(R){if(R.length>8192)throw new Error("input is too large");const v=Dh(R),T=R.length*8-u;return T>0?v>>BigInt(T):v},S=n.bits2int_modN||function(R){return o.create(_(R))},I=qu(u);function D(R){return Jp("num < 2^"+u,R,ai,I),o.toBytes(R)}function L(R,v){return Xs(R,void 0,"message"),v?Xs(t(R),void 0,"prehashed message"):R}function x(R,v,T){if(["recovered","canonical"].some(ee=>ee in T))throw new Error("sign() legacy options not supported");const{lowS:m,prehash:w,extraEntropy:N}=Zf(T,p);R=L(R,w);const C=S(R),O=Vo(o,v),B=[D(O),D(C)];if(N!=null&&N!==!1){const ee=N===!0?r(h.secretKey):N;B.push(on("extraEntropy",ee))}const W=Fi(...B),P=C;function X(ee){const se=_(ee);if(!o.isValidNot0(se))return;const Z=o.inv(se),J=e.BASE.multiply(se).toAffine(),z=o.create(J.x);if(z===ai)return;const K=o.create(Z*o.create(P+z*O));if(K===ai)return;let H=(J.x===z?0:2)|Number(J.y&Xo),U=K;return m&&y(K)&&(U=o.neg(K),H^=1),new E(z,U,H)}return{seed:W,k2sig:X}}function j(R,v,T={}){R=on("message",R);const{seed:m,k2sig:w}=x(R,v,T);return W8(t.outputLen,o.BYTES,s)(m,w)}function V(R){let v;const T=typeof R=="string"||Th(R),m=!T&&R!==null&&typeof R=="object"&&typeof R.r=="bigint"&&typeof R.s=="bigint";if(!T&&!m)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(m)v=new E(R.r,R.s);else if(T){try{v=E.fromBytes(on("sig",R),"der")}catch(w){if(!(w instanceof ii.Err))throw w}if(!v)try{v=E.fromBytes(on("sig",R),"compact")}catch{return!1}}return v||!1}function Y(R,v,T,m={}){const{lowS:w,prehash:N,format:C}=Zf(m,p);if(T=on("publicKey",T),v=L(on("message",v),N),"strict"in m)throw new Error("options.strict was renamed to lowS");const O=C===void 0?V(R):E.fromBytes(on("sig",R),C);if(O===!1)return!1;try{const B=e.fromBytes(T);if(w&&O.hasHighS())return!1;const{r:W,s:P}=O,X=S(v),ee=o.inv(P),se=o.create(X*ee),Z=o.create(W*ee),J=e.BASE.multiplyUnsafe(se).add(B.multiplyUnsafe(Z));return J.is0()?!1:o.create(J.x)===W}catch{return!1}}function q(R,v,T={}){const{prehash:m}=Zf(T,p);return v=L(v,m),E.fromBytes(R,"recovered").recoverPublicKey(v).toBytes()}return Object.freeze({keygen:c,getPublicKey:l,getSharedSecret:d,utils:f,lengths:h,Point:e,sign:j,verify:Y,recoverPublicKey:q,Signature:E,hash:t})}function Mz(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp;let r=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=es(t.n,{BITS:e.nBitLength,allowedLengths:r,modFromBytes:e.wrapPrivateKey}),i={Fp:n,Fn:s,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:i}}function Nz(e){const{CURVE:t,curveOpts:n}=Mz(e),r={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:n,hash:e.hash,ecdsaOpts:r}}function Iz(e,t){const n=t.Point;return Object.assign({},t,{ProjectivePoint:n,CURVE:Object.assign({},e,nN(n.Fn.ORDER,n.Fn.BITS))})}function _z(e){const{CURVE:t,curveOpts:n,hash:r,ecdsaOpts:s}=Nz(e),i=Az(t,n),o=Tz(i,r,s);return Iz(e,o)}function ng(e,t){const n=r=>_z({...e,hash:r});return{...n(t),create:n}}const dN={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},hN={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},fN={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Oz=es(dN.p),Dz=es(hN.p),xz=es(fN.p),Lz=ng({...dN,Fp:Oz,lowS:!1},Ih);ng({...hN,Fp:Dz,lowS:!1},U6),ng({...fN,Fp:xz,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},B6);const Cz=Lz,pN="base10",hn="base16",En="base64pad",Hi="base64url",Gu="utf8",gN=0,ui=1,Ku=2,jz=0,S1=1,mu=12,V0=32;function Pz(){const e=eg.utils.randomPrivateKey(),t=eg.getPublicKey(e);return{privateKey:Tn(e,hn),publicKey:Tn(t,hn)}}function rg(){const e=go(V0);return Tn(e,hn)}function kz(e,t){const n=eg.getSharedSecret(Xn(e,hn),Xn(t,hn)),r=K8(Oh,n,void 0,void 0,V0);return Tn(r,hn)}function Jl(e){const t=Oh(Xn(e,hn));return Tn(t,hn)}function Yn(e){const t=Oh(Xn(e,Gu));return Tn(t,hn)}function yN(e){return Xn(`${e}`,pN)}function io(e){return Number(Tn(e,pN))}function mN(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function wN(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=(4-t.length%4)%4;return t+"=".repeat(n)}function Rz(e){const t=yN(typeof e.type<"u"?e.type:gN);if(io(t)===ui&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof e.senderPublicKey<"u"?Xn(e.senderPublicKey,hn):void 0,r=typeof e.iv<"u"?Xn(e.iv,hn):go(mu),s=Xn(e.symKey,hn),i=qM(s,r).encrypt(Xn(e.message,Gu)),o=bN({type:t,sealed:i,iv:r,senderPublicKey:n});return e.encoding===Hi?mN(o):o}function Bz(e){const t=Xn(e.symKey,hn),{sealed:n,iv:r}=Ou({encoded:e.encoded,encoding:e.encoding}),s=qM(t,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return Tn(s,Gu)}function Uz(e,t){const n=yN(Ku),r=go(mu),s=Xn(e,Gu),i=bN({type:n,sealed:s,iv:r});return t===Hi?mN(i):i}function zz(e,t){const{sealed:n}=Ou({encoded:e,encoding:t});return Tn(n,Gu)}function bN(e){if(io(e.type)===Ku)return Tn(yu([e.type,e.sealed]),En);if(io(e.type)===ui){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Tn(yu([e.type,e.senderPublicKey,e.iv,e.sealed]),En)}return Tn(yu([e.type,e.iv,e.sealed]),En)}function Ou(e){const t=(e.encoding||En)===Hi?wN(e.encoded):e.encoded,n=Xn(t,En),r=n.slice(jz,S1),s=S1;if(io(r)===ui){const u=s+V0,c=u+mu,l=n.slice(s,u),d=n.slice(u,c),f=n.slice(c);return{type:r,sealed:f,iv:d,senderPublicKey:l}}if(io(r)===Ku){const u=n.slice(s),c=go(mu);return{type:r,sealed:u,iv:c}}const i=s+mu,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function Fz(e,t){const n=Ou({encoded:e,encoding:t?.encoding});return vN({type:io(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Tn(n.senderPublicKey,hn):void 0,receiverPublicKey:t?.receiverPublicKey})}function vN(e){const t=e?.type||gN;if(t===ui){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function T1(e){return e.type===ui&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}function M1(e){return e.type===Ku}function Hz(e){const t=De.Buffer.from(e.x,"base64"),n=De.Buffer.from(e.y,"base64");return yu([new Uint8Array([4]),t,n])}function Vz(e,t){const[n,r,s]=e.split("."),i=De.Buffer.from(wN(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),u=`${n}.${r}`,c=Oh(u),l=Hz(t);if(!Cz.verify(yu([o,a]),c,l))throw new Error("Invalid signature");return Pp(e).payload}const qz="irn";function Td(e){return e?.relay||{protocol:qz}}function qo(e){const t=bU[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var Gz=Object.defineProperty,Kz=Object.defineProperties,Yz=Object.getOwnPropertyDescriptors,N1=Object.getOwnPropertySymbols,Wz=Object.prototype.hasOwnProperty,Xz=Object.prototype.propertyIsEnumerable,I1=(e,t,n)=>t in e?Gz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jf=(e,t)=>{for(var n in t||(t={}))Wz.call(t,n)&&I1(e,n,t[n]);if(N1)for(var n of N1(t))Xz.call(t,n)&&I1(e,n,t[n]);return e},Qz=(e,t)=>Kz(e,Yz(t));function $z(e,t="-"){const n={},r="relay"+t;return Object.keys(e).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=e[s];n[i]=o}}),n}function _1(e){if(!e.includes("wc:")){const c=TM(e);c!=null&&c.includes("wc:")&&(e=c)}e=e.includes("wc://")?e.replace("wc://",""):e,e=e.includes("wc:")?e.replace("wc:",""):e;const t=e.indexOf(":"),n=e.indexOf("?")!==-1?e.indexOf("?"):void 0,r=e.substring(0,t),s=e.substring(t+1,n).split("@"),i=typeof n<"u"?e.substring(n):"",o=new URLSearchParams(i),a=Object.fromEntries(o.entries()),u=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:Zz(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:$z(a),methods:u,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function Zz(e){return e.startsWith("//")?e.substring(2):e}function Jz(e,t="-"){const n="relay",r={};return Object.keys(e).forEach(s=>{const i=s,o=n+t+i;e[i]&&(r[o]=e[i])}),r}function O1(e){const t=new URLSearchParams,n=Jf(Jf(Qz(Jf({},Jz(e.relay)),{symKey:e.symKey}),e.expiryTimestamp&&{expiryTimestamp:e.expiryTimestamp.toString()}),e.methods&&{methods:e.methods.join(",")});return Object.entries(n).sort(([r],[s])=>r.localeCompare(s)).forEach(([r,s])=>{s!==void 0&&t.append(r,String(s))}),`${e.protocol}:${e.topic}@${e.version}?${t}`}function jl(e,t,n){return`${e}?wc_ev=${n}&topic=${t}`}var eF=Object.defineProperty,tF=Object.defineProperties,nF=Object.getOwnPropertyDescriptors,D1=Object.getOwnPropertySymbols,rF=Object.prototype.hasOwnProperty,iF=Object.prototype.propertyIsEnumerable,x1=(e,t,n)=>t in e?eF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sF=(e,t)=>{for(var n in t||(t={}))rF.call(t,n)&&x1(e,n,t[n]);if(D1)for(var n of D1(t))iF.call(t,n)&&x1(e,n,t[n]);return e},oF=(e,t)=>tF(e,nF(t));function ha(e){const t=[];return e.forEach(n=>{const[r,s]=n.split(":");t.push(`${r}:${s}`)}),t}function aF(e){const t=[];return Object.values(e).forEach(n=>{t.push(...ha(n.accounts))}),t}function cF(e,t){const n=[];return Object.values(e).forEach(r=>{ha(r.accounts).includes(t)&&n.push(...r.methods)}),n}function uF(e,t){const n=[];return Object.values(e).forEach(r=>{ha(r.accounts).includes(t)&&n.push(...r.events)}),n}function EN(e){return e.includes(":")}function lF(e){return EN(e)?e.split(":")[0]:e}function L1(e){var t,n,r;const s={};if(!Du(e))return s;for(const[i,o]of Object.entries(e)){const a=EN(i)?[i]:o.chains,u=o.methods||[],c=o.events||[],l=lF(i);s[l]=oF(sF({},s[l]),{chains:Js(a,(t=s[l])==null?void 0:t.chains),methods:Js(u,(n=s[l])==null?void 0:n.methods),events:Js(c,(r=s[l])==null?void 0:r.events)})}return s}function dF(e){const t={};return e?.forEach(n=>{var r;const[s,i]=n.split(":");t[s]||(t[s]={accounts:[],chains:[],events:[],methods:[]}),t[s].accounts.push(n),(r=t[s].chains)==null||r.push(`${s}:${i}`)}),t}function C1(e,t){t=t.map(r=>r.replace("did:pkh:",""));const n=dF(t);for(const[r,s]of Object.entries(n))s.methods?s.methods=Js(s.methods,e):s.methods=e,s.events=["chainChanged","accountsChanged"];return n}function hF(e,t){var n,r,s,i,o,a;const u=L1(e),c=L1(t),l={},d=Object.keys(u).concat(Object.keys(c));for(const f of d)l[f]={chains:Js((n=u[f])==null?void 0:n.chains,(r=c[f])==null?void 0:r.chains),methods:Js((s=u[f])==null?void 0:s.methods,(i=c[f])==null?void 0:i.methods),events:Js((o=u[f])==null?void 0:o.events,(a=c[f])==null?void 0:a.events)};return l}const fF={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},pF={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ee(e,t){const{message:n,code:r}=pF[e];return{message:t?`${n} ${t}`:n,code:r}}function pt(e,t){const{message:n,code:r}=fF[e];return{message:t?`${n} ${t}`:n,code:r}}function ra(e,t){return Array.isArray(e)?typeof t<"u"&&e.length?e.every(t):!0:!1}function Du(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function Ot(e){return typeof e>"u"}function Et(e,t){return t&&Ot(e)?!0:typeof e=="string"&&!!e.trim().length}function q0(e,t){return t&&Ot(e)?!0:typeof e=="number"&&!isNaN(e)}function gF(e,t){const{requiredNamespaces:n}=t,r=Object.keys(e.namespaces),s=Object.keys(n);let i=!0;return Ws(s,r)?(r.forEach(o=>{const{accounts:a,methods:u,events:c}=e.namespaces[o],l=ha(a),d=n[o];(!Ws(bM(o,d),l)||!Ws(d.methods,u)||!Ws(d.events,c))&&(i=!1)}),i):!1}function Md(e){return Et(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function yF(e){if(Et(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const n=t[0]+":"+t[1];return!!t[2]&&Md(n)}}return!1}function mF(e){function t(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Et(e,!1)){if(t(e))return!0;const n=TM(e);return t(n)}}catch{}return!1}function wF(e){var t;return(t=e?.proposer)==null?void 0:t.publicKey}function bF(e){return e?.topic}function vF(e,t){let n=null;return Et(e?.publicKey,!1)||(n=Ee("MISSING_OR_INVALID",`${t} controller public key should be a string`)),n}function j1(e){let t=!0;return ra(e)?e.length&&(t=e.every(n=>Et(n,!1))):t=!1,t}function EF(e,t,n){let r=null;return ra(t)&&t.length?t.forEach(s=>{r||Md(s)||(r=pt("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):Md(e)||(r=pt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function AF(e,t,n){let r=null;return Object.entries(e).forEach(([s,i])=>{if(r)return;const o=EF(s,bM(s,i),`${t} ${n}`);o&&(r=o)}),r}function SF(e,t){let n=null;return ra(e)?e.forEach(r=>{n||yF(r)||(n=pt("UNSUPPORTED_ACCOUNTS",`${t}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=pt("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function TF(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const s=SF(r?.accounts,`${t} namespace`);s&&(n=s)}),n}function MF(e,t){let n=null;return j1(e?.methods)?j1(e?.events)||(n=pt("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):n=pt("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),n}function AN(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const s=MF(r,`${t}, namespace`);s&&(n=s)}),n}function NF(e,t,n){let r=null;if(e&&Du(e)){const s=AN(e,t);s&&(r=s);const i=AF(e,t,n);i&&(r=i)}else r=Ee("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return r}function ep(e,t){let n=null;if(e&&Du(e)){const r=AN(e,t);r&&(n=r);const s=TF(e,t);s&&(n=s)}else n=Ee("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function SN(e){return Et(e.protocol,!0)}function IF(e,t){let n=!1;return e?e&&ra(e)&&e.length&&e.forEach(r=>{n=SN(r)}):n=!0,n}function _F(e){return typeof e=="number"}function wn(e){return typeof e<"u"&&typeof e!==null}function OF(e){return!(!e||typeof e!="object"||!e.code||!q0(e.code,!1)||!e.message||!Et(e.message,!1))}function DF(e){return!(Ot(e)||!Et(e.method,!1))}function xF(e){return!(Ot(e)||Ot(e.result)&&Ot(e.error)||!q0(e.id,!1)||!Et(e.jsonrpc,!1))}function LF(e){return!(Ot(e)||!Et(e.name,!1))}function P1(e,t){return!(!Md(t)||!aF(e).includes(t))}function CF(e,t,n){return Et(n,!1)?cF(e,t).includes(n):!1}function jF(e,t,n){return Et(n,!1)?uF(e,t).includes(n):!1}function k1(e,t,n){let r=null;const s=PF(e),i=kF(t),o=Object.keys(s),a=Object.keys(i),u=R1(Object.keys(e)),c=R1(Object.keys(t)),l=u.filter(d=>!c.includes(d));return l.length&&(r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${l.toString()}
      Received: ${Object.keys(t).toString()}`)),Ws(o,a)||(r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(t).forEach(d=>{if(!d.includes(":")||r)return;const f=ha(t[d].accounts);f.includes(d)||(r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${f.toString()}`))}),o.forEach(d=>{r||(Ws(s[d].methods,i[d].methods)?Ws(s[d].events,i[d].events)||(r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function PF(e){const t={};return Object.keys(e).forEach(n=>{var r;n.includes(":")?t[n]=e[n]:(r=e[n].chains)==null||r.forEach(s=>{t[s]={methods:e[n].methods,events:e[n].events}})}),t}function R1(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function kF(e){const t={};return Object.keys(e).forEach(n=>{if(n.includes(":"))t[n]=e[n];else{const r=ha(e[n].accounts);r?.forEach(s=>{t[s]={accounts:e[n].accounts.filter(i=>i.includes(`${s}:`)),methods:e[n].methods,events:e[n].events}})}}),t}function RF(e,t){return q0(e,!1)&&e<=t.max&&e>=t.min}function B1(){const e=Hu();return new Promise(t=>{switch(e){case kn.browser:t(BF());break;case kn.reactNative:t(UF());break;case kn.node:t(zF());break;default:t(!0)}})}function BF(){return da()&&navigator?.onLine}async function UF(){if(Ji()&&typeof globalThis<"u"&&globalThis!=null&&globalThis.NetInfo){const e=await globalThis?.NetInfo.fetch();return e?.isConnected}return!0}function zF(){return!0}function FF(e){switch(Hu()){case kn.browser:HF(e);break;case kn.reactNative:VF(e);break}}function HF(e){!Ji()&&da()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)))}function VF(e){Ji()&&typeof globalThis<"u"&&globalThis!=null&&globalThis.NetInfo&&globalThis?.NetInfo.addEventListener(t=>e(t?.isConnected))}function qF(){var e;return da()&&to()?((e=to())==null?void 0:e.visibilityState)==="visible":!0}const tp={};class eu{static get(t){return tp[t]}static set(t,n){tp[t]=n}static delete(t){delete tp[t]}}function GF(e){const t=zu.decode(e);if(t.length<33)throw new Error("Too short to contain a public key");return t.slice(1,33)}function KF({publicKey:e,signature:t,payload:n}){var r;const s=ig(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=XF(n.address),a=n.era==="00"?new Uint8Array([0]):ig(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const u=parseInt(n.nonce,16),c=new Uint8Array([u&255,u>>8&255]),l=BigInt(`0x${WF(n.tip)}`),d=$F(l),f=new Uint8Array([0,...e,o,...t,...a,...c,...d,...s]),h=QF(f.length+1);return new Uint8Array([...h,i,...f])}function YF(e){const t=ig(e),n=xU.blake2b(t,void 0,32);return"0x"+De.Buffer.from(n).toString("hex")}function ig(e){return new Uint8Array(e.replace(/^0x/,"").match(/.{1,2}/g).map(t=>parseInt(t,16)))}function WF(e){return e.startsWith("0x")?e.slice(2):e}function XF(e){const t=zu.decode(e)[0];return t===42?0:t===60?2:1}function QF(e){if(e<64)return new Uint8Array([e<<2]);if(e<16384){const t=e<<2|1;return new Uint8Array([t&255,t>>8&255])}else if(e<1<<30){const t=e<<2|2;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function $F(e){if(e<BigInt(1)<<BigInt(6))return new Uint8Array([Number(e<<BigInt(2))]);if(e<BigInt(1)<<BigInt(14)){const t=e<<BigInt(2)|BigInt(1);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255))])}else if(e<BigInt(1)<<BigInt(30)){const t=e<<BigInt(2)|BigInt(2);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255)),Number(t>>BigInt(16)&BigInt(255)),Number(t>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function ZF(e){const t=Uint8Array.from(De.Buffer.from(e.signature,"hex")),n=GF(e.transaction.address),r=KF({publicKey:n,signature:t,payload:e.transaction}),s=De.Buffer.from(r).toString("hex");return YF(s)}function TN({logger:e,name:t}){const n=typeof e=="string"?PT({opts:{level:e,name:t}}).logger:e;return n.level=typeof e=="string"?e:e.level,n}const JF="PARSE_ERROR",e9="INVALID_REQUEST",t9="METHOD_NOT_FOUND",n9="INVALID_PARAMS",MN="INTERNAL_ERROR",G0="SERVER_ERROR",r9=[-32700,-32600,-32601,-32602,-32603],wu={[JF]:{code:-32700,message:"Parse error"},[e9]:{code:-32600,message:"Invalid Request"},[t9]:{code:-32601,message:"Method not found"},[n9]:{code:-32602,message:"Invalid params"},[MN]:{code:-32603,message:"Internal error"},[G0]:{code:-32e3,message:"Server error"}},NN=G0;function i9(e){return r9.includes(e)}function U1(e){return Object.keys(wu).includes(e)?wu[e]:wu[NN]}function s9(e){return Object.values(wu).find(n=>n.code===e)||wu[NN]}function o9(e,t,n){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${t}`):e}var IN={},Zr={},z1;function a9(){if(z1)return Zr;z1=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.isBrowserCryptoAvailable=Zr.getSubtleCrypto=Zr.getBrowerCrypto=void 0;function e(){return ue?.crypto||ue?.msCrypto||{}}Zr.getBrowerCrypto=e;function t(){const r=e();return r.subtle||r.webkitSubtle}Zr.getSubtleCrypto=t;function n(){return!!e()&&!!t()}return Zr.isBrowserCryptoAvailable=n,Zr}var Jr={},F1;function c9(){if(F1)return Jr;F1=1,Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.isBrowser=Jr.isNode=Jr.isReactNative=void 0;function e(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Jr.isReactNative=e;function t(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Jr.isNode=t;function n(){return!e()&&!t()}return Jr.isBrowser=n,Jr}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Pu;t.__exportStar(a9(),e),t.__exportStar(c9(),e)})(IN);function Nr(e=3){const t=Date.now()*Math.pow(10,e),n=Math.floor(Math.random()*Math.pow(10,e));return t+n}function Gi(e=6){return BigInt(Nr(e))}function si(e,t,n){return{id:n||Nr(),jsonrpc:"2.0",method:e,params:t}}function Nd(e,t){return{id:e,jsonrpc:"2.0",result:t}}function K0(e,t,n){return{id:e,jsonrpc:"2.0",error:u9(t)}}function u9(e,t){return typeof e>"u"?U1(MN):(typeof e=="string"&&(e=Object.assign(Object.assign({},U1(G0)),{message:e})),i9(e.code)&&(e=s9(e.code)),e)}class l9{}class d9 extends l9{constructor(){super()}}class h9 extends d9{constructor(t){super()}}const f9="^wss?:";function p9(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(!(!t||!t.length))return t[0]}function g9(e,t){const n=p9(e);return typeof n>"u"?!1:new RegExp(t).test(n)}function H1(e){return g9(e,f9)}function y9(e){return new RegExp("wss?://localhost(:d{2,5})?").test(e)}function _N(e){return typeof e=="object"&&"id"in e&&"jsonrpc"in e&&e.jsonrpc==="2.0"}function Y0(e){return _N(e)&&"method"in e}function Lh(e){return _N(e)&&(Ir(e)||Wn(e))}function Ir(e){return"result"in e}function Wn(e){return"error"in e}class m9 extends h9{constructor(t){super(t),this.events=new In.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(t),this.connection.connected&&this.registerEventListeners()}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async request(t,n){return this.requestStrict(si(t.method,t.params||[],t.id||Gi().toString()),n)}async requestStrict(t,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${t.id}`,i=>{Wn(i)?s(i.error):r(i.result)});try{await this.connection.send(t,n)}catch(i){s(i)}})}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t),Lh(t)?this.events.emit(`${t.id}`,t):this.events.emit("message",{type:t.method,data:t.params})}onClose(t){t&&t.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`)),this.events.emit("disconnect")}async open(t=this.connection){this.connection===t&&this.connection.connected||(this.connection.connected&&this.close(),typeof t=="string"&&(await this.connection.open(t),t=this.connection),this.connection=this.setConnection(t),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",t=>this.onPayload(t)),this.connection.on("close",t=>this.onClose(t)),this.connection.on("error",t=>this.events.emit("error",t)),this.connection.on("register_error",t=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const w9=()=>typeof WebSocket<"u"?WebSocket:typeof globalThis<"u"&&typeof globalThis.WebSocket<"u"?globalThis.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),b9=()=>typeof WebSocket<"u"||typeof globalThis<"u"&&typeof globalThis.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",V1=e=>e.split("?")[0],q1=10,v9=w9();let E9=class{constructor(e){if(this.url=e,this.events=new In.EventEmitter,this.registering=!1,!H1(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(eo(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!H1(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((n,r)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),r(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return r(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,n)=>{const r=IN.isReactNative()?void 0:{rejectUnauthorized:!y9(e)},s=new v9(e,[],r);b9()?s.onerror=i=>{const o=i;n(this.emitError(o.error))}:s.on("error",i=>{n(this.emitError(i))}),s.onopen=()=>{this.onOpen(s),t(s)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Zo(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const n=this.parseError(t),r=n.message||n.toString(),s=K0(e,r);this.events.emit("payload",s)}parseError(e,t=this.url){return o9(e,V1(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>q1&&this.events.setMaxListeners(q1)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${V1(this.url)}`));return this.events.emit("register_error",t),t}};const ON="wc",DN=2,sg="core",xr=`${ON}@2:${sg}:`,A9={logger:"error"},S9={database:":memory:"},T9="crypto",G1="client_ed25519_seed",M9=Ae.ONE_DAY,N9="keychain",I9="0.3",_9="messages",O9="0.3",D9=Ae.SIX_HOURS,x9="publisher",xN="irn",L9="error",LN="wss://relay.walletconnect.org",C9="relayer",mt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},j9="_subscription",Fn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},P9=.1,og="2.22.3",ot={link_mode:"link_mode",relay:"relay"},ed={inbound:"inbound",outbound:"outbound"},k9="0.3",R9="WALLETCONNECT_CLIENT_ID",K1="WALLETCONNECT_LINK_MODE_APPS",Cn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},B9="subscription",U9="0.3",z9="pairing",F9="0.3",tu={wc_pairingDelete:{req:{ttl:Ae.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Ae.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Ae.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Ae.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Ae.ONE_DAY,prompt:!1,tag:0},res:{ttl:Ae.ONE_DAY,prompt:!1,tag:0}}},Ks={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},sr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},H9="history",V9="0.3",q9="expirer",qn={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},G9="0.3",K9="verify-api",Y9="https://verify.walletconnect.com",CN="https://verify.walletconnect.org",bu=CN,W9=`${bu}/v3`,X9=[Y9,CN],Q9="echo",$9="https://echo.walletconnect.com",Tr={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},ti={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},or={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success",session_request_response_started:"session_request_response_started",session_request_response_validation_success:"session_request_response_validation_success",session_request_response_publish_started:"session_request_response_publish_started"},Us={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found",session_request_response_validation_failure:"session_request_response_validation_failure",session_request_response_publish_failure:"session_request_response_publish_failure"},zs={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},nu={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},Z9=.1,J9="event-client",e7=86400,t7="https://pulse.walletconnect.org/batch";function n7(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<e.length;s++){var i=e.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=e.length,u=e.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,b=0,A=p.length;b!==A&&p[b]===0;)b++,g++;for(var E=(A-b)*l+1>>>0,_=new Uint8Array(E);b!==A;){for(var S=p[b],I=0,D=E-1;(S!==0||I<y)&&D!==-1;D--,I++)S+=256*_[D]>>>0,_[D]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");y=I,b++}for(var L=E-y;L!==E&&_[L]===0;)L++;for(var x=u.repeat(g);L<E;++L)x+=e.charAt(_[L]);return x}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,b=0;p[g]===u;)y++,g++;for(var A=(p.length-g)*c+1>>>0,E=new Uint8Array(A);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var S=0,I=A-1;(_!==0||S<b)&&I!==-1;I--,S++)_+=a*E[I]>>>0,E[I]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");b=S,g++}if(p[g]!==" "){for(var D=A-b;D!==A&&E[D]===0;)D++;for(var L=new Uint8Array(y+(A-D)),x=y;D!==A;)L[x++]=E[D++];return L}}}function h(p){var g=f(p);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var r7=n7,i7=r7;const jN=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},s7=e=>new TextEncoder().encode(e),o7=e=>new TextDecoder().decode(e);class a7{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class c7{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return PN(this,t)}}class u7{constructor(t){this.decoders=t}or(t){return PN(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const PN=(e,t)=>new u7({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class l7{constructor(t,n,r,s){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new a7(t,n,r),this.decoder=new c7(t,n,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Ch=({name:e,prefix:t,encode:n,decode:r})=>new l7(e,t,n,r),Yu=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:s}=i7(n,t);return Ch({prefix:e,name:t,encode:r,decode:i=>jN(s(i))})},d7=(e,t,n,r)=>{const s={};for(let l=0;l<t.length;++l)s[t[l]]=l;let i=e.length;for(;e[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,u=0,c=0;for(let l=0;l<i;++l){const d=s[e[l]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);u=u<<n|d,a+=n,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=n||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},h7=(e,t,n)=>{const r=t[t.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let u=0;u<e.length;++u)for(a=a<<8|e[u],o+=8;o>n;)o-=n,i+=t[s&a>>o];if(o&&(i+=t[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Yt=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Ch({prefix:t,name:e,encode(s){return h7(s,r,n)},decode(s){return d7(s,r,n,e)}}),f7=Ch({prefix:"\0",name:"identity",encode:e=>o7(e),decode:e=>s7(e)});var p7=Object.freeze({__proto__:null,identity:f7});const g7=Yt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var y7=Object.freeze({__proto__:null,base2:g7});const m7=Yt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var w7=Object.freeze({__proto__:null,base8:m7});const b7=Yu({prefix:"9",name:"base10",alphabet:"0123456789"});var v7=Object.freeze({__proto__:null,base10:b7});const E7=Yt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),A7=Yt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var S7=Object.freeze({__proto__:null,base16:E7,base16upper:A7});const T7=Yt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),M7=Yt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),N7=Yt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),I7=Yt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),_7=Yt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),O7=Yt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),D7=Yt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),x7=Yt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),L7=Yt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var C7=Object.freeze({__proto__:null,base32:T7,base32upper:M7,base32pad:N7,base32padupper:I7,base32hex:_7,base32hexupper:O7,base32hexpad:D7,base32hexpadupper:x7,base32z:L7});const j7=Yu({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),P7=Yu({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var k7=Object.freeze({__proto__:null,base36:j7,base36upper:P7});const R7=Yu({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),B7=Yu({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var U7=Object.freeze({__proto__:null,base58btc:R7,base58flickr:B7});const z7=Yt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),F7=Yt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),H7=Yt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),V7=Yt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var q7=Object.freeze({__proto__:null,base64:z7,base64pad:F7,base64url:H7,base64urlpad:V7});const kN=Array.from(""),G7=kN.reduce((e,t,n)=>(e[n]=t,e),[]),K7=kN.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function Y7(e){return e.reduce((t,n)=>(t+=G7[n],t),"")}function W7(e){const t=[];for(const n of e){const r=K7[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const X7=Ch({prefix:"",name:"base256emoji",encode:Y7,decode:W7});var Q7=Object.freeze({__proto__:null,base256emoji:X7}),$7=RN,Y1=128,Z7=-128,J7=Math.pow(2,31);function RN(e,t,n){t=t||[],n=n||0;for(var r=n;e>=J7;)t[n++]=e&255|Y1,e/=128;for(;e&Z7;)t[n++]=e&255|Y1,e>>>=7;return t[n]=e|0,RN.bytes=n-r+1,t}var eH=ag,tH=128,W1=127;function ag(e,r){var n=0,r=r||0,s=0,i=r,o,a=e.length;do{if(i>=a)throw ag.bytes=0,new RangeError("Could not decode varint");o=e[i++],n+=s<28?(o&W1)<<s:(o&W1)*Math.pow(2,s),s+=7}while(o>=tH);return ag.bytes=i-r,n}var nH=Math.pow(2,7),rH=Math.pow(2,14),iH=Math.pow(2,21),sH=Math.pow(2,28),oH=Math.pow(2,35),aH=Math.pow(2,42),cH=Math.pow(2,49),uH=Math.pow(2,56),lH=Math.pow(2,63),dH=function(e){return e<nH?1:e<rH?2:e<iH?3:e<sH?4:e<oH?5:e<aH?6:e<cH?7:e<uH?8:e<lH?9:10},hH={encode:$7,decode:eH,encodingLength:dH},BN=hH;const X1=(e,t,n=0)=>(BN.encode(e,t,n),t),Q1=e=>BN.encodingLength(e),cg=(e,t)=>{const n=t.byteLength,r=Q1(e),s=r+Q1(n),i=new Uint8Array(s+n);return X1(e,i,0),X1(n,i,r),i.set(t,s),new fH(e,n,t,i)};class fH{constructor(t,n,r,s){this.code=t,this.size=n,this.digest=r,this.bytes=s}}const UN=({name:e,code:t,encode:n})=>new pH(e,t,n);class pH{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?cg(this.code,n):n.then(r=>cg(this.code,r))}else throw Error("Unknown type, must be binary type")}}const zN=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),gH=UN({name:"sha2-256",code:18,encode:zN("SHA-256")}),yH=UN({name:"sha2-512",code:19,encode:zN("SHA-512")});var mH=Object.freeze({__proto__:null,sha256:gH,sha512:yH});const FN=0,wH="identity",HN=jN,bH=e=>cg(FN,HN(e)),vH={code:FN,name:wH,encode:HN,digest:bH};var EH=Object.freeze({__proto__:null,identity:vH});new TextEncoder,new TextDecoder;const $1={...p7,...y7,...w7,...v7,...S7,...C7,...k7,...U7,...q7,...Q7};({...mH,...EH});function VN(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function AH(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?VN(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function qN(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const Z1=qN("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),np=qN("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=AH(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),SH={utf8:Z1,"utf-8":Z1,hex:$1.base16,latin1:np,ascii:np,binary:np,...$1};function TH(e,t="utf8"){const n=SH[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?VN(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}var MH=Object.defineProperty,NH=(e,t,n)=>t in e?MH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,br=(e,t,n)=>NH(e,typeof t!="symbol"?t+"":t,n);class IH{constructor(t,n){this.core=t,this.logger=n,br(this,"keychain",new Map),br(this,"name",N9),br(this,"version",I9),br(this,"initialized",!1),br(this,"storagePrefix",xr),br(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),br(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),br(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),br(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=Ee("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),br(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=t,this.logger=Bn(n,this.name)}get context(){return _n(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,Gp(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Kp(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=Ee("NOT_INITIALIZED",this.name);throw new Error(t)}}}var _H=Object.defineProperty,OH=(e,t,n)=>t in e?_H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xt=(e,t,n)=>OH(e,typeof t!="symbol"?t+"":t,n);class DH{constructor(t,n,r){this.core=t,this.logger=n,xt(this,"name",T9),xt(this,"keychain"),xt(this,"randomSessionIdentifier",rg()),xt(this,"initialized",!1),xt(this,"clientId"),xt(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),xt(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),xt(this,"getClientId",async()=>{if(this.isInitialized(),this.clientId)return this.clientId;const s=await this.getClientSeed(),i=pE(s),o=l2(i.publicKey);return this.clientId=o,o}),xt(this,"generateKeyPair",()=>{this.isInitialized();const s=Pz();return this.setPrivateKey(s.publicKey,s.privateKey)}),xt(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=pE(i),a=this.randomSessionIdentifier;return await aP(a,s,M9,o)}),xt(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),u=kz(a,i);return this.setSymKey(u,o)}),xt(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||Jl(s);return await this.keychain.set(o,s),o}),xt(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),xt(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),xt(this,"encode",async(s,i,o)=>{this.isInitialized();const a=vN(o),u=eo(i);if(M1(a))return Uz(u,o?.encoding);if(T1(a)){const f=a.senderPublicKey,h=a.receiverPublicKey;s=await this.generateSharedKey(f,h)}const c=this.getSymKey(s),{type:l,senderPublicKey:d}=a;return Rz({type:l,symKey:c,message:u,senderPublicKey:d,encoding:o?.encoding})}),xt(this,"decode",async(s,i,o)=>{this.isInitialized();const a=Fz(i,o);if(M1(a)){const u=zz(i,o?.encoding);return Zo(u)}if(T1(a)){const u=a.receiverPublicKey,c=a.senderPublicKey;s=await this.generateSharedKey(u,c)}try{const u=this.getSymKey(s),c=Bz({symKey:u,encoded:i,encoding:o?.encoding});return Zo(c)}catch(u){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(u)}}),xt(this,"getPayloadType",(s,i=En)=>{const o=Ou({encoded:s,encoding:i});return io(o.type)}),xt(this,"getPayloadSenderPublicKey",(s,i=En)=>{const o=Ou({encoded:s,encoding:i});return o.senderPublicKey?Tn(o.senderPublicKey,hn):void 0}),this.core=t,this.logger=Bn(n,this.name),this.keychain=r||new IH(this.core,this.logger)}get context(){return _n(this.logger)}async setPrivateKey(t,n){return await this.keychain.set(t,n),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(G1)}catch{t=rg(),await this.keychain.set(G1,t)}return TH(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=Ee("NOT_INITIALIZED",this.name);throw new Error(t)}}}var xH=Object.defineProperty,LH=Object.defineProperties,CH=Object.getOwnPropertyDescriptors,J1=Object.getOwnPropertySymbols,jH=Object.prototype.hasOwnProperty,PH=Object.prototype.propertyIsEnumerable,ug=(e,t,n)=>t in e?xH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kH=(e,t)=>{for(var n in t||(t={}))jH.call(t,n)&&ug(e,n,t[n]);if(J1)for(var n of J1(t))PH.call(t,n)&&ug(e,n,t[n]);return e},RH=(e,t)=>LH(e,CH(t)),Ln=(e,t,n)=>ug(e,typeof t!="symbol"?t+"":t,n);class BH extends s3{constructor(t,n){super(t,n),this.logger=t,this.core=n,Ln(this,"messages",new Map),Ln(this,"messagesWithoutClientAck",new Map),Ln(this,"name",_9),Ln(this,"version",O9),Ln(this,"initialized",!1),Ln(this,"storagePrefix",xr),Ln(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Ln(this,"set",async(r,s,i)=>{this.isInitialized();const o=Yn(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===ed.inbound){const u=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,RH(kH({},u),{[o]:s}))}return await this.persist(),o}),Ln(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),Ln(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),Ln(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Yn(s);return typeof i[o]<"u"}),Ln(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Yn(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),Ln(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Bn(t,this.name),this.core=n}get context(){return _n(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,Gp(t))}async setRelayerMessagesWithoutClientAck(t){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Gp(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Kp(t):void 0}async getRelayerMessagesWithoutClientAck(){const t=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof t<"u"?Kp(t):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:t}=Ee("NOT_INITIALIZED",this.name);throw new Error(t)}}}var UH=Object.defineProperty,zH=Object.defineProperties,FH=Object.getOwnPropertyDescriptors,eA=Object.getOwnPropertySymbols,HH=Object.prototype.hasOwnProperty,VH=Object.prototype.propertyIsEnumerable,lg=(e,t,n)=>t in e?UH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ko=(e,t)=>{for(var n in t||(t={}))HH.call(t,n)&&lg(e,n,t[n]);if(eA)for(var n of eA(t))VH.call(t,n)&&lg(e,n,t[n]);return e},tA=(e,t)=>zH(e,FH(t)),Hn=(e,t,n)=>lg(e,typeof t!="symbol"?t+"":t,n);class qH extends o3{constructor(t,n){super(t,n),this.relayer=t,this.logger=n,Hn(this,"events",new In.EventEmitter),Hn(this,"name",x9),Hn(this,"queue",new Map),Hn(this,"publishTimeout",Ae.toMiliseconds(Ae.ONE_MINUTE)),Hn(this,"initialPublishTimeout",Ae.toMiliseconds(Ae.ONE_SECOND*15)),Hn(this,"needsTransportRestart",!1),Hn(this,"publish",async(r,s,i)=>{var o,a,u,c,l;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const d=i?.ttl||D9,f=i?.prompt||!1,h=i?.tag||0,p=i?.id||Gi().toString(),g=qo(Td().protocol),y={id:p,method:i?.publishMethod||g.publish,params:ko({topic:r,message:s,ttl:d,prompt:f,tag:h,attestation:i?.attestation},i?.tvf)},b=`Failed to publish payload, please try again. id:${p} tag:${h}`;try{Ot((o=y.params)==null?void 0:o.prompt)&&((a=y.params)==null||delete a.prompt),Ot((u=y.params)==null?void 0:u.tag)&&((c=y.params)==null||delete c.tag);const A=new Promise(async E=>{const _=({id:I})=>{var D;((D=y.id)==null?void 0:D.toString())===I.toString()&&(this.removeRequestFromQueue(I),this.relayer.events.removeListener(mt.publish,_),E())};this.relayer.events.on(mt.publish,_);const S=Or(new Promise((I,D)=>{this.rpcPublish(y,i).then(I).catch(L=>{this.logger.warn(L,L?.message),D(L)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${p} tag:${h}`);try{await S,this.events.removeListener(mt.publish,_)}catch(I){this.queue.set(p,{request:y,opts:i,attempt:1}),this.logger.warn(I,I?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:p,topic:r,message:s,opts:i}}),await Or(A,this.publishTimeout,b)}catch(A){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(A),(l=i?.internal)!=null&&l.throwOnFailedPublish)throw A}finally{this.queue.delete(p)}}),Hn(this,"publishCustom",async r=>{var s,i,o,a,u;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:r});const{payload:c,opts:l={}}=r,{attestation:d,tvf:f,publishMethod:h,prompt:p,tag:g,ttl:y=Ae.FIVE_MINUTES}=l,b=l.id||Gi().toString(),A=qo(Td().protocol),E=h||A.publish,_={id:b,method:E,params:ko(tA(ko({},c),{ttl:y,prompt:p,tag:g,attestation:d}),f)},S=`Failed to publish custom payload, please try again. id:${b} tag:${g}`;try{Ot((s=_.params)==null?void 0:s.prompt)&&((i=_.params)==null||delete i.prompt),Ot((o=_.params)==null?void 0:o.tag)&&((a=_.params)==null||delete a.tag);const I=new Promise(async D=>{const L=({id:j})=>{var V;((V=_.id)==null?void 0:V.toString())===j.toString()&&(this.removeRequestFromQueue(j),this.relayer.events.removeListener(mt.publish,L),D())};this.relayer.events.on(mt.publish,L);const x=Or(new Promise((j,V)=>{this.rpcPublish(_,l).then(j).catch(Y=>{this.logger.warn(Y,Y?.message),V(Y)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${E} id:${b} tag:${g}`);try{await x,this.events.removeListener(mt.publish,L)}catch(j){this.queue.set(b,{request:_,opts:l,attempt:1}),this.logger.warn(j,j?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:b,payload:c,opts:l}}),await Or(I,this.publishTimeout,S)}catch(I){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(I),(u=l?.internal)!=null&&u.throwOnFailedPublish)throw I}finally{this.queue.delete(b)}}),Hn(this,"on",(r,s)=>{this.events.on(r,s)}),Hn(this,"once",(r,s)=>{this.events.once(r,s)}),Hn(this,"off",(r,s)=>{this.events.off(r,s)}),Hn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=t,this.logger=Bn(n,this.name),this.registerEventListeners()}get context(){return _n(this.logger)}async rpcPublish(t,n){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:t});const r=await this.relayer.request(t);return this.relayer.events.emit(mt.publish,ko(ko({},t),n)),this.logger.debug("Successfully Published Payload"),r}removeRequestFromQueue(t){this.queue.delete(t)}checkQueue(){this.queue.forEach(async(t,n)=>{var r;const s=t.attempt+1;this.queue.set(n,tA(ko({},t),{attempt:s})),this.logger.warn({},`Publisher: queue->publishing: ${t.request.id}, tag: ${(r=t.request.params)==null?void 0:r.tag}, attempt: ${s}`),await this.rpcPublish(t.request,t.opts),this.logger.warn({},`Publisher: queue->published: ${t.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(ho.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(mt.connection_stalled);return}this.checkQueue()}),this.relayer.on(mt.message_ack,t=>{this.removeRequestFromQueue(t.id.toString())})}}var GH=Object.defineProperty,KH=(e,t,n)=>t in e?GH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ro=(e,t,n)=>KH(e,typeof t!="symbol"?t+"":t,n);class YH{constructor(){Ro(this,"map",new Map),Ro(this,"set",(t,n)=>{const r=this.get(t);this.exists(t,n)||this.map.set(t,[...r,n])}),Ro(this,"get",t=>this.map.get(t)||[]),Ro(this,"exists",(t,n)=>this.get(t).includes(n)),Ro(this,"delete",(t,n)=>{if(typeof n>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const r=this.get(t);if(!this.exists(t,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(t);return}this.map.set(t,s)}),Ro(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var WH=Object.defineProperty,XH=Object.defineProperties,QH=Object.getOwnPropertyDescriptors,nA=Object.getOwnPropertySymbols,$H=Object.prototype.hasOwnProperty,ZH=Object.prototype.propertyIsEnumerable,dg=(e,t,n)=>t in e?WH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ru=(e,t)=>{for(var n in t||(t={}))$H.call(t,n)&&dg(e,n,t[n]);if(nA)for(var n of nA(t))ZH.call(t,n)&&dg(e,n,t[n]);return e},rp=(e,t)=>XH(e,QH(t)),et=(e,t,n)=>dg(e,typeof t!="symbol"?t+"":t,n);class JH extends u3{constructor(t,n){super(t,n),this.relayer=t,this.logger=n,et(this,"subscriptions",new Map),et(this,"topicMap",new YH),et(this,"events",new In.EventEmitter),et(this,"name",B9),et(this,"version",U9),et(this,"pending",new Map),et(this,"cached",[]),et(this,"initialized",!1),et(this,"storagePrefix",xr),et(this,"subscribeTimeout",Ae.toMiliseconds(Ae.ONE_MINUTE)),et(this,"initialSubscribeTimeout",Ae.toMiliseconds(Ae.ONE_SECOND*15)),et(this,"clientId"),et(this,"batchSubscribeTopicsLimit",500),et(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),et(this,"subscribe",async(r,s)=>{var i;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const o=Td(s),a={topic:r,relay:o,transportType:s?.transportType};(i=s?.internal)!=null&&i.skipSubscribe||this.pending.set(r,a);const u=await this.rpcSubscribe(r,o,s);return typeof u=="string"&&(this.onSubscribe(u,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),u}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}}),et(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof s?.id<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),et(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),et(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),et(this,"on",(r,s)=>{this.events.on(r,s)}),et(this,"once",(r,s)=>{this.events.once(r,s)}),et(this,"off",(r,s)=>{this.events.off(r,s)}),et(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),et(this,"start",async()=>{await this.onConnect()}),et(this,"stop",async()=>{await this.onDisconnect()}),et(this,"restart",async()=>{await this.restore(),await this.onRestart()}),et(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),et(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(ho.pulse,async()=>{await this.checkPending()}),this.events.on(Cn.created,async r=>{const s=Cn.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Cn.deleted,async r=>{const s=Cn.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=t,this.logger=Bn(n,this.name),this.clientId=""}get context(){return _n(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(t,n){let r=!1;try{r=this.getSubscription(t).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,n){const r=this.topicMap.get(t);await Promise.all(r.map(async s=>await this.unsubscribeById(t,s,n)))}async unsubscribeById(t,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:n,opts:r}});try{const s=Td(r);await this.restartToComplete({topic:t,id:n,relay:s}),await this.rpcUnsubscribe(t,n,s);const i=pt("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(t,n,r){var s,i;const o=await this.getSubscriptionId(t);if((s=r?.internal)!=null&&s.skipSubscribe)return o;(!r||r?.transportType===ot.relay)&&await this.restartToComplete({topic:t,id:t,relay:n});const a={method:qo(n.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a});const u=(i=r?.internal)==null?void 0:i.throwOnFailedPublish;try{if(r?.transportType===ot.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(a).catch(d=>this.logger.warn(d))},Ae.toMiliseconds(Ae.ONE_SECOND)),o;const c=new Promise(async d=>{const f=h=>{h.topic===t&&(this.events.removeListener(Cn.created,f),d(h.id))};this.events.on(Cn.created,f);try{const h=await Or(new Promise((p,g)=>{this.relayer.request(a).catch(y=>{this.logger.warn(y,y?.message),g(y)}).then(p)}),this.initialSubscribeTimeout,`Subscribing to ${t} failed, please try again`);this.events.removeListener(Cn.created,f),d(h)}catch{}}),l=await Or(c,this.subscribeTimeout,`Subscribing to ${t} failed, please try again`);if(!l&&u)throw new Error(`Subscribing to ${t} failed, please try again`);return l?o:null}catch(c){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(mt.connection_stalled),u)throw c}return null}async rpcBatchSubscribe(t){if(!t.length)return;const n=t[0].relay,r={method:qo(n.protocol).batchSubscribe,params:{topics:t.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Or(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(mt.connection_stalled)}}async rpcBatchFetchMessages(t){if(!t.length)return;const n=t[0].relay,r={method:qo(n.protocol).batchFetchMessages,params:{topics:t.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Or(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(mt.connection_stalled)}return s}rpcUnsubscribe(t,n,r){const s={method:qo(r.protocol).unsubscribe,params:{topic:t,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(t,n){this.setSubscription(t,rp(ru({},n),{id:t})),this.pending.delete(n.topic)}onBatchSubscribe(t){t.length&&t.forEach(n=>{this.setSubscription(n.id,ru({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(t,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,t)&&this.deleteSubscription(n,r),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:n}),this.addSubscription(t,n)}addSubscription(t,n){this.subscriptions.set(t,ru({},n)),this.topicMap.set(n.topic,t),this.events.emit(Cn.created,n)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const n=this.subscriptions.get(t);if(!n){const{message:r}=Ee("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(r)}return n}deleteSubscription(t,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:n});const r=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(r.topic,t),this.events.emit(Cn.deleted,rp(ru({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Cn.sync)}async onRestart(){if(this.cached.length){const t=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=t.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Cn.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size&&!t.every(n=>{var r;return n.topic===((r=this.subscriptions.get(n.id))==null?void 0:r.topic)})){const{message:n}=Ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){t.length&&(await this.rpcBatchSubscribe(t),this.onBatchSubscribe(await Promise.all(t.map(async n=>rp(ru({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(t){if(!t.length)return;this.logger.trace(`Fetching batch messages for ${t.length} subscriptions`);const n=await this.rpcBatchFetchMessages(t);n&&n.messages&&(await r6(Ae.toMiliseconds(Ae.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:t}=Ee("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(t){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(t),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(t){return Yn(t+await this.getClientId())}}var eV=Object.defineProperty,rA=Object.getOwnPropertySymbols,tV=Object.prototype.hasOwnProperty,nV=Object.prototype.propertyIsEnumerable,hg=(e,t,n)=>t in e?eV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iA=(e,t)=>{for(var n in t||(t={}))tV.call(t,n)&&hg(e,n,t[n]);if(rA)for(var n of rA(t))nV.call(t,n)&&hg(e,n,t[n]);return e},Ge=(e,t,n)=>hg(e,typeof t!="symbol"?t+"":t,n);class rV extends a3{constructor(t){var n;super(t),Ge(this,"protocol","wc"),Ge(this,"version",2),Ge(this,"core"),Ge(this,"logger"),Ge(this,"events",new In.EventEmitter),Ge(this,"provider"),Ge(this,"messages"),Ge(this,"subscriber"),Ge(this,"publisher"),Ge(this,"name",C9),Ge(this,"transportExplicitlyClosed",!1),Ge(this,"initialized",!1),Ge(this,"connectionAttemptInProgress",!1),Ge(this,"relayUrl"),Ge(this,"projectId"),Ge(this,"packageName"),Ge(this,"bundleId"),Ge(this,"hasExperiencedNetworkDisruption",!1),Ge(this,"pingTimeout"),Ge(this,"heartBeatTimeout",Ae.toMiliseconds(Ae.THIRTY_SECONDS+Ae.FIVE_SECONDS)),Ge(this,"reconnectTimeout"),Ge(this,"connectPromise"),Ge(this,"reconnectInProgress",!1),Ge(this,"requestsInFlight",[]),Ge(this,"connectTimeout",Ae.toMiliseconds(Ae.ONE_SECOND*15)),Ge(this,"request",async r=>{var s,i;this.logger.debug("Publishing Request Payload");const o=r.id||Gi().toString();await this.toEstablishConnection();try{this.logger.trace({id:o,method:r.method,topic:(s=r.params)==null?void 0:s.topic},"relayer.request - publishing...");const a=`${o}:${((i=r.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(a);const u=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==a),u}catch(a){throw this.logger.debug(`Failed to Publish Request: ${o}`),a}}),Ge(this,"resetPingTimeout",()=>{wd()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,s,i,o;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(o=(i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null?void 0:i.terminate)==null||o.call(i)}catch(a){this.logger.warn(a,a?.message)}},this.heartBeatTimeout))}),Ge(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),Ge(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(mt.connect)}),Ge(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),Ge(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(mt.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Ge(this,"registerProviderListeners",()=>{this.provider.on(Fn.payload,this.onPayloadHandler),this.provider.on(Fn.connect,this.onConnectHandler),this.provider.on(Fn.disconnect,this.onDisconnectHandler),this.provider.on(Fn.error,this.onProviderErrorHandler)}),this.core=t.core,this.logger=TN({logger:(n=t.logger)!=null?n:L9,name:this.name}),this.messages=new BH(this.logger,t.core),this.subscriber=new JH(this,this.logger),this.publisher=new qH(this,this.logger),this.projectId=t?.projectId,this.relayUrl=t?.relayUrl||LN,FU()?this.packageName=KE():HU()&&(this.bundleId=KE()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(t=>this.logger.warn(t,t?.message))}get context(){return _n(this.logger)}get connected(){var t,n,r;return((r=(n=(t=this.provider)==null?void 0:t.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var t,n,r;return((r=(n=(t=this.provider)==null?void 0:t.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(t,n,r){this.isInitialized(),await this.publisher.publish(t,n,r),await this.recordMessageEvent({topic:t,message:n,publishedAt:Date.now(),transportType:ot.relay},ed.outbound)}async publishCustom(t){this.isInitialized(),await this.publisher.publishCustom(t)}async subscribe(t,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||n?.transportType==="relay")&&await this.toEstablishConnection();const o=typeof((r=n?.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n?.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(t))==null?void 0:i[0])||"",u;const c=l=>{l.topic===t&&(this.subscriber.off(Cn.created,c),u())};return await Promise.all([new Promise(l=>{u=l,this.subscriber.on(Cn.created,c)}),new Promise(async(l,d)=>{a=await this.subscriber.subscribe(t,iA({internal:{throwOnFailedPublish:o}},n)).catch(f=>{o&&d(f)})||a,l()})]),a}async unsubscribe(t,n){this.isInitialized(),await this.subscriber.unsubscribe(t,n)}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Or(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(t){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(t).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(t){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=t||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await B1())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(t){if(t?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=t.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+s?.message)}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(t,n){const{topic:r}=t;if(!n.sessionExists){const s=Nt(Ae.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(mt.message,t),await this.recordMessageEvent(t,ed.inbound)}async connect(t){await this.confirmOnlineStateOrThrow(),t&&t!==this.relayUrl&&(this.relayUrl=t,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(Fn.disconnect,i),await Or(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Fn.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const u=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Fn.disconnect,u),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Fn.disconnect,u)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,Ae.toMiliseconds(n*1))),n++}}startPingTimeout(){var t,n,r,s,i;if(wd())try{(n=(t=this.provider)==null?void 0:t.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new m9(new E9(YU({sdkVersion:og,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(t,n){const{topic:r,message:s}=t;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(t){const{topic:n,message:r}=t;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),Y0(t)){if(!t.method.endsWith(j9))return;const n=t.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:ot.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(iA({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(t),await this.onMessageEvent(a)}else Lh(t)&&this.events.emit(mt.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(await this.recordMessageEvent(t,ed.inbound),this.events.emit(mt.message,t))}async acknowledgePayload(t){const n=Nd(t.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Fn.payload,this.onPayloadHandler),this.provider.off(Fn.connect,this.onConnectHandler),this.provider.off(Fn.disconnect,this.onDisconnectHandler),this.provider.off(Fn.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let t=await B1();FF(async n=>{t!==n&&(t=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(ho.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&qF())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(mt.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(t=>this.logger.error(t,t?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},Ae.toMiliseconds(P9)))))}isInitialized(){if(!this.initialized){const{message:t}=Ee("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function iV(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}function sA(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function oA(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const sV="[object RegExp]",oV="[object String]",aV="[object Number]",cV="[object Boolean]",aA="[object Arguments]",uV="[object Symbol]",lV="[object Date]",dV="[object Map]",hV="[object Set]",fV="[object Array]",pV="[object Function]",gV="[object ArrayBuffer]",ip="[object Object]",yV="[object Error]",mV="[object DataView]",wV="[object Uint8Array]",bV="[object Uint8ClampedArray]",vV="[object Uint16Array]",EV="[object Uint32Array]",AV="[object BigUint64Array]",SV="[object Int8Array]",TV="[object Int16Array]",MV="[object Int32Array]",NV="[object BigInt64Array]",IV="[object Float32Array]",_V="[object Float64Array]";function OV(){}function cA(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype||Object.getPrototypeOf(t)===null?Object.prototype.toString.call(e)==="[object Object]":!1}function DV(e,t,n){return pu(e,t,void 0,void 0,void 0,void 0,n)}function pu(e,t,n,r,s,i,o){const a=o(e,t,n,r,s,i);if(a!==void 0)return a;if(typeof e==typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return e===t;case"number":return e===t||Object.is(e,t);case"function":return e===t;case"object":return vu(e,t,i,o)}return vu(e,t,i,o)}function vu(e,t,n,r){if(Object.is(e,t))return!0;let s=oA(e),i=oA(t);if(s===aA&&(s=ip),i===aA&&(i=ip),s!==i)return!1;switch(s){case oV:return e.toString()===t.toString();case aV:{const u=e.valueOf(),c=t.valueOf();return iV(u,c)}case cV:case lV:case uV:return Object.is(e.valueOf(),t.valueOf());case sV:return e.source===t.source&&e.flags===t.flags;case pV:return e===t}n=n??new Map;const o=n.get(e),a=n.get(t);if(o!=null&&a!=null)return o===t;n.set(e,t),n.set(t,e);try{switch(s){case dV:{if(e.size!==t.size)return!1;for(const[u,c]of e.entries())if(!t.has(u)||!pu(c,t.get(u),u,e,t,n,r))return!1;return!0}case hV:{if(e.size!==t.size)return!1;const u=Array.from(e.values()),c=Array.from(t.values());for(let l=0;l<u.length;l++){const d=u[l],f=c.findIndex(h=>pu(d,h,void 0,e,t,n,r));if(f===-1)return!1;c.splice(f,1)}return!0}case fV:case wV:case bV:case vV:case EV:case AV:case SV:case TV:case MV:case NV:case IV:case _V:{if(typeof De.Buffer<"u"&&De.Buffer.isBuffer(e)!==De.Buffer.isBuffer(t)||e.length!==t.length)return!1;for(let u=0;u<e.length;u++)if(!pu(e[u],t[u],u,e,t,n,r))return!1;return!0}case gV:return e.byteLength!==t.byteLength?!1:vu(new Uint8Array(e),new Uint8Array(t),n,r);case mV:return e.byteLength!==t.byteLength||e.byteOffset!==t.byteOffset?!1:vu(new Uint8Array(e),new Uint8Array(t),n,r);case yV:return e.name===t.name&&e.message===t.message;case ip:{if(!(vu(e.constructor,t.constructor,n,r)||cA(e)&&cA(t)))return!1;const u=[...Object.keys(e),...sA(e)],c=[...Object.keys(t),...sA(t)];if(u.length!==c.length)return!1;for(let l=0;l<u.length;l++){const d=u[l],f=e[d];if(!Object.hasOwn(t,d))return!1;const h=t[d];if(!pu(f,h,d,e,t,n,r))return!1}return!0}default:return!1}}finally{n.delete(e),n.delete(t)}}function xV(e,t){return DV(e,t,OV)}var LV=Object.defineProperty,uA=Object.getOwnPropertySymbols,CV=Object.prototype.hasOwnProperty,jV=Object.prototype.propertyIsEnumerable,fg=(e,t,n)=>t in e?LV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lA=(e,t)=>{for(var n in t||(t={}))CV.call(t,n)&&fg(e,n,t[n]);if(uA)for(var n of uA(t))jV.call(t,n)&&fg(e,n,t[n]);return e},yn=(e,t,n)=>fg(e,typeof t!="symbol"?t+"":t,n);class yo extends c3{constructor(t,n,r,s=xr,i=void 0){super(t,n,r,s),this.core=t,this.logger=n,this.name=r,yn(this,"map",new Map),yn(this,"version",k9),yn(this,"cached",[]),yn(this,"initialized",!1),yn(this,"getKey"),yn(this,"storagePrefix",xr),yn(this,"recentlyDeleted",[]),yn(this,"recentlyDeletedLimit",200),yn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Ot(o)?this.map.set(this.getKey(o),o):wF(o)?this.map.set(o.id,o):bF(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),yn(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),yn(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),yn(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(u=>xV(a[u],o[u]))):this.values)),yn(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const u=lA(lA({},this.getData(o)),a);this.map.set(o,u),await this.persist()}),yn(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Bn(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return _n(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(t){this.recentlyDeleted.push(t),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const n=this.map.get(t);if(!n){if(this.recentlyDeleted.includes(t)){const{message:s}=Ee("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}const{message:r}=Ee("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:n}=Ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=Ee("NOT_INITIALIZED",this.name);throw new Error(t)}}}var PV=Object.defineProperty,kV=(e,t,n)=>t in e?PV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ue=(e,t,n)=>kV(e,typeof t!="symbol"?t+"":t,n);class RV{constructor(t,n){this.core=t,this.logger=n,Ue(this,"name",z9),Ue(this,"version",F9),Ue(this,"events",new r0),Ue(this,"pairings"),Ue(this,"initialized",!1),Ue(this,"storagePrefix",xr),Ue(this,"ignoredPayloadTypes",[ui]),Ue(this,"registeredMethods",[]),Ue(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Ue(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Ue(this,"create",async r=>{this.isInitialized();const s=rg(),i=await this.core.crypto.setSymKey(s),o=Nt(Ae.FIVE_MINUTES),a={protocol:xN},u={topic:i,expiry:o,relay:a,active:!1,methods:r?.methods},c=O1({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r?.methods});return this.events.emit(Ks.create,u),this.core.expirer.set(i,o),await this.pairings.set(i,u),await this.core.relayer.subscribe(i,{transportType:r?.transportType,internal:r?.internal}),{topic:i,uri:c}}),Ue(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r?.uri,trace:[Tr.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:u,methods:c}=_1(r.uri);s.props.properties.topic=i,s.addTrace(Tr.pairing_uri_validation_success),s.addTrace(Tr.pairing_uri_not_expired);let l;if(this.pairings.keys.includes(i)){if(l=this.pairings.get(i),s.addTrace(Tr.existing_pairing),l.active)throw s.setError(ti.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(Tr.pairing_not_expired)}const d=u||Nt(Ae.FIVE_MINUTES),f={topic:i,relay:a,expiry:d,active:!1,methods:c};this.core.expirer.set(i,d),await this.pairings.set(i,f),s.addTrace(Tr.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(Ks.create,f),s.addTrace(Tr.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(Tr.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(ti.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(h){throw s.setError(ti.subscribe_pairing_topic_failure),h}return s.addTrace(Tr.subscribe_pairing_topic_success),f}),Ue(this,"activate",async({topic:r})=>{this.isInitialized();const s=Nt(Ae.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Ue(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:u}=qs();this.events.once(Ye("pairing_ping",i),({error:c})=>{c?u(c):a()}),await o()}}),Ue(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Ue(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Ue(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Ue(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",pt("USER_DISCONNECTED")),await this.deletePairing(s))}),Ue(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,u=this.core.crypto.keychain.get(s);return O1({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:u,relay:i,expiryTimestamp:o,methods:a})}),Ue(this,"sendRequest",async(r,s,i)=>{const o=si(s,i),a=await this.core.crypto.encode(r,o),u=tu[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,u),o.id}),Ue(this,"sendResult",async(r,s,i)=>{const o=Nd(r,i),a=await this.core.crypto.encode(s,o),u=(await this.core.history.get(s,r)).request.method,c=tu[u].res;await this.core.relayer.publish(s,a,c),await this.core.history.resolve(o)}),Ue(this,"sendError",async(r,s,i)=>{const o=K0(r,i),a=await this.core.crypto.encode(s,o),u=(await this.core.history.get(s,r)).request.method,c=tu[u]?tu[u].res:tu.unregistered_method.res;await this.core.relayer.publish(s,a,c),await this.core.history.resolve(o)}),Ue(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,pt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Ue(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Ci(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Ue(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Ue(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;return o==="wc_pairingPing"?this.onPairingPingResponse(s,i):this.onUnknownRpcMethodResponse(o)}),Ue(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(Ks.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Ue(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Ir(s)?this.events.emit(Ye("pairing_ping",i),{}):Wn(s)&&this.events.emit(Ye("pairing_ping",i),{error:s.error})},500)}),Ue(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(Ks.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Ue(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=pt("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Ue(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(pt("WC_METHOD_UNSUPPORTED",r))}),Ue(this,"isValidPair",(r,s)=>{var i;if(!wn(r)){const{message:a}=Ee("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(ti.malformed_pairing_uri),new Error(a)}if(!mF(r.uri)){const{message:a}=Ee("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(ti.malformed_pairing_uri),new Error(a)}const o=_1(r?.uri);if(!((i=o?.relay)!=null&&i.protocol)){const{message:a}=Ee("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(ti.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Ee("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(ti.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&Ae.toMiliseconds(o?.expiryTimestamp)<Date.now()){s.setError(ti.pairing_expired);const{message:a}=Ee("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Ue(this,"isValidPing",async r=>{if(!wn(r)){const{message:i}=Ee("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Ue(this,"isValidDisconnect",async r=>{if(!wn(r)){const{message:i}=Ee("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Ue(this,"isValidPairingTopic",async r=>{if(!Et(r,!1)){const{message:s}=Ee("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=Ee("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Ci(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=Ee("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=t,this.logger=Bn(n,this.name),this.pairings=new yo(this.core,this.logger,this.name,this.storagePrefix)}get context(){return _n(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=Ee("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(mt.message,async t=>{const{topic:n,message:r,transportType:s}=t;if(this.pairings.keys.includes(n)&&s!==ot.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);Y0(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):Lh(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(qn.expired,async t=>{const{topic:n}=SM(t.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Ks.expire,{topic:n}))})}}var BV=Object.defineProperty,UV=(e,t,n)=>t in e?BV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vt=(e,t,n)=>UV(e,typeof t!="symbol"?t+"":t,n);class zV extends i3{constructor(t,n){super(t,n),this.core=t,this.logger=n,Vt(this,"records",new Map),Vt(this,"events",new In.EventEmitter),Vt(this,"name",H9),Vt(this,"version",V9),Vt(this,"cached",[]),Vt(this,"initialized",!1),Vt(this,"storagePrefix",xr),Vt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Vt(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:Nt(Ae.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(sr.created,o)}),Vt(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Wn(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(sr.updated,s))}),Vt(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),Vt(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(sr.deleted,i)}}),this.persist()}),Vt(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),Vt(this,"on",(r,s)=>{this.events.on(r,s)}),Vt(this,"once",(r,s)=>{this.events.once(r,s)}),Vt(this,"off",(r,s)=>{this.events.off(r,s)}),Vt(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Bn(n,this.name)}get context(){return _n(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:si(n.request.method,n.request.params,n.id),chainId:n.chainId};return t.push(r)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const n=this.records.get(t);if(!n){const{message:r}=Ee("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(sr.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:n}=Ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(sr.created,t=>{const n=sr.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t})}),this.events.on(sr.updated,t=>{const n=sr.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t})}),this.events.on(sr.deleted,t=>{const n=sr.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t})}),this.core.heartbeat.on(ho.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let t=!1;this.records.forEach(n=>{Ae.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(sr.deleted,n,!1),t=!0)}),t&&this.persist()}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=Ee("NOT_INITIALIZED",this.name);throw new Error(t)}}}var FV=Object.defineProperty,HV=(e,t,n)=>t in e?FV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tn=(e,t,n)=>HV(e,typeof t!="symbol"?t+"":t,n);class VV extends l3{constructor(t,n){super(t,n),this.core=t,this.logger=n,tn(this,"expirations",new Map),tn(this,"events",new In.EventEmitter),tn(this,"name",q9),tn(this,"version",G9),tn(this,"cached",[]),tn(this,"initialized",!1),tn(this,"storagePrefix",xr),tn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),tn(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),tn(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(qn.created,{target:i,expiration:o})}),tn(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),tn(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(qn.deleted,{target:s,expiration:i})}}),tn(this,"on",(r,s)=>{this.events.on(r,s)}),tn(this,"once",(r,s)=>{this.events.once(r,s)}),tn(this,"off",(r,s)=>{this.events.off(r,s)}),tn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Bn(n,this.name)}get context(){return _n(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return WU(t);if(typeof t=="number")return XU(t);const{message:n}=Ee("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(n)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(qn.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:n}=Ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const n=this.expirations.get(t);if(!n){const{message:r}=Ee("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(t,n){const{expiry:r}=n;Ae.toMiliseconds(r)-Date.now()<=0&&this.expire(t,n)}expire(t,n){this.expirations.delete(t),this.events.emit(qn.expired,{target:t,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,n)=>this.checkExpiry(n,t))}registerEventListeners(){this.core.heartbeat.on(ho.pulse,()=>this.checkExpirations()),this.events.on(qn.created,t=>{const n=qn.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()}),this.events.on(qn.expired,t=>{const n=qn.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()}),this.events.on(qn.deleted,t=>{const n=qn.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=Ee("NOT_INITIALIZED",this.name);throw new Error(t)}}}var qV=Object.defineProperty,GV=(e,t,n)=>t in e?qV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vt=(e,t,n)=>GV(e,typeof t!="symbol"?t+"":t,n);class KV extends d3{constructor(t,n,r){super(t,n,r),this.core=t,this.logger=n,this.store=r,vt(this,"name",K9),vt(this,"abortController"),vt(this,"isDevEnv"),vt(this,"verifyUrlV3",W9),vt(this,"storagePrefix",xr),vt(this,"version",DN),vt(this,"publicKey"),vt(this,"fetchPromise"),vt(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Ae.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),vt(this,"register",async s=>{if(!da()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,u=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const c=to(),l=this.startAbortTimer(Ae.ONE_SECOND*5),d=await new Promise((f,h)=>{const p=()=>{window.removeEventListener("message",y),c.body.removeChild(g),h("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=c.createElement("iframe");g.src=u,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const y=b=>{if(b.data&&typeof b.data=="string")try{const A=JSON.parse(b.data);if(A.type==="verify_attestation"){if(Pp(A.attestation).payload.id!==o)return;clearInterval(l),c.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",y),f(A.attestation===null?"":A.attestation)}}catch(A){this.logger.warn(A)}};c.body.appendChild(g),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug(d,"jwt attestation"),d}catch(c){this.logger.warn(c)}return""}),vt(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(Pp(i).payload.id!==a)return;const c=await this.isValidJwtAttestation(i);if(c){if(!c.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return c}}if(!o)return;const u=this.getVerifyUrl(s?.verifyUrl);return this.fetchAttestation(o,u)}),vt(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(Ae.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),vt(this,"getVerifyUrl",s=>{let i=s||bu;return X9.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${bu}`),i=bu),i}),vt(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(Ae.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),vt(this,"persistPublicKey",async s=>{this.logger.debug(s,"persisting public key to local storage"),await this.store.setItem(this.storeKey,s),this.publicKey=s}),vt(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),vt(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),vt(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),vt(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),vt(this,"validateAttestation",(s,i)=>{const o=Vz(s,i.publicKey),a={hasExpired:Ae.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Bn(n,this.name),this.abortController=new AbortController,this.isDevEnv=C0(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return _n(this.logger)}startAbortTimer(t){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Ae.toMiliseconds(t))}}var YV=Object.defineProperty,WV=(e,t,n)=>t in e?YV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dA=(e,t,n)=>WV(e,typeof t!="symbol"?t+"":t,n);class XV extends h3{constructor(t,n){super(t,n),this.projectId=t,this.logger=n,dA(this,"context",Q9),dA(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,u=`${$9}/${this.projectId}/clients`;await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Bn(n,this.context)}}var QV=Object.defineProperty,hA=Object.getOwnPropertySymbols,$V=Object.prototype.hasOwnProperty,ZV=Object.prototype.propertyIsEnumerable,pg=(e,t,n)=>t in e?QV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iu=(e,t)=>{for(var n in t||(t={}))$V.call(t,n)&&pg(e,n,t[n]);if(hA)for(var n of hA(t))ZV.call(t,n)&&pg(e,n,t[n]);return e},Lt=(e,t,n)=>pg(e,typeof t!="symbol"?t+"":t,n);class JV extends f3{constructor(t,n,r=!0){super(t,n,r),this.core=t,this.logger=n,Lt(this,"context",J9),Lt(this,"storagePrefix",xr),Lt(this,"storageVersion",Z9),Lt(this,"events",new Map),Lt(this,"shouldPersist",!1),Lt(this,"init",async()=>{if(!C0())try{const s={eventId:WE(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:EM(this.core.relayer.protocol,this.core.relayer.version,og)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Lt(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:u}}=s,c=WE(),l=this.core.projectId||"",d=Date.now(),f=iu({eventId:c,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:u}},bundleId:l,domain:this.getAppDomain()},this.setMethods(c));return this.telemetryEnabled&&(this.events.set(c,f),this.shouldPersist=!0),f}),Lt(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(u=>u.props.properties.topic===o);if(a)return iu(iu({},a),this.setMethods(a.eventId))}),Lt(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Lt(this,"setEventListeners",()=>{this.core.heartbeat.on(ho.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{Ae.fromMiliseconds(Date.now())-Ae.fromMiliseconds(s.timestamp)>e7&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Lt(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Lt(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Lt(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Lt(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Lt(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,iu(iu({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Lt(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Lt(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${t7}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${og}${i}`,{method:"POST",body:JSON.stringify(s)})}),Lt(this,"getAppDomain",()=>vM().url),this.logger=Bn(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var eq=Object.defineProperty,fA=Object.getOwnPropertySymbols,tq=Object.prototype.hasOwnProperty,nq=Object.prototype.propertyIsEnumerable,gg=(e,t,n)=>t in e?eq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pA=(e,t)=>{for(var n in t||(t={}))tq.call(t,n)&&gg(e,n,t[n]);if(fA)for(var n of fA(t))nq.call(t,n)&&gg(e,n,t[n]);return e},tt=(e,t,n)=>gg(e,typeof t!="symbol"?t+"":t,n);class W0 extends e3{constructor(t){var n;super(t),tt(this,"protocol",ON),tt(this,"version",DN),tt(this,"name",sg),tt(this,"relayUrl"),tt(this,"projectId"),tt(this,"customStoragePrefix"),tt(this,"events",new In.EventEmitter),tt(this,"logger"),tt(this,"heartbeat"),tt(this,"relayer"),tt(this,"crypto"),tt(this,"storage"),tt(this,"history"),tt(this,"expirer"),tt(this,"pairing"),tt(this,"verify"),tt(this,"echoClient"),tt(this,"linkModeSupportedApps"),tt(this,"eventClient"),tt(this,"initialized",!1),tt(this,"logChunkController"),tt(this,"on",(a,u)=>this.events.on(a,u)),tt(this,"once",(a,u)=>this.events.once(a,u)),tt(this,"off",(a,u)=>this.events.off(a,u)),tt(this,"removeListener",(a,u)=>this.events.removeListener(a,u)),tt(this,"dispatchEnvelope",({topic:a,message:u,sessionExists:c})=>{if(!a||!u)return;const l={topic:a,message:u,publishedAt:Date.now(),transportType:ot.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:c})});const r=this.getGlobalCore(t?.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=t?.projectId,this.relayUrl=t?.relayUrl||LN,this.customStoragePrefix=t!=null&&t.customStoragePrefix?`:${t.customStoragePrefix}`:"";const s=YC({level:typeof t?.logger=="string"&&t.logger?t.logger:A9.logger,name:sg}),{logger:i,chunkLoggerController:o}=PT({opts:s,maxSizeInBytes:t?.maxLogBlobSizeInBytes,loggerOverride:t?.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,u;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((u=this.logChunkController)==null||u.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Bn(i,this.name),this.heartbeat=new IL,this.crypto=new DH(this,this.logger,t?.keychain),this.history=new zV(this,this.logger),this.expirer=new VV(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new uC(pA(pA({},S9),t?.storageOptions)),this.relayer=new rV({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new RV(this,this.logger),this.verify=new KV(this,this.logger,this.storage),this.echoClient=new XV(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new JV(this,this.logger,t?.telemetryEnabled),this.setGlobalCore(this)}static async init(t){const n=new W0(t);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(R9,r),n}get context(){return _n(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var t;return(t=this.logChunkController)==null?void 0:t.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(t){this.linkModeSupportedApps.includes(t)||(this.linkModeSupportedApps.push(t),await this.storage.setItem(K1,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(K1)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(t,`Core Initialization Failure at epoch ${Date.now()}`),this.logger.error(t.message),t}}getGlobalCore(t=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${t}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(t){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=t.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=t}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&ci.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}}const rq=W0,GN="wc",KN=2,YN="client",X0=`${GN}@${KN}:${YN}:`,sp={name:YN,logger:"error"},gA="WALLETCONNECT_DEEPLINK_CHOICE",iq="proposal",yA="Proposal expired",sq="session",Bo=Ae.SEVEN_DAYS,oq="engine",qt={wc_sessionPropose:{req:{ttl:Ae.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Ae.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Ae.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Ae.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Ae.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Ae.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Ae.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Ae.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Ae.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Ae.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Ae.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Ae.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Ae.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1119}}},op={min:Ae.FIVE_MINUTES,max:Ae.SEVEN_DAYS},vr={idle:"IDLE",active:"ACTIVE"},aq={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},cq="request",uq=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],lq="wc",dq="auth",hq="authKeys",fq="pairingTopics",pq="requests",jh=`${lq}@${1.5}:${dq}:`,td=`${jh}:PUB_KEY`;var gq=Object.defineProperty,yq=Object.defineProperties,mq=Object.getOwnPropertyDescriptors,mA=Object.getOwnPropertySymbols,wq=Object.prototype.hasOwnProperty,bq=Object.prototype.propertyIsEnumerable,yg=(e,t,n)=>t in e?gq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,We=(e,t)=>{for(var n in t||(t={}))wq.call(t,n)&&yg(e,n,t[n]);if(mA)for(var n of mA(t))bq.call(t,n)&&yg(e,n,t[n]);return e},nn=(e,t)=>yq(e,mq(t)),be=(e,t,n)=>yg(e,typeof t!="symbol"?t+"":t,n);class vq extends m3{constructor(t){super(t),be(this,"name",oq),be(this,"events",new r0),be(this,"initialized",!1),be(this,"requestQueue",{state:vr.idle,queue:[]}),be(this,"sessionRequestQueue",{state:vr.idle,queue:[]}),be(this,"emittedSessionRequests",new i6({limit:500})),be(this,"requestQueueDelay",Ae.ONE_SECOND),be(this,"expectedPairingMethodMap",new Map),be(this,"recentlyDeletedMap",new Map),be(this,"recentlyDeletedLimit",200),be(this,"relayMessageCache",[]),be(this,"pendingSessions",new Map),be(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(qt)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Ae.toMiliseconds(this.requestQueueDelay)))}),be(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=nn(We({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=hF(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:u,relays:c}=r;let l=s,d,f=!1;try{if(l){const I=this.client.core.pairing.pairings.get(l);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),f=I.active}}catch(I){throw this.client.logger.error(`connect() -> pairing.get(${l}) failed`),I}if(!l||!f){const{topic:I,uri:D}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});l=I,d=D}if(!l){const{message:I}=Ee("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(I)}const h=await this.client.core.crypto.generateKeyPair(),p=qt.wc_sessionPropose.req.ttl||Ae.FIVE_MINUTES,g=Nt(p),y=nn(We(We({requiredNamespaces:i,optionalNamespaces:o,relays:c??[{protocol:xN}],proposer:{publicKey:h,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:l},a&&{sessionProperties:a}),u&&{scopedProperties:u}),{id:Nr()}),b=Ye("session_connect",y.id),{reject:A,resolve:E,done:_}=qs(p,yA),S=({id:I})=>{I===y.id&&(this.client.events.off("proposal_expire",S),this.pendingSessions.delete(y.id),this.events.emit(b,{error:{message:yA,code:0}}))};return this.client.events.on("proposal_expire",S),this.events.once(b,({error:I,session:D})=>{this.client.events.off("proposal_expire",S),I?A(I):D&&E(D)}),await this.sendProposeSession({proposal:y,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:y.id}}}),await this.setProposal(y.id,y),{uri:d,approval:_}}),be(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),be(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n?.id)==null?void 0:r.toString(),trace:[or.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(x){throw o.setError(Us.no_internet_connection),x}try{await this.isValidProposalId(n?.id)}catch(x){throw this.client.logger.error(`approve() -> proposal.get(${n?.id}) failed`),o.setError(Us.proposal_not_found),x}try{await this.isValidApprove(n)}catch(x){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Us.session_approve_namespace_validation_failure),x}const{id:a,relayProtocol:u,namespaces:c,sessionProperties:l,scopedProperties:d,sessionConfig:f}=n,h=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:y,optionalNamespaces:b}=h;let A=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});A||(A=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:or.session_approve_started,properties:{topic:p,trace:[or.session_approve_started,or.session_namespaces_validation_success]}}));const E=await this.client.core.crypto.generateKeyPair(),_=g.publicKey,S=await this.client.core.crypto.generateSharedKey(E,_),I=We(We(We({relay:{protocol:u??"irn"},namespaces:c,controller:{publicKey:E,metadata:this.client.metadata},expiry:Nt(Bo)},l&&{sessionProperties:l}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),D=ot.relay;A.addTrace(or.subscribing_session_topic);try{await this.client.core.relayer.subscribe(S,{transportType:D,internal:{skipSubscribe:!0}})}catch(x){throw A.setError(Us.subscribe_session_topic_failure),x}A.addTrace(or.subscribe_session_topic_success);const L=nn(We({},I),{topic:S,requiredNamespaces:y,optionalNamespaces:b,pairingTopic:p,acknowledged:!1,self:I.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:E,transportType:ot.relay});await this.client.session.set(S,L),A.addTrace(or.store_session);try{await this.sendApproveSession({sessionTopic:S,proposal:h,pairingProposalResponse:{relay:{protocol:u??"irn"},responderPublicKey:E},sessionSettleRequest:I,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:a}}}),A.addTrace(or.session_approve_publish_success)}catch(x){throw this.client.logger.error(x),this.client.session.delete(S,pt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(S),x}return this.client.core.eventClient.deleteEvent({eventId:A.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(S,Nt(Bo)),{topic:S,acknowledged:()=>Promise.resolve(this.client.session.get(S))}}),be(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:qt.wc_sessionPropose.reject}),await this.deleteProposal(r)}),be(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=qs(),u=Nr(),c=Gi().toString(),l=this.client.session.get(r).namespaces;return this.events.once(Ye("session_update",u),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:u,relayRpcId:c}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:l}),a(d)}),{acknowledged:i}}),be(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(u){throw this.client.logger.error("extend() -> isValidExtend() failed"),u}const{topic:r}=n,s=Nr(),{done:i,resolve:o,reject:a}=qs();return this.events.once(Ye("session_extend",s),({error:u})=>{u?a(u):o()}),await this.setExpiry(r,Nt(Bo)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(u=>{a(u)}),{acknowledged:i}}),be(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:i,expiry:o=qt.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);a?.transportType===ot.relay&&await this.confirmOnlineStateOrThrow();const u=Nr(),c=Gi().toString(),{done:l,resolve:d,reject:f}=qs(o,"Request expired. Please try again.");this.events.once(Ye("session_request",u),({error:y,result:b})=>{y?f(y):d(b)});const h="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:u,relayRpcId:c,topic:i,method:h,params:{request:nn(We({},s),{expiryTimestamp:Nt(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(y=>f(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:u}),await l();const g={request:nn(We({},s),{expiryTimestamp:Nt(o)}),chainId:r};return await Promise.all([new Promise(async y=>{await this.sendRequest({clientRpcId:u,relayRpcId:c,topic:i,method:h,params:g,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(u,g)}).catch(b=>f(b)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:u}),y()}),new Promise(async y=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const A=await JU(this.client.core.storage,gA);await QU({id:u,topic:i,wcDeepLink:A})}y()}),l()]).then(y=>y[2])}),be(this,"respond",async n=>{var r,s;this.isInitialized();const i=this.client.core.eventClient.createEvent({properties:{topic:n?.topic||((s=(r=n?.response)==null?void 0:r.id)==null?void 0:s.toString()),trace:[or.session_request_response_started]}});try{await this.isValidRespond(n)}catch(d){throw i.addTrace(d?.message),i.setError(Us.session_request_response_validation_failure),d}i.addTrace(or.session_request_response_validation_success);const{topic:o,response:a}=n,{id:u}=a,c=this.client.session.get(o);c.transportType===ot.relay&&await this.confirmOnlineStateOrThrow();const l=this.getAppLinkIfEnabled(c.peer.metadata,c.transportType);try{i.addTrace(or.session_request_response_publish_started),Ir(a)?await this.sendResult({id:u,topic:o,result:a.result,throwOnFailedPublish:!0,appLink:l}):Wn(a)&&await this.sendError({id:u,topic:o,error:a.error,appLink:l}),this.cleanupAfterResponse(n)}catch(d){throw i.addTrace(d?.message),i.setError(Us.session_request_response_publish_failure),d}}),be(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Nr(),i=Gi().toString(),{done:o,resolve:a,reject:u}=qs();this.events.once(Ye("session_ping",s),({error:c})=>{c?u(c):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),be(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=Gi().toString(),a=Nr();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),be(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:pt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=Ee("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),be(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>gF(r,n)))),be(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),be(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?ot.link_mode:ot.relay;o===ot.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:u="",uri:c,domain:l,nonce:d,type:f,exp:h,nbf:p,methods:g=[],expiry:y}=n,b=[...n.resources||[]],{topic:A,uri:E}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:A,uri:E}});const _=await this.client.core.crypto.generateKeyPair(),S=Jl(_);if(await Promise.all([this.client.auth.authKeys.set(td,{responseTopic:S,publicKey:_}),this.client.auth.pairingTopics.set(S,{topic:S,pairingTopic:A})]),await this.client.core.relayer.subscribe(S,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${A}`),g.length>0){const{namespace:N}=$l(a[0]);let C=g8(N,"request",g);Zl(b)&&(C=m8(C,b.pop())),b.push(C)}const I=y&&y>qt.wc_sessionAuthenticate.req.ttl?y:qt.wc_sessionAuthenticate.req.ttl,D={authPayload:{type:f??"caip122",chains:a,statement:u,aud:c,domain:l,version:"1",nonce:d,iat:new Date().toISOString(),exp:h,nbf:p,resources:b},requester:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:Nt(I)},L={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},x={requiredNamespaces:{},optionalNamespaces:L,relays:[{protocol:"irn"}],pairingTopic:A,proposer:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:Nt(qt.wc_sessionPropose.req.ttl),id:Nr()},{done:j,resolve:V,reject:Y}=qs(I,"Request expired"),q=Nr(),R=Ye("session_connect",x.id),v=Ye("session_request",q),T=async({error:N,session:C})=>{this.events.off(v,m),N?Y(N):C&&V({session:C})},m=async N=>{var C,O,B;if(await this.deletePendingAuthRequest(q,{message:"fulfilled",code:0}),N.error){const J=pt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return N.error.code===J.code?void 0:(this.events.off(R,T),Y(N.error.message))}await this.deleteProposal(x.id),this.events.off(R,T);const{cacaos:W,responder:P}=N.result,X=[],ee=[];for(const J of W){await s1({cacao:J,projectId:this.client.core.projectId})||(this.client.logger.error(J,"Signature verification failed"),Y(pt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:z}=J,K=Zl(z.resources),H=[Yp(z.iss)],U=vd(z.iss);if(K){const F=o1(K),$=a1(K);X.push(...F),H.push(...$)}for(const F of H)ee.push(`${F}:${U}`)}const se=await this.client.core.crypto.generateSharedKey(_,P.publicKey);let Z;X.length>0&&(Z={topic:se,acknowledged:!0,self:{publicKey:_,metadata:this.client.metadata},peer:P,controller:P.publicKey,expiry:Nt(Bo),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:A,namespaces:C1([...new Set(X)],[...new Set(ee)]),transportType:o},await this.client.core.relayer.subscribe(se,{transportType:o}),await this.client.session.set(se,Z),A&&await this.client.core.pairing.updateMetadata({topic:A,metadata:P.metadata}),Z=this.client.session.get(se)),(C=this.client.metadata.redirect)!=null&&C.linkMode&&(O=P.metadata.redirect)!=null&&O.linkMode&&(B=P.metadata.redirect)!=null&&B.universal&&r&&(this.client.core.addLinkModeSupportedApp(P.metadata.redirect.universal),this.client.session.update(se,{transportType:ot.link_mode})),V({auths:W,session:Z})};this.events.once(R,T),this.events.once(v,m);let w;try{if(i){const N=si("wc_sessionAuthenticate",D,q);this.client.core.history.set(A,N);const C=await this.client.core.crypto.encode("",N,{type:Ku,encoding:Hi});w=jl(r,A,C)}else await Promise.all([this.sendRequest({topic:A,method:"wc_sessionAuthenticate",params:D,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:q}),this.sendRequest({topic:A,method:"wc_sessionPropose",params:x,expiry:qt.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:x.id})])}catch(N){throw this.events.off(R,T),this.events.off(v,m),N}return await this.setProposal(x.id,x),await this.setAuthRequest(q,{request:nn(We({},D),{verifyContext:{}}),pairingTopic:A,transportType:o}),{uri:w??E,response:j}}),be(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[zs.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(nu.no_internet_connection),y}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(nu.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||ot.relay;a===ot.relay&&await this.confirmOnlineStateOrThrow();const u=o.requester.publicKey,c=await this.client.core.crypto.generateKeyPair(),l=Jl(u),d={type:ui,receiverPublicKey:u,senderPublicKey:c},f=[],h=[];for(const y of s){if(!await s1({cacao:y,projectId:this.client.core.projectId})){i.setError(nu.invalid_cacao);const S=pt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:l,error:S,encodeOpts:d}),new Error(S.message)}i.addTrace(zs.cacaos_verified);const{p:b}=y,A=Zl(b.resources),E=[Yp(b.iss)],_=vd(b.iss);if(A){const S=o1(A),I=a1(A);f.push(...S),E.push(...I)}for(const S of E)h.push(`${S}:${_}`)}const p=await this.client.core.crypto.generateSharedKey(c,u);i.addTrace(zs.create_authenticated_session_topic);let g;if(f?.length>0){g={topic:p,acknowledged:!0,self:{publicKey:c,metadata:this.client.metadata},peer:{publicKey:u,metadata:o.requester.metadata},controller:u,expiry:Nt(Bo),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:C1([...new Set(f)],[...new Set(h)]),transportType:a},i.addTrace(zs.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(y){throw i.setError(nu.subscribe_authenticated_session_topic_failure),y}i.addTrace(zs.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(zs.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(zs.publishing_authenticated_session_approve);try{await this.sendResult({topic:l,id:r,result:{cacaos:s,responder:{publicKey:c,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw i.setError(nu.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),be(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===ot.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),u=Jl(o),c={type:ui,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:u,error:s,encodeOpts:c,rpcOpts:qt.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),be(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return UM(r,s)}),be(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),be(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),be(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:u}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,pt("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(u.publicKey)&&await this.client.core.crypto.deleteKeyPair(u.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(gA).catch(c=>this.client.logger.warn(c)),this.getPendingSessionRequests().forEach(c=>{c.topic===s&&this.deletePendingSessionRequest(c.id,pt("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=vr.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),be(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i?.setError(Us.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,pt("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),be(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=vr.idle,this.client.events.emit("session_request_expire",{id:n}))}),be(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),be(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),be(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Nt(qt.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),be(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=ot.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),be(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||Nt(qt.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),be(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:u,throwOnFailedPublish:c,appLink:l,tvf:d,publishOpts:f={}}=n,h=si(s,i,u);let p;const g=!!l;try{const A=g?Hi:En;p=await this.client.core.crypto.encode(r,h,{encoding:A})}catch(A){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),A}let y;if(uq.includes(s)){const A=Yn(JSON.stringify(h)),E=Yn(p);y=await this.client.core.verify.register({id:E,decryptedId:A})}const b=We(We({},qt[s].req),f);if(b.attestation=y,o&&(b.ttl=o),a&&(b.id=a),this.client.core.history.set(r,h),g){const A=jl(l,r,p);await globalThis.Linking.openURL(A,this.client.name)}else b.tvf=nn(We({},d),{correlationId:h.id}),c?(b.internal=nn(We({},b.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,p,b)):this.client.core.relayer.publish(r,p,b).catch(A=>this.client.logger.error(A));return h.id}),be(this,"sendProposeSession",async n=>{const{proposal:r,publishOpts:s}=n,i=si("wc_sessionPropose",r,r.id);this.client.core.history.set(r.pairingTopic,i);const o=await this.client.core.crypto.encode(r.pairingTopic,i,{encoding:En}),a=Yn(JSON.stringify(i)),u=Yn(o),c=await this.client.core.verify.register({id:u,decryptedId:a});await this.client.core.relayer.publishCustom({payload:{pairingTopic:r.pairingTopic,sessionProposal:o},opts:nn(We({},s),{publishMethod:"wc_proposeSession",attestation:c})})}),be(this,"sendApproveSession",async n=>{const{sessionTopic:r,pairingProposalResponse:s,proposal:i,sessionSettleRequest:o,publishOpts:a}=n,u=Nd(i.id,s),c=await this.client.core.crypto.encode(i.pairingTopic,u,{encoding:En}),l=si("wc_sessionSettle",o,a?.id),d=await this.client.core.crypto.encode(r,l,{encoding:En});this.client.core.history.set(r,l),await this.client.core.relayer.publishCustom({payload:{sessionTopic:r,pairingTopic:i.pairingTopic,sessionProposalResponse:c,sessionSettlementRequest:d},opts:nn(We({},a),{publishMethod:"wc_approveSession"})})}),be(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:u}=n,c=Nd(r,i);let l;const d=u&&typeof globalThis?.Linking<"u";try{const p=d?Hi:En;l=await this.client.core.crypto.encode(s,c,nn(We({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let f,h;try{f=await this.client.core.history.get(s,r);const p=f.request;try{h=this.getTVFParams(r,p.params,i)}catch(g){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${g?.message}`)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=jl(u,s,l);await globalThis.Linking.openURL(p,this.client.name)}else{const p=f.request.method,g=qt[p].res;g.tvf=nn(We({},h),{correlationId:r}),o?(g.internal=nn(We({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,l,g)):this.client.core.relayer.publish(s,l,g).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(c)}),be(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:u}=n,c=K0(r,i);let l;const d=u&&typeof globalThis?.Linking<"u";try{const h=d?Hi:En;l=await this.client.core.crypto.encode(s,c,nn(We({},o||{}),{encoding:h}))}catch(h){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),h}let f;try{f=await this.client.core.history.get(s,r)}catch(h){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),h}if(d){const h=jl(u,s,l);await globalThis.Linking.openURL(h,this.client.name)}else{const h=f.request.method,p=a||qt[h].res;this.client.core.relayer.publish(s,l,p)}await this.client.core.history.resolve(c)}),be(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Ci(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Ci(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),be(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),be(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),be(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===vr.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=vr.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=vr.idle}),be(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,u=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:u}))switch(u){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${u}`)}}),be(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),be(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=Ee("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),be(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),be(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:u}=s;try{const c=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),c?.setError(ti.proposal_listener_not_found)),this.isValidConnect(We({},s.params));const l=a.expiryTimestamp||Nt(qt.wc_sessionPropose.req.ttl),d=We({id:u,pairingTopic:r,expiryTimestamp:l,attestation:i,encryptedId:o},a);await this.setProposal(u,d);const f=await this.getVerifyContext({attestationId:i,hash:Yn(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});c?.addTrace(Tr.emit_session_proposal),this.client.events.emit("session_proposal",{id:u,params:d,verifyContext:f})}catch(c){await this.sendError({id:u,topic:r,error:c,rpcOpts:qt.wc_sessionPropose.autoReject}),this.client.logger.error(c)}}),be(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Ir(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const u=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:u});const c=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:c});const l=await this.client.core.crypto.generateSharedKey(u,c);this.pendingSessions.set(i,{sessionTopic:l,pairingTopic:n,proposalId:i,publicKey:u});const d=await this.client.core.relayer.subscribe(l,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Wn(r)){await this.deleteProposal(i);const o=Ye("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),be(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:u,namespaces:c,sessionProperties:l,scopedProperties:d,sessionConfig:f}=r.params,h=[...this.pendingSessions.values()].find(y=>y.sessionTopic===n);if(!h)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(h.proposalId),g=nn(We(We(We({topic:n,relay:o,expiry:u,namespaces:c,acknowledged:!0,pairingTopic:h.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:h.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},l&&{sessionProperties:l}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),{transportType:ot.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:h.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(Ye("session_connect",h.proposalId),{session:g}),this.pendingSessions.delete(h.proposalId),this.deleteProposal(h.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),be(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Ir(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Ye("session_approve",s),{})):Wn(r)&&(await this.client.session.delete(n,pt("USER_DISCONNECTED")),this.events.emit(Ye("session_approve",s),{error:r.error}))}),be(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=eu.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:pt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(We({topic:n},s));try{eu.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0})}catch(u){throw eu.delete(o),u}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),be(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),be(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=Ye("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ir(r)?this.events.emit(Ye("session_update",s),{}):Wn(r)&&this.events.emit(Ye("session_update",s),{error:r.error})}),be(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Nt(Bo)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),be(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=Ye("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ir(r)?this.events.emit(Ye("session_extend",s),{}):Wn(r)&&this.events.emit(Ye("session_extend",s),{error:r.error})}),be(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),be(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=Ye("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Ir(r)?this.events.emit(Ye("session_ping",s),{}):Wn(r)&&this.events.emit(Ye("session_ping",s),{error:r.error})},500)}),be(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),await Promise.all([new Promise(i=>{this.client.core.relayer.once(mt.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:pt("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),be(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:u,encryptedId:c,transportType:l}=n,{id:d,params:f}=a;try{await this.isValidRequest(We({topic:o},f));const h=this.client.session.get(o),p=await this.getVerifyContext({attestationId:u,hash:Yn(JSON.stringify(si("wc_sessionRequest",f,d))),encryptedId:c,metadata:h.peer.metadata,transportType:l}),g={id:d,topic:o,params:f,verifyContext:p};await this.setPendingSessionRequest(g),l===ot.link_mode&&(r=h.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=h.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(h){await this.sendError({id:d,topic:o,error:h}),this.client.logger.error(h)}}),be(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=Ye("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ir(r)?this.events.emit(Ye("session_request",s),{result:r.result}):Wn(r)&&this.events.emit(Ye("session_request",s),{error:r.error})}),be(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=eu.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(We({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),eu.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),be(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Ir(r)?this.events.emit(Ye("session_request",s),{result:r.result}):Wn(r)&&this.events.emit(Ye("session_request",s),{error:r.error})}),be(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:u}=n;try{const{requester:c,authPayload:l,expiryTimestamp:d}=i.params,f=await this.getVerifyContext({attestationId:o,hash:Yn(JSON.stringify(i)),encryptedId:a,metadata:c.metadata,transportType:u}),h={requester:c,pairingTopic:s,id:i.id,authPayload:l,verifyContext:f,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:h,pairingTopic:s,transportType:u}),u===ot.link_mode&&(r=c.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(c.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:f})}catch(c){this.client.logger.error(c);const l=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),f=this.getAppLinkIfEnabled(i.params.requester.metadata,u),h={type:ui,receiverPublicKey:l,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:c,encodeOpts:h,rpcOpts:qt.wc_sessionAuthenticate.autoReject,appLink:f})}}),be(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),be(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=vr.idle,this.processSessionRequestQueue()},Ae.toMiliseconds(this.requestQueueDelay))}),be(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=Ye("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Ye("session_request",i.request.id),{error:r})})}),be(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===vr.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),be(this,"emitSessionRequest",n=>{if(this.emittedSessionRequests.has(n.id)){this.client.logger.warn({id:n.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${n.id}`);return}this.sessionRequestQueue.state=vr.active,this.emittedSessionRequests.add(n.id),this.client.events.emit("session_request",n)}),be(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:si("wc_sessionPropose",nn(We({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),be(this,"isValidConnect",async n=>{if(!wn(n)){const{message:c}=Ee("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(c)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:u}=n;if(Ot(r)||await this.isValidPairingTopic(r),!IF(u)){const{message:c}=Ee("MISSING_OR_INVALID",`connect() relays: ${u}`);throw new Error(c)}if(s&&!Ot(s)&&Du(s)!==0){const c="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(c):this.client.logger.warn(c),this.validateNamespaces(s,"requiredNamespaces")}if(i&&!Ot(i)&&Du(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),o&&!Ot(o)&&this.validateSessionProps(o,"sessionProperties"),a&&!Ot(a)){this.validateSessionProps(a,"scopedProperties");const c=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(l=>c.includes(l.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(c)}`)}}),be(this,"validateNamespaces",(n,r)=>{const s=NF(n,"connect()",r);if(s)throw new Error(s.message)}),be(this,"isValidApprove",async n=>{if(!wn(n))throw new Error(Ee("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const u=this.client.proposal.get(r),c=ep(s,"approve()");if(c)throw new Error(c.message);const l=k1(u.requiredNamespaces,s,"approve()");if(l)throw new Error(l.message);if(!Et(i,!0)){const{message:d}=Ee("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(o&&!Ot(o)&&this.validateSessionProps(o,"sessionProperties"),a&&!Ot(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(f=>d.has(f.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),be(this,"isValidReject",async n=>{if(!wn(n)){const{message:i}=Ee("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!OF(s)){const{message:i}=Ee("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),be(this,"isValidSessionSettleRequest",n=>{if(!wn(n)){const{message:c}=Ee("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(c)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!SN(r)){const{message:c}=Ee("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(c)}const a=vF(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const u=ep(i,"onSessionSettleRequest()");if(u)throw new Error(u.message);if(Ci(o)){const{message:c}=Ee("EXPIRED","onSessionSettleRequest()");throw new Error(c)}}),be(this,"isValidUpdate",async n=>{if(!wn(n)){const{message:u}=Ee("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(u)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=ep(s,"update()");if(o)throw new Error(o.message);const a=k1(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),be(this,"isValidExtend",async n=>{if(!wn(n)){const{message:s}=Ee("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),be(this,"isValidRequest",async n=>{if(!wn(n)){const{message:u}=Ee("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(u)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!P1(a,i)){const{message:u}=Ee("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(u)}if(!DF(s)){const{message:u}=Ee("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(u)}if(!CF(a,i,s.method)){const{message:u}=Ee("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(u)}if(o&&!RF(o,op)){const{message:u}=Ee("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${op.min} and ${op.max}`);throw new Error(u)}}),be(this,"isValidRespond",async n=>{var r;if(!wn(n)){const{message:a}=Ee("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(a)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(a){throw(r=n?.response)!=null&&r.id&&this.cleanupAfterResponse(n),a}if(!xF(i)){const{message:a}=Ee("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(a)}const o=this.client.pendingRequest.get(i.id);if(o.topic!==s){const{message:a}=Ee("MISMATCHED_TOPIC",`Request response topic mismatch. reqId: ${i.id}, expected topic: ${o.topic}, received topic: ${s}`);throw new Error(a)}}),be(this,"isValidPing",async n=>{if(!wn(n)){const{message:s}=Ee("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),be(this,"isValidEmit",async n=>{if(!wn(n)){const{message:a}=Ee("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!P1(o,i)){const{message:a}=Ee("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!LF(s)){const{message:a}=Ee("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!jF(o,i,s.name)){const{message:a}=Ee("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),be(this,"isValidDisconnect",async n=>{if(!wn(n)){const{message:s}=Ee("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),be(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Et(s,!1))throw new Error("uri is required parameter");if(!Et(i,!1))throw new Error("domain is required parameter");if(!Et(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(u=>$l(u).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=$l(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),be(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,u={verified:{verifyUrl:o.verifyUrl||bu,validation:"UNKNOWN",origin:o.url||""}};try{if(a===ot.link_mode){const l=this.getAppLinkIfEnabled(o,a);return u.verified.validation=l&&new URL(l).origin===new URL(o.url).origin?"VALID":"INVALID",u}const c=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});c&&(u.verified.origin=c.origin,u.verified.isScam=c.isScam,u.verified.validation=c.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(c){this.client.logger.warn(c)}return this.client.logger.debug(`Verify context: ${JSON.stringify(u)}`),u}),be(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=Ee("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),be(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),be(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),be(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=Ee("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),be(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,u,c,l,d,f;return!n||r!==ot.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((c=(u=this.client.metadata)==null?void 0:u.redirect)==null?void 0:c.universal)!==""&&((l=n?.redirect)==null?void 0:l.universal)!==void 0&&((d=n?.redirect)==null?void 0:d.universal)!==""&&((f=n?.redirect)==null?void 0:f.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof globalThis?.Linking<"u"}),be(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n?.redirect)==null?void 0:s.universal:void 0}),be(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=YE(n,"topic")||"",s=decodeURIComponent(YE(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:ot.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),be(this,"registerLinkModeListeners",async()=>{var n;if(C0()||Ji()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=globalThis?.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),be(this,"getTVFParams",(n,r,s)=>{var i,o,a;if(!((i=r.request)!=null&&i.method))return{};const u={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const c=this.extractTxHashesFromResult(r.request,s);u.txHashes=c,u.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(c){this.client.logger.warn(c,"Error getting TVF params")}return u}),be(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=n?.data||((r=n?.[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),be(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,o=aq[i];if(i==="sui_signTransaction")return[Z6(r.transactionBytes)];if(i==="near_signTransaction")return[t1(r)];if(i==="near_signTransactions")return r.map(u=>t1(u));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[ZF({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return ra(r)?r.map(u=>n1(u)):[n1(r)];if(i==="cosmos_signDirect")return[e8(r)];if(i==="wallet_sendCalls")return t8(r);if(typeof r=="string")return[r];const a=r[o.key];if(ra(a))return i==="solana_signAllTransactions"?a.map(u=>$6(u)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn(i,"Error extracting tx hashes from result")}return[]})}async processPendingMessageEvents(){try{const t=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(t);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(t){this.client.logger.warn(t,"processPendingMessageEvents failed")}}isInitialized(){if(!this.initialized){const{message:t}=Ee("NOT_INITIALIZED",this.name);throw new Error(t)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(mt.message,t=>{this.onProviderMessageEvent(t)})}async onRelayMessage(t){const{topic:n,message:r,attestation:s,transportType:i}=t,{publicKey:o}=this.client.auth.authKeys.keys.includes(td)?this.client.auth.authKeys.get(td):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===ot.link_mode?Hi:En});Y0(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Yn(r)})):Lh(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(qn.expired,async t=>{const{topic:n,id:r}=SM(t.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Ee("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,Ee("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(Ks.create,t=>this.onPairingCreated(t)),this.client.core.pairing.events.on(Ks.delete,t=>{this.addToRecentlyDeleted(t.topic,"pairing")})}isValidPairingTopic(t){if(!Et(t,!1)){const{message:n}=Ee("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:n}=Ee("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(n)}if(Ci(this.client.core.pairing.pairings.get(t).expiry)){const{message:n}=Ee("EXPIRED",`pairing topic: ${t}`);throw new Error(n)}}async isValidSessionTopic(t){if(!Et(t,!1)){const{message:n}=Ee("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(n)}if(this.checkRecentlyDeleted(t),!this.client.session.keys.includes(t)){const{message:n}=Ee("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(n)}if(Ci(this.client.session.get(t).expiry)){await this.deleteSession({topic:t});const{message:n}=Ee("EXPIRED",`session topic: ${t}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(t)){const{message:n}=Ee("MISSING_OR_INVALID",`session topic does not exist in keychain: ${t}`);throw await this.deleteSession({topic:t}),new Error(n)}}async isValidSessionOrPairingTopic(t){if(this.checkRecentlyDeleted(t),this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(Et(t,!1)){const{message:n}=Ee("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(n)}else{const{message:n}=Ee("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(n)}}async isValidProposalId(t){if(!_F(t)){const{message:n}=Ee("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(n)}if(!this.client.proposal.keys.includes(t)){const{message:n}=Ee("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(n)}if(Ci(this.client.proposal.get(t).expiryTimestamp)){await this.deleteProposal(t);const{message:n}=Ee("EXPIRED",`proposal id: ${t}`);throw new Error(n)}}}class Eq extends yo{constructor(t,n){super(t,n,iq,X0),this.core=t,this.logger=n}}class Aq extends yo{constructor(t,n){super(t,n,sq,X0),this.core=t,this.logger=n}}class Sq extends yo{constructor(t,n){super(t,n,cq,X0,r=>r.id),this.core=t,this.logger=n}}class Tq extends yo{constructor(t,n){super(t,n,hq,jh,()=>td),this.core=t,this.logger=n}}class Mq extends yo{constructor(t,n){super(t,n,fq,jh),this.core=t,this.logger=n}}class Nq extends yo{constructor(t,n){super(t,n,pq,jh,r=>r.id),this.core=t,this.logger=n}}var Iq=Object.defineProperty,_q=(e,t,n)=>t in e?Iq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ap=(e,t,n)=>_q(e,typeof t!="symbol"?t+"":t,n);class Oq{constructor(t,n){this.core=t,this.logger=n,ap(this,"authKeys"),ap(this,"pairingTopics"),ap(this,"requests"),this.authKeys=new Tq(this.core,this.logger),this.pairingTopics=new Mq(this.core,this.logger),this.requests=new Nq(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var Dq=Object.defineProperty,xq=(e,t,n)=>t in e?Dq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ze=(e,t,n)=>xq(e,typeof t!="symbol"?t+"":t,n);class Id extends y3{constructor(t){super(t),ze(this,"protocol",GN),ze(this,"version",KN),ze(this,"name",sp.name),ze(this,"metadata"),ze(this,"core"),ze(this,"logger"),ze(this,"events",new In.EventEmitter),ze(this,"engine"),ze(this,"session"),ze(this,"proposal"),ze(this,"pendingRequest"),ze(this,"auth"),ze(this,"signConfig"),ze(this,"on",(r,s)=>this.events.on(r,s)),ze(this,"once",(r,s)=>this.events.once(r,s)),ze(this,"off",(r,s)=>this.events.off(r,s)),ze(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),ze(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),ze(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),ze(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),ze(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=t?.name||sp.name,this.metadata=qU(t?.metadata),this.signConfig=t?.signConfig;const n=TN({logger:t?.logger||sp.logger,name:this.name});this.logger=n,this.core=t?.core||new rq(t),this.session=new Aq(this.core,this.logger),this.proposal=new Eq(this.core,this.logger),this.pendingRequest=new Sq(this.core,this.logger),this.engine=new vq(this),this.auth=new Oq(this.core,this.logger)}static async init(t){const n=new Id(t);return await n.initialize(),n}get context(){return _n(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}}const Lq=Symbol(),wA=Object.getPrototypeOf,mg=new WeakMap,Cq=e=>e&&(mg.has(e)?mg.get(e):wA(e)===Object.prototype||wA(e)===Array.prototype),jq=e=>Cq(e)&&e[Lq]||null,bA=(e,t=!0)=>{mg.set(e,t)},_d={},cp=e=>typeof e=="object"&&e!==null,Ri=new WeakMap,Pl=new WeakSet,Pq=(e=Object.is,t=(c,l)=>new Proxy(c,l),n=c=>cp(c)&&!Pl.has(c)&&(Array.isArray(c)||!(Symbol.iterator in c))&&!(c instanceof WeakMap)&&!(c instanceof WeakSet)&&!(c instanceof Error)&&!(c instanceof Number)&&!(c instanceof Date)&&!(c instanceof String)&&!(c instanceof RegExp)&&!(c instanceof ArrayBuffer),r=c=>{switch(c.status){case"fulfilled":return c.value;case"rejected":throw c.reason;default:throw c}},s=new WeakMap,i=(c,l,d=r)=>{const f=s.get(c);if(f?.[0]===l)return f[1];const h=Array.isArray(c)?[]:Object.create(Object.getPrototypeOf(c));return bA(h,!0),s.set(c,[l,h]),Reflect.ownKeys(c).forEach(p=>{if(Object.getOwnPropertyDescriptor(h,p))return;const g=Reflect.get(c,p),y={value:g,enumerable:!0,configurable:!0};if(Pl.has(g))bA(g,!1);else if(g instanceof Promise)delete y.value,y.get=()=>d(g);else if(Ri.has(g)){const[b,A]=Ri.get(g);y.value=i(b,A(),d)}Object.defineProperty(h,p,y)}),Object.preventExtensions(h)},o=new WeakMap,a=[1,1],u=c=>{if(!cp(c))throw new Error("object required");const l=o.get(c);if(l)return l;let d=a[0];const f=new Set,h=(L,x=++a[0])=>{d!==x&&(d=x,f.forEach(j=>j(L,x)))};let p=a[1];const g=(L=++a[1])=>(p!==L&&!f.size&&(p=L,b.forEach(([x])=>{const j=x[1](L);j>d&&(d=j)})),d),y=L=>(x,j)=>{const V=[...x];V[1]=[L,...V[1]],h(V,j)},b=new Map,A=(L,x)=>{if((_d?"production":void 0)!=="production"&&b.has(L))throw new Error("prop listener already exists");if(f.size){const j=x[3](y(L));b.set(L,[x,j])}else b.set(L,[x])},E=L=>{var x;const j=b.get(L);j&&(b.delete(L),(x=j[1])==null||x.call(j))},_=L=>(f.add(L),f.size===1&&b.forEach(([x,j],V)=>{if((_d?"production":void 0)!=="production"&&j)throw new Error("remove already exists");const Y=x[3](y(V));b.set(V,[x,Y])}),()=>{f.delete(L),f.size===0&&b.forEach(([x,j],V)=>{j&&(j(),b.set(V,[x]))})}),S=Array.isArray(c)?[]:Object.create(Object.getPrototypeOf(c)),I=t(S,{deleteProperty(L,x){const j=Reflect.get(L,x);E(x);const V=Reflect.deleteProperty(L,x);return V&&h(["delete",[x],j]),V},set(L,x,j,V){const Y=Reflect.has(L,x),q=Reflect.get(L,x,V);if(Y&&(e(q,j)||o.has(j)&&e(q,o.get(j))))return!0;E(x),cp(j)&&(j=jq(j)||j);let R=j;if(j instanceof Promise)j.then(v=>{j.status="fulfilled",j.value=v,h(["resolve",[x],v])}).catch(v=>{j.status="rejected",j.reason=v,h(["reject",[x],v])});else{!Ri.has(j)&&n(j)&&(R=u(j));const v=!Pl.has(R)&&Ri.get(R);v&&A(x,v)}return Reflect.set(L,x,R,V),h(["set",[x],j,q]),!0}});o.set(c,I);const D=[S,g,i,_];return Ri.set(I,D),Reflect.ownKeys(c).forEach(L=>{const x=Object.getOwnPropertyDescriptor(c,L);"value"in x&&(I[L]=c[L],delete x.value,delete x.writable),Object.defineProperty(S,L,x)}),I})=>[u,Ri,Pl,e,t,n,r,s,i,o,a],[kq]=Pq();function ts(e={}){return kq(e)}function mo(e,t,n){const r=Ri.get(e);(_d?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const u=o(c=>{i.push(c),s||(s=Promise.resolve().then(()=>{s=void 0,a&&t(i.splice(0))}))});return a=!0,()=>{a=!1,u()}}function Rq(e,t){const n=Ri.get(e);(_d?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),t)}const Ct=ts({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),WN={state:Ct,subscribe(e){return mo(Ct,()=>e(Ct))},push(e,t){e!==Ct.view&&(Ct.view=e,t&&(Ct.data=t),Ct.history.push(e))},reset(e){Ct.view=e,Ct.history=[e]},replace(e){Ct.history.length>1&&(Ct.history[Ct.history.length-1]=e,Ct.view=e)},goBack(){if(Ct.history.length>1){Ct.history.pop();const[e]=Ct.history.slice(-1);Ct.view=e}},setData(e){Ct.data=e}},an={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return an.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const e=navigator.userAgent.toLowerCase();return an.isMobile()&&(e.includes("iphone")||e.includes("ipad"))},isHttpUrl(e){return e.startsWith("http://")||e.startsWith("https://")},isArray(e){return Array.isArray(e)&&e.length>0},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},formatNativeUrl(e,t,n){if(an.isHttpUrl(e))return this.formatUniversalUrl(e,t,n);let r=e;r.includes("://")||(r=e.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),this.setWalletConnectDeepLink(r,n);const s=encodeURIComponent(t);return`${r}wc?uri=${s}`},formatUniversalUrl(e,t,n){if(!an.isHttpUrl(e))return this.formatNativeUrl(e,t,n);let r=e;if(r.startsWith("https://t.me")){const i=De.Buffer.from(t).toString("base64").replace(/[=]/g,"");r.endsWith("/")&&(r=r.slice(0,-1)),this.setWalletConnectDeepLink(r,n);const o=new URL(r);return o.searchParams.set("startapp",i),o.toString()}r.endsWith("/")||(r=`${r}/`),this.setWalletConnectDeepLink(r,n);const s=encodeURIComponent(t);return`${r}wc?uri=${s}`},async wait(e){return new Promise(t=>{setTimeout(t,e)})},openHref(e,t){const n=this.isTelegram()?"_blank":t;window.open(e,n,"noreferrer noopener")},setWalletConnectDeepLink(e,t){try{localStorage.setItem(an.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(e){try{const[t]=e.split("?");localStorage.setItem(an.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(an.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(an.WCM_VERSION,"2.7.0")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var e;const t=(e=WN.state.data)==null?void 0:e.Wallet;if(!t)throw new Error('Missing "Wallet" view data');return t}},Bq=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),rn=ts({enabled:Bq,userSessionId:"",events:[],connectedWalletId:void 0}),Uq={state:rn,subscribe(e){return mo(rn.events,()=>e(Rq(rn.events[rn.events.length-1])))},initialize(){rn.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(rn.userSessionId=crypto.randomUUID())},setConnectedWalletId(e){rn.connectedWalletId=e},click(e){if(rn.enabled){const t={type:"CLICK",name:e.name,userSessionId:rn.userSessionId,timestamp:Date.now(),data:e};rn.events.push(t)}},track(e){if(rn.enabled){const t={type:"TRACK",name:e.name,userSessionId:rn.userSessionId,timestamp:Date.now(),data:e};rn.events.push(t)}},view(e){if(rn.enabled){const t={type:"VIEW",name:e.name,userSessionId:rn.userSessionId,timestamp:Date.now(),data:e};rn.events.push(t)}}},Er=ts({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),ur={state:Er,subscribe(e){return mo(Er,()=>e(Er))},setChains(e){Er.chains=e},setWalletConnectUri(e){Er.walletConnectUri=e},setIsCustomDesktop(e){Er.isCustomDesktop=e},setIsCustomMobile(e){Er.isCustomMobile=e},setIsDataLoaded(e){Er.isDataLoaded=e},setIsUiLoaded(e){Er.isUiLoaded=e},setIsAuth(e){Er.isAuth=e}},kl=ts({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),ia={state:kl,subscribe(e){return mo(kl,()=>e(kl))},setConfig(e){var t,n;Uq.initialize(),ur.setChains(e.chains),ur.setIsAuth(!!e.enableAuthMode),ur.setIsCustomMobile(!!((t=e.mobileWallets)!=null&&t.length)),ur.setIsCustomDesktop(!!((n=e.desktopWallets)!=null&&n.length)),an.setModalVersionInStorage(),Object.assign(kl,e)}};var zq=Object.defineProperty,vA=Object.getOwnPropertySymbols,Fq=Object.prototype.hasOwnProperty,Hq=Object.prototype.propertyIsEnumerable,EA=(e,t,n)=>t in e?zq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vq=(e,t)=>{for(var n in t||(t={}))Fq.call(t,n)&&EA(e,n,t[n]);if(vA)for(var n of vA(t))Hq.call(t,n)&&EA(e,n,t[n]);return e};const wg="https://explorer-api.walletconnect.com",bg="wcm",vg="js-2.7.0";async function Rl(e,t){const n=Vq({sdkType:bg,sdkVersion:vg},t),r=new URL(e,wg);return r.searchParams.append("projectId",ia.state.projectId),Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,String(i))}),(await fetch(r)).json()}const Fs={async getDesktopListings(e){return Rl("/w3m/v1/getDesktopListings",e)},async getMobileListings(e){return Rl("/w3m/v1/getMobileListings",e)},async getInjectedListings(e){return Rl("/w3m/v1/getInjectedListings",e)},async getAllListings(e){return Rl("/w3m/v1/getAllListings",e)},getWalletImageUrl(e){return`${wg}/w3m/v1/getWalletImage/${e}?projectId=${ia.state.projectId}&sdkType=${bg}&sdkVersion=${vg}`},getAssetImageUrl(e){return`${wg}/w3m/v1/getAssetImage/${e}?projectId=${ia.state.projectId}&sdkType=${bg}&sdkVersion=${vg}`}};var qq=Object.defineProperty,AA=Object.getOwnPropertySymbols,Gq=Object.prototype.hasOwnProperty,Kq=Object.prototype.propertyIsEnumerable,SA=(e,t,n)=>t in e?qq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yq=(e,t)=>{for(var n in t||(t={}))Gq.call(t,n)&&SA(e,n,t[n]);if(AA)for(var n of AA(t))Kq.call(t,n)&&SA(e,n,t[n]);return e};const TA=an.isMobile(),Ar=ts({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),AW={state:Ar,async getRecomendedWallets(){const{explorerRecommendedWalletIds:e,explorerExcludedWalletIds:t}=ia.state;if(e==="NONE"||t==="ALL"&&!e)return Ar.recomendedWallets;if(an.isArray(e)){const n={recommendedIds:e.join(",")},{listings:r}=await Fs.getAllListings(n),s=Object.values(r);s.sort((i,o)=>{const a=e.indexOf(i.id),u=e.indexOf(o.id);return a-u}),Ar.recomendedWallets=s}else{const{chains:n,isAuth:r}=ur.state,s=n?.join(","),i=an.isArray(t),o={page:1,sdks:r?"auth_v1":void 0,entries:an.RECOMMENDED_WALLET_AMOUNT,chains:s,version:2,excludedIds:i?t.join(","):void 0},{listings:a}=TA?await Fs.getMobileListings(o):await Fs.getDesktopListings(o);Ar.recomendedWallets=Object.values(a)}return Ar.recomendedWallets},async getWallets(e){const t=Yq({},e),{explorerRecommendedWalletIds:n,explorerExcludedWalletIds:r}=ia.state,{recomendedWallets:s}=Ar;if(r==="ALL")return Ar.wallets;s.length?t.excludedIds=s.map(d=>d.id).join(","):an.isArray(n)&&(t.excludedIds=n.join(",")),an.isArray(r)&&(t.excludedIds=[t.excludedIds,r].filter(Boolean).join(",")),ur.state.isAuth&&(t.sdks="auth_v1");const{page:i,search:o}=e,{listings:a,total:u}=TA?await Fs.getMobileListings(t):await Fs.getDesktopListings(t),c=Object.values(a),l=o?"search":"wallets";return Ar[l]={listings:[...Ar[l].listings,...c],total:u,page:i??1},{listings:c,total:u}},getWalletImageUrl(e){return Fs.getWalletImageUrl(e)},getAssetImageUrl(e){return Fs.getAssetImageUrl(e)},resetSearch(){Ar.search={listings:[],total:0,page:1}}},Uo=ts({open:!1}),up={state:Uo,subscribe(e){return mo(Uo,()=>e(Uo))},async open(e){return new Promise(t=>{const{isUiLoaded:n,isDataLoaded:r}=ur.state;if(an.removeWalletConnectDeepLink(),ur.setWalletConnectUri(e?.uri),ur.setChains(e?.chains),WN.reset("ConnectWallet"),n&&r)Uo.open=!0,t();else{const s=setInterval(()=>{const i=ur.state;i.isUiLoaded&&i.isDataLoaded&&(clearInterval(s),Uo.open=!0,t())},200)}})},close(){Uo.open=!1}};var Wq=Object.defineProperty,MA=Object.getOwnPropertySymbols,Xq=Object.prototype.hasOwnProperty,Qq=Object.prototype.propertyIsEnumerable,NA=(e,t,n)=>t in e?Wq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$q=(e,t)=>{for(var n in t||(t={}))Xq.call(t,n)&&NA(e,n,t[n]);if(MA)for(var n of MA(t))Qq.call(t,n)&&NA(e,n,t[n]);return e};function Zq(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const su=ts({themeMode:Zq()?"dark":"light"}),IA={state:su,subscribe(e){return mo(su,()=>e(su))},setThemeConfig(e){const{themeMode:t,themeVariables:n}=e;t&&(su.themeMode=t),n&&(su.themeVariables=$q({},n))}},Hs=ts({open:!1,message:"",variant:"success"}),SW={state:Hs,subscribe(e){return mo(Hs,()=>e(Hs))},openToast(e,t){Hs.open=!0,Hs.message=e,Hs.variant=t},closeToast(){Hs.open=!1}};class Jq{constructor(t){this.openModal=up.open,this.closeModal=up.close,this.subscribeModal=up.subscribe,this.setTheme=IA.setThemeConfig,IA.setThemeConfig(t),ia.setConfig(t),this.initUi()}async initUi(){if(typeof window<"u"){await lI(()=>import("./C6y4OVIf.js"),__vite__mapDeps([0,1,2]),import.meta.url);const t=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",t),ur.setIsUiLoaded(!0)}}}const eG={USER_DISCONNECTED:{code:6e3,message:"User disconnected"}},xi={NAME:"XRPL Connect",DESCRIPTION:"XRPL Wallet Connection",DEFAULT_URL:"https://xrpl.org",DEFAULT_ICON:"https://xrpl.org/favicon.ico"},_A={URI_PREVIEW_LENGTH:50},tG={ADDRESS_INDEX:2},Bl={KEY:"xrpl",EVENTS:["chainChanged","accountsChanged"]};function nG(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}const gt=ju("[WalletConnect]");class rG{constructor(t={}){this.id="walletconnect",this.name="WalletConnect",this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxuczp4b2RtPSJodHRwOi8vd3d3LmNvcmVsLmNvbS9jb3JlbGRyYXcvb2RtLzIwMDMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjQ5NyAyNDk3IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyNDk3IDI0OTc7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojMzM5NkZGO3N0cm9rZTojNjZCMUZGO3N0cm9rZS13aWR0aDozO3N0cm9rZS1taXRlcmxpbWl0OjIyLjkyNTY7fQoJLnN0MXtmaWxsOiNGRkZGRkY7fQo8L3N0eWxlPgo8ZyBpZD0iTGF5ZXJfeDAwMjBfMSI+Cgk8ZyBpZD0iXzI4MDYwNTAxMzY4OTYiPgoJCTxjaXJjbGUgY2xhc3M9InN0MCIgY3g9IjEyNDkiIGN5PSIxMjQ5IiByPSIxMjQ3Ij48L2NpcmNsZT4KCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNzY0LDkzMGMyNjctMjYxLDcwMS0yNjEsOTY5LDBsMzIsMzFjMTMsMTMsMTMsMzQsMCw0N2wtMTEwLDEwN2MtNyw3LTE4LDctMjQsMGwtNDQtNDMgICAgYy0xODctMTgyLTQ4OS0xODItNjc2LDBsLTQ3LDQ2Yy03LDctMTgsNy0yNCwwbC0xMTAtMTA3Yy0xMy0xMy0xMy0zNCwwLTQ3bDM1LTM0SDc2NHogTTE5NjAsMTE1Mmw5OCw5NmMxMywxMywxMywzNCwwLDQ3ICAgIGwtNDQyLDQzMWMtMTMsMTMtMzUsMTMtNDgsMGwtMzE0LTMwNmMtMy0zLTktMy0xMiwwbC0zMTQsMzA2Yy0xMywxMy0zNSwxMy00OCwwbC00NDItNDMxYy0xMy0xMy0xMy0zNCwwLTQ3bDk4LTk2ICAgIGMxMy0xMywzNS0xMyw0OCwwbDMxNCwzMDZjMywzLDksMywxMiwwbDMxNC0zMDZjMTMtMTMsMzUtMTMsNDgsMGwzMTQsMzA2YzMsMyw5LDMsMTIsMGwzMTQtMzA2QzE5MjUsMTEzOSwxOTQ3LDExMzksMTk2MCwxMTUyICAgIEwxOTYwLDExNTJ6Ij48L3BhdGg+Cgk8L2c+CjwvZz4KPC9zdmc+Cg==",this.url="https://walletconnect.com",this.client=null,this.session=null,this.currentAccount=null,this.initializationPromise=null,this.pendingConnection=null,this.modal=null,this.options=t}async isAvailable(){return!0}async initializeModal(t){if(!this.modal){gt.debug("Initializing WalletConnect modal...");try{this.modal=new Jq({projectId:t,chains:["xrpl:0","xrpl:1"],themeMode:this.options.themeMode||"dark",themeVariables:{"--wcm-z-index":"2147483647"},enableExplorer:!0,explorerRecommendedWalletIds:void 0}),gt.debug("WalletConnect modal initialized successfully")}catch(n){throw gt.error("Failed to initialize WalletConnect modal:",n),n}}}async preInitialize(t,n){const r=t||this.options.projectId;if(!r){gt.warn("Cannot pre-initialize without project ID");return}if(this.pendingConnection){gt.debug("Already has pending connection, skipping pre-init");return}gt.debug("Pre-initializing connection session...");try{this.client||(this.initializationPromise||(this.initializationPromise=Id.init({projectId:r,metadata:this.options.metadata||{name:xi.NAME,description:xi.DESCRIPTION,url:typeof window<"u"?window.location.origin:xi.DEFAULT_URL,icons:[xi.DEFAULT_ICON]}})),this.client=await this.initializationPromise,gt.debug("SignClient initialized"));const s=this.resolveNetwork(n),i={[Bl.KEY]:{chains:[s.walletConnectId||`xrpl:${s.id}`],methods:["xrpl_signTransaction","xrpl_signTransactionFor","xrpl_signMessage"],events:Bl.EVENTS}},{uri:o,approval:a}=await this.client.connect({requiredNamespaces:i});if(!o)throw new Error("Failed to generate WalletConnect URI during pre-initialization");this.pendingConnection={uri:o,approval:a},gt.debug("QR code URI pre-generated:",o.substring(0,_A.URI_PREVIEW_LENGTH)+"..."),this.options.onQRCode&&(gt.debug("Calling onQRCode callback during pre-init"),this.options.onQRCode(o))}catch(s){gt.error("Pre-initialization failed:",s),this.initializationPromise=null,this.pendingConnection=null}}async connect(t){var n;const r=t?.projectId||this.options.projectId;if(!r)throw xe.connectionFailed(this.name,new Error("WalletConnect project ID is required. Get one from https://cloud.walletconnect.com or https://dashboard.reown.com"));const s=t?.onQRCode||this.options.onQRCode,i=this.options.useModal??!1,o=this.options.modalMode??"mobile-only",a=i&&(o==="always"||o==="mobile-only"&&nG());try{const u=this.resolveNetwork(t?.network);this.client||(this.initializationPromise?(gt.debug("Using pre-initialized SignClient"),this.client=await this.initializationPromise):(gt.debug("Initializing SignClient"),this.client=await Id.init({projectId:r,metadata:this.options.metadata||{name:xi.NAME,description:xi.DESCRIPTION,url:typeof window<"u"?window.location.origin:xi.DEFAULT_URL,icons:[xi.DEFAULT_ICON]}})));const c={[Bl.KEY]:{chains:[u.walletConnectId||`xrpl:${u.id}`],methods:["xrpl_signTransaction","xrpl_signTransactionFor","xrpl_signMessage"],events:Bl.EVENTS}};let l;if(a){gt.debug("Using WalletConnect modal for connection (mobile deeplink mode)"),await this.initializeModal(r);const{uri:h,approval:p}=await this.client.connect({requiredNamespaces:c});h&&this.modal&&(this.modal.openModal({uri:h}),gt.debug("WalletConnect modal opened with URI")),l=await p(),this.modal&&(this.modal.closeModal(),gt.debug("WalletConnect modal closed"))}else{gt.debug("Using custom QR code for connection (desktop mode)");let h,p;if(this.pendingConnection)gt.debug("Using pre-generated connection"),h=this.pendingConnection.uri,p=this.pendingConnection.approval,s&&(gt.debug("Calling onQRCode callback with pre-generated URI"),s(h));else{gt.debug("No pre-generated connection, creating now");const g=await this.client.connect({requiredNamespaces:c});if(!g.uri)throw new Error("Failed to generate WalletConnect URI");h=g.uri,p=g.approval,gt.debug("Generated URI:",h.substring(0,_A.URI_PREVIEW_LENGTH)+"..."),s&&(gt.debug("Calling onQRCode callback"),s(h))}l=await p()}this.session=l;const d=((n=this.session.namespaces.xrpl)==null?void 0:n.accounts)||[];if(d.length===0)throw new Error("No accounts returned from WalletConnect session");const f=d[0].split(":")[tG.ADDRESS_INDEX];return this.currentAccount={address:f,network:u},this.setupEventListeners(),this.currentAccount}catch(u){throw this.modal&&this.modal.closeModal(),xe.connectionFailed(this.name,u)}}async disconnect(){if(!(!this.client||!this.session))try{await this.client.disconnect({topic:this.session.topic,reason:eG.USER_DISCONNECTED}),this.cleanup()}catch{this.cleanup()}}async getAccount(){return this.currentAccount}async getNetwork(){if(!this.currentAccount)throw xe.notConnected();return this.currentAccount.network}async signAndSubmit(t,n=!0){if(!this.client||!this.session||!this.currentAccount)throw xe.notConnected();try{const r={...t,Account:t.Account||this.currentAccount.address},s=(await this.client.request({topic:this.session.topic,chainId:this.currentAccount.network.walletConnectId||`xrpl:${this.currentAccount.network.id}`,request:{method:"xrpl_signTransaction",params:{tx_json:r,autofill:!0,submit:n}}})).tx_json;return{hash:s.hash||"",tx_blob:s.TxnSignature}}catch(r){throw r instanceof Error&&r.message.toLowerCase().includes("reject")?xe.signRejected():xe.signFailed(r)}}async signMessage(t){throw xe.unsupportedMethod("Message signing is not supported via WalletConnect. Please use Xaman, Crossmark, or GemWallet for signing messages.")}resolveNetwork(t){if(!t)return li.mainnet;if(typeof t=="string"){const n=li[t];if(!n)throw xe.unknown(`Unknown network: ${t}`);return n}return t}setupEventListeners(){this.client&&(this.client.on("session_delete",()=>{this.cleanup()}),this.client.on("session_expire",()=>{this.cleanup()}))}cleanup(){this.modal&&(this.modal.closeModal(),this.modal=null),this.client=null,this.session=null,this.currentAccount=null,this.initializationPromise=null,this.pendingConnection=null}getDeepLinkURI(t){return this.options.onDeepLink?this.options.onDeepLink(t):t}}const iG={},sG={},XN=(e,t)=>{sG[e]=t},ye=e=>{class t extends Error{constructor(r,s,i){if(super(r||e,i),Q(this,"cause"),Object.setPrototypeOf(this,t.prototype),this.name=e,s)for(const o in s)this[o]=s[o];if(i&&oG(i)&&"cause"in i&&!this.cause){const o=i.cause;this.cause=o,"stack"in o&&(this.stack=this.stack+`
CAUSE: `+o.stack)}}}return iG[e]=t,t};function oG(e){return typeof e=="object"}ye("AccountNameRequired");ye("AccountNotSupported");ye("AccountAwaitingSendPendingOperations");ye("AmountRequired");ye("BluetoothRequired");ye("BtcUnmatchedApp");ye("CantOpenDevice");ye("CashAddrNotSupported");ye("ClaimRewardsFeesWarning");ye("CurrencyNotSupported");ye("DeviceAppVerifyNotSupported");ye("DeviceGenuineSocketEarlyClose");ye("DeviceNotGenuine");ye("DeviceOnDashboardExpected");ye("DeviceOnDashboardUnexpected");ye("DeviceInOSUExpected");ye("DeviceHalted");ye("DeviceNameInvalid");ye("DeviceSocketFail");ye("DeviceSocketNoBulkStatus");ye("DeviceSocketNoBulkStatus");ye("UnresponsiveDeviceError");const QN=ye("DisconnectedDevice"),$N=ye("DisconnectedDeviceDuringOperation");ye("DeviceExtractOnboardingStateError");ye("DeviceOnboardingStatePollingError");ye("EnpointConfig");ye("EthAppPleaseEnableContractData");ye("CeloAppPleaseEnableContractData");ye("FeeEstimationFailed");ye("FirmwareNotRecognized");ye("HardResetFail");ye("InvalidXRPTag");ye("InvalidAddress");ye("InvalidNonce");ye("InvalidAddressBecauseDestinationIsAlsoSource");ye("LatestMCUInstalledError");ye("LatestFirmwareVersionRequired");ye("UnknownMCU");ye("LedgerAPIError");ye("LedgerAPIErrorWithMessage");ye("LedgerAPINotAvailable");ye("ManagerAppAlreadyInstalled");ye("ManagerAppRelyOnBTC");ye("ManagerAppDepInstallRequired");ye("ManagerAppDepUninstallRequired");ye("ManagerDeviceLocked");ye("ManagerFirmwareNotEnoughSpace");ye("ManagerNotEnoughSpace");ye("ManagerUninstallBTCDep");ye("NetworkDown");ye("NetworkError");ye("NoAddressesFound");ye("NotEnoughBalance");ye("NotEnoughBalanceFees");ye("NotEnoughBalanceSwap");ye("NotEnoughBalanceToDelegate");ye("UnstakeNotEnoughStakedBalanceLeft");ye("RestakeNotEnoughStakedBalanceLeft");ye("NotEnoughToRestake");ye("NotEnoughToUnstake");ye("NotEnoughBalanceInParentAccount");ye("NotEnoughSpendableBalance");ye("NotEnoughBalanceBecauseDestinationNotCreated");ye("NotEnoughToStake");ye("NoAccessToCamera");ye("NotEnoughGas");ye("NotEnoughGasSwap");ye("TronEmptyAccount");ye("MaybeKeepTronAccountAlive");ye("NotSupportedLegacyAddress");ye("GasLessThanEstimate");ye("PriorityFeeTooLow");ye("PriorityFeeTooHigh");ye("PriorityFeeHigherThanMaxFee");ye("MaxFeeTooLow");ye("PasswordsDontMatch");ye("PasswordIncorrect");ye("RecommendSubAccountsToEmpty");ye("RecommendUndelegation");ye("TimeoutTagged");ye("UnexpectedBootloader");ye("MCUNotGenuineToDashboard");ye("RecipientRequired");ye("UnavailableTezosOriginatedAccountReceive");ye("UnavailableTezosOriginatedAccountSend");ye("UpdateFetchFileFail");ye("UpdateIncorrectHash");ye("UpdateIncorrectSig");ye("UpdateYourApp");ye("UserRefusedDeviceNameChange");ye("UserRefusedAddress");ye("UserRefusedFirmwareUpdate");ye("UserRefusedAllowManager");ye("UserRefusedOnDevice");ye("PinNotSet");ye("ExpertModeRequired");const Eg=ye("TransportOpenUserCancelled"),OA=ye("TransportInterfaceNotAvailable"),aG=ye("TransportRaceCondition"),cG=ye("TransportWebUSBGestureRequired");ye("TransactionHasBeenValidatedError");ye("TransportExchangeTimeoutError");ye("DeviceShouldStayInApp");ye("WebsocketConnectionError");ye("WebsocketConnectionFailed");ye("WrongDeviceForAccount");ye("WrongDeviceForAccountPayout");ye("MissingSwapPayloadParamaters");ye("WrongDeviceForAccountRefund");ye("WrongAppForCurrency");ye("ETHAddressNonEIP");ye("CantScanQRCode");ye("FeeNotLoaded");ye("FeeNotLoadedSwap");ye("FeeRequired");ye("FeeTooHigh");ye("PendingOperation");ye("SyncError");ye("PairingFailed");ye("PeerRemovedPairing");ye("GenuineCheckFailed");ye("LedgerAPI4xx");ye("LedgerAPI5xx");ye("FirmwareOrAppUpdateRequired");ye("ReplacementTransactionUnderpriced");ye("OpReturnSizeLimit");ye("DustLimit");ye("HederaInsufficientFundsForAssociation");ye("HederaRecipientTokenAssociationRequired");ye("HederaRecipientTokenAssociationUnverified");ye("LanguageNotFound");ye("NoDBPathGiven");ye("DBWrongPassword");ye("DBNotReset");ye("SequenceNumberError");ye("DisabledTransactionBroadcastError");var DA;(function(e){e.Unknown="Unknown",e.LocationServicesDisabled="LocationServicesDisabled",e.LocationServicesUnauthorized="LocationServicesUnauthorized",e.BluetoothScanStartFailed="BluetoothScanStartFailed"})(DA||(DA={}));class Dr extends Error{constructor(t,n){const r="TransportError";super(t||r),Q(this,"id"),this.name=r,this.message=t,this.stack=new Error(t).stack,this.id=n}}XN("TransportError",e=>new Dr(e.message,e.id));const Qo={ACCESS_CONDITION_NOT_FULFILLED:38916,ALGORITHM_NOT_SUPPORTED:38020,CLA_NOT_SUPPORTED:28160,CODE_BLOCKED:38976,CODE_NOT_INITIALIZED:38914,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,CONDITIONS_OF_USE_NOT_SATISFIED:27013,CONTRADICTION_INVALIDATION:38928,CONTRADICTION_SECRET_CODE_STATUS:38920,DEVICE_IN_RECOVERY_MODE:26159,CUSTOM_IMAGE_EMPTY:26158,FILE_ALREADY_EXISTS:27273,FILE_NOT_FOUND:37892,GP_AUTH_FAILED:25344,HALTED:28586,INCONSISTENT_FILE:37896,INCORRECT_DATA:27264,INCORRECT_LENGTH:26368,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,DEVICE_NOT_ONBOARDED:27911,DEVICE_NOT_ONBOARDED_2:26129,INVALID_KCV:38021,INVALID_OFFSET:37890,LICENSING:28482,LOCKED_DEVICE:21781,MAX_VALUE_REACHED:38992,MEMORY_PROBLEM:37440,MISSING_CRITICAL_PARAMETER:26624,NO_EF_SELECTED:37888,NOT_ENOUGH_MEMORY_SPACE:27268,OK:36864,PIN_REMAINING_ATTEMPTS:25536,REFERENCED_DATA_NOT_FOUND:27272,SECURITY_STATUS_NOT_SATISFIED:27010,TECHNICAL_PROBLEM:28416,UNKNOWN_APDU:27906,USER_REFUSED_ON_DEVICE:21761,NOT_ENOUGH_SPACE:20738,APP_NOT_FOUND_OR_INVALID_CONTEXT:20771,INVALID_APP_NAME_LENGTH:26378,GEN_AES_KEY_FAILED:21529,INTERNAL_CRYPTO_OPERATION_FAILED:21530,INTERNAL_COMPUTE_AES_CMAC_FAILED:21531,ENCRYPT_APP_STORAGE_FAILED:21532,INVALID_BACKUP_STATE:26178,PIN_NOT_SET:21762,INVALID_BACKUP_LENGTH:26419,INVALID_RESTORE_STATE:26179,INVALID_CHUNK_LENGTH:26420,INVALID_BACKUP_HEADER:26698,TRUSTCHAIN_WRONG_SEED:45063};function uG(e){switch(e){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received";case 21781:return"Locked device"}if(28416<=e&&e<=28671)return"Internal error, please report"}class sa extends Error{constructor(t,{canBeMappedToChildError:n=!0}={}){const r=Object.keys(Qo).find(a=>Qo[a]===t)||"UNKNOWN_ERROR",s=uG(t)||r,i=t.toString(16),o=`Ledger device: ${s} (0x${i})`;if(super(o),Q(this,"statusCode"),Q(this,"statusText"),this.name="TransportStatusError",this.statusCode=t,this.statusText=r,Object.setPrototypeOf(this,sa.prototype),n&&t===Qo.LOCKED_DEVICE)return new Q0(o)}}class Q0 extends sa{constructor(t){super(Qo.LOCKED_DEVICE,{canBeMappedToChildError:!1}),t&&(this.message=t),this.name="LockedDeviceError",Object.setPrototypeOf(this,Q0.prototype)}}XN("TransportStatusError",e=>new sa(e.statusCode));let ZN=0;const Bi=[],Od=(e,t,n)=>{const r={type:e,id:String(++ZN),date:new Date};t&&(r.message=t),JN(r)},lG=({type:e,message:t,data:n,context:r})=>{const s={type:e,id:String(++ZN),date:new Date};t&&(s.message=t),n&&(s.data=n),r&&(s.context=r),JN(s)};class Eu{constructor(t,n){Q(this,"type"),Q(this,"context"),this.type=t,this.context=n}trace(t,n){lG({type:this.type,message:t,data:n,context:this.context})}getContext(){return this.context}setContext(t){this.context=t}updateContext(t){this.context={...this.context,...t}}getType(){return this.type}setType(t){this.type=t}withType(t){return new Eu(t,this.context)}withContext(t){return new Eu(this.type,t)}withUpdatedContext(t){return new Eu(this.type,{...this.context,...t})}}const dG=e=>(Bi.push(e),()=>{const t=Bi.indexOf(e);t!==-1&&(Bi[t]=Bi[Bi.length-1],Bi.pop())});function JN(e){for(let t=0;t<Bi.length;t++)try{Bi[t](e)}catch(n){console.error(n)}}typeof window<"u"&&(window.__ledgerLogsListen=dG);const hG="transport";class Ui{constructor({context:t,logType:n}={}){Q(this,"exchangeTimeout",3e4),Q(this,"unresponsiveTimeout",15e3),Q(this,"deviceModel",null),Q(this,"tracer"),Q(this,"_events",new r0),Q(this,"send",async(r,s,i,o,a=De.Buffer.alloc(0),u=[Qo.OK],{abortTimeoutMs:c}={})=>{const l=this.tracer.withUpdatedContext({function:"send"});if(a.length>=256)throw l.trace("data.length exceeded 256 bytes limit",{dataLength:a.length}),new Dr("data.length exceed 256 bytes limit. Got: "+a.length,"DataLengthTooBig");l.trace("Starting an exchange",{abortTimeoutMs:c});const d=await this.exchange(De.Buffer.concat([De.Buffer.from([r,s,i,o]),De.Buffer.from([a.length]),a]),{abortTimeoutMs:c});l.trace("Received response from exchange");const f=d.readUInt16BE(d.length-2);if(!u.some(h=>h===f))throw new sa(f);return d}),Q(this,"exchangeBusyPromise"),Q(this,"_appAPIlock",null),this.tracer=new Eu(n??hG,t)}exchange(t,{abortTimeoutMs:n}={}){throw new Error("exchange not implemented")}exchangeBulk(t,n){let r=!1;const s=()=>{r=!0};return(async()=>{if(!r)for(const i of t){const o=await this.exchange(i);if(r)return;const a=o.readUInt16BE(o.length-2);if(a!==Qo.OK)throw new sa(a);n.next(o)}})().then(()=>!r&&n.complete(),i=>!r&&n.error(i)),{unsubscribe:s}}setScrambleKey(t){}close(){return Promise.resolve()}on(t,n){this._events.on(t,n)}off(t,n){this._events.removeListener(t,n)}emit(t,...n){this._events.emit(t,...n)}setDebugMode(){console.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")}setExchangeTimeout(t){this.exchangeTimeout=t}setExchangeUnresponsiveTimeout(t){this.unresponsiveTimeout=t}static create(t=3e3,n){return new Promise((r,s)=>{let i=!1;const o=this.listen({next:u=>{i=!0,o&&o.unsubscribe(),a&&clearTimeout(a),this.open(u.descriptor,t).then(r,s)},error:u=>{a&&clearTimeout(a),s(u)},complete:()=>{a&&clearTimeout(a),i||s(new Dr(this.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),a=n?setTimeout(()=>{o.unsubscribe(),s(new Dr(this.ErrorMessage_ListenTimeout,"ListenTimeout"))},n):null})}async exchangeAtomicImpl(t){const n=this.tracer.withUpdatedContext({function:"exchangeAtomicImpl",unresponsiveTimeout:this.unresponsiveTimeout});if(this.exchangeBusyPromise)throw n.trace("Atomic exchange is already busy"),new aG("An action was already pending on the Ledger device. Please deny or reconnect.");let r;const s=new Promise(a=>{r=a});this.exchangeBusyPromise=s;let i=!1;const o=setTimeout(()=>{n.trace('Timeout reached, emitting Transport event "unresponsive"',{unresponsiveTimeout:this.unresponsiveTimeout}),i=!0,this.emit("unresponsive")},this.unresponsiveTimeout);try{const a=await t();return i&&(n.trace("Device was unresponsive, emitting responsive"),this.emit("responsive")),a}finally{n.trace("Finalize, clearing busy guard"),clearTimeout(o),r&&r(),this.exchangeBusyPromise=null}}decorateAppAPIMethods(t,n,r){for(const s of n)t[s]=this.decorateAppAPIMethod(s,t[s],t,r)}decorateAppAPIMethod(t,n,r,s){return async(...i)=>{const{_appAPIlock:o}=this;if(o)return Promise.reject(new Dr("Ledger Device is busy (lock "+o+")","TransportLocked"));try{return this._appAPIlock=t,this.setScrambleKey(s),await n.apply(r,i)}finally{this._appAPIlock=null}}}setTraceContext(t){this.tracer=this.tracer.withContext(t)}updateTraceContext(t){this.tracer.updateContext(t)}getTraceContext(){return this.tracer.getContext()}}Q(Ui,"isSupported"),Q(Ui,"list"),Q(Ui,"listen"),Q(Ui,"open"),Q(Ui,"ErrorMessage_ListenTimeout","No Ledger device found (timeout)"),Q(Ui,"ErrorMessage_NoDeviceFound","No Ledger device found");const xA=5;function fG(e){const t=De.Buffer.alloc(2);return t.writeUInt16BE(e,0),t}const pG={data:De.Buffer.alloc(0),dataLength:0,sequence:0},eI=(e,t)=>({makeBlocks(n){let r=De.Buffer.concat([fG(n.length),n]);const s=t-5,i=Math.ceil(r.length/s);r=De.Buffer.concat([r,De.Buffer.alloc(i*s-r.length+1).fill(0)]);const o=[];for(let a=0;a<i;a++){const u=De.Buffer.alloc(5);u.writeUInt16BE(e,0),u.writeUInt8(xA,2),u.writeUInt16BE(a,3);const c=r.slice(a*s,(a+1)*s);o.push(De.Buffer.concat([u,c]))}return o},reduceResponse(n,r){let{data:s,dataLength:i,sequence:o}=n||pG;if(r.readUInt16BE(0)!==e)throw new Dr("Invalid channel","InvalidChannel");if(r.readUInt8(2)!==xA)throw new Dr("Invalid tag","InvalidTag");if(r.readUInt16BE(3)!==o)throw new Dr("Invalid sequence","InvalidSequence");n||(i=r.readUInt16BE(5)),o++;const a=r.slice(n?5:7);return s=De.Buffer.concat([s,a]),s.length>i&&(s=s.slice(0,i)),{data:s,dataLength:i,sequence:o}},getReducedResult(n){if(n&&n.dataLength===n.data.length)return n.data}});var Ag={exports:{}};const gG="2.0.0",tI=256,yG=Number.MAX_SAFE_INTEGER||9007199254740991,mG=16,wG=tI-6,bG=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Ph={MAX_LENGTH:tI,MAX_SAFE_COMPONENT_LENGTH:mG,MAX_SAFE_BUILD_LENGTH:wG,MAX_SAFE_INTEGER:yG,RELEASE_TYPES:bG,SEMVER_SPEC_VERSION:gG,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const vG=typeof process=="object"&&ci&&ci.NODE_DEBUG&&/\bsemver\b/i.test(ci.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var kh=vG;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:s}=Ph,i=kh;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],c=t.safeSrc=[],l=t.t={};let d=0;const f="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",s],[f,r]],p=y=>{for(const[b,A]of h)y=y.split(`${b}*`).join(`${b}{0,${A}}`).split(`${b}+`).join(`${b}{1,${A}}`);return y},g=(y,b,A)=>{const E=p(b),_=d++;i(y,_,b),l[y]=_,u[_]=b,c[_]=E,o[_]=new RegExp(b,A?"g":void 0),a[_]=new RegExp(E,A?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),g("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${u[l.NONNUMERICIDENTIFIER]}|${u[l.NUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NONNUMERICIDENTIFIER]}|${u[l.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${f}+`),g("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),g("FULL",`^${u[l.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),g("LOOSE",`^${u[l.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),g("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),g("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),g("COERCERTL",u[l.COERCE],!0),g("COERCERTLFULL",u[l.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",g("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",g("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Ag,Ag.exports);var Wu=Ag.exports;const EG=Object.freeze({loose:!0}),AG=Object.freeze({}),SG=e=>e?typeof e!="object"?EG:e:AG;var $0=SG;const LA=/^[0-9]+$/,nI=(e,t)=>{if(typeof e=="number"&&typeof t=="number")return e===t?0:e<t?-1:1;const n=LA.test(e),r=LA.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},TG=(e,t)=>nI(t,e);var rI={compareIdentifiers:nI,rcompareIdentifiers:TG};const Ul=kh,{MAX_LENGTH:CA,MAX_SAFE_INTEGER:zl}=Ph,{safeRe:Fl,t:Hl}=Wu,MG=$0,{compareIdentifiers:lp}=rI;let NG=class Mr{constructor(t,n){if(n=MG(n),t instanceof Mr){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>CA)throw new TypeError(`version is longer than ${CA} characters`);Ul("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?Fl[Hl.LOOSE]:Fl[Hl.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>zl||this.major<0)throw new TypeError("Invalid major version");if(this.minor>zl||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>zl||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){const i=+s;if(i>=0&&i<zl)return i}return s}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Ul("SemVer.compare",this.version,this.options,t),!(t instanceof Mr)){if(typeof t=="string"&&t===this.version)return 0;t=new Mr(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Mr||(t=new Mr(t,this.options)),this.major<t.major?-1:this.major>t.major?1:this.minor<t.minor?-1:this.minor>t.minor?1:this.patch<t.patch?-1:this.patch>t.patch?1:0}comparePre(t){if(t instanceof Mr||(t=new Mr(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],s=t.prerelease[n];if(Ul("prerelease compare",n,r,s),r===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(r===void 0)return-1;if(r!==s)return lp(r,s)}while(++n)}compareBuild(t){t instanceof Mr||(t=new Mr(t,this.options));let n=0;do{const r=this.build[n],s=t.build[n];if(Ul("build compare",n,r,s),r===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(r===void 0)return-1;if(r!==s)return lp(r,s)}while(++n)}inc(t,n,r){if(t.startsWith("pre")){if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(n){const s=`-${n}`.match(this.options.loose?Fl[Hl.PRERELEASELOOSE]:Fl[Hl.PRERELEASE]);if(!s||s[1]!==n)throw new Error(`invalid identifier: ${n}`)}}switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const s=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(n){let i=[n,s];r===!1&&(i=[n]),lp(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var fn=NG;const jA=fn,IG=(e,t,n=!1)=>{if(e instanceof jA)return e;try{return new jA(e,t)}catch(r){if(!n)return null;throw r}};var fa=IG;const _G=fa,OG=(e,t)=>{const n=_G(e,t);return n?n.version:null};var DG=OG;const xG=fa,LG=(e,t)=>{const n=xG(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};var CG=LG;const PA=fn,jG=(e,t,n,r,s)=>{typeof n=="string"&&(s=r,r=n,n=void 0);try{return new PA(e instanceof PA?e.version:e,n).inc(t,r,s).version}catch{return null}};var PG=jG;const kA=fa,kG=(e,t)=>{const n=kA(e,null,!0),r=kA(t,null,!0),s=n.compare(r);if(s===0)return null;const i=s>0,o=i?n:r,a=i?r:n,u=!!o.prerelease.length;if(a.prerelease.length&&!u){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}const c=u?"pre":"";return n.major!==r.major?c+"major":n.minor!==r.minor?c+"minor":n.patch!==r.patch?c+"patch":"prerelease"};var RG=kG;const BG=fn,UG=(e,t)=>new BG(e,t).major;var zG=UG;const FG=fn,HG=(e,t)=>new FG(e,t).minor;var VG=HG;const qG=fn,GG=(e,t)=>new qG(e,t).patch;var KG=GG;const YG=fa,WG=(e,t)=>{const n=YG(e,t);return n&&n.prerelease.length?n.prerelease:null};var XG=WG;const RA=fn,QG=(e,t,n)=>new RA(e,n).compare(new RA(t,n));var pr=QG;const $G=pr,ZG=(e,t,n)=>$G(t,e,n);var JG=ZG;const eK=pr,tK=(e,t)=>eK(e,t,!0);var nK=tK;const BA=fn,rK=(e,t,n)=>{const r=new BA(e,n),s=new BA(t,n);return r.compare(s)||r.compareBuild(s)};var Z0=rK;const iK=Z0,sK=(e,t)=>e.sort((n,r)=>iK(n,r,t));var oK=sK;const aK=Z0,cK=(e,t)=>e.sort((n,r)=>aK(r,n,t));var uK=cK;const lK=pr,dK=(e,t,n)=>lK(e,t,n)>0;var Rh=dK;const hK=pr,fK=(e,t,n)=>hK(e,t,n)<0;var J0=fK;const pK=pr,gK=(e,t,n)=>pK(e,t,n)===0;var iI=gK;const yK=pr,mK=(e,t,n)=>yK(e,t,n)!==0;var sI=mK;const wK=pr,bK=(e,t,n)=>wK(e,t,n)>=0;var ey=bK;const vK=pr,EK=(e,t,n)=>vK(e,t,n)<=0;var ty=EK;const AK=iI,SK=sI,TK=Rh,MK=ey,NK=J0,IK=ty,_K=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return AK(e,n,r);case"!=":return SK(e,n,r);case">":return TK(e,n,r);case">=":return MK(e,n,r);case"<":return NK(e,n,r);case"<=":return IK(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var oI=_K;const OK=fn,DK=fa,{safeRe:Vl,t:ql}=Wu,xK=(e,t)=>{if(e instanceof OK)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let n=null;if(!t.rtl)n=e.match(t.includePrerelease?Vl[ql.COERCEFULL]:Vl[ql.COERCE]);else{const u=t.includePrerelease?Vl[ql.COERCERTLFULL]:Vl[ql.COERCERTL];let c;for(;(c=u.exec(e))&&(!n||n.index+n[0].length!==e.length);)(!n||c.index+c[0].length!==n.index+n[0].length)&&(n=c),u.lastIndex=c.index+c[1].length+c[2].length;u.lastIndex=-1}if(n===null)return null;const r=n[2],s=n[3]||"0",i=n[4]||"0",o=t.includePrerelease&&n[5]?`-${n[5]}`:"",a=t.includePrerelease&&n[6]?`+${n[6]}`:"";return DK(`${r}.${s}.${i}${o}${a}`,t)};var LK=xK;class CK{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const r=this.map.keys().next().value;this.delete(r)}this.map.set(t,n)}return this}}var jK=CK,dp,UA;function gr(){if(UA)return dp;UA=1;const e=/\s+/g;class t{constructor(v,T){if(T=s(T),v instanceof t)return v.loose===!!T.loose&&v.includePrerelease===!!T.includePrerelease?v:new t(v.raw,T);if(v instanceof i)return this.raw=v.value,this.set=[[v]],this.formatted=void 0,this;if(this.options=T,this.loose=!!T.loose,this.includePrerelease=!!T.includePrerelease,this.raw=v.trim().replace(e," "),this.set=this.raw.split("||").map(m=>this.parseRange(m.trim())).filter(m=>m.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const m=this.set[0];if(this.set=this.set.filter(w=>!g(w[0])),this.set.length===0)this.set=[m];else if(this.set.length>1){for(const w of this.set)if(w.length===1&&y(w[0])){this.set=[w];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let v=0;v<this.set.length;v++){v>0&&(this.formatted+="||");const T=this.set[v];for(let m=0;m<T.length;m++)m>0&&(this.formatted+=" "),this.formatted+=T[m].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(v){const T=((this.options.includePrerelease&&h)|(this.options.loose&&p))+":"+v,m=r.get(T);if(m)return m;const w=this.options.loose,N=w?u[c.HYPHENRANGELOOSE]:u[c.HYPHENRANGE];v=v.replace(N,Y(this.options.includePrerelease)),o("hyphen replace",v),v=v.replace(u[c.COMPARATORTRIM],l),o("comparator trim",v),v=v.replace(u[c.TILDETRIM],d),o("tilde trim",v),v=v.replace(u[c.CARETTRIM],f),o("caret trim",v);let C=v.split(" ").map(P=>A(P,this.options)).join(" ").split(/\s+/).map(P=>V(P,this.options));w&&(C=C.filter(P=>(o("loose invalid filter",P,this.options),!!P.match(u[c.COMPARATORLOOSE])))),o("range list",C);const O=new Map,B=C.map(P=>new i(P,this.options));for(const P of B){if(g(P))return[P];O.set(P.value,P)}O.size>1&&O.has("")&&O.delete("");const W=[...O.values()];return r.set(T,W),W}intersects(v,T){if(!(v instanceof t))throw new TypeError("a Range is required");return this.set.some(m=>b(m,T)&&v.set.some(w=>b(w,T)&&m.every(N=>w.every(C=>N.intersects(C,T)))))}test(v){if(!v)return!1;if(typeof v=="string")try{v=new a(v,this.options)}catch{return!1}for(let T=0;T<this.set.length;T++)if(q(this.set[T],v,this.options))return!0;return!1}}dp=t;const n=jK,r=new n,s=$0,i=Bh(),o=kh,a=fn,{safeRe:u,t:c,comparatorTrimReplace:l,tildeTrimReplace:d,caretTrimReplace:f}=Wu,{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:p}=Ph,g=R=>R.value==="<0.0.0-0",y=R=>R.value==="",b=(R,v)=>{let T=!0;const m=R.slice();let w=m.pop();for(;T&&m.length;)T=m.every(N=>w.intersects(N,v)),w=m.pop();return T},A=(R,v)=>(R=R.replace(u[c.BUILD],""),o("comp",R,v),R=I(R,v),o("caret",R),R=_(R,v),o("tildes",R),R=L(R,v),o("xrange",R),R=j(R,v),o("stars",R),R),E=R=>!R||R.toLowerCase()==="x"||R==="*",_=(R,v)=>R.trim().split(/\s+/).map(T=>S(T,v)).join(" "),S=(R,v)=>{const T=v.loose?u[c.TILDELOOSE]:u[c.TILDE];return R.replace(T,(m,w,N,C,O)=>{o("tilde",R,m,w,N,C,O);let B;return E(w)?B="":E(N)?B=`>=${w}.0.0 <${+w+1}.0.0-0`:E(C)?B=`>=${w}.${N}.0 <${w}.${+N+1}.0-0`:O?(o("replaceTilde pr",O),B=`>=${w}.${N}.${C}-${O} <${w}.${+N+1}.0-0`):B=`>=${w}.${N}.${C} <${w}.${+N+1}.0-0`,o("tilde return",B),B})},I=(R,v)=>R.trim().split(/\s+/).map(T=>D(T,v)).join(" "),D=(R,v)=>{o("caret",R,v);const T=v.loose?u[c.CARETLOOSE]:u[c.CARET],m=v.includePrerelease?"-0":"";return R.replace(T,(w,N,C,O,B)=>{o("caret",R,w,N,C,O,B);let W;return E(N)?W="":E(C)?W=`>=${N}.0.0${m} <${+N+1}.0.0-0`:E(O)?N==="0"?W=`>=${N}.${C}.0${m} <${N}.${+C+1}.0-0`:W=`>=${N}.${C}.0${m} <${+N+1}.0.0-0`:B?(o("replaceCaret pr",B),N==="0"?C==="0"?W=`>=${N}.${C}.${O}-${B} <${N}.${C}.${+O+1}-0`:W=`>=${N}.${C}.${O}-${B} <${N}.${+C+1}.0-0`:W=`>=${N}.${C}.${O}-${B} <${+N+1}.0.0-0`):(o("no pr"),N==="0"?C==="0"?W=`>=${N}.${C}.${O}${m} <${N}.${C}.${+O+1}-0`:W=`>=${N}.${C}.${O}${m} <${N}.${+C+1}.0-0`:W=`>=${N}.${C}.${O} <${+N+1}.0.0-0`),o("caret return",W),W})},L=(R,v)=>(o("replaceXRanges",R,v),R.split(/\s+/).map(T=>x(T,v)).join(" ")),x=(R,v)=>{R=R.trim();const T=v.loose?u[c.XRANGELOOSE]:u[c.XRANGE];return R.replace(T,(m,w,N,C,O,B)=>{o("xRange",R,m,w,N,C,O,B);const W=E(N),P=W||E(C),X=P||E(O),ee=X;return w==="="&&ee&&(w=""),B=v.includePrerelease?"-0":"",W?w===">"||w==="<"?m="<0.0.0-0":m="*":w&&ee?(P&&(C=0),O=0,w===">"?(w=">=",P?(N=+N+1,C=0,O=0):(C=+C+1,O=0)):w==="<="&&(w="<",P?N=+N+1:C=+C+1),w==="<"&&(B="-0"),m=`${w+N}.${C}.${O}${B}`):P?m=`>=${N}.0.0${B} <${+N+1}.0.0-0`:X&&(m=`>=${N}.${C}.0${B} <${N}.${+C+1}.0-0`),o("xRange return",m),m})},j=(R,v)=>(o("replaceStars",R,v),R.trim().replace(u[c.STAR],"")),V=(R,v)=>(o("replaceGTE0",R,v),R.trim().replace(u[v.includePrerelease?c.GTE0PRE:c.GTE0],"")),Y=R=>(v,T,m,w,N,C,O,B,W,P,X,ee)=>(E(m)?T="":E(w)?T=`>=${m}.0.0${R?"-0":""}`:E(N)?T=`>=${m}.${w}.0${R?"-0":""}`:C?T=`>=${T}`:T=`>=${T}${R?"-0":""}`,E(W)?B="":E(P)?B=`<${+W+1}.0.0-0`:E(X)?B=`<${W}.${+P+1}.0-0`:ee?B=`<=${W}.${P}.${X}-${ee}`:R?B=`<${W}.${P}.${+X+1}-0`:B=`<=${B}`,`${T} ${B}`.trim()),q=(R,v,T)=>{for(let m=0;m<R.length;m++)if(!R[m].test(v))return!1;if(v.prerelease.length&&!T.includePrerelease){for(let m=0;m<R.length;m++)if(o(R[m].semver),R[m].semver!==i.ANY&&R[m].semver.prerelease.length>0){const w=R[m].semver;if(w.major===v.major&&w.minor===v.minor&&w.patch===v.patch)return!0}return!1}return!0};return dp}var hp,zA;function Bh(){if(zA)return hp;zA=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(l,d){if(d=n(d),l instanceof t){if(l.loose===!!d.loose)return l;l=l.value}l=l.trim().split(/\s+/).join(" "),o("comparator",l,d),this.options=d,this.loose=!!d.loose,this.parse(l),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(l){const d=this.options.loose?r[s.COMPARATORLOOSE]:r[s.COMPARATOR],f=l.match(d);if(!f)throw new TypeError(`Invalid comparator: ${l}`);this.operator=f[1]!==void 0?f[1]:"",this.operator==="="&&(this.operator=""),f[2]?this.semver=new a(f[2],this.options.loose):this.semver=e}toString(){return this.value}test(l){if(o("Comparator.test",l,this.options.loose),this.semver===e||l===e)return!0;if(typeof l=="string")try{l=new a(l,this.options)}catch{return!1}return i(l,this.operator,this.semver,this.options)}intersects(l,d){if(!(l instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(l.value,d).test(this.value):l.operator===""?l.value===""?!0:new u(this.value,d).test(l.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||l.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||l.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&l.operator.startsWith(">")||this.operator.startsWith("<")&&l.operator.startsWith("<")||this.semver.version===l.semver.version&&this.operator.includes("=")&&l.operator.includes("=")||i(this.semver,"<",l.semver,d)&&this.operator.startsWith(">")&&l.operator.startsWith("<")||i(this.semver,">",l.semver,d)&&this.operator.startsWith("<")&&l.operator.startsWith(">")))}}hp=t;const n=$0,{safeRe:r,t:s}=Wu,i=oI,o=kh,a=fn,u=gr();return hp}const PK=gr(),kK=(e,t,n)=>{try{t=new PK(t,n)}catch{return!1}return t.test(e)};var Uh=kK;const RK=gr(),BK=(e,t)=>new RK(e,t).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));var UK=BK;const zK=fn,FK=gr(),HK=(e,t,n)=>{let r=null,s=null,i=null;try{i=new FK(t,n)}catch{return null}return e.forEach(o=>{i.test(o)&&(!r||s.compare(o)===-1)&&(r=o,s=new zK(r,n))}),r};var VK=HK;const qK=fn,GK=gr(),KK=(e,t,n)=>{let r=null,s=null,i=null;try{i=new GK(t,n)}catch{return null}return e.forEach(o=>{i.test(o)&&(!r||s.compare(o)===1)&&(r=o,s=new qK(r,n))}),r};var YK=KK;const fp=fn,WK=gr(),FA=Rh,XK=(e,t)=>{e=new WK(e,t);let n=new fp("0.0.0");if(e.test(n)||(n=new fp("0.0.0-0"),e.test(n)))return n;n=null;for(let r=0;r<e.set.length;++r){const s=e.set[r];let i=null;s.forEach(o=>{const a=new fp(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||FA(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!n||FA(n,i))&&(n=i)}return n&&e.test(n)?n:null};var QK=XK;const $K=gr(),ZK=(e,t)=>{try{return new $K(e,t).range||"*"}catch{return null}};var JK=ZK;const eY=fn,aI=Bh(),{ANY:tY}=aI,nY=gr(),rY=Uh,HA=Rh,VA=J0,iY=ty,sY=ey,oY=(e,t,n,r)=>{e=new eY(e,r),t=new nY(t,r);let s,i,o,a,u;switch(n){case">":s=HA,i=iY,o=VA,a=">",u=">=";break;case"<":s=VA,i=sY,o=HA,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(rY(e,t,r))return!1;for(let c=0;c<t.set.length;++c){const l=t.set[c];let d=null,f=null;if(l.forEach(h=>{h.semver===tY&&(h=new aI(">=0.0.0")),d=d||h,f=f||h,s(h.semver,d.semver,r)?d=h:o(h.semver,f.semver,r)&&(f=h)}),d.operator===a||d.operator===u||(!f.operator||f.operator===a)&&i(e,f.semver)||f.operator===u&&o(e,f.semver))return!1}return!0};var ny=oY;const aY=ny,cY=(e,t,n)=>aY(e,t,">",n);var uY=cY;const lY=ny,dY=(e,t,n)=>lY(e,t,"<",n);var hY=dY;const qA=gr(),fY=(e,t,n)=>(e=new qA(e,n),t=new qA(t,n),e.intersects(t,n));var pY=fY;const gY=Uh,yY=pr;var mY=(e,t,n)=>{const r=[];let s=null,i=null;const o=e.sort((l,d)=>yY(l,d,n));for(const l of o)gY(l,t,n)?(i=l,s||(s=l)):(i&&r.push([s,i]),i=null,s=null);s&&r.push([s,null]);const a=[];for(const[l,d]of r)l===d?a.push(l):!d&&l===o[0]?a.push("*"):d?l===o[0]?a.push(`<=${d}`):a.push(`${l} - ${d}`):a.push(`>=${l}`);const u=a.join(" || "),c=typeof t.raw=="string"?t.raw:String(t);return u.length<c.length?u:t};const GA=gr(),ry=Bh(),{ANY:pp}=ry,ou=Uh,iy=pr,wY=(e,t,n={})=>{if(e===t)return!0;e=new GA(e,n),t=new GA(t,n);let r=!1;e:for(const s of e.set){for(const i of t.set){const o=vY(s,i,n);if(r=r||o!==null,o)continue e}if(r)return!1}return!0},bY=[new ry(">=0.0.0-0")],KA=[new ry(">=0.0.0")],vY=(e,t,n)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===pp){if(t.length===1&&t[0].semver===pp)return!0;n.includePrerelease?e=bY:e=KA}if(t.length===1&&t[0].semver===pp){if(n.includePrerelease)return!0;t=KA}const r=new Set;let s,i;for(const h of e)h.operator===">"||h.operator===">="?s=YA(s,h,n):h.operator==="<"||h.operator==="<="?i=WA(i,h,n):r.add(h.semver);if(r.size>1)return null;let o;if(s&&i&&(o=iy(s.semver,i.semver,n),o>0||o===0&&(s.operator!==">="||i.operator!=="<=")))return null;for(const h of r){if(s&&!ou(h,String(s),n)||i&&!ou(h,String(i),n))return null;for(const p of t)if(!ou(h,String(p),n))return!1;return!0}let a,u,c,l,d=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1,f=s&&!n.includePrerelease&&s.semver.prerelease.length?s.semver:!1;d&&d.prerelease.length===1&&i.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(const h of t){if(l=l||h.operator===">"||h.operator===">=",c=c||h.operator==="<"||h.operator==="<=",s){if(f&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===f.major&&h.semver.minor===f.minor&&h.semver.patch===f.patch&&(f=!1),h.operator===">"||h.operator===">="){if(a=YA(s,h,n),a===h&&a!==s)return!1}else if(s.operator===">="&&!ou(s.semver,String(h),n))return!1}if(i){if(d&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===d.major&&h.semver.minor===d.minor&&h.semver.patch===d.patch&&(d=!1),h.operator==="<"||h.operator==="<="){if(u=WA(i,h,n),u===h&&u!==i)return!1}else if(i.operator==="<="&&!ou(i.semver,String(h),n))return!1}if(!h.operator&&(i||s)&&o!==0)return!1}return!(s&&c&&!i&&o!==0||i&&l&&!s&&o!==0||f||d)},YA=(e,t,n)=>{if(!e)return t;const r=iy(e.semver,t.semver,n);return r>0?e:r<0||t.operator===">"&&e.operator===">="?t:e},WA=(e,t,n)=>{if(!e)return t;const r=iy(e.semver,t.semver,n);return r<0?e:r>0||t.operator==="<"&&e.operator==="<="?t:e};var EY=wY;const gp=Wu,XA=Ph,AY=fn,QA=rI,SY=fa,TY=DG,MY=CG,NY=PG,IY=RG,_Y=zG,OY=VG,DY=KG,xY=XG,LY=pr,CY=JG,jY=nK,PY=Z0,kY=oK,RY=uK,BY=Rh,UY=J0,zY=iI,FY=sI,HY=ey,VY=ty,qY=oI,GY=LK,KY=Bh(),YY=gr(),WY=Uh,XY=UK,QY=VK,$Y=YK,ZY=QK,JY=JK,eW=ny,tW=uY,nW=hY,rW=pY,iW=mY,sW=EY;var oW={parse:SY,valid:TY,clean:MY,inc:NY,diff:IY,major:_Y,minor:OY,patch:DY,prerelease:xY,compare:LY,rcompare:CY,compareLoose:jY,compareBuild:PY,sort:kY,rsort:RY,gt:BY,lt:UY,eq:zY,neq:FY,gte:HY,lte:VY,cmp:qY,coerce:GY,Comparator:KY,Range:YY,satisfies:WY,toComparators:XY,maxSatisfying:QY,minSatisfying:$Y,minVersion:ZY,validRange:JY,outside:eW,gtr:tW,ltr:nW,intersects:rW,simplifyRange:iW,subset:sW,SemVer:AY,re:gp.re,src:gp.src,tokens:gp.t,SEMVER_SPEC_VERSION:XA.SEMVER_SPEC_VERSION,RELEASE_TYPES:XA.RELEASE_TYPES,compareIdentifiers:QA.compareIdentifiers,rcompareIdentifiers:QA.rcompareIdentifiers};const $A=aa(oW);var ft;(function(e){e.blue="blue",e.nanoS="nanoS",e.nanoSP="nanoSP",e.nanoX="nanoX",e.stax="stax",e.europa="europa",e.apex="apex"})(ft||(ft={}));const Sg={[ft.blue]:{id:ft.blue,productName:"LedgerBlue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:480*1024,masks:[822083584,822149120],getBlockSize:e=>4*1024},[ft.nanoS]:{id:ft.nanoS,productName:"LedgerNanoS",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:320*1024,masks:[823132160],getBlockSize:e=>$A.lt($A.coerce(e)??"","2.0.0")?4*1024:2*1024},[ft.nanoX]:{id:ft.nanoX,productName:"LedgerNanoX",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2*1024*1024,masks:[855638016],getBlockSize:e=>4*1024,bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]},[ft.nanoSP]:{id:ft.nanoSP,productName:"Ledger Nano S Plus",productIdMM:80,legacyUsbProductId:5,usbOnly:!0,memorySize:1533*1024,masks:[856686592],getBlockSize:e=>32},[ft.apex]:{id:ft.apex,productName:"Ledger Apex",productIdMM:128,legacyUsbProductId:8,usbOnly:!1,memorySize:1533*1024,masks:[859832320],getBlockSize:e=>32,bluetoothSpec:[{serviceUuid:"13d63400-2c97-8004-0000-4c6564676572",notifyUuid:"13d63400-2c97-8004-0001-4c6564676572",writeUuid:"13d63400-2c97-8004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-8004-0003-4c6564676572"}]},[ft.stax]:{id:ft.stax,productName:"LedgerStax",productIdMM:96,legacyUsbProductId:6,usbOnly:!1,memorySize:1533*1024,masks:[857735168],getBlockSize:e=>32,bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]},[ft.europa]:{id:ft.europa,productName:"LedgerFlex",productIdMM:112,legacyUsbProductId:7,usbOnly:!1,memorySize:1533*1024,masks:[858783744],getBlockSize:e=>32,bluetoothSpec:[{serviceUuid:"13d63400-2c97-3004-0000-4c6564676572",notifyUuid:"13d63400-2c97-3004-0001-4c6564676572",writeUuid:"13d63400-2c97-3004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-3004-0003-4c6564676572"}]}};ft.blue,ft.nanoS,ft.nanoSP,ft.nanoX,ft.stax,ft.europa;const ZA=Object.values(Sg),zh=11415,Fh=e=>{const t=ZA.find(r=>r.legacyUsbProductId===e);if(t)return t;const n=e>>8;return ZA.find(r=>r.productIdMM===n)},aW=[],JA={};for(const e in Sg){const t=Sg[e],{bluetoothSpec:n}=t;if(n)for(let r=0;r<n.length;r++){const s=n[r];aW.push(s.serviceUuid),JA[s.serviceUuid]=JA[s.serviceUuid.replace(/-/g,"")]={deviceModel:t,...s}}}const cW=[{vendorId:zh}],uW=()=>Promise.resolve(!!(window.navigator&&window.navigator.hid)),Dd=()=>{const{hid:e}=navigator;if(!e)throw new Dr("navigator.hid is not supported","HIDNotSupported");return e};async function cI(){const e=await Dd().requestDevice({filters:cW});return Array.isArray(e)?e:[e]}async function sy(){return(await Dd().getDevices()).filter(e=>e.vendorId===zh)}async function lW(){const e=await sy();return e.length>0?e[0]:(await cI())[0]}const yp=class nd extends Ui{constructor(t){super(),Q(this,"device"),Q(this,"deviceModel"),Q(this,"channel",Math.floor(Math.random()*65535)),Q(this,"packetSize",64),Q(this,"inputs",[]),Q(this,"inputCallback"),Q(this,"read",()=>this.inputs.length?Promise.resolve(this.inputs.shift()):new Promise(n=>{this.inputCallback=n})),Q(this,"onInputReport",n=>{const r=De.Buffer.from(n.data.buffer);this.inputCallback?(this.inputCallback(r),this.inputCallback=null):this.inputs.push(r)}),Q(this,"_disconnectEmitted",!1),Q(this,"_emitDisconnect",n=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",n))}),Q(this,"exchange",async n=>await this.exchangeAtomicImpl(async()=>{const{channel:r,packetSize:s}=this;Od("apdu","=> "+n.toString("hex"));const i=eI(r,s),o=i.makeBlocks(n);for(let c=0;c<o.length;c++)await this.device.sendReport(0,o[c]);let a,u;for(;!(a=i.getReducedResult(u));)try{const c=await this.read();u=i.reduceResponse(u,c)}catch(c){if(c instanceof Dr&&c.id==="InvalidChannel")continue;throw c}return Od("apdu","<= "+a.toString("hex")),a}).catch(r=>{throw r&&r.message&&r.message.includes("write")?(this._emitDisconnect(r),new $N(r.message)):r})),this.device=t,this.deviceModel=typeof t.productId=="number"?Fh(t.productId):void 0,t.addEventListener("inputreport",this.onInputReport)}static async request(){const[t]=await cI();return nd.open(t)}static async openConnected(){const t=await sy();return t.length===0?null:nd.open(t[0])}static async open(t){await t.open();const n=new nd(t),r=s=>{t===s.device&&(Dd().removeEventListener("disconnect",r),n._emitDisconnect(new QN))};return Dd().addEventListener("disconnect",r),n}async close(){await this.exchangeBusyPromise,this.device.removeEventListener("inputreport",this.onInputReport),await this.device.close()}setScrambleKey(){}};Q(yp,"isSupported",uW),Q(yp,"list",sy),Q(yp,"listen",e=>{let t=!1;lW().then(r=>{if(!r)e.error(new Eg("Access denied to use Ledger device"));else if(!t){const s=typeof r.productId=="number"?Fh(r.productId):void 0;e.next({type:"add",descriptor:r,deviceModel:s}),e.complete()}},r=>{e.error(new Eg(r.message))});function n(){t=!0}return{unsubscribe:n}});const dW=[{vendorId:zh}];async function uI(){return await navigator.usb.requestDevice({filters:dW})}async function oy(){return(await navigator.usb.getDevices()).filter(e=>e.vendorId===zh)}async function hW(){const e=await oy();return e.length>0?e[0]:uI()}const fW=()=>Promise.resolve(!!navigator&&!!navigator.usb&&typeof navigator.usb.getDevices=="function"),pW=1,eS=3,mp=class rd extends Ui{constructor(t,n){super(),Q(this,"device"),Q(this,"deviceModel"),Q(this,"channel",Math.floor(Math.random()*65535)),Q(this,"packetSize",64),Q(this,"interfaceNumber"),Q(this,"_disconnectEmitted",!1),Q(this,"_emitDisconnect",r=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",r))}),this.device=t,this.interfaceNumber=n,this.deviceModel=Fh(t.productId)}static async request(){const t=await uI();return rd.open(t)}static async openConnected(){const t=await oy();return t.length===0?null:rd.open(t[0])}static async open(t){await t.open(),t.configuration===null&&await t.selectConfiguration(pW),await tS(t);const n=t.configurations[0].interfaces.find(({alternates:o})=>o.some(a=>a.interfaceClass===255));if(!n)throw new OA("No WebUSB interface found for your Ledger device. Please upgrade firmware or contact techsupport.");const r=n.interfaceNumber;try{await t.claimInterface(r)}catch(o){throw await t.close(),new OA(o.message)}const s=new rd(t,r),i=o=>{t===o.device&&(navigator.usb.removeEventListener("disconnect",i),s._emitDisconnect(new QN))};return navigator.usb.addEventListener("disconnect",i),s}async close(){await this.exchangeBusyPromise,await this.device.releaseInterface(this.interfaceNumber),await tS(this.device),await this.device.close()}async exchange(t){return await this.exchangeAtomicImpl(async()=>{const{channel:n,packetSize:r}=this;Od("apdu","=> "+t.toString("hex"));const s=eI(n,r),i=s.makeBlocks(t);for(let u=0;u<i.length;u++)await this.device.transferOut(eS,i[u]);let o,a;for(;!(o=s.getReducedResult(a));){const u=await this.device.transferIn(eS,r),c=De.Buffer.from(u.data.buffer);a=s.reduceResponse(a,c)}return Od("apdu","<= "+o.toString("hex")),o}).catch(n=>{throw n&&n.message&&n.message.includes("disconnected")?(this._emitDisconnect(n),new $N(n.message)):n})}setScrambleKey(){}};Q(mp,"isSupported",fW),Q(mp,"list",oy),Q(mp,"listen",e=>{let t=!1;hW().then(r=>{if(!t){const s=Fh(r.productId);e.next({type:"add",descriptor:r,deviceModel:s}),e.complete()}},r=>{window.DOMException&&r instanceof window.DOMException&&r.code===18?e.error(new cG(r.message)):e.error(new Eg(r.message))});function n(){t=!0}return{unsubscribe:n}});async function tS(e){try{await e.reset()}catch(t){console.warn(t)}}const xd=2147483648;var hr=function(e){if(!Array.isArray(e))throw new Error("Input must be an Array");if(e.length===0)throw new Error("Path must contain at least one level");for(var t=0;t<e.length;t++)if(typeof e[t]!="number")throw new Error("Path element is not a number");this.path=e};hr.validatePathArray=function(e){try{return hr.fromPathArray(e),!0}catch{return!1}};hr.validateString=function(e,t){try{return hr.fromString(e,t),!0}catch{return!1}};hr.fromPathArray=function(e){return new hr(e)};hr.fromString=function(e,t){if(/^m\//i.test(e))e=e.slice(2);else if(t)throw new Error("Root element is required");for(var n=e.split("/"),r=new Array(n.length),s=0;s<n.length;s++){var i=/(\d+)([hH\']?)/.exec(n[s]);if(i===null)throw new Error("Invalid input");if(r[s]=parseInt(i[1],10),r[s]>=xd)throw new Error("Invalid child index");if(i[2]==="h"||i[2]==="H"||i[2]==="'")r[s]+=xd;else if(i[2].length!=0)throw new Error("Invalid modifier")}return new hr(r)};hr.prototype.toPathArray=function(){return this.path};hr.prototype.toString=function(e,t){for(var n=new Array(this.path.length),r=0;r<this.path.length;r++){var s=this.path[r];s&xd?n[r]=(s&~xd)+(t?"h":"'"):n[r]=s}return(e?"":"m/")+n.join("/")};hr.prototype.inspect=function(){return"BIPPath <"+this.toString()+">"};const TW=Object.freeze(Object.defineProperty({__proto__:null,BROWSER_PATTERNS:e0,COLOR_ADJUSTMENT:cu,CrossmarkAdapter:MD,ERROR_CODES:uu,FONT_WEIGHTS:jt,GemWalletAdapter:$x,LocalStorageAdapter:CS,Logger:Zg,MemoryStorageAdapter:jS,QR_CONFIG:Mt,SIZES:Be,STANDARD_NETWORKS:li,Storage:PS,TIME:kS,TIMINGS:Vn,WalletConnectAdapter:rG,get WalletConnectorElement(){return Ep},WalletError:sn,WalletErrorCode:un,WalletManager:NO,XamanAdapter:SD,Z_INDEX:au,adjustColorBrightness:bp,createLogger:ju,createWalletError:xe,delay:zo,isMobile:vp,isSafari:lu,isXamanQRImage:US},Symbol.toStringTag,{value:"Module"}));export{an as $,Uq as U,WN as X,ur as _,IA as a,ia as d,AW as g,up as o,TW as x,SW as y};
